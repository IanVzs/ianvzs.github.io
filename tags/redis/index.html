<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="redis"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="http://example.org/tags/redis/"><title>redis | Ian's Blog</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.c58292d36b18b675680ab9baea2029204537b839ea72f258746ec0f32ce8d6c8.css integrity="sha256-xYKS02sYtnVoCrm66iApIEU3uDnqcvJYdG7A8yzo1sg=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.16245b0bb25077ebd4049aa300a4508efe008564bd0b65dd95e30c73955de206.js integrity="sha256-FiRbC7JQd+vUBJqjAKRQjv4AhWS9C2XdleMMc5Vd4gY=" crossorigin=anonymous></script><link rel=alternate type=application/rss+xml href=http://example.org/tags/redis/index.xml title="Ian's Blog"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Ian's Blog</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=/docs/programmer/>程序员笔记</a><ul><li><input type=checkbox id=section-bf4e0d6f0b81f7b3ec08ed1fc66b874d class=toggle>
<label for=section-bf4e0d6f0b81f7b3ec08ed1fc66b874d class="flex justify-between"><a href=/docs/programmer/langs/>编程语言</a></label><ul><li><input type=checkbox id=section-771df6c720301e69f1715f7fc174ac3d class=toggle>
<label for=section-771df6c720301e69f1715f7fc174ac3d class="flex justify-between"><a role=button>Python</a></label><ul><li><a href=/docs/programmer/langs/python/python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/>Python包管理</a></li><li><a href=/docs/programmer/langs/python/%E8%A7%84%E8%8C%83/>Python编码规范</a></li><li><a href=/docs/programmer/langs/python/sqlalchemy/>SqlAlchemy - 数据库Orm</a></li><li><a href=/docs/programmer/langs/python/pypi/>PyPi使用说明</a></li><li><a href=/docs/programmer/langs/python/pytest/>PyTest</a></li><li><a href=/docs/programmer/langs/python/paramiko-%E4%BD%BF%E7%94%A8-sshsftp/>Paramiko 使用 Ssh&amp;sftp</a></li><li><a href=/docs/programmer/langs/python/fastapi/>FastAPI</a></li><li><a href=/docs/programmer/langs/python/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%A4%9A%E8%BF%9B%E7%A8%8B/>Python 多线程多进程</a></li><li><a href=/docs/programmer/langs/python/notespython/>Python 常用库</a></li><li><a href=/docs/programmer/langs/python/notespython/>Python 笔记</a></li><li><a href=/docs/programmer/langs/python/py%E5%B0%8F%E5%B7%A5%E5%85%B7%E5%92%8C%E5%8A%9F%E8%83%BD%E6%80%A7%E6%96%B9%E6%B3%95/>Py小工具和功能性方法</a></li><li><a href=/docs/programmer/langs/python/notespython/>解决问题</a></li></ul></li><li><input type=checkbox id=section-9f8ac8f06e138c7ac13ff61f23b4d497 class=toggle>
<label for=section-9f8ac8f06e138c7ac13ff61f23b4d497 class="flex justify-between"><a role=button>Golang</a></label><ul><li><a href=/docs/programmer/langs/golang/%E6%8A%8Agolang%E5%BD%93%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80%E7%94%A8/>把Golang当脚本语言用</a></li><li><a href=/docs/programmer/langs/golang/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/>常用命令</a></li><li><a href=/docs/programmer/langs/golang/advanced-knowledge-of-golang/>Golang进阶笔记</a></li><li><a href=/docs/programmer/langs/golang/note-of-golang/>Golang笔记</a></li></ul></li><li><a href=/docs/programmer/langs/cmake/>CMake 使用Tips</a></li><li><a href=/docs/programmer/langs/tips-of-debugers/>Tips of debuggers</a></li><li><a href=/docs/programmer/langs/tips-of-markdown/>Tips of MarkDown</a></li><li><a href=/docs/programmer/langs/java/notesjava/>愉快的Java(happy to learn the fuck java)</a></li><li><a href=/docs/programmer/langs/note-for-algo/>算法</a></li></ul></li><li><input type=checkbox id=section-8658298e10b544e890095f646916165a class=toggle>
<label for=section-8658298e10b544e890095f646916165a class="flex justify-between"><a href=/docs/programmer/cloudnative/>云原生</a></label><ul><li><input type=checkbox id=section-31d3b02fd4a132635e483e7e756058ea class=toggle>
<label for=section-31d3b02fd4a132635e483e7e756058ea class="flex justify-between"><a href=/docs/programmer/cloudnative/redis/>中间件</a></label><ul><li><a href=/docs/programmer/cloudnative/redis/redis%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/>Redis集群部署</a></li><li><a href=/docs/programmer/cloudnative/redis/python-redis-%E5%AE%A2%E6%88%B7%E7%AB%AF/>Python Redis 客户端</a></li><li><a href=/docs/programmer/cloudnative/redis/bigkey-and-hotkey/>大key、热key问题</a></li><li><a href=/docs/programmer/cloudnative/redis/the-basics-of-redis/>Redis基础</a></li><li><a href=/docs/programmer/cloudnative/redis/advanced-knowledge-of-redis/>Redis进阶</a></li><li><a href=/docs/programmer/cloudnative/redis/%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4/>Redis常用命令</a></li></ul></li><li><input type=checkbox id=section-62d608ed890b3abc76dae78ccfcab912 class=toggle>
<label for=section-62d608ed890b3abc76dae78ccfcab912 class="flex justify-between"><a role=button>k8s</a></label><ul><li><a href=/docs/programmer/cloudnative/k8s/elk%E5%9C%A8k8s%E4%B8%8A%E7%9A%84%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B/>elk在k8s上的部署使用示例</a></li><li><a href=/docs/programmer/cloudnative/k8s/k8s-%E9%85%8D%E5%A5%97%E8%AF%B4%E6%98%8E/>k8s 配套说明</a></li><li><a href=/docs/programmer/cloudnative/k8s/k8s-%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/>k8s技术分享</a></li><li><a href=/docs/programmer/cloudnative/k8s/k8s%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%92%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90/>k8s学习-常用命令和配置文件</a></li><li><a href=/docs/programmer/cloudnative/k8s/argo-workflow%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%92%8C%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%88%86%E6%9E%90/>Argo Workflow性能测试和使用场景分析</a></li><li><a href=/docs/programmer/cloudnative/k8s/argo-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/>Argo 使用记录</a></li></ul></li><li><input type=checkbox id=section-b828bf3d116bc282da9db25a06bf908e class=toggle>
<label for=section-b828bf3d116bc282da9db25a06bf908e class="flex justify-between"><a role=button>中间件</a></label><ul><li><a href=/docs/programmer/cloudnative/middleware/kafka-%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/>Kafka 安装和使用</a></li></ul></li><li><a href=/docs/programmer/cloudnative/elk/%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86%E7%B3%BB%E7%BB%9F/>日志收集系统: loki+promtail+Grafana</a></li><li><a href=/docs/programmer/cloudnative/%E5%AE%B9%E5%99%A8/note-of-podman/>Podman</a></li><li><a href=/docs/programmer/cloudnative/nginx%E5%AE%9E%E7%94%A8%E9%85%8D%E7%BD%AE/>Nginx实用配置</a></li><li><a href=/docs/programmer/cloudnative/uwsgi-%E5%A4%84%E7%90%86%E8%AE%B0%E5%BD%95/>uwsgi 处理记录</a></li><li><a href=/docs/programmer/cloudnative/note-of-docker/>Docker</a></li><li><a href=/docs/programmer/cloudnative/%E5%AE%B9%E5%99%A8/note-of-docker/>Docker</a></li><li><a href=/docs/programmer/cloudnative/fastapi/>Django的建站的(｡･･)ﾉﾞ</a></li><li><a href=/docs/programmer/cloudnative/nginx-%E9%AB%98%E5%8F%AF%E7%94%A8/>Nginx高可用</a></li><li><a href=/docs/programmer/cloudnative/notesdjango/>Django的建站的(｡･･)ﾉﾞ</a></li><li><a href=/docs/programmer/cloudnative/sonar-%E4%BB%A3%E7%A0%81%E9%9D%99%E6%80%81%E6%A3%80%E6%9F%A5/>Sonar 代码静态检查</a></li></ul></li><li><input type=checkbox id=section-de7bfad1d124522974cdf8addfbb23f2 class=toggle>
<label for=section-de7bfad1d124522974cdf8addfbb23f2 class="flex justify-between"><a role=button>Net</a></label><ul><li><a href=/docs/programmer/net/crawler/selenium-grid/>Selenium Grid</a></li><li><a href=/docs/programmer/net/tools/ngrok/>ngrok - 一个免费内网穿透api工具</a></li><li><a href=/docs/programmer/net/crawler/mitmproxy/>mitmproxy</a></li><li><a href=/docs/programmer/net/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/>网络编程</a></li><li><a href=/docs/programmer/net/nginx%E5%AE%9E%E7%94%A8%E9%85%8D%E7%BD%AE/>Nginx实用配置</a></li><li><a href=/docs/programmer/net/tips-of-grpc/>gRpc使用小记</a></li><li><a href=/docs/programmer/net/epoll%E5%AE%9E%E7%8E%B0/>Epoll实现</a></li></ul></li><li><input type=checkbox id=section-d5f99046a51e5e750b61f2e037945fcc class=toggle>
<label for=section-d5f99046a51e5e750b61f2e037945fcc class="flex justify-between"><a role=button>基础工具和配置</a></label><ul><li><a href=/docs/programmer/basetc/obsidian/>Obsidian笔记软件</a></li><li><a href=/docs/programmer/basetc/%E7%BB%88%E7%AB%AF%E6%B5%8F%E8%A7%88%E5%99%A8/>终端浏览器</a></li><li><a href=/docs/programmer/basetc/curl/>curl</a></li><li><a href=/docs/programmer/basetc/%E6%96%87%E6%9C%AC%E4%B8%89%E5%89%91%E5%AE%A2/>文本三剑客</a></li><li><a href=/docs/programmer/basetc/tmux/>Tmux使用笔记</a></li><li><a href=/docs/programmer/basetc/obsidian%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E6%8F%92%E4%BB%B6/>Obsidian思维导图插件</a></li><li><a href=/docs/programmer/basetc/for_china/>各个软件换源</a></li><li><a href=/docs/programmer/basetc/tipsofvim/>tip Of vim</a></li><li><a href=/docs/programmer/basetc/editer/>编辑器使用</a></li><li><a href=/docs/programmer/basetc/bash/>Bash</a></li><li><a href=/docs/programmer/basetc/gitbook/>Gitbook</a></li><li><a href=/docs/programmer/basetc/vim/>Vim</a></li><li><a href=/docs/programmer/basetc/%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B/>supervisor</a></li></ul></li><li><input type=checkbox id=section-883e27361d38e16afb68faff3435ac0b class=toggle>
<label for=section-883e27361d38e16afb68faff3435ac0b class="flex justify-between"><a role=button>机器学习</a></label><ul><li><a href=/docs/programmer/ml/stable-diffusion/>AI画图</a></li><li><a href=/docs/programmer/ml/%E5%9B%BE%E7%89%87%E8%83%8C%E6%99%AF%E6%B6%88%E9%99%A4/>图片背景消除</a></li><li><a href=/docs/programmer/ml/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%A1%8C%E4%B8%BA%E8%87%AA%E5%8A%A8%E7%BC%96%E6%8E%92%E5%92%8C%E4%BB%BB%E5%8A%A1/>机器人行为自动编排和任务</a></li><li><a href=/docs/programmer/ml/%E7%88%AC%E8%99%AB/>爬虫</a></li><li><a href=/docs/programmer/ml/paddle/>Paddle</a></li><li><a href=/docs/programmer/ml/tensorflow/>Tensorflow</a></li><li><a href=/docs/programmer/ml/opencv/>OpenCV</a></li><li><a href=/docs/programmer/ml/yolo/>Demo Test项目中的一些东西</a></li><li><a href=/docs/programmer/ml/python-%E5%9B%BE%E8%A1%A8/>Python 图表</a></li><li><a href=/docs/programmer/ml/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%B8%B8%E7%94%A8%E5%BA%93%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/>机器学习库</a></li></ul></li><li><input type=checkbox id=section-7e5360c5e7954906b897ed79085884b6 class=toggle>
<label for=section-7e5360c5e7954906b897ed79085884b6 class="flex justify-between"><a href=/docs/programmer/gui/>图形用户界面-GUI</a></label><ul><li><input type=checkbox id=section-d68552b374b14edaa2443cb0f45f94f7 class=toggle>
<label for=section-d68552b374b14edaa2443cb0f45f94f7 class="flex justify-between"><a href=/docs/programmer/gui/example/>Blog 构建</a></label><ul><li><input type=checkbox id=section-9610a10c098f6edce85f18e8d27ddc6d class=toggle>
<label for=section-9610a10c098f6edce85f18e8d27ddc6d class="flex justify-between"><a href=/docs/programmer/gui/example/table-of-contents/>Table of Contents</a></label><ul><li><a href=/docs/programmer/gui/example/table-of-contents/with-toc/>With ToC</a></li><li><a href=/docs/programmer/gui/example/table-of-contents/without-toc/>Without ToC</a></li></ul></li><li><input type=checkbox id=section-9ec2030fb4762791e574be1af10795d3 class=toggle>
<label for=section-9ec2030fb4762791e574be1af10795d3 class="flex justify-between"><a href=/docs/programmer/gui/example/shortcodes/>Shortcodes</a></label><ul><li><a href=/docs/programmer/gui/example/shortcodes/buttons/>Buttons</a></li><li><a href=/docs/programmer/gui/example/shortcodes/columns/>Columns</a></li><li><a href=/docs/programmer/gui/example/shortcodes/details/>Details</a></li><li><a href=/docs/programmer/gui/example/shortcodes/expand/>Expand</a></li><li><a href=/docs/programmer/gui/example/shortcodes/hints/>Hints</a></li><li><input type=checkbox id=section-0a13810fcdbb2cfbfd8459e55601b351 class=toggle>
<label for=section-0a13810fcdbb2cfbfd8459e55601b351 class="flex justify-between"><a href=/docs/programmer/gui/example/shortcodes/section/>Section</a></label><ul><li><a href=/docs/programmer/gui/example/shortcodes/section/first-page/>First Page</a></li><li><a href=/docs/programmer/gui/example/shortcodes/section/second-page/>Second Page</a></li></ul></li><li><a href=/docs/programmer/gui/example/shortcodes/tabs/>Tabs</a></li></ul></li></ul></li><li><a href=/docs/programmer/gui/ffmpeg/>ffmpeg 使用</a></li><li><a href=/docs/programmer/gui/pyinstaller-python%E6%89%93%E5%8C%85/>python打包</a></li><li><a href=/docs/programmer/gui/qt/>Qt/PySide</a></li><li><a href=/docs/programmer/gui/vn.py%E7%AC%94%E8%AE%B0-%E4%BA%A4%E6%98%93%E5%B9%B3%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF/>Vn.Py学习笔记（Python交易平台框架）</a></li><li><a href=/docs/programmer/gui/notespython/>图形化界面 （Python Gui）</a></li></ul></li><li><input type=checkbox id=section-0bf4f4329214e20fa67ca3e12c6aad0c class=toggle>
<label for=section-0bf4f4329214e20fa67ca3e12c6aad0c class="flex justify-between"><a role=button>平台</a></label><ul><li><a href=/docs/programmer/platforms/%E9%80%86%E5%90%91/>逆向三板斧</a></li><li><a href=/docs/programmer/platforms/os/steam/>Steam</a></li><li><a href=/docs/programmer/platforms/android/waydroid/>Linux 跑安卓</a></li><li><a href=/docs/programmer/platforms/os/ubuntu/>Ubuntu</a></li><li><a href=/docs/programmer/platforms/%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8/>阿里云使用</a></li><li><a href=/docs/programmer/platforms/wps-for-linux/>WPS for Linux</a></li><li><a href=/docs/programmer/platforms/appsflyer/>AppsFlyer-外网移动归因营销分析平台</a></li><li><a href=/docs/programmer/platforms/install_some/>安装问题</a></li><li><a href=/docs/programmer/platforms/android/android/>安卓</a></li><li><a href=/docs/programmer/platforms/os/freebsd/>FreeBSD</a></li><li><a href=/docs/programmer/platforms/os/note-of-linux/>Linux 笔记</a></li><li><a href=/docs/programmer/platforms/android/adb/>adb</a></li><li><a href=/docs/programmer/platforms/git/>Git</a></li><li><a href=/docs/programmer/platforms/os/ros/>ROS机器人操作系统</a></li><li><a href=/docs/programmer/platforms/os/problem-of-windows/>Windows 爬坑记</a></li><li><a href=/docs/programmer/platforms/tips-of-problems/>解决问题记录笔记</a></li></ul></li><li><input type=checkbox id=section-4446dd07527142b855f26d7cc8f0e617 class=toggle>
<label for=section-4446dd07527142b855f26d7cc8f0e617 class="flex justify-between"><a href=/docs/programmer/database/>Database</a></label><ul><li><a href=/docs/programmer/database/note-of-db-data-mariadb/>数据库-MariaDB篇</a></li><li><a href=/docs/programmer/database/dgraph-graph-db/>Dgraph使用小记</a></li><li><a href=/docs/programmer/database/note-of-db-data-mongodb/>数据库-MongoDB篇</a></li><li><a href=/docs/programmer/database/note-of-db-data-mysql/>数据库-MySQL篇</a></li></ul></li><li><input type=checkbox id=section-d325c59fc6513e1b1e05a60b192d4973 class=toggle>
<label for=section-d325c59fc6513e1b1e05a60b192d4973 class="flex justify-between"><a href=/docs/programmer/hardware/>硬件</a></label><ul><li><a href=/docs/programmer/hardware/raspberrypi/>Raspberry Pi</a></li><li><a href=/docs/programmer/hardware/screen/>Screen</a></li></ul></li></ul></li><li class=book-section-flat><span>建模和游戏</span><ul><li><a href=/docs/3dgame/blender/>Blender</a></li><li><a href=/docs/3dgame/noteofue4/>UE4 笔记</a></li></ul></li></ul><ul><li><a href=/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>redis</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav><ul><li class=book-section-flat><strong>Categories</strong><ul><li class="flex justify-between"><a href=/categories/db/>db</a>
<span>3</span></li><li class="flex justify-between"><a href=/categories/docker/>docker</a>
<span>3</span></li><li class="flex justify-between"><a href=/categories/podman/>podman</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/%E5%AE%89%E5%8D%93/>安卓</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/redis/>redis</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/%E9%9D%A2%E8%AF%95/>面试</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/%E5%B0%8F%E5%91%BD%E4%BB%A4/>小命令</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/nginx/>nginx</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/problem/>problem</a>
<span>3</span></li><li class="flex justify-between"><a href=/categories/tip/>tip</a>
<span>11</span></li><li class="flex justify-between"><a href=/categories/uwsgi/>uwsgi</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/%E7%89%88%E6%9C%AC%E5%85%BC%E5%AE%B9/>版本兼容</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/pyside/>pyside</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/qt/>qt</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/install/>install</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/dgraph/>Dgraph</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93/>图数据库</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/learning/>learning</a>
<span>11</span></li><li class="flex justify-between"><a href=/categories/note/>note</a>
<span>9</span></li><li class="flex justify-between"><a href=/categories/grpc/>gRpc</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/expansion/>expansion</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/golang/>golang</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/ue4/>ue4</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/web/>web</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/>机器视觉</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/%E6%8D%A2%E6%BA%90/>换源</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/debug/>debug</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/python/>python</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/markdown/>markdown</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/vim/>vim</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/%E6%9D%82%E8%B0%88/>杂谈</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/java/>java</a>
<span>1</span></li></ul></li><li class=book-section-flat><strong>Tags</strong><ul><li class="flex justify-between"><a href=/tags/python/>python</a>
<span>10</span></li><li class="flex justify-between"><a href=/tags/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/>版本管理</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/redis/>redis</a>
<span>6</span></li><li class="flex justify-between"><a href=/tags/%E9%9B%86%E7%BE%A4/>集群</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/selenium/>selenium</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E7%88%AC%E8%99%AB/>爬虫</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/obsidian/>obsidian</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/background-removal/>background-removal</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/>图像处理</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E8%83%8C%E6%99%AF%E6%B6%88%E9%99%A4/>背景消除</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/elk/>elk</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/%E6%97%A5%E5%BF%97/>日志</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ci/>ci</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/golang/>golang</a>
<span>4</span></li><li class="flex justify-between"><a href=/tags/script/>script</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/chrome/>chrome</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/terminal/>terminal</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ffmpeg/>ffmpeg</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/apktool/>apktool</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E9%80%86%E5%90%91/>逆向</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E8%A7%84%E8%8C%83/>规范</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/databases/>databases</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/mariadb/>mariadb</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ai/>AI</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/llms/>llms</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA/>机器人</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/api/>api</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ngrok/>ngrok</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/bash/>bash</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/curl/>curl</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/mitmproxy/>mitmproxy</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/proxy/>proxy</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/awk/>awk</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/grep/>grep</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/sed/>sed</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/tmux/>tmux</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/linux/>Linux</a>
<span>7</span></li><li class="flex justify-between"><a href=/tags/porton/>Porton</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/steam/>Steam</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/android/>android</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/wayland/>wayland</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/docker/>docker</a>
<span>4</span></li><li class="flex justify-between"><a href=/tags/podman/>podman</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E5%AE%89%E5%8D%93/>安卓</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ubuntu/>Ubuntu</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/oss/>oss</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/key/>key</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/wps/>wps</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/orm/>orm</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/sqlalchemy/>sqlalchemy</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/appsflyer/>AppsFlyer</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/tcp/>tcp</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E9%9D%A2%E8%AF%95/>面试</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/%E5%B0%8F%E5%91%BD%E4%BB%A4/>小命令</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/k8s/>k8s</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/nginx/>nginx</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/uwsgi/>uwsgi</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/c++/>c++</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/cmake/>cmake</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/cpp/>cpp</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/>深度学习</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/3d-model-creator/>3d model creator</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pyinstaller/>pyinstaller</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%89%93%E5%8C%85/>打包</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/install/>install</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/nodejs/>nodejs</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/npm/>npm</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/dgraph/>dgraph</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93/>图数据库</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/learning/>learning</a>
<span>9</span></li><li class="flex justify-between"><a href=/tags/backend/>backend</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/fastapi/>fastapi</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/web/>web</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/rpc/>rpc</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/win/>win</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/expansion/>expansion</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ue4/>ue4</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%B5%8B%E8%AF%95/>测试</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/keepalived/>keepalived</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/opencv/>opencv</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/>机器视觉</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/apt/>apt</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pip/>pip</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/pkg/>pkg</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%BA%90/>源</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/debuger/>debuger</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/gdb/>gdb</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pdb/>pdb</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ajax/>ajax</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/apache/>apache</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/django/>django</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/missjava/>missjava</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/vue/>vue</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/gui/>Gui</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/socket/>socket</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/vn.py/>Vn.Py</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/markdown/>markdown</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/md/>md</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/tip/>tip</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/less/>less</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/more/>more</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/vim/>vim</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/mongo/>mongo</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/mysql/>mysql</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/freebsd/>freebsd</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%9D%82%E8%B0%88/>杂谈</a>
<span>5</span></li><li class="flex justify-between"><a href=/tags/adb/>adb</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/asyncio/>asyncio</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/demo_test/>demo_test</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/excalidraw/>excalidraw</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/git/>git</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/java-springboot-mybatis-maven-learning/>java, springboot, mybatis, maven, learning</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/matplotlib/>matplotlib</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ml/>ml</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/multiprocessing/>multiprocessing</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pydantic/>pydantic</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pyqt/>pyqt</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/supervisor/>supervisor</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/systemd/>systemd</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/threading/>threading</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/tools/>tools</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E5%9B%BE%E8%A1%A8/>图表</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E7%AE%97%E6%B3%95/>算法</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E9%97%AE%E9%A2%98/>问题</a>
<span>1</span></li></ul></li></ul></nav></aside></header><article class="markdown book-post"><h2><a href=/docs/programmer/cloudnative/redis/redis%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/>Redis集群部署</a></h2><h5>March 3, 2025</h5><div><a href=/tags/redis/>redis</a>,
<a href=/tags/%E9%9B%86%E7%BE%A4/>集群</a></div><p>[!note] 以下是为 Redis 7.2.4（最新版本-我替换成了latest）编写的完整 docker-compose.yml 文件，包含 6 个节点 (3 主 + 3 从) 的完整配置：
安装 # version: '3.8' services: redis-7000: image: redis:latest container_name: redis-7000 command: redis-server /usr/local/etc/redis/redis.conf volumes: - ./config/redis-7000.conf:/usr/local/etc/redis/redis.conf - ./data/7000:/data networks: - redis-cluster-net ports: - "7000:7000" - "17000:17000" redis-7001: image: redis:latest container_name: redis-7001 command: redis-server /usr/local/etc/redis/redis.conf volumes: - ./config/redis-7001.conf:/usr/local/etc/redis/redis.conf - ./data/7001:/data networks: - redis-cluster-net ports: - "7001:7001" - "17001:17001" redis-7002: image: redis:latest container_name: redis-7002 command: redis-server /usr/local/etc/redis/redis.conf volumes: - .
<a href=/docs/programmer/cloudnative/redis/redis%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/>...</a></p></article><article class="markdown book-post"><h2><a href=/docs/programmer/cloudnative/redis/python-redis-%E5%AE%A2%E6%88%B7%E7%AB%AF/>Python Redis 客户端</a></h2><h5>June 13, 2024</h5><div><a href=/tags/redis/>redis</a>,
<a href=/tags/python/>python</a></div><p>异步调用时自动关闭 # 当事件循环正在运行时，会创建一个任务来关闭 redis 连接，而不会阻塞事件循环。如果事件循环没有运行，就可以像之前一样调用 run_until_complete。
async def close_redis(self): if self.redis: await self.redis.close() def __del__(self): loop = asyncio.get_event_loop() if loop.is_running(): asyncio.create_task(self.close_redis()) else: loop.run_until_complete(self.close_redis()) 数据迁移(hash数据) # 脚本 # import os import json import redis import argparse from loguru import logger home_path = os.environ.get('HOME') parser = argparse.ArgumentParser(description='Copy Reten Config') parser.add_argument('--mode', help='Pull or Push data from Redis') parser.add_argument('-ds', '--datasource', help='retens or events config data from Redis') args = parser.parse_args() source_redis = redis.StrictRedis(host='redis-product.com', port=6379, db=0) def scan_keys_with_pattern(pattern): # 初始游标 cursor = '0' count_group = 0 while True: # 使用 SCAN 命令进行迭代 cursor, keys = source_redis.
<a href=/docs/programmer/cloudnative/redis/python-redis-%E5%AE%A2%E6%88%B7%E7%AB%AF/>...</a></p></article><article class="markdown book-post"><h2><a href=/docs/programmer/cloudnative/redis/bigkey-and-hotkey/>大key、热key问题</a></h2><h5>May 27, 2024</h5><div><a href=/tags/redis/>redis</a>,
<a href=/tags/key/>key</a></div><p>如何找出优化大Key与热Key,产生的原因和问题_云数据库 Redis 版(Redis)-阿里云帮助中心 # 在使用Redis的过程中，如果未能及时发现并处理Big keys（下文称为“大Key”）与Hotkeys（下文称为“热Key”），可能会导致服务性能下降、用户体验变差，甚至引发大面积故障。本文将介绍大Key与热Key产生的原因、其可能引发的问题及如何快速找出大Key与热Key并将其优化的方案。
名词 解释 大Key 通常以Key的大小和Key中成员的数量来综合判定，例如：- Key本身的数据量过大：一个String类型的Key，它的值为5 MB。- Key中的成员数过多：一个ZSET类型的Key，它的成员数量为10,000个。- Key中成员的数据量过大：一个Hash类型的Key，它的成员数量虽然只有1,000个但这些成员的Value（值）总大小为100 MB。 热Key 通常以其接收到的Key被请求频率来判定，例如：- QPS集中在特定的Key：Redis实例的总QPS（每秒查询率）为10,000，而其中一个Key的每秒访问量达到了7,000。- 带宽使用率集中在特定的Key：对一个拥有上千个成员且总大小为1 MB的HASH Key每秒发送大量的HGETALL操作请求。- CPU使用时间占比集中在特定的Key：对一个拥有数万个成员的Key（ZSET类型）每秒发送大量的ZRANGE操作请求。 说明
上述例子中的具体数值仅供参考，在实际业务中，您需要根据Redis的实际业务场景进行综合判断。
大Key和热Key引发的问题 # 类别 说明 大Key - 客户端执行命令的时长变慢。- Redis内存达到maxmemory参数定义的上限引发操作阻塞或重要的Key被逐出，甚至引发内存溢出（Out Of Memory）。- 集群架构下，某个数据分片的内存使用率远超其他数据分片，无法使数据分片的内存资源达到均衡。- 对大Key执行读请求，会使Redis实例的带宽使用率被占满，导致自身服务变慢，同时易波及相关的服务。- 对大Key执行删除操作，易造成主库较长时间的阻塞，进而可能引发同步中断或主从切换。 热Key - 占用大量的CPU资源，影响其他请求并导致整体性能降低。- 集群架构下，产生访问倾斜，即某个数据分片被大量访问，而其他数据分片处于空闲状态，可能引起该数据分片的连接数被耗尽，新的连接建立请求被拒绝等问题。- 在抢购或秒杀场景下，可能因商品对应库存Key的请求量过大，超出Redis处理能力造成超卖。- 热Key的请求压力数量超出Redis的承受能力易造成缓存击穿，即大量请求将被直接指向后端的存储层，导致存储访问量激增甚至宕机，从而影响其他业务。 大Key和热Key产生的原因 # 未正确使用Redis、业务规划不足、无效数据的堆积、访问量突增等都会产生大Key与热Key，如：
大key 在不适用的场景下使用Redis，易造成Key的value过大，如使用String类型的Key存放大体积二进制文件型数据； 业务上线前规划设计不足，没有对Key中的成员进行合理的拆分，造成个别Key中的成员数量过多； 未定期清理无效数据，造成如HASH类型Key中的成员持续不断地增加； 使用LIST类型Key的业务消费侧发生代码故障，造成对应Key的成员只增不减。 热key 预期外的访问量陡增，如突然出现的爆款商品、访问量暴涨的热点新闻、直播间某主播搞活动带来的大量刷屏点赞、游戏中某区域发生多个工会之间的战斗涉及大量玩家等。 快速找出大Key和热Key # Redis提供多种方案帮助您轻松找出大Key与热Key。
方法 优缺点 说明 实时Top Key统计（推荐） - 优点：准确性高、对性能几乎无影响。- 缺点：展示的Key数量有一定限制，但能满足常规场景下的需求。 可实时展示实例中的大Key和热Key信息，同时支持查看4天内大Key和热Key的历史信息。该功能可帮助您掌握Key在内存中的占用、Key的访问频次等信息，溯源分析问题，为您的优化操作提供数据支持。 离线全量Key分析 - 优点：可对历史备份数据进行分析，对线上服务无影响。- 缺点：时效性差，RDB文件较大时耗时较长。 对Redis的RDB备份文件进行定制化的分析，帮助您发现实例中的大Key，掌握Key在内存中的占用和分布、Key过期时间等信息，为您的优化操作提供数据支持，帮助您避免因Key倾斜引发的内存不足、性能下降等问题。 通过redis-cli的bigkeys和hotkeys参数查找大Key和热Key - 优点：方便、快速、安全。- 缺点：分析结果不可定制化，准确性与时效性差。 Redis提供了bigkeys参数能够使redis-cli以遍历的方式分析Redis实例中的所有Key，并返回Key的整体统计信息与每个数据类型中Top1的大Key，bigkeys仅能分析并输入六种数据类型（STRING、LIST、HASH、SET、ZSET、STREAM），命令示例为redis-cli -h r-***************.
<a href=/docs/programmer/cloudnative/redis/bigkey-and-hotkey/>...</a></p></article><article class="markdown book-post"><h2><a href=/docs/programmer/cloudnative/redis/the-basics-of-redis/>Redis基础</a></h2><h5>May 5, 2024</h5><div><a href=/categories/%E9%9D%A2%E8%AF%95/>面试</a>,
<a href=/categories/redis/>redis</a></div><div><a href=/tags/%E9%9D%A2%E8%AF%95/>面试</a>,
<a href=/tags/redis/>redis</a></div><p>基础理论 # 概况 # Redis (Remote Dictionary Server) 是一个开源的、支持网络、基于内存、可选持久性的键值对数据库。它支持多种类型的数据结构，如字符串（strings）、列表（lists）、集合（sets）、有序集合（sorted sets）以及散列（hashes）、位图（bitmaps）、超日志（hyperloglogs）和地理空间（geospatial）索引半径查询。
特点包括：
高性能：因为数据主要在内存中进行操作，读写速度非常快。 丰富的数据类型：提供多种数据结构来满足不同场景下的需求。 原子性：所有操作都是原子性的，支持事务（通过MULTI/EXEC命令）。 丰富的功能：支持发布订阅、Lua脚本、事务等。 数据结构 # Redis提供的数据结构包括： Redis 支持多种数据类型，以下是一些常用的数据类型以及它们的简要描述和使用场景：
数据类型 描述 使用场景 String 二进制安全字符串，最大可以存储 512MB 存储文本或二进制数据，如缓存用户个人信息等 List 有序集合，按插入顺序排序 消息队列、时间线、最新消息列表 Set 无序集合，元素不重复 标签、社交网络中的朋友关系等 Sorted Set 有序集合，元素不重复，并且每个元素都会关联一个浮点数分数 排行榜、带权重的集合 Hash 键值对集合，适用于存储对象 存储、访问和修改对象属性 Bitmaps 通过位来表示数据的数据类型，适合做计数统计 在线状态、特性标志、统计等 HyperLogLog 近似去重计数的数据结构 大数据量的计数，如统计独立 IP 访问数量 Geospatial 存储地理位置信息，并进行相关地理操作 储存经纬度，查询附近的地点 Streams Redis 5.0 新增的数据类型，是一个可持久化的日志数据结构 实现消息队列，发布/订阅模式，日志记录 Redis 之所以快速，主要原因有以下几点： # 内存存储：Redis 将所有数据存储在内存中，内存的读写速度远高于硬盘。 数据结构简单：Redis 的数据结构设计简单直观，易于高效操作。 非阻塞 IO：Redis 使用非阻塞 IO 和多路复用技术，可以处理多个并发连接。 单线程模型：Redis 大部分操作是单线程执行，避免了多线程的上下文切换开销。 Redis高性能IO模型 # Redis的IO模型使用的是非阻塞IO复用技术，主要是epoll作为IO多路复用技术的实现方式。它通过单线程事件循环来处理所有客户端请求，确保绝大部分请求都是非阻塞的，并且使用异步编程模式来提高性能。
<a href=/docs/programmer/cloudnative/redis/the-basics-of-redis/>...</a></p></article><article class="markdown book-post"><h2><a href=/docs/programmer/cloudnative/redis/advanced-knowledge-of-redis/>Redis进阶</a></h2><h5>May 5, 2024</h5><div><a href=/categories/%E9%9D%A2%E8%AF%95/>面试</a>,
<a href=/categories/redis/>redis</a></div><div><a href=/tags/%E9%9D%A2%E8%AF%95/>面试</a>,
<a href=/tags/redis/>redis</a></div><p>主从架构-主从同步 # 在Redis中，主从同步是一种常用的数据复制方式，它允许一个或多个从服务器（slave）获得与主服务器（master）相同的数据副本。这种架构提供了数据的冗余和读取扩展性。
全量复制：当一个从服务器第一次连接到主服务器时，或是由于某些原因需要重新同步时，会进行全量复制。在这个过程中，主服务器会生成一个当前所有数据的快照，并将这个快照发送至请求同步的从服务器。从服务器接收到数据后，加载到自己的数据空间内。
部分复制：一旦完成了全量复制，如果从服务器断开连接又重新连接，且中断时间不长，主服务器可以只发送这段时间内发生变化的数据给从服务器，而不是再次进行全量复制。这依赖于主服务器的复制积压缓冲区来存储最近的写命令。
同步策略：为了保证数据的一致性，从服务器在初始同步完成之前不会对外提供服务。在日常运行时，主服务器会将写命令同时发送给所有的从服务器，以此来保证数据的实时一致性。
主从同步使得从服务器可以承担读操作，减轻主服务器的负载，同时也可以在主服务器遇到故障时，进行故障转移。
主从哨兵架构 # Redis哨兵（Sentinel）系统是用于管理多个Redis服务器的系统。该体系结构具有以下特点：
监控：哨兵会监控主从服务器是否正常运作。 自动故障转移：如果主服务器出现故障，哨兵可以自动选举新的主服务器，并让原来的从服务器指向新的主服务器。 配置提供者：哨兵还会将当前的主服务器地址提供给客户端，确保客户端总是连接到正确的主服务器。 哨兵机制通过这些功能增加了Redis环境的高可用性和稳定性。
切片集群-Redis Cluster # Redis Cluster是Redis的分布式解决方案。它支持数据的水平分片，以下是其关键特性：
自动分片：��动将数据分布在不同的节点上，每个节点只保存整个数据集的一部分。 高可用性：采用主从复制模型，即使在多个节点失败的情况下也能保证服务的可用性。 无中心设计：没有中心节点，每个节点都保存着整个集群状态的一部分，节点之间通过Gossip协议交换信息。 Redis Cluster通过对键进行CRC16计算并对16384取余数来决定将键分配到哪个槽位，每个节点负责一部分槽位，从而实现负载均衡。
Redis Cluster 通信开销 # 由于Redis Cluster节点间需要频繁地交换消息以维护集群状态，因此会产生额外的通信开销：
Gossip通信：节点间通过Gossip协议定期交换信息，包括数据迁移、故障检测等。 重定向操作：客户端可能会尝试向不包含数据所在槽的节点发起请求，这时节点会返回一个重定向信息 切片集群-Codis
Redis 分布式锁是一种用于多个计算节点之间同步访问共享资源的机制。在分布式系统中，当多个进程需要同时访问某些数据或执行某些任务时，为了避免竞态条件（race conditions）和数据不一致，通常需要使用分布式锁来保证在同一时间只有一个进程能够执行特定的操作。
Redis 分布式锁实现 # 一个常见的Redis分布式锁实现是使用 Redis 的 SETNX 命令（Set if not exists）。这个命令只在键不存在的情况下设置键的值，并且返回是否成功设置。由于 SETNX 是原子操作，因此可以用来实现锁的功能。
另一个更加推荐的方式是使用 Redis 2.6.12 版本引入的 SET 命令结合选项 NX（表示只有键不存在时才进行设置）和 PX（给键设置过期时间，单位为毫秒），这可以保证即使在客户端崩溃的情况下，锁也会在一定时间后自动释放，防止死锁。
使用 Redis 分布式锁的步骤： # 尝试获取锁
使用 SET key value NX PX milliseconds 进行设置。 如果返回 OK，则获取锁成功。 如果返回 nil，则获取锁失败。 执行业务逻辑
<a href=/docs/programmer/cloudnative/redis/advanced-knowledge-of-redis/>...</a></p></article><article class="markdown book-post"><h2><a href=/docs/programmer/cloudnative/redis/%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4/>Redis常用命令</a></h2><h5>March 18, 2024</h5><div><a href=/tags/redis/>redis</a></div><p>scan 替代 keys # SCAN 0 MATCH key* COUNT 100 查看类型type # type # 使用了 GET 命令，这个命令通常用于获取字符串类型的值。如果key_hi 这个键在 Redis 中存储的不是字符串类型的值，而是其他类型（如列表、集合、哈希等），那么执行 GET 命令就会返回错误:
(error) WRONGTYPE Operation against a key holding the wrong kind of value
要解决这个问题，首先需要确定 key_hi 键存储的值的类型。你可以使用 TYPE 命令来检查键的类型：
TYPE mmp:cfgs:com.easypeso:retens 查看list # 查看 List 长度： LLEN mylist 0 -1 查看 List 数据内容： LRANGE mylist 0 -1</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav><ul><li class=book-section-flat><strong>Categories</strong><ul><li class="flex justify-between"><a href=/categories/db/>db</a>
<span>3</span></li><li class="flex justify-between"><a href=/categories/docker/>docker</a>
<span>3</span></li><li class="flex justify-between"><a href=/categories/podman/>podman</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/%E5%AE%89%E5%8D%93/>安卓</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/redis/>redis</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/%E9%9D%A2%E8%AF%95/>面试</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/%E5%B0%8F%E5%91%BD%E4%BB%A4/>小命令</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/nginx/>nginx</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/problem/>problem</a>
<span>3</span></li><li class="flex justify-between"><a href=/categories/tip/>tip</a>
<span>11</span></li><li class="flex justify-between"><a href=/categories/uwsgi/>uwsgi</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/%E7%89%88%E6%9C%AC%E5%85%BC%E5%AE%B9/>版本兼容</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/pyside/>pyside</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/qt/>qt</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/install/>install</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/dgraph/>Dgraph</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93/>图数据库</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/learning/>learning</a>
<span>11</span></li><li class="flex justify-between"><a href=/categories/note/>note</a>
<span>9</span></li><li class="flex justify-between"><a href=/categories/grpc/>gRpc</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/expansion/>expansion</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/golang/>golang</a>
<span>2</span></li><li class="flex justify-between"><a href=/categories/ue4/>ue4</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/web/>web</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/>机器视觉</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/%E6%8D%A2%E6%BA%90/>换源</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/debug/>debug</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/python/>python</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/markdown/>markdown</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/vim/>vim</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/%E6%9D%82%E8%B0%88/>杂谈</a>
<span>1</span></li><li class="flex justify-between"><a href=/categories/java/>java</a>
<span>1</span></li></ul></li><li class=book-section-flat><strong>Tags</strong><ul><li class="flex justify-between"><a href=/tags/python/>python</a>
<span>10</span></li><li class="flex justify-between"><a href=/tags/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/>版本管理</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/redis/>redis</a>
<span>6</span></li><li class="flex justify-between"><a href=/tags/%E9%9B%86%E7%BE%A4/>集群</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/selenium/>selenium</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E7%88%AC%E8%99%AB/>爬虫</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/obsidian/>obsidian</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/background-removal/>background-removal</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/>图像处理</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E8%83%8C%E6%99%AF%E6%B6%88%E9%99%A4/>背景消除</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/elk/>elk</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/%E6%97%A5%E5%BF%97/>日志</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ci/>ci</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/golang/>golang</a>
<span>4</span></li><li class="flex justify-between"><a href=/tags/script/>script</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/chrome/>chrome</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/terminal/>terminal</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ffmpeg/>ffmpeg</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/apktool/>apktool</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E9%80%86%E5%90%91/>逆向</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E8%A7%84%E8%8C%83/>规范</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/databases/>databases</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/mariadb/>mariadb</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ai/>AI</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/llms/>llms</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA/>机器人</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/api/>api</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ngrok/>ngrok</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/bash/>bash</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/curl/>curl</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/mitmproxy/>mitmproxy</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/proxy/>proxy</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/awk/>awk</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/grep/>grep</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/sed/>sed</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/tmux/>tmux</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/linux/>Linux</a>
<span>7</span></li><li class="flex justify-between"><a href=/tags/porton/>Porton</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/steam/>Steam</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/android/>android</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/wayland/>wayland</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/docker/>docker</a>
<span>4</span></li><li class="flex justify-between"><a href=/tags/podman/>podman</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E5%AE%89%E5%8D%93/>安卓</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ubuntu/>Ubuntu</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/oss/>oss</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/key/>key</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/wps/>wps</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/orm/>orm</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/sqlalchemy/>sqlalchemy</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/appsflyer/>AppsFlyer</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/tcp/>tcp</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E9%9D%A2%E8%AF%95/>面试</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/%E5%B0%8F%E5%91%BD%E4%BB%A4/>小命令</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/k8s/>k8s</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/nginx/>nginx</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/uwsgi/>uwsgi</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/c++/>c++</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/cmake/>cmake</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/cpp/>cpp</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/>深度学习</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/3d-model-creator/>3d model creator</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pyinstaller/>pyinstaller</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%89%93%E5%8C%85/>打包</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/install/>install</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/nodejs/>nodejs</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/npm/>npm</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/dgraph/>dgraph</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E5%9B%BE%E6%95%B0%E6%8D%AE%E5%BA%93/>图数据库</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/learning/>learning</a>
<span>9</span></li><li class="flex justify-between"><a href=/tags/backend/>backend</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/fastapi/>fastapi</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/web/>web</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/rpc/>rpc</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/win/>win</a>
<span>3</span></li><li class="flex justify-between"><a href=/tags/expansion/>expansion</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ue4/>ue4</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%B5%8B%E8%AF%95/>测试</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/keepalived/>keepalived</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/opencv/>opencv</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%9C%BA%E5%99%A8%E8%A7%86%E8%A7%89/>机器视觉</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/apt/>apt</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pip/>pip</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/pkg/>pkg</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%BA%90/>源</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/debuger/>debuger</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/gdb/>gdb</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pdb/>pdb</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ajax/>ajax</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/apache/>apache</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/django/>django</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/missjava/>missjava</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/vue/>vue</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/gui/>Gui</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/socket/>socket</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/vn.py/>Vn.Py</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/markdown/>markdown</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/md/>md</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/tip/>tip</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/less/>less</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/more/>more</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/vim/>vim</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/mongo/>mongo</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/mysql/>mysql</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/freebsd/>freebsd</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E6%9D%82%E8%B0%88/>杂谈</a>
<span>5</span></li><li class="flex justify-between"><a href=/tags/adb/>adb</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/asyncio/>asyncio</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/demo_test/>demo_test</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/excalidraw/>excalidraw</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/git/>git</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/java-springboot-mybatis-maven-learning/>java, springboot, mybatis, maven, learning</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/matplotlib/>matplotlib</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/ml/>ml</a>
<span>2</span></li><li class="flex justify-between"><a href=/tags/multiprocessing/>multiprocessing</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pydantic/>pydantic</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/pyqt/>pyqt</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/supervisor/>supervisor</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/systemd/>systemd</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/threading/>threading</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/tools/>tools</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E5%9B%BE%E8%A1%A8/>图表</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E7%AE%97%E6%B3%95/>算法</a>
<span>1</span></li><li class="flex justify-between"><a href=/tags/%E9%97%AE%E9%A2%98/>问题</a>
<span>1</span></li></ul></li></ul></nav></div></aside></main></body></html>