<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="起手式 # 正 # best quality, (mature:1.3),perfect face, beautiful face,western, sharp focus, solo,beautiful woman,sexy,shiny skin,Navy blouse, beige shorts, soft light,cinematic lighting, sunny, dusk, outdoor,depth of field,shidudou,red_dress, 反 # (worst quality, low quality:2), NSFW, monochrome, zombie, overexposure, watermark, text, bad anatomy, bad hand,((extra hands)),extra fingers, too many fingers, fused fingers, bad arm, distorted arm, extra arms, fused arms, extra legs, missing leg,disembodied leg,extra nipples, detached arm, liquid hand, inverted hand, disembodied limb, oversized head, extra body, extra navel, (hair between eyes),sketch, duplicate, ugly, huge eyes, text, logo, worst face, (bad and mutated hands:1."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="AI画图"><meta property="og:description" content="起手式 # 正 # best quality, (mature:1.3),perfect face, beautiful face,western, sharp focus, solo,beautiful woman,sexy,shiny skin,Navy blouse, beige shorts, soft light,cinematic lighting, sunny, dusk, outdoor,depth of field,shidudou,red_dress, 反 # (worst quality, low quality:2), NSFW, monochrome, zombie, overexposure, watermark, text, bad anatomy, bad hand,((extra hands)),extra fingers, too many fingers, fused fingers, bad arm, distorted arm, extra arms, fused arms, extra legs, missing leg,disembodied leg,extra nipples, detached arm, liquid hand, inverted hand, disembodied limb, oversized head, extra body, extra navel, (hair between eyes),sketch, duplicate, ugly, huge eyes, text, logo, worst face, (bad and mutated hands:1."><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/docs/programmer/ml/stable-diffusion/"><meta property="article:section" content="docs"><meta property="article:published_time" content="2024-03-18T00:00:00+00:00"><meta property="article:modified_time" content="2024-03-18T00:00:00+00:00"><title>AI画图 | Ian's Blog</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.c58292d36b18b675680ab9baea2029204537b839ea72f258746ec0f32ce8d6c8.css integrity="sha256-xYKS02sYtnVoCrm66iApIEU3uDnqcvJYdG7A8yzo1sg=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.967a0b86a468867bef105ea781246b02d3ec23457360efc5c19bf3896a2eec17.js integrity="sha256-lnoLhqRohnvvEF6ngSRrAtPsI0VzYO/FwZvziWou7Bc=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Ian's Blog</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=/docs/programmer/>程序员笔记</a><ul><li><input type=checkbox id=section-883e27361d38e16afb68faff3435ac0b class=toggle checked>
<label for=section-883e27361d38e16afb68faff3435ac0b class="flex justify-between"><a role=button>机器学习</a></label><ul><li><a href=/docs/programmer/ml/stable-diffusion/ class=active>AI画图</a></li><li><a href=/docs/programmer/ml/%E5%9B%BE%E7%89%87%E8%83%8C%E6%99%AF%E6%B6%88%E9%99%A4/>图片背景消除</a></li><li><a href=/docs/programmer/ml/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%A1%8C%E4%B8%BA%E8%87%AA%E5%8A%A8%E7%BC%96%E6%8E%92%E5%92%8C%E4%BB%BB%E5%8A%A1/>机器人行为自动编排和任务</a></li><li><a href=/docs/programmer/ml/%E7%88%AC%E8%99%AB/>爬虫</a></li><li><a href=/docs/programmer/ml/paddle/>Paddle</a></li><li><a href=/docs/programmer/ml/tensorflow/>Tensorflow</a></li><li><a href=/docs/programmer/ml/opencv/>OpenCV</a></li><li><a href=/docs/programmer/ml/yolo/>Demo Test项目中的一些东西</a></li><li><a href=/docs/programmer/ml/python-%E5%9B%BE%E8%A1%A8/>Python 图表</a></li><li><a href=/docs/programmer/ml/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%B8%B8%E7%94%A8%E5%BA%93%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/>机器学习库</a></li></ul></li><li><input type=checkbox id=section-8658298e10b544e890095f646916165a class=toggle>
<label for=section-8658298e10b544e890095f646916165a class="flex justify-between"><a href=/docs/programmer/cloudnative/>云原生</a></label><ul><li><input type=checkbox id=section-31d3b02fd4a132635e483e7e756058ea class=toggle>
<label for=section-31d3b02fd4a132635e483e7e756058ea class="flex justify-between"><a href=/docs/programmer/cloudnative/redis/>中间件</a></label><ul><li><a href=/docs/programmer/cloudnative/redis/python-redis-%E5%AE%A2%E6%88%B7%E7%AB%AF/>Python Redis 客户端</a></li><li><a href=/docs/programmer/cloudnative/redis/bigkey-and-hotkey/>大key、热key问题</a></li><li><a href=/docs/programmer/cloudnative/redis/the-basics-of-redis/>Redis基础</a></li><li><a href=/docs/programmer/cloudnative/redis/advanced-knowledge-of-redis/>Redis进阶</a></li><li><a href=/docs/programmer/cloudnative/redis/%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4/>Redis常用命令</a></li></ul></li><li><input type=checkbox id=section-62d608ed890b3abc76dae78ccfcab912 class=toggle>
<label for=section-62d608ed890b3abc76dae78ccfcab912 class="flex justify-between"><a role=button>k8s</a></label><ul><li><a href=/docs/programmer/cloudnative/k8s/elk%E5%9C%A8k8s%E4%B8%8A%E7%9A%84%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B/>elk在k8s上的部署使用示例</a></li><li><a href=/docs/programmer/cloudnative/k8s/k8s-%E9%85%8D%E5%A5%97%E8%AF%B4%E6%98%8E/>k8s 配套说明</a></li><li><a href=/docs/programmer/cloudnative/k8s/k8s-%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/>k8s技术分享</a></li><li><a href=/docs/programmer/cloudnative/k8s/k8s%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%92%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90/>k8s学习-常用命令和配置文件</a></li><li><a href=/docs/programmer/cloudnative/k8s/argo-workflow%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%92%8C%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%88%86%E6%9E%90/>Argo Workflow性能测试和使用场景分析</a></li><li><a href=/docs/programmer/cloudnative/k8s/argo-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/>Argo 使用记录</a></li></ul></li><li><input type=checkbox id=section-b828bf3d116bc282da9db25a06bf908e class=toggle>
<label for=section-b828bf3d116bc282da9db25a06bf908e class="flex justify-between"><a role=button>中间件</a></label><ul><li><a href=/docs/programmer/cloudnative/middleware/kafka-%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/>Kafka 安装和使用</a></li></ul></li><li><a href=/docs/programmer/cloudnative/elk/%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86%E7%B3%BB%E7%BB%9F/>日志收集系统: loki+promtail+Grafana</a></li><li><a href=/docs/programmer/cloudnative/%E5%AE%B9%E5%99%A8/note-of-podman/>Podman</a></li><li><a href=/docs/programmer/cloudnative/nginx%E5%AE%9E%E7%94%A8%E9%85%8D%E7%BD%AE/>Nginx实用配置</a></li><li><a href=/docs/programmer/cloudnative/uwsgi-%E5%A4%84%E7%90%86%E8%AE%B0%E5%BD%95/>uwsgi 处理记录</a></li><li><a href=/docs/programmer/cloudnative/note-of-docker/>Docker</a></li><li><a href=/docs/programmer/cloudnative/%E5%AE%B9%E5%99%A8/note-of-docker/>Docker</a></li><li><a href=/docs/programmer/cloudnative/fastapi/>Django的建站的(｡･･)ﾉﾞ</a></li><li><a href=/docs/programmer/cloudnative/nginx-%E9%AB%98%E5%8F%AF%E7%94%A8/>Nginx高可用</a></li><li><a href=/docs/programmer/cloudnative/notesdjango/>Django的建站的(｡･･)ﾉﾞ</a></li><li><a href=/docs/programmer/cloudnative/sonar-%E4%BB%A3%E7%A0%81%E9%9D%99%E6%80%81%E6%A3%80%E6%9F%A5/>Sonar 代码静态检查</a></li></ul></li><li><input type=checkbox id=section-bf4e0d6f0b81f7b3ec08ed1fc66b874d class=toggle>
<label for=section-bf4e0d6f0b81f7b3ec08ed1fc66b874d class="flex justify-between"><a href=/docs/programmer/langs/>编程语言</a></label><ul><li><input type=checkbox id=section-9f8ac8f06e138c7ac13ff61f23b4d497 class=toggle>
<label for=section-9f8ac8f06e138c7ac13ff61f23b4d497 class="flex justify-between"><a role=button>Golang</a></label><ul><li><a href=/docs/programmer/langs/golang/%E6%8A%8Agolang%E5%BD%93%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80%E7%94%A8/>把Golang当脚本语言用</a></li><li><a href=/docs/programmer/langs/golang/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/>常用命令</a></li><li><a href=/docs/programmer/langs/golang/advanced-knowledge-of-golang/>Golang进阶笔记</a></li><li><a href=/docs/programmer/langs/golang/note-of-golang/>Golang笔记</a></li></ul></li><li><input type=checkbox id=section-771df6c720301e69f1715f7fc174ac3d class=toggle>
<label for=section-771df6c720301e69f1715f7fc174ac3d class="flex justify-between"><a role=button>Python</a></label><ul><li><a href=/docs/programmer/langs/python/%E8%A7%84%E8%8C%83/>Python编码规范</a></li><li><a href=/docs/programmer/langs/python/sqlalchemy/>SqlAlchemy - 数据库Orm</a></li><li><a href=/docs/programmer/langs/python/pypi/>PyPi使用说明</a></li><li><a href=/docs/programmer/langs/python/pytest/>PyTest</a></li><li><a href=/docs/programmer/langs/python/paramiko-%E4%BD%BF%E7%94%A8-sshsftp/>Paramiko 使用 Ssh&amp;sftp</a></li><li><a href=/docs/programmer/langs/python/fastapi/>FastAPI</a></li><li><a href=/docs/programmer/langs/python/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%A4%9A%E8%BF%9B%E7%A8%8B/>Python 多线程多进程</a></li><li><a href=/docs/programmer/langs/python/notespython/>Python 常用库</a></li><li><a href=/docs/programmer/langs/python/notespython/>Python 笔记</a></li><li><a href=/docs/programmer/langs/python/py%E5%B0%8F%E5%B7%A5%E5%85%B7%E5%92%8C%E5%8A%9F%E8%83%BD%E6%80%A7%E6%96%B9%E6%B3%95/>Py小工具和功能性方法</a></li><li><a href=/docs/programmer/langs/python/notespython/>解决问题</a></li></ul></li><li><a href=/docs/programmer/langs/cmake/>CMake 使用Tips</a></li><li><a href=/docs/programmer/langs/tips-of-debugers/>Tips of debuggers</a></li><li><a href=/docs/programmer/langs/tips-of-markdown/>Tips of MarkDown</a></li><li><a href=/docs/programmer/langs/java/notesjava/>愉快的Java(happy to learn the fuck java)</a></li><li><a href=/docs/programmer/langs/note-for-algo/>算法</a></li></ul></li><li><input type=checkbox id=section-d5f99046a51e5e750b61f2e037945fcc class=toggle>
<label for=section-d5f99046a51e5e750b61f2e037945fcc class="flex justify-between"><a role=button>基础工具和配置</a></label><ul><li><a href=/docs/programmer/basetc/%E7%BB%88%E7%AB%AF%E6%B5%8F%E8%A7%88%E5%99%A8/>终端浏览器</a></li><li><a href=/docs/programmer/basetc/curl/>curl</a></li><li><a href=/docs/programmer/basetc/%E6%96%87%E6%9C%AC%E4%B8%89%E5%89%91%E5%AE%A2/>文本三剑客</a></li><li><a href=/docs/programmer/basetc/tmux/>Tmux使用笔记</a></li><li><a href=/docs/programmer/basetc/obsidian%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E6%8F%92%E4%BB%B6/>Obsidian思维导图插件</a></li><li><a href=/docs/programmer/basetc/for_china/>各个软件换源</a></li><li><a href=/docs/programmer/basetc/tipsofvim/>tip Of vim</a></li><li><a href=/docs/programmer/basetc/editer/>编辑器使用</a></li><li><a href=/docs/programmer/basetc/bash/>Bash</a></li><li><a href=/docs/programmer/basetc/gitbook/>Gitbook</a></li><li><a href=/docs/programmer/basetc/vim/>Vim</a></li><li><a href=/docs/programmer/basetc/%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B/>supervisor</a></li></ul></li><li><input type=checkbox id=section-7e5360c5e7954906b897ed79085884b6 class=toggle>
<label for=section-7e5360c5e7954906b897ed79085884b6 class="flex justify-between"><a href=/docs/programmer/gui/>图形用户界面-GUI</a></label><ul><li><input type=checkbox id=section-d68552b374b14edaa2443cb0f45f94f7 class=toggle>
<label for=section-d68552b374b14edaa2443cb0f45f94f7 class="flex justify-between"><a href=/docs/programmer/gui/example/>Blog 构建</a></label><ul><li><input type=checkbox id=section-9610a10c098f6edce85f18e8d27ddc6d class=toggle>
<label for=section-9610a10c098f6edce85f18e8d27ddc6d class="flex justify-between"><a href=/docs/programmer/gui/example/table-of-contents/>Table of Contents</a></label><ul><li><a href=/docs/programmer/gui/example/table-of-contents/with-toc/>With ToC</a></li><li><a href=/docs/programmer/gui/example/table-of-contents/without-toc/>Without ToC</a></li></ul></li><li><input type=checkbox id=section-9ec2030fb4762791e574be1af10795d3 class=toggle>
<label for=section-9ec2030fb4762791e574be1af10795d3 class="flex justify-between"><a href=/docs/programmer/gui/example/shortcodes/>Shortcodes</a></label><ul><li><a href=/docs/programmer/gui/example/shortcodes/buttons/>Buttons</a></li><li><a href=/docs/programmer/gui/example/shortcodes/columns/>Columns</a></li><li><a href=/docs/programmer/gui/example/shortcodes/details/>Details</a></li><li><a href=/docs/programmer/gui/example/shortcodes/expand/>Expand</a></li><li><a href=/docs/programmer/gui/example/shortcodes/hints/>Hints</a></li><li><input type=checkbox id=section-0a13810fcdbb2cfbfd8459e55601b351 class=toggle>
<label for=section-0a13810fcdbb2cfbfd8459e55601b351 class="flex justify-between"><a href=/docs/programmer/gui/example/shortcodes/section/>Section</a></label><ul><li><a href=/docs/programmer/gui/example/shortcodes/section/first-page/>First Page</a></li><li><a href=/docs/programmer/gui/example/shortcodes/section/second-page/>Second Page</a></li></ul></li><li><a href=/docs/programmer/gui/example/shortcodes/tabs/>Tabs</a></li></ul></li></ul></li><li><a href=/docs/programmer/gui/ffmpeg/>ffmpeg 使用</a></li><li><a href=/docs/programmer/gui/pyinstaller-python%E6%89%93%E5%8C%85/>python打包</a></li><li><a href=/docs/programmer/gui/qt/>Qt/PySide</a></li><li><a href=/docs/programmer/gui/vn.py%E7%AC%94%E8%AE%B0-%E4%BA%A4%E6%98%93%E5%B9%B3%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF/>Vn.Py学习笔记（Python交易平台框架）</a></li><li><a href=/docs/programmer/gui/notespython/>图形化界面 （Python Gui）</a></li></ul></li><li><input type=checkbox id=section-0bf4f4329214e20fa67ca3e12c6aad0c class=toggle>
<label for=section-0bf4f4329214e20fa67ca3e12c6aad0c class="flex justify-between"><a role=button>平台</a></label><ul><li><a href=/docs/programmer/platforms/%E9%80%86%E5%90%91/>逆向三板斧</a></li><li><a href=/docs/programmer/platforms/os/steam/>Steam</a></li><li><a href=/docs/programmer/platforms/android/waydroid/>Linux 跑安卓</a></li><li><a href=/docs/programmer/platforms/os/ubuntu/>Ubuntu</a></li><li><a href=/docs/programmer/platforms/%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8/>阿里云使用</a></li><li><a href=/docs/programmer/platforms/wps-for-linux/>WPS for Linux</a></li><li><a href=/docs/programmer/platforms/appsflyer/>AppsFlyer-外网移动归因营销分析平台</a></li><li><a href=/docs/programmer/platforms/install_some/>安装问题</a></li><li><a href=/docs/programmer/platforms/android/android/>安卓</a></li><li><a href=/docs/programmer/platforms/os/freebsd/>FreeBSD</a></li><li><a href=/docs/programmer/platforms/os/note-of-linux/>Linux 笔记</a></li><li><a href=/docs/programmer/platforms/android/adb/>adb</a></li><li><a href=/docs/programmer/platforms/git/>Git</a></li><li><a href=/docs/programmer/platforms/os/ros/>ROS机器人操作系统</a></li><li><a href=/docs/programmer/platforms/os/problem-of-windows/>Windows 爬坑记</a></li><li><a href=/docs/programmer/platforms/tips-of-problems/>解决问题记录笔记</a></li></ul></li><li><input type=checkbox id=section-4446dd07527142b855f26d7cc8f0e617 class=toggle>
<label for=section-4446dd07527142b855f26d7cc8f0e617 class="flex justify-between"><a href=/docs/programmer/database/>Database</a></label><ul><li><a href=/docs/programmer/database/note-of-db-data-mariadb/>数据库-MariaDB篇</a></li><li><a href=/docs/programmer/database/dgraph-graph-db/>Dgraph使用小记</a></li><li><a href=/docs/programmer/database/note-of-db-data-mongodb/>数据库-MongoDB篇</a></li><li><a href=/docs/programmer/database/note-of-db-data-mysql/>数据库-MySQL篇</a></li></ul></li><li><input type=checkbox id=section-de7bfad1d124522974cdf8addfbb23f2 class=toggle>
<label for=section-de7bfad1d124522974cdf8addfbb23f2 class="flex justify-between"><a role=button>Net</a></label><ul><li><a href=/docs/programmer/net/tools/ngrok/>ngrok - 一个免费内网穿透api工具</a></li><li><a href=/docs/programmer/net/crawler/mitmproxy/>mitmproxy</a></li><li><a href=/docs/programmer/net/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/>网络编程</a></li><li><a href=/docs/programmer/net/nginx%E5%AE%9E%E7%94%A8%E9%85%8D%E7%BD%AE/>Nginx实用配置</a></li><li><a href=/docs/programmer/net/tips-of-grpc/>gRpc使用小记</a></li><li><a href=/docs/programmer/net/epoll%E5%AE%9E%E7%8E%B0/>Epoll实现</a></li></ul></li><li><input type=checkbox id=section-d325c59fc6513e1b1e05a60b192d4973 class=toggle>
<label for=section-d325c59fc6513e1b1e05a60b192d4973 class="flex justify-between"><a href=/docs/programmer/hardware/>硬件</a></label><ul><li><a href=/docs/programmer/hardware/raspberrypi/>Raspberry Pi</a></li><li><a href=/docs/programmer/hardware/screen/>Screen</a></li></ul></li></ul></li><li class=book-section-flat><span>建模和游戏</span><ul><li><a href=/docs/3dgame/blender/>Blender</a></li><li><a href=/docs/3dgame/noteofue4/>UE4 笔记</a></li></ul></li></ul><ul><li><a href=/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>AI画图</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#起手式>起手式</a><ul><li><a href=#正>正</a></li><li><a href=#反>反</a></li></ul></li><li><a href=#安装问题解决>安装问题解决</a></li><li><a href=#角色控制---contralnet>角色控制 - ContralNet</a></li><li><a href=#超分算法插件>超分算法插件</a></li><li><a href=#视频转视频>视频转视频</a></li><li><a href=#定脸输出>定脸输出</a><ul><li><a href=#检测nsfw太严格>检测nsfw太严格</a></li></ul></li></ul></nav></aside></header><article class=markdown><h2 id=起手式>起手式
<a class=anchor href=#%e8%b5%b7%e6%89%8b%e5%bc%8f>#</a></h2><h3 id=正>正
<a class=anchor href=#%e6%ad%a3>#</a></h3><pre tabindex=0><code class=language-提示词 data-lang=提示词>best quality, (mature:1.3),perfect face, beautiful face,western, sharp focus, solo,beautiful woman,sexy,shiny skin,Navy blouse, beige shorts, soft light,cinematic lighting, sunny, dusk, outdoor,depth of field,shidudou,red_dress,
</code></pre><h3 id=反>反
<a class=anchor href=#%e5%8f%8d>#</a></h3><pre tabindex=0><code class=language-反向提示词 data-lang=反向提示词>(worst quality, low quality:2), NSFW, monochrome, zombie, overexposure, watermark, text, bad anatomy, bad hand,((extra hands)),extra fingers, too many fingers, fused fingers, bad arm, distorted arm, extra arms, fused arms, extra legs, missing leg,disembodied leg,extra nipples, detached arm, liquid hand, inverted hand, disembodied limb, oversized head, extra body, extra navel, (hair between eyes),sketch, duplicate, ugly, huge eyes, text, logo, worst face, (bad and mutated hands:1.3), (blurry:2.0), horror, geometry, bad_prompt, (bad hands), (missing fingers), multiple limbs, bad anatomy, (interlocked fingers:1.2), Ugly Fingers, (extra digit and hands and fingers and legs and arms:1.4), (deformed fingers:1.2), (long fingers:1.2), bad hand, extra legs, easynegative
</code></pre><pre tabindex=0><code class=language-反向提示词 data-lang=反向提示词>monochrome, (impassive:1.4), featureless, colorless, characterless, teen, young, grotesque, 3d max, desaturated, paintings, sketches, (worst quality:1.7), (low quality:1.7), (normal quality:1.7), lowres, normal quality, skin spots, acnes, skin blemishes, age spot,close-up,badhanv4,
</code></pre><h2 id=安装问题解决>安装问题解决
<a class=anchor href=#%e5%ae%89%e8%a3%85%e9%97%ae%e9%a2%98%e8%a7%a3%e5%86%b3>#</a></h2><blockquote><p>运行<code>.sh</code>脚本自动创建的<code>venv</code>环境在<code>../venv</code>中，有时候<code>bash webui.sh</code>用不对虚拟环境时可以手动用<code>python</code>执行</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git
</span></span><span style=display:flex><span>cd stable-diffusion-webui
</span></span><span style=display:flex><span>git checkout 22bcc7be428c94e9408f589966c2040187245d81
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bash webui.sh --skip-torch-cuda-test --no-half --precision full --use-cpu all --listen
</span></span></code></pre></div><p>由于以上checkout了，所以很多库版本跟不上了。虽然它会创建新的虚拟环境，但是我的torch安装的最新版本。所以遇到了下面问题，现在罗列解决办法如下：</p><p>采用运行也可</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>source venv/bin/activate
</span></span><span style=display:flex><span>python webui.py --skip-torch-cuda-test --no-half --precision full --use-cpu all --listen
</span></span></code></pre></div><blockquote><p>TypeError: AsyncConnectionPool.<strong>init</strong>() got an unexpected keyword argument &lsquo;socket_options&rsquo;</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install --upgrade httpx
</span></span></code></pre></div><blockquote><p>ModuleNotFoundError: No module named &rsquo;torchvision.transforms.functional_tensor'</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /home/ian/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/basicsr/data/degradations.py
</span></span></code></pre></div><p><strong>修改</strong><code>from torchvision.transforms.functional_tensor import rgb_to_grayscale</code><strong>为</strong><code>from torchvision.transforms._functional_tensor import rgb_to_grayscale</code></p><h2 id=角色控制---contralnet>角色控制 - ContralNet
<a class=anchor href=#%e8%a7%92%e8%89%b2%e6%8e%a7%e5%88%b6---contralnet>#</a></h2><blockquote><p>ControlNet 1.1包括14个模型（11个生产就绪模型和3个实验性模型）：</p></blockquote><ul><li>插件地址：<ul><li>本地：extensions/sd-webui-controlnet</li><li>下载地址：<code>git clone https://github.com/Mikubill/sd-webui-controlnet</code></li></ul></li><li>插件模型地址：<ul><li>本地：models/ControlNet</li><li>下载地址：<code>git clone https://huggingface.co/lllyasviel/ControlNet-v1-1</code></li></ul></li></ul><table><thead><tr><th>模型名称</th><th>模型描述</th><th>模型和配置文件</th></tr></thead><tbody><tr><td>control_v11p_sd15_canny</td><td>使用 Canny 边缘检测算法的模型</td><td>control_v11p_sd15_canny.pth / control_v11p_sd15_canny.yaml</td></tr><tr><td>control_v11p_sd15_mlsd</td><td>使用最小长度分割线检测算法 (MLSD) 的模型</td><td>control_v11p_sd15_mlsd.pth / control_v11p_sd15_mlsd.yaml</td></tr><tr><td>control_v11f1p_sd15_depth</td><td>生成深度信息的模型</td><td>control_v11f1p_sd15_depth.pth / control_v11f1p_sd15_depth.yaml</td></tr><tr><td>control_v11p_sd15_normalbae</td><td>应用法线估计和自编码器 (BAE) 的模型</td><td>control_v11p_sd15_normalbae.pth / control_v11p_sd15_normalbae.yaml</td></tr><tr><td>control_v11p_sd15_seg</td><td>用于图像分割的模型</td><td>control_v11p_sd15_seg.pth / control_v11p_sd15_seg.yaml</td></tr><tr><td>control_v11p_sd15_inpaint</td><td>用于图像修复的模型</td><td>control_v11p_sd15_inpaint.pth / control_v11p_sd15_inpaint.yaml</td></tr><tr><td>control_v11p_sd15_lineart</td><td>用于线稿生成的模型</td><td>control_v11p_sd15_lineart.pth / control_v11p_sd15_lineart.yaml</td></tr><tr><td>control_v11p_sd15s2_lineart_anime</td><td>用于动漫线稿生成的模型</td><td>control_v11p_sd15s2_lineart_anime.pth / control_v11p_sd15s2_lineart_anime.yaml</td></tr><tr><td>control_v11p_sd15_openpose</td><td>用于人体姿势估计的模型</td><td>control_v11p_sd15_openpose.pth / control_v11p_sd15_openpose.yaml</td></tr><tr><td>control_v11p_sd15_scribble</td><td>用于涂鸦生成的模型</td><td>control_v11p_sd15_scribble.pth / control_v11p_sd15_scribble.yaml</td></tr><tr><td>control_v11p_sd15_softedge</td><td>用于软边缘生成的模型</td><td>control_v11p_sd15_softedge.pth / control_v11p_sd15_softedge.yaml</td></tr><tr><td>control_v11e_sd15_shuffle</td><td>使用深度估计和卷积神经网络的模型进行图像重排</td><td>control_v11e_sd15_shuffle.pth / control_v11e_sd15_shuffle.yaml</td></tr><tr><td>control_v11e_sd15_ip2p</td><td>使用图像修复和卷积神经网络的模型进行图像到图像的转换</td><td>control_v11e_sd15_ip2p.pth / control_v11e_sd15_ip2p.yaml</td></tr><tr><td>control_v11f1e_sd15_tile</td><td>使用深度估计和图像瓦片生成的模型</td><td>control_v11f1e_sd15_tile.pth / control_v11f1e_sd15_tile.yaml</td></tr></tbody></table><h2 id=超分算法插件>超分算法插件
<a class=anchor href=#%e8%b6%85%e5%88%86%e7%ae%97%e6%b3%95%e6%8f%92%e4%bb%b6>#</a></h2><blockquote><p><code>.pth</code>文件放到 <code>models/ESRGAN/</code> 目录下</p></blockquote><ul><li>无/None：单纯的放大，不做任何优化处理。</li><li>Lanczos：使用加权平均插值方法，利用原始图像自身的像素信息，增加图像的细节，从而提高图像的分辨率。传统的纯数学算法，效果一般。</li><li>Nearest：使用简单的插值方法，基于最近邻像素的值进行插值，从而增加图像的细节和提高分辨率。传统的纯数学算法，效果一般，还不如 Lanczos 的效果好。</li><li>LDSR：基于深度学习，通过使用轻量级的网络结构和残差学习，实现较高的超分性能和计算效率。适用于各种需要快速且准确地提高图像分辨率的应用场景，如实时视频处理、移动设备图像处理等。</li><li>ESRGAN：全称Enhanced Super-Resolution Generative Adversarial Networks （增强超分生成对抗网络），基于深度学习的超分辨率算法。增加了很多看上去很真实的纹理，但是有时可能会过度拟合，出现不好的效果。</li><li>4x-UltraSharp：基于ESRGAN做了优化，比较适合处理真人。</li><li>ESRGAN_4x：Real ESRGAN，完全使用纯合成数据来尽量贴近真实数据进行训练。腾讯贡献。</li><li>R-ESRGAN 4x+：基于Real ESRGAN的优化模型，适合放大真实风格的图片，常用。</li><li>R-ESRGAN 4x+ Anime6B：基于Real ESRGAN的优化模型，适合放大动漫风格的图片，常用。</li><li>ScuNET GAN：基于深度学习，使用生成对抗网络（GAN）进行训练。主要用在提高图像的视觉效果和感知质量，例如在图像增强、视频处理等。</li><li>ScuNET PSNR：基于深度学习，使用均方误差（PSNR）进行训练。主要用在提高图像的客观质量和准确性，例如在医学图像分析、监控视频处理等。</li><li>SwinIR_4x：使用Swin Transformer思想，基于自注意力机制的Transformer结构，适合各种图像的超分，比较通用。</li></ul><h2 id=视频转视频>视频转视频
<a class=anchor href=#%e8%a7%86%e9%a2%91%e8%bd%ac%e8%a7%86%e9%a2%91>#</a></h2><p><code>TemporalKit</code> 帧换帧</p><h2 id=定脸输出>定脸输出
<a class=anchor href=#%e5%ae%9a%e8%84%b8%e8%be%93%e5%87%ba>#</a></h2><p><strong><a href=https://github.com/s0md3v/sd-webui-roop>sd-webui-roop</a></strong></p><h3 id=检测nsfw太严格>检测nsfw太严格
<a class=anchor href=#%e6%a3%80%e6%b5%8bnsfw%e5%a4%aa%e4%b8%a5%e6%a0%bc>#</a></h3><ol><li>turn off stable diffusion webui (close terminal)</li><li>open the folder where you have stable diffusion webui installed</li><li>go to <strong>extensions/sd-webui-roop/scripts</strong></li><li>make and save a copy of the <strong>cimage.py</strong> file in case something goes wrong</li><li>open <strong>cimage.py</strong> in any text editor and delete lines 8, 7, 6, 2. The final code should look like this:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> tempfile
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>convert_to_sd</span>(img):
</span></span><span style=display:flex><span>    shapes <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#75715e># --略--</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> [any(shapes), tempfile<span style=color:#f92672>.</span>NamedTemporaryFile(delete<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>, suffix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;.png&#34;</span>)]
</span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#起手式>起手式</a><ul><li><a href=#正>正</a></li><li><a href=#反>反</a></li></ul></li><li><a href=#安装问题解决>安装问题解决</a></li><li><a href=#角色控制---contralnet>角色控制 - ContralNet</a></li><li><a href=#超分算法插件>超分算法插件</a></li><li><a href=#视频转视频>视频转视频</a></li><li><a href=#定脸输出>定脸输出</a><ul><li><a href=#检测nsfw太严格>检测nsfw太严格</a></li></ul></li></ul></nav></div></aside></main></body></html>