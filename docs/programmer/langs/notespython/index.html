<!doctype html><html lang=en-us dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="author:Ian
彻底摆脱to_dict和from_dict # 使用 pydantic # BaseModel类型支持:
b = BattleAxiePositionInfo.parse_obj(DICT_DATA) b.json() b.dict() parse_file parse_raw from pydantic import BaseModel class PositionInfo(BaseModel): error: int = -1 # 收集错误 none: int = 0 # 还没开始 clicked: int = 1 # 在client 赋此值 done: int = 2 # 在server 赋此值 xy: List[int] = [0, 0] status: int = 0 # clicked or done or none or error class BattleAxiePositionInfo(BaseModel): our: List[PositionInfo] = [PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo()] enemy: List[PositionInfo] = [PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo()] pp = BattleAxiePositionInfo() print(f&#34;pp json: {pp."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Python笔记(notes of Python)"><meta property="og:description" content="author:Ian
彻底摆脱to_dict和from_dict # 使用 pydantic # BaseModel类型支持:
b = BattleAxiePositionInfo.parse_obj(DICT_DATA) b.json() b.dict() parse_file parse_raw from pydantic import BaseModel class PositionInfo(BaseModel): error: int = -1 # 收集错误 none: int = 0 # 还没开始 clicked: int = 1 # 在client 赋此值 done: int = 2 # 在server 赋此值 xy: List[int] = [0, 0] status: int = 0 # clicked or done or none or error class BattleAxiePositionInfo(BaseModel): our: List[PositionInfo] = [PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo()] enemy: List[PositionInfo] = [PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo()] pp = BattleAxiePositionInfo() print(f&#34;pp json: {pp."><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/docs/programmer/langs/notespython/"><meta property="article:section" content="docs"><title>Python笔记(notes of Python) | Ian's Blog</title>
<link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.c58292d36b18b675680ab9baea2029204537b839ea72f258746ec0f32ce8d6c8.css integrity="sha256-xYKS02sYtnVoCrm66iApIEU3uDnqcvJYdG7A8yzo1sg=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script><script defer src=/en.search.min.569e34257b6d9d9d98bef2eba3a64a9a25f6edeb684dcfd9d09d6515476ff4fa.js integrity="sha256-Vp40JXttnZ2YvvLro6ZKmiX27etoTc/Z0J1lFUdv9Po=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Ian's Blog</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><a href=/docs/programmer/>程序员笔记</a><ul><li><input type=checkbox id=section-52f633cba5cf47818d8ec01e928396f2 class=toggle>
<label for=section-52f633cba5cf47818d8ec01e928396f2 class="flex justify-between"><a role=button>Base</a></label><ul><li><a href=/docs/programmer/base/k8s-%E9%85%8D%E5%A5%97%E8%AF%B4%E6%98%8E/>k8s 配套说明</a></li><li><a href=/docs/programmer/base/k8s-%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/>k8s技术分享</a></li><li><a href=/docs/programmer/base/k8s%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%92%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90/>k8s学习-常用命令和配置文件</a></li><li><a href=/docs/programmer/base/pypi/>PyPi</a></li><li><a href=/docs/programmer/base/tipsofweb/>Nginx高可用</a></li><li><a href=/docs/programmer/base/for_china/>各个软件换源</a></li><li><a href=/docs/programmer/base/tipsofdebugers/>tips Of Debuggers</a></li><li><a href=/docs/programmer/base/notesdjango/>Django的建站的(｡･･)ﾉﾞ</a></li><li><a href=/docs/programmer/base/tipsofvim/>tip Of vim</a></li><li><a href=/docs/programmer/base/editer/>编辑器使用</a></li><li><a href=/docs/programmer/base/noteoflinux/>Linux</a></li><li><a href=/docs/programmer/base/argo-workflow%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%92%8C%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%88%86%E6%9E%90/>Argo Workflow性能测试和使用场景分析</a></li><li><a href=/docs/programmer/base/argo-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/>Argo 使用记录</a></li><li><a href=/docs/programmer/base/kafka-%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/>Kafka 安装和使用</a></li><li><a href=/docs/programmer/base/paramiko-%E4%BD%BF%E7%94%A8-sshsftp/>Paramiko 使用 Ssh&amp;sftp</a></li><li><a href=/docs/programmer/base/pytest-%E6%B5%8B%E8%AF%95/>Py Test 测试</a></li><li><a href=/docs/programmer/base/sonar-%E4%BB%A3%E7%A0%81%E9%9D%99%E6%80%81%E6%A3%80%E6%9F%A5/>Sonar 代码静态检查</a></li><li><a href=/docs/programmer/base/%E5%B0%8F%E5%91%BD%E4%BB%A4/>小命令</a></li><li><a href=/docs/programmer/base/tip_dgraph/>Dgraph</a></li><li><a href=/docs/programmer/base/noteoffmtdata/>数据格式笔记</a></li></ul></li><li><input type=checkbox id=section-de7bfad1d124522974cdf8addfbb23f2 class=toggle>
<label for=section-de7bfad1d124522974cdf8addfbb23f2 class="flex justify-between"><a role=button>Net</a></label><ul><li><a href=/docs/programmer/net/uwsgi-%E5%A4%84%E7%90%86%E8%AE%B0%E5%BD%95/>uwsgi 处理记录</a></li><li><a href=/docs/programmer/net/tipsofgrpc/>gRpc使用小记</a></li><li><a href=/docs/programmer/net/net/>网络(Computer Network)</a></li><li><a href=/docs/programmer/net/elk%E5%9C%A8k8s%E4%B8%8A%E7%9A%84%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B/>Elk在k8s上的部署使用示例</a></li><li><a href=/docs/programmer/net/nginx%E5%AE%9E%E7%94%A8%E9%85%8D%E7%BD%AE/>Nginx实用配置</a></li></ul></li><li><input type=checkbox id=section-bf4e0d6f0b81f7b3ec08ed1fc66b874d class=toggle checked>
<label for=section-bf4e0d6f0b81f7b3ec08ed1fc66b874d class="flex justify-between"><a role=button>Langs</a></label><ul><li><a href=/docs/programmer/langs/cmake/>CMake 使用Tips</a></li><li><a href=/docs/programmer/langs/noteofgoexp/>Golang进阶笔记</a></li><li><a href=/docs/programmer/langs/noteofgolang/>Golang笔记</a></li><li><a href=/docs/programmer/langs/tipsofmarkdown/>tips Of markdown</a></li><li><a href=/docs/programmer/langs/notespython/ class=active>Python笔记(notes of Python)</a></li><li><a href=/docs/programmer/langs/notesjava/>愉快的Java(happy to learn the fuck java)</a></li></ul></li><li><input type=checkbox id=section-cd029da01a5cf373a5379dc078a74f2c class=toggle>
<label for=section-cd029da01a5cf373a5379dc078a74f2c class="flex justify-between"><a role=button>Game and Simulation</a></label><ul><li><a href=/docs/programmer/game_and_simulation/blender/>Blender</a></li><li><a href=/docs/programmer/game_and_simulation/noteofue4/>UE4 笔记</a></li></ul></li><li><input type=checkbox id=section-883e27361d38e16afb68faff3435ac0b class=toggle>
<label for=section-883e27361d38e16afb68faff3435ac0b class="flex justify-between"><a role=button>Ml</a></label><ul><li><a href=/docs/programmer/ml/tensorflow/>Tensorflow</a></li><li><a href=/docs/programmer/ml/opencv/>OpenCV</a></li><li><a href=/docs/programmer/ml/paddle/>Paddle</a></li><li><a href=/docs/programmer/ml/noteofmachinelearning/>机器学习库</a></li></ul></li><li><input type=checkbox id=section-7e5360c5e7954906b897ed79085884b6 class=toggle>
<label for=section-7e5360c5e7954906b897ed79085884b6 class="flex justify-between"><a href=/docs/programmer/gui/>Gui</a></label><ul><li><a href=/docs/programmer/gui/pyinstaller/>python打包</a></li><li><a href=/docs/programmer/gui/qt/>Qt/PySide</a></li><li><a href=/docs/programmer/gui/noteofvn_py/>Vn.Py学习笔记（Python交易平台框架）</a></li><li><a href=/docs/programmer/gui/notespython/>图形化界面 （Python Gui）</a></li></ul></li><li><input type=checkbox id=section-4446dd07527142b855f26d7cc8f0e617 class=toggle>
<label for=section-4446dd07527142b855f26d7cc8f0e617 class="flex justify-between"><a role=button>Database</a></label><ul><li><a href=/docs/programmer/database/dgraph/>Dgraph使用小记</a></li><li><a href=/docs/programmer/database/noteofdocker/>notes Of docker</a></li><li><a href=/docs/programmer/database/noteofdbdata/>db数据库</a></li><li><a href=/docs/programmer/database/mongodb/>Mongodb</a></li></ul></li><li><input type=checkbox id=section-d325c59fc6513e1b1e05a60b192d4973 class=toggle>
<label for=section-d325c59fc6513e1b1e05a60b192d4973 class="flex justify-between"><a href=/docs/programmer/hardware/>Hardware</a></label><ul><li><a href=/docs/programmer/hardware/android/>Android</a></li><li><a href=/docs/programmer/hardware/raspberrypi/>Raspberry Pi</a></li><li><a href=/docs/programmer/hardware/readme/>Readme</a></li><li><a href=/docs/programmer/hardware/screen/>Screen</a></li></ul></li><li><input type=checkbox id=section-40d35e91afa620ff2e7bf6291cfb3e1d class=toggle>
<label for=section-40d35e91afa620ff2e7bf6291cfb3e1d class="flex justify-between"><a href=/docs/programmer/software/>Software</a></label><ul><li><a href=/docs/programmer/software/bash/>Bash</a></li><li><a href=/docs/programmer/software/freebsd/>Freebsd</a></li><li><a href=/docs/programmer/software/gitbook/>Gitbook</a></li><li><a href=/docs/programmer/software/markdown/>Markdown</a></li><li><a href=/docs/programmer/software/npm/>Npm</a></li><li><a href=/docs/programmer/software/readme/>Readme</a></li><li><a href=/docs/programmer/software/vim/>Vim</a></li></ul></li><li><a href=/docs/programmer/install_some/>安装问题</a></li><li><a href=/docs/programmer/demo_test_some/>Demo Test项目中的一些东西</a></li><li><a href=/docs/programmer/tipsofproblems/>解决问题</a></li></ul></li><li class=book-section-flat><a href=/docs/example/>Hugo特殊Markdown语法说明</a><ul><li><a href=/docs/example/table-of-contents/>Table of Contents</a><ul><li><a href=/docs/example/table-of-contents/with-toc/>With ToC</a></li><li><a href=/docs/example/table-of-contents/without-toc/>Without ToC</a></li></ul></li><li class=book-section-flat><span>Shortcodes</span><ul><li><a href=/docs/example/shortcodes/buttons/>Buttons</a></li><li><a href=/docs/example/shortcodes/columns/>Columns</a></li><li><a href=/docs/example/shortcodes/details/>Details</a></li><li><a href=/docs/example/shortcodes/expand/>Expand</a></li><li><a href=/docs/example/shortcodes/hints/>Hints</a></li><li><input type=checkbox id=section-1c6a8516f710b6065a114907cef8489f class=toggle>
<label for=section-1c6a8516f710b6065a114907cef8489f class="flex justify-between"><a href=/docs/example/shortcodes/section/>Section</a></label><ul><li><a href=/docs/example/shortcodes/section/first-page/>First Page</a></li><li><a href=/docs/example/shortcodes/section/second-page/>Second Page</a></li></ul></li><li><a href=/docs/example/shortcodes/tabs/>Tabs</a></li></ul></li></ul></li></ul><ul><li><a href=/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu>
</label><strong>Python笔记(notes of Python)</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#彻底摆脱to_dict和from_dict>彻底摆脱<code>to_dict</code>和<code>from_dict</code></a><ul><li><a href=#使用-pydantic>使用 <code>pydantic</code></a></li></ul></li><li><a href=#多个类属性一次赋值>多个类属性一次赋值</a></li><li><a href=#列表表达式-二维数组边一维-取字典内变一维>列表表达式 二维数组边一维 取字典内变一维</a></li><li><a href=#pip-not-found-issue>PiP Not Found Issue</a></li><li><a href=#modulenotfounderror-no-module-named-pip>ModuleNotFoundError: No module named &lsquo;pip&rsquo;</a><ul><li><a href=#升级pip时出现问题可由下方命令修复>升级<code>PiP</code>时出现问题可由下方命令修复</a></li></ul></li><li><a href=#ssl校验>SSL校验</a><ul><li><a href=#使用国内镜像下载python>使用国内镜像下载Python</a></li><li><a href=#声明参数类型>声明参数类型</a></li><li><a href=#时间处理>时间处理</a></li><li><a href=#合并字典>合并字典</a></li><li><a href=#聊胜于无的小玩意-preety-tools>聊胜于无的小玩意 preety tools</a></li><li><a href=#ide>IDE?</a></li><li><a href=#beautifulsoup>BeautifulSoup</a></li><li><a href=#datetime字符串转时间--时间转字符串>datetime字符串转时间 时间转字符串:</a></li><li><a href=#保存數據到xlsxsqlite3csv>保存數據到xlsx，sqlite3、csv：</a></li><li><a href=#image下>Image下：</a></li><li><a href=#pandas>Pandas:</a></li></ul></li><li><a href=#闲语>闲语：</a><ul><li></li></ul></li></ul><ul><li><ul><li></li><li><a href=#变量>变量</a></li></ul></li><li><a href=#变换数据类型>变换数据类型</a><ul><li></li></ul></li><li><a href=#python3>Python3</a><ul><li><a href=#一不小心发现的语法>一不小心发现的语法</a></li><li><a href=#-与--方法>* 与 ** 方法:</a></li><li><a href=#获取指定目录下所有文件名列表>获取指定目录下所有文件名列表</a></li><li><a href=#if-else>IF ELSE</a></li><li><a href=#python-2-中的object新式类和经典类>Python 2 中的object新式类和经典类</a></li><li><a href=#queue>Queue</a></li><li><a href=#series和dataframe>series和dataframe</a></li><li><a href=#自命名创建方式>自命名创建方式</a></li><li><a href=#查看>查看</a></li><li><a href=#zip-和-数组变字典>zip 和 数组变字典</a></li><li><a href=#字典操作>字典操作</a></li><li><a href=#csv>CSV</a></li><li><a href=#txt保存>txt保存</a></li><li><a href=#json>json</a></li><li><a href=#shelve>Shelve</a></li></ul></li><li><a href=#接口>接口。</a></li><li><a href=#列表list>列表List</a><ul><li><a href=#列表操作包含以下函数>列表操作包含以下函数:</a></li><li><a href=#列表操作包含以下方法>列表操作包含以下方法:</a></li></ul></li><li><a href=#字符串连接>字符串连接</a><ul><li><a href=#方法一>方法一</a></li><li><a href=#方法二>方法二</a></li><li><a href=#方法三>方法三</a></li></ul></li><li><a href=#手动编译py文件>手动编译Py文件</a></li><li><a href=#时间>时间</a><ul><li></li><li><a href=#格式化输出当前时间>格式化输出当前时间</a></li><li><a href=#time>time</a></li><li><a href=#线程-threading>线程 threading</a></li></ul></li></ul><ul><li><ul><li><a href=#数值取整>数值取整</a></li></ul></li></ul><ul><li><a href=#对象伪类间变量传递>对象（伪类）间变量传递</a></li><li><a href=#字典中建立函数映射方便调用>字典中建立函数映射，方便调用~</a><ul><li><a href=#collections-模块>collections 模块</a></li></ul></li><li><a href=#线程>线程</a><ul><li><a href=#线程同步>线程同步</a></li></ul></li><li><a href=#队列>队列</a><ul><li><a href=#一些方法>一些方法</a></li><li><a href=#老夫的demo>老夫的Demo</a></li></ul></li><li><a href=#进程>进程</a><ul><li></li><li><a href=#将进程定义为类>将进程定义为类</a></li></ul></li><li><a href=#font-colorcc0000警个告font><em><strong>警个告</strong></em></a><ul><li></li></ul></li><li><a href=#再加一个协程>再加一个协程</a><ul><li><a href=#基础实现>基础实现：</a></li><li><a href=#较完善方案>较完善方案：</a></li><li><a href=#futures>futures</a></li></ul></li><li><a href=#父类中的变量与类中变量>父类中的变量与类中变量</a><ul><li><a href=#列表的增删添>列表的增删添</a></li><li><a href=#一个函数的有效方式只在循环中执行一次---代码日志>一个函数的有效方式只在循环中执行一次 - 代码日志</a></li><li><a href=#函数调用函数-and-语法糖->函数调用函数 and 语法糖 @</a></li><li><a href=#变量作用域>变量作用域</a></li></ul></li><li><a href=#functools>functools</a><ul><li><a href=#partial>partial</a></li></ul></li></ul><ul><li><a href=#socket>socket</a></li><li><a href=#select----与socket配合的跨平台的异步io模型>select : 与Socket配合的跨平台的异步io模型</a></li><li><a href=#引用模块>引用模块</a><ul><li><a href=#同一文件夹下>同一文件夹下</a></li><li><a href=#其下级文件here下>其下级文件"here"下</a></li><li><a href=#在上级文件下>在上级文件下</a></li><li><a href=#在上级文件的下级文件中也就是在隔壁wang文件中>在上级文件的下级文件中（也就是在隔壁“wang”文件中）</a></li></ul></li><li><a href=#解决编码问题>解决编码问题</a><ul><li><a href=#输出提示打印乱码>输出提示打印乱码</a></li><li><a href=#内存异常占用>内存异常占用</a></li></ul></li><li><a href=#异常>异常</a><ul><li><a href=#plan1->plan1 ：</a></li><li><a href=#列表的坑>列表的坑</a></li><li><a href=#staticmethod>@staticmethod</a></li><li><a href=#常见异常>常见异常</a></li></ul></li></ul><ul><li><ul><li><a href=#visualstudio模式>VisualStudio模式：</a></li><li><a href=#netbeans模式>NetBeans模式：</a></li></ul></li></ul><ul><li><a href=#数据类>数据类</a><ul><li><a href=#若出现docx模块pyinstaller打包问题>若出现docx模块pyInstaller打包问题</a></li><li><a href=#simplehttpserver>SimpleHTTPServer</a></li><li><a href=#老夫的月份生成>老夫的月份生成</a></li></ul></li><li><a href=#python36之后的奇淫技巧>Python3.6之后的奇淫技巧</a></li></ul><ul><li><ul><li><a href=#collectionss>collectionss</a></li><li><a href=#function-annotations>Function Annotations</a></li><li><a href=#logger>Logger</a></li></ul></li><li><a href=#lambda函数>lambda函数</a><ul><li><a href=#排序>排序</a></li></ul></li><li><a href=#mock>Mock</a></li></ul></nav></aside></header><article class=markdown><p>author:Ian</p><p><img src=https://www.python.org/static/img/python-logo@2x.png alt=python></p><h2 id=彻底摆脱to_dict和from_dict>彻底摆脱<code>to_dict</code>和<code>from_dict</code>
<a class=anchor href=#%e5%bd%bb%e5%ba%95%e6%91%86%e8%84%b1to_dict%e5%92%8cfrom_dict>#</a></h2><h3 id=使用-pydantic>使用 <code>pydantic</code>
<a class=anchor href=#%e4%bd%bf%e7%94%a8-pydantic>#</a></h3><p><code>BaseModel</code>类型支持:</p><ul><li>b = BattleAxiePositionInfo.parse_obj(DICT_DATA)</li><li>b.json()</li><li>b.dict()</li><li>parse_file</li><li>parse_raw</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#f92672>from</span> pydantic <span style=color:#f92672>import</span> BaseModel
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PositionInfo</span>(BaseModel):
</span></span><span style=display:flex><span>    error: int <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#75715e># 收集错误</span>
</span></span><span style=display:flex><span>    none: int <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e># 还没开始</span>
</span></span><span style=display:flex><span>    clicked: int <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#75715e># 在client 赋此值</span>
</span></span><span style=display:flex><span>    done: int <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#75715e># 在server 赋此值</span>
</span></span><span style=display:flex><span>    xy: List[int] <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>    status: int <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e># clicked or done or none or error</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BattleAxiePositionInfo</span>(BaseModel):
</span></span><span style=display:flex><span>    our: List[PositionInfo] <span style=color:#f92672>=</span> [PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo()]
</span></span><span style=display:flex><span>    enemy: List[PositionInfo] <span style=color:#f92672>=</span> [PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo()]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>pp <span style=color:#f92672>=</span> BattleAxiePositionInfo()
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;pp json: </span><span style=color:#e6db74>{</span>pp<span style=color:#f92672>.</span>json()<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>dict_pp <span style=color:#f92672>=</span> pp<span style=color:#f92672>.</span>dict()
</span></span><span style=display:flex><span>pp <span style=color:#f92672>=</span> BattleAxiePositionInfo<span style=color:#f92672>.</span>parse_obj(dict_pp)
</span></span></code></pre></div><blockquote><blockquote><blockquote><p>pp json: {&ldquo;our&rdquo;: [{&ldquo;error&rdquo;: -1, &ldquo;none&rdquo;: 0, &ldquo;clicked&rdquo;: 1, &ldquo;done&rdquo;: 2, &ldquo;xy&rdquo;: [0, 0], &ldquo;status&rdquo;: 0}, {&ldquo;error&rdquo;: -1, &ldquo;none&rdquo;: 0, &ldquo;clicked&rdquo;: 1, &ldquo;done&rdquo;: 2, &ldquo;xy&rdquo;: [0, 0], &ldquo;status&rdquo;: 0}, {&ldquo;error&rdquo;: -1, &ldquo;none&rdquo;: 0, &ldquo;clicked&rdquo;: 1, &ldquo;done&rdquo;: 2, &ldquo;xy&rdquo;: [0, 0], &ldquo;status&rdquo;: 0}, {&ldquo;error&rdquo;: -1, &ldquo;none&rdquo;: 0, &ldquo;clicked&rdquo;: 1, &ldquo;done&rdquo;: 2, &ldquo;xy&rdquo;: [0, 0], &ldquo;status&rdquo;: 0}, {&ldquo;error&rdquo;: -1, &ldquo;none&rdquo;: 0, &ldquo;clicked&rdquo;: 1, &ldquo;done&rdquo;: 2, &ldquo;xy&rdquo;: [0, 0], &ldquo;status&rdquo;: 0}, {&ldquo;error&rdquo;: -1, &ldquo;none&rdquo;: 0, &ldquo;clicked&rdquo;: 1, &ldquo;done&rdquo;: 2, &ldquo;xy&rdquo;: [0, 0], &ldquo;status&rdquo;: 0}], &ldquo;enemy&rdquo;: [{&ldquo;error&rdquo;: -1, &ldquo;none&rdquo;: 0, &ldquo;clicked&rdquo;: 1, &ldquo;done&rdquo;: 2, &ldquo;xy&rdquo;: [0, 0], &ldquo;status&rdquo;: 0}, {&ldquo;error&rdquo;: -1, &ldquo;none&rdquo;: 0, &ldquo;clicked&rdquo;: 1, &ldquo;done&rdquo;: 2, &ldquo;xy&rdquo;: [0, 0], &ldquo;status&rdquo;: 0}, {&ldquo;error&rdquo;: -1, &ldquo;none&rdquo;: 0, &ldquo;clicked&rdquo;: 1, &ldquo;done&rdquo;: 2, &ldquo;xy&rdquo;: [0, 0], &ldquo;status&rdquo;: 0}, {&ldquo;error&rdquo;: -1, &ldquo;none&rdquo;: 0, &ldquo;clicked&rdquo;: 1, &ldquo;done&rdquo;: 2, &ldquo;xy&rdquo;: [0, 0], &ldquo;status&rdquo;: 0}, {&ldquo;error&rdquo;: -1, &ldquo;none&rdquo;: 0, &ldquo;clicked&rdquo;: 1, &ldquo;done&rdquo;: 2, &ldquo;xy&rdquo;: [0, 0], &ldquo;status&rdquo;: 0}, {&ldquo;error&rdquo;: -1, &ldquo;none&rdquo;: 0, &ldquo;clicked&rdquo;: 1, &ldquo;done&rdquo;: 2, &ldquo;xy&rdquo;: [0, 0], &ldquo;status&rdquo;: 0}]}</p></blockquote></blockquote></blockquote><h2 id=多个类属性一次赋值>多个类属性一次赋值
<a class=anchor href=#%e5%a4%9a%e4%b8%aa%e7%b1%bb%e5%b1%9e%e6%80%a7%e4%b8%80%e6%ac%a1%e8%b5%8b%e5%80%bc>#</a></h2><p>No:</p><pre tabindex=0><code>self.a = a
self.b = b
</code></pre><p>Yes:</p><pre tabindex=0><code>self.__dict__.update({&#34;a&#34;: a, &#34;b&#34;: b})
</code></pre><h2 id=列表表达式-二维数组边一维-取字典内变一维>列表表达式 二维数组边一维 取字典内变一维
<a class=anchor href=#%e5%88%97%e8%a1%a8%e8%a1%a8%e8%be%be%e5%bc%8f-%e4%ba%8c%e7%bb%b4%e6%95%b0%e7%bb%84%e8%be%b9%e4%b8%80%e7%bb%b4-%e5%8f%96%e5%ad%97%e5%85%b8%e5%86%85%e5%8f%98%e4%b8%80%e7%bb%b4>#</a></h2><pre tabindex=0><code>knowninfo = {&#39;axie_id3&#39;: {&#39;init_cards&#39;: [&#39;Sunder Claw&#39;, &#39;October Treat&#39;, &#39;Gas Unleash&#39;, &#39;Disguise&#39;], &#39;sort&#39;: 4}}
[vv for _,v in knowninfo.items() for vv in v[&#34;init_cards&#34;]]
# [&#39;Sunder Claw&#39;, &#39;October Treat&#39;, &#39;Gas Unleash&#39;, &#39;Disguise&#39;]
</code></pre><h2 id=pip-not-found-issue>PiP Not Found Issue
<a class=anchor href=#pip-not-found-issue>#</a></h2><p>使用<code>pip</code>安装某包时， 提示让更新， 按提示操作更新没效果没反应再用就提示<code>ModuleNotFoundError: No module named 'pip'</code> (ˉ▽ˉ；)&mldr;</p><h2 id=modulenotfounderror-no-module-named-pip>ModuleNotFoundError: No module named &lsquo;pip&rsquo;
<a class=anchor href=#modulenotfounderror-no-module-named-pip>#</a></h2><h3 id=升级pip时出现问题可由下方命令修复>升级<code>PiP</code>时出现问题可由下方命令修复
<a class=anchor href=#%e5%8d%87%e7%ba%a7pip%e6%97%b6%e5%87%ba%e7%8e%b0%e9%97%ae%e9%a2%98%e5%8f%af%e7%94%b1%e4%b8%8b%e6%96%b9%e5%91%bd%e4%bb%a4%e4%bf%ae%e5%a4%8d>#</a></h3><pre tabindex=0><code>python -m ensurepip
python -m pip install --upgrade pip
</code></pre><h2 id=ssl校验>SSL校验
<a class=anchor href=#ssl%e6%a0%a1%e9%aa%8c>#</a></h2><p>安装EasyOCR时,
<code>reader = easyocr.Reader(['ch_sim','en'])</code>
下载到接近90,结果报错了&mldr;. 估计是SSL问题加入以下两条,不知如何.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#f92672>import</span> ssl
</span></span><span style=display:flex><span>ssl<span style=color:#f92672>.</span>_create_default_https_context <span style=color:#f92672>=</span> ssl<span style=color:#f92672>.</span>_create_unverified_context
</span></span></code></pre></div><p>from http.client
<code>To revert to the previous, unverified, behavior ssl._create_unverified_context() can be passed to the context parameter.</code></p><h3 id=使用国内镜像下载python>使用国内镜像下载Python
<a class=anchor href=#%e4%bd%bf%e7%94%a8%e5%9b%bd%e5%86%85%e9%95%9c%e5%83%8f%e4%b8%8b%e8%bd%bdpython>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>	pip install --index https://pypi.mirrors.ustc.edu.cn/simple/ dlib<span style=color:#f92672>(</span>numpy等包名<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 一键更新pip 包资源(利用管道grep传输查询到的需要更新包名，传输到install命令)</span>
</span></span><span style=display:flex><span>    pip3 freeze --local | grep -v <span style=color:#e6db74>&#39;^\-e&#39;</span> | cut -d <span style=color:#f92672>=</span> -f <span style=color:#ae81ff>1</span>  | xargs -n1 pip3 install -U
</span></span><span style=display:flex><span>    <span style=color:#75715e># 权限不够的话就在`pip3 install` 之前加`sudo`反正我不习惯用`root`</span>
</span></span></code></pre></div><h3 id=声明参数类型>声明参数类型
<a class=anchor href=#%e5%a3%b0%e6%98%8e%e5%8f%82%e6%95%b0%e7%b1%bb%e5%9e%8b>#</a></h3><p>python3 在定义函数的时候可以声明函数类型啦：虽然不做限制，但作为<code>label</code>还是蛮好的。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#f92672>import</span> io
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>add</span>(x:int, y:int) <span style=color:#f92672>-&gt;</span> int:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> x <span style=color:#f92672>+</span> y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>write</span>(f: io<span style=color:#f92672>.</span>BytesIO, data: bytes) <span style=color:#f92672>-&gt;</span> bool:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        f<span style=color:#f92672>.</span>write(data)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>IOError</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>True</span>
</span></span></code></pre></div><p>终于不会之后写的忘了，要调用函数还得看半天这个函数应该怎么用…</p><h3 id=时间处理>时间处理
<a class=anchor href=#%e6%97%b6%e9%97%b4%e5%a4%84%e7%90%86>#</a></h3><p>以下可以做周、月的加减处理
relativedelta examples
Let’s begin our trip:</p><pre tabindex=0><code>from datetime import *; from dateutil.relativedelta import *
import calendar
</code></pre><h4 id=store-some-values>Store some values:
<a class=anchor href=#store-some-values>#</a></h4><pre tabindex=0><code>NOW = datetime.now()
TODAY = date.today()
NOW
</code></pre><blockquote><p>datetime.datetime(2003, 9, 17, 20, 54, 47, 282310)</p></blockquote><pre tabindex=0><code>TODAY
</code></pre><blockquote><p>datetime.date(2003, 9, 17)</p></blockquote><h4 id=next-month>Next month
<a class=anchor href=#next-month>#</a></h4><blockquote><blockquote><blockquote><p>NOW+relativedelta(months=+1)</p></blockquote></blockquote></blockquote><pre tabindex=0><code>datetime.datetime(2003, 10, 17, 20, 54, 47, 282310)
</code></pre><h3 id=合并字典>合并字典
<a class=anchor href=#%e5%90%88%e5%b9%b6%e5%ad%97%e5%85%b8>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>a <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>b <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;a&#39;</span>: <span style=color:#ae81ff>1</span>}
</span></span><span style=display:flex><span>c <span style=color:#f92672>=</span> {<span style=color:#f92672>**</span>a, <span style=color:#f92672>**</span>b}
</span></span></code></pre></div><p>key重复<code>b</code>中覆盖<code>a</code>, 否则单纯合并。</p><h3 id=聊胜于无的小玩意-preety-tools>聊胜于无的小玩意 preety tools
<a class=anchor href=#%e8%81%8a%e8%83%9c%e4%ba%8e%e6%97%a0%e7%9a%84%e5%b0%8f%e7%8e%a9%e6%84%8f-preety-tools>#</a></h3><h5 id=彩色输出>彩色输出
<a class=anchor href=#%e5%bd%a9%e8%89%b2%e8%be%93%e5%87%ba>#</a></h5><p>模块名儿忘了，以后贴2019.03.01 03:08
one minute later:
<code>pip3 install ansicolors</code></p><pre tabindex=0><code>from colors import red, green, blue
print(red(&#39;This is red&#39;))
print(green(&#39;This is green&#39;))
print(blue(&#39;This is blue&#39;))

from colors import color
for i in range(256):
    print(color(&#39;Color #%d&#39; % i, fg=i))
</code></pre><p>以上程序只能写在<code>.py</code>文件中,运行，而不能在…‘偷懒模式‘中。</p><h4 id=python3-threadpoolexecutor-线程池内库>Python3 ThreadPoolExecutor 线程池内库
<a class=anchor href=#python3-threadpoolexecutor-%e7%ba%bf%e7%a8%8b%e6%b1%a0%e5%86%85%e5%ba%93>#</a></h4><p>在<code>python3</code>之后不久，有关线程池的使用就被集成到内库之中。
<code>from concurrent.futures import ThreadPoolExecutor</code>
使用方法：</p><pre tabindex=0><code>    ThreadPoolExecutor(max_workers=12)
    # 设置线程池大小
    .submit(func_name, (para))    # 提交任务
    .done()    # 查看任务是否完成
    .cancel()    # 没有被放入线程池中才能生效
    .result()    # 获取该任务返回值

    from concurrent.futures import as_completed
    # 用于取出所有任务结果，省去一直用.done去查看的繁琐。但该方法
# 是一个生成器，所以任务未完成会阻塞。 还有 wait map 等用法就去看文档吧。
</code></pre><h5 id=安装错误>安装错误？
<a class=anchor href=#%e5%ae%89%e8%a3%85%e9%94%99%e8%af%af>#</a></h5><p>居然有<code>pip3 install XX</code>的错误…这也是因为有旧版<code>pip3</code>存留。需要</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$bash -d pip3 
</span></span><span style=display:flex><span>$bash -r pip3
</span></span></code></pre></div><p>来清理shell中旧版pip缓存。</p><h3 id=ide>IDE?
<a class=anchor href=#ide>#</a></h3><p>其实要不要IDE都无所为，因为本就是脚本，要IDE只能说打开一个陌生项目查看时能够跳转函数。至于<code>vim</code>大概不能跳转吧，毕竟跳转需要把文件都加载才能实现。emm 来来，IDE的话就<code>PyCharm</code>除了编程页面颜色难看之外其他功能都不错，另外不支持中文路径，不过应该不是由于<code>Python</code>语言造成的，因为蟒蛇脚本是可以在中文路径下运行di<a href=date:2018%e5%b9%b45%e6%9c%8828%e6%97%a517%e7%82%b916%e5%88%86>date:2018年5月28日17点16分</a></p><h4 id=print语句-含有自动换行所以要想不换行的话需要在结尾加一个如>print语句： 含有自动换行，所以要想不换行的话需要在结尾加一个",&ldquo;如：
<a class=anchor href=#print%e8%af%ad%e5%8f%a5-%e5%90%ab%e6%9c%89%e8%87%aa%e5%8a%a8%e6%8d%a2%e8%a1%8c%e6%89%80%e4%bb%a5%e8%a6%81%e6%83%b3%e4%b8%8d%e6%8d%a2%e8%a1%8c%e7%9a%84%e8%af%9d%e9%9c%80%e8%a6%81%e5%9c%a8%e7%bb%93%e5%b0%be%e5%8a%a0%e4%b8%80%e4%b8%aa%e5%a6%82>#</a></h4><pre><code>for i in range(0,5):

	print i,
</code></pre><p>而Python3版本则应该也可以 print(a,b,c);然而Python2.7不行</p><h4 id=根据字典中值大小排列>根据字典中值大小排列：
<a class=anchor href=#%e6%a0%b9%e6%8d%ae%e5%ad%97%e5%85%b8%e4%b8%ad%e5%80%bc%e5%a4%a7%e5%b0%8f%e6%8e%92%e5%88%97>#</a></h4><pre><code>sorted(dict2.iteritems(),key=lambda item:item[1],reverse=True) 
# item[0]即根据键来排列[1]为根据对应值
</code></pre><h4 id=format如>format：如:
<a class=anchor href=#format%e5%a6%82>#</a></h4><pre><code>print('my name is{0},and my age is{1}'.format('song',18))
</code></pre><h5 id=or>or:
<a class=anchor href=#or>#</a></h5><pre><code>url = 'http://www.google.com/page={}/'

newsurl = url.format(i)
# 旋即其后内容则代替{}位置
</code></pre><p>另，在{a}{b}{c}可通過format(a=1,b=2,c=3)來賦值</p><hr><h3 id=beautifulsoup>BeautifulSoup
<a class=anchor href=#beautifulsoup>#</a></h3><h4 id=select语句在内容前加可以获得其内容如>select语句：在内容前加&rsquo;#&lsquo;可以获得其内容，如：
<a class=anchor href=#select%e8%af%ad%e5%8f%a5%e5%9c%a8%e5%86%85%e5%ae%b9%e5%89%8d%e5%8a%a0%e5%8f%af%e4%bb%a5%e8%8e%b7%e5%be%97%e5%85%b6%e5%86%85%e5%ae%b9%e5%a6%82>#</a></h4><pre><code>soup.select('artibodyTitle')[0].text
select().contents
&quot;&quot;&quot;
把标签变成不同list，同List中的不同元素 然后用[0]可取得第一个元素内容，而不与后方的内容合到一起
*.strip()可将取出的‘\t\t’移除
&quot;&quot;&quot;
.select('time-source span a')
# 从time-source中的&lt;span下&lt;a下取得内容e
.select('.productPrice')[0].text
# 獲取class=&quot;productPrice&quot;下價格內容
</code></pre><hr><h3 id=datetime字符串转时间--时间转字符串>datetime字符串转时间 时间转字符串:
<a class=anchor href=#datetime%e5%ad%97%e7%ac%a6%e4%b8%b2%e8%bd%ac%e6%97%b6%e9%97%b4--%e6%97%b6%e9%97%b4%e8%bd%ac%e5%ad%97%e7%ac%a6%e4%b8%b2>#</a></h3><pre><code>from datetime import datetime
dt = datetime.strptime(timesource,'%Y年%m月%d日%H:%M')(****年*月*日*22:03)
dt.strftime('%Y-%m-%d')
</code></pre><hr><h3 id=保存數據到xlsxsqlite3csv>保存數據到xlsx，sqlite3、csv：
<a class=anchor href=#%e4%bf%9d%e5%ad%98%e6%95%b8%e6%93%9a%e5%88%b0xlsxsqlite3csv>#</a></h3><pre><code>.to_excel('name.xlsx')：输出为excle文件
import sqlite3  #保存到数据库
with sqlite3.connect('name.sqlite') as db:
	df.to_sql('name',con = db)
</code></pre><h5 id=从数据库取出>从数据库取出
<a class=anchor href=#%e4%bb%8e%e6%95%b0%e6%8d%ae%e5%ba%93%e5%8f%96%e5%87%ba>#</a></h5><pre><code>with sqlite3.connect('name.sqlite') as db:
	df2 = pandas.read_sql_query('SELECT' * FROM name',con = db)
</code></pre><h4 id=類型錯誤-typeerror-a-bytes-like-object-is-required-not-str>類型錯誤 TypeError: a bytes-like object is required, not &lsquo;str&rsquo;
<a class=anchor href=#%e9%a1%9e%e5%9e%8b%e9%8c%af%e8%aa%a4-typeerror-a-bytes-like-object-is-required-not-str>#</a></h4><pre><code>csv_file = open(&quot;rent.csv&quot;,&quot;wb&quot;)    
csv_writer = csv.writer(csv_file, delimiter=',')    #创建writer对象，指定文件与分隔符
writer.writerow(['title', 'summary', 'year', 'id', 'count', 'link'])
</code></pre><p>Python2.7 轉到 3.5下時提示由此錯誤，代碼爲</p><h5 id=原因解決方法>原因，解決方法：
<a class=anchor href=#%e5%8e%9f%e5%9b%a0%e8%a7%a3%e6%b1%ba%e6%96%b9%e6%b3%95>#</a></h5><pre><code>因爲Python3.5 對於str與bytes類型區分變得敏感，所以原本在2.7下正常的代碼不能正常運行。
雖然，利用str.encode() 或者 str = bytes(str, encoding = 'utf-8')可以轉換格式
然而錯誤依然有……解決辦法則是放棄論壇裏的說法，找到官網Demo
</code></pre><h5 id=更改如下>更改如下：
<a class=anchor href=#%e6%9b%b4%e6%94%b9%e5%a6%82%e4%b8%8b>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>	csvfile <span style=color:#f92672>=</span> open(<span style=color:#e6db74>&#39;goodsList.csv&#39;</span>, <span style=color:#e6db74>&#39;w&#39;</span>, newline<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>	spamwriter <span style=color:#f92672>=</span> csv<span style=color:#f92672>.</span>writer(csvfile, delimiter<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;,&#39;</span>)
</span></span><span style=display:flex><span>	spamwriter<span style=color:#f92672>.</span>writerow([productTitle, productPrice, productShop])
</span></span></code></pre></div><p>細節在於，在打開文件的時候去除<code>wb</code>裏面的<code>b</code>即不用二進制模式打開。</p><hr><h3 id=image下>Image下：
<a class=anchor href=#image%e4%b8%8b>#</a></h3><p>获取图像分辨率：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>	im <span style=color:#f92672>=</span> Image<span style=color:#f92672>.</span>open(<span style=color:#ae81ff>0.0</span>)
</span></span><span style=display:flex><span>	width <span style=color:#f92672>=</span> im<span style=color:#f92672>.</span>size[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>	height <span style=color:#f92672>=</span> im<span style=color:#f92672>.</span>size[<span style=color:#ae81ff>1</span>]
</span></span></code></pre></div><hr><h3 id=pandas>Pandas:
<a class=anchor href=#pandas>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>	box <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(<span style=color:#e6db74>&#34;filename.csv, index_col=&#34;</span>Date<span style=color:#e6db74>&#34;, parse_dates=Ture) </span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>#读入文件，讲Date作为日期</span>
</span></span><span style=display:flex><span>	box<span style=color:#f92672>.</span>columns <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;&#39;</span>,<span style=color:#e6db74>&#39;&#39;</span>] 
</span></span><span style=display:flex><span>	<span style=color:#75715e># 更改列名</span>
</span></span><span style=display:flex><span>	box[<span style=color:#e6db74>&#39;new&#39;</span>] <span style=color:#f92672>=</span> box[<span style=color:#e6db74>&#39;1&#39;</span>]<span style=color:#f92672>+</span>box[<span style=color:#e6db74>&#39;2&#39;</span>]
</span></span><span style=display:flex><span>	<span style=color:#75715e># 新增一列为1与2之和</span>
</span></span><span style=display:flex><span>	box<span style=color:#f92672>.</span>resample(<span style=color:#e6db74>&#39;d&#39;</span>, <span style=color:#e6db74>&#39;sum&#39;</span>) 
</span></span><span style=display:flex><span>	<span style=color:#75715e># 重新按照‘d’:每天，进行采样  方式为取和(&#39;w&#39;,&#39;sum&#39;)所有数据在一周内进行取和</span>
</span></span></code></pre></div><h2 id=闲语>闲语：
<a class=anchor href=#%e9%97%b2%e8%af%ad>#</a></h2><h4 id=while-true与while-1的区别>while True与while 1的区别：
<a class=anchor href=#while-true%e4%b8%8ewhile-1%e7%9a%84%e5%8c%ba%e5%88%ab>#</a></h4><p>在Python2 中，循环判断一亿次，我的小电脑的执行速度是</p><pre><code>while one: 9.97739481926
while_true: 18.8063299656
while 1 以压倒性胜利。
</code></pre><p>到了Python3中，则成了</p><pre><code>while one: 16.101972927001043
while_true: 16.25536527499935
</code></pre><blockquote><p>嗯，不错，不分伯仲——个鬼啊。整体变差了好吧。0.0 原因待明。</p></blockquote><h1 id=python-小记->Python 小记 📖
<a class=anchor href=#python-%e5%b0%8f%e8%ae%b0->#</a></h1><p>先贴一个客观的教程文档网站<a href=http://www.runoob.com/python/python-tutorial.html>http://www.runoob.com/python/python-tutorial.html</a></p><h4 id=windows-下添加环境变量cmd中python2-与python3-共存>Windows 下添加环境变量，CMD中Python2 与Python3 共存
<a class=anchor href=#windows-%e4%b8%8b%e6%b7%bb%e5%8a%a0%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8fcmd%e4%b8%adpython2-%e4%b8%8epython3-%e5%85%b1%e5%ad%98>#</a></h4><p>Windows 下 把python2 路径加入到环境变量中，再修改python2.exe可以和python3区分方便在CMD中调用，但代价就是经常命令报错……</p><p>不过也可以使用py -2来区分，所以还是不改名字了吧
Windows 下 用<code>py -2 -m pip install ***</code>以及<code>py -3 -m pip install ***</code>来区分安装到python2 或者 python3.</p><h3 id=变量>变量
<a class=anchor href=#%e5%8f%98%e9%87%8f>#</a></h3><p>类下直接定义的变量可以继承，然而并不能被自己的函数所调用，意义不明…</p><p>被继承的类可以调用继承类中定义的self.* 变量，俺认为这是因为它们在实例时都被当成了self 本身。另外，优先调用自己中的self变量，没有，才会去被继承类中去查找（先后顺序可得前方解答）。</p><h2 id=变换数据类型>变换数据类型
<a class=anchor href=#%e5%8f%98%e6%8d%a2%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b>#</a></h2><p>Python 在从服务器接收或者发送数据时需要字符类型转换，&lsquo;&lsquo;&lsquo;struct&rsquo;&lsquo;&lsquo;便是为此而工作</p><h4 id=structpack>struct.pack
<a class=anchor href=#structpack>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span>    <span style=color:#f92672>import</span> struct
</span></span><span style=display:flex><span>    a <span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>    b <span style=color:#f92672>=</span> <span style=color:#ae81ff>400</span>
</span></span><span style=display:flex><span>    str <span style=color:#f92672>=</span> struct<span style=color:#f92672>.</span>pack(<span style=color:#e6db74>&#34;ii&#34;</span>, a, b)  
</span></span><span style=display:flex><span>    <span style=color:#75715e>#转换后的str虽然是字符串类型，但相当于其他语言中的字节流（字节数组），可以在网络</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#上传输</span>
</span></span><span style=display:flex><span>    print <span style=color:#e6db74>&#39;length:&#39;</span>, len(str)
</span></span><span style=display:flex><span>    print str
</span></span><span style=display:flex><span>    print repr(str)
</span></span></code></pre></div><blockquote><p>&mdash;- result
length: 8
> #&mdash;-这里是乱码
&lsquo;/x14/x00/x00/x00/x90/x01/x00/x00&rsquo;</p></blockquote><p>格式符”i”表示转换为int，’ii’表示有两个int变量。进行转换后的结果长度为8个字节（int类型占用4个字节，两个int为8个字节），可以看到输出的结果是乱码，因为结果是二进制数据，所以显示为乱码。可以使用python的内置函数repr来获取可识别的字符串，其中十六进制的0x00000014, 0x00001009分别表示20和400。</p><h4 id=structunpack>struct.unpack
<a class=anchor href=#structunpack>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span>    str <span style=color:#f92672>=</span> struct<span style=color:#f92672>.</span>pack(<span style=color:#e6db74>&#34;ii&#34;</span>, <span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>400</span>)
</span></span><span style=display:flex><span>    a1, a2 <span style=color:#f92672>=</span> struct<span style=color:#f92672>.</span>unpack(<span style=color:#e6db74>&#34;ii&#34;</span>, str)
</span></span><span style=display:flex><span>    print <span style=color:#e6db74>&#39;a1:&#39;</span>, a1
</span></span><span style=display:flex><span>    print <span style=color:#e6db74>&#39;a2:&#39;</span>, a2
</span></span></code></pre></div><blockquote><p>&mdash;- result:
a1: 20
a2: 400</p></blockquote><p>struct.unpack做的工作刚好与struct.pack相反，用于将字节流转换成python数据类型。它的函数原型为：struct.unpack(fmt, string)，该函数返回一个元组。</p><h4 id=structcalcsize>struct.calcsize
<a class=anchor href=#structcalcsize>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    struct<span style=color:#f92672>.</span>calcsize(<span style=color:#e6db74>&#39;i&#39;</span>)
</span></span><span style=display:flex><span>    struct<span style=color:#f92672>.</span>calcsize(<span style=color:#e6db74>&#39;ii&#39;</span>)
</span></span><span style=display:flex><span>    struct<span style=color:#f92672>.</span>calcsize(<span style=color:#e6db74>&#39;iic&#39;</span>)
</span></span><span style=display:flex><span>    struct<span style=color:#f92672>.</span>calcsize(<span style=color:#e6db74>&#39;iicd&#39;</span>)
</span></span></code></pre></div><blockquote><p>4
8
9
24</p></blockquote><p><code>struct.calcsize</code>用于计算格式字符串所对应的结果的长度，如：<code>struct.calcsize(‘ii’)</code>，返回<code>8</code>。因为两个<code>int</code>类型所占用的长度是<code>8</code>个字节。</p><h4 id=structpack_into-structunpack_from>struct.pack_into, struct.unpack_from
<a class=anchor href=#structpack_into-structunpack_from>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#f92672>import</span> struct
</span></span><span style=display:flex><span>    <span style=color:#f92672>from</span> ctypes <span style=color:#f92672>import</span> create_string_buffer
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    buf <span style=color:#f92672>=</span> create_string_buffer(<span style=color:#ae81ff>12</span>)
</span></span><span style=display:flex><span>    print repr(buf<span style=color:#f92672>.</span>raw)
</span></span><span style=display:flex><span>    struct<span style=color:#f92672>.</span>pack_into(<span style=color:#e6db74>&#34;iii&#34;</span>, buf, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    print repr(buf<span style=color:#f92672>.</span>raw)
</span></span><span style=display:flex><span>    print struct<span style=color:#f92672>.</span>unpack_from(<span style=color:#e6db74>&#39;iii&#39;</span>, buf, <span style=color:#ae81ff>0</span>)
</span></span></code></pre></div><blockquote><p>&mdash;- result
&rsquo;/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00&rsquo;
&rsquo;/x01/x00/x00/x00/x02/x00/x00/x00/xff/xff/xff/xff&rsquo;
(1, 2, -1)</p></blockquote><h2 id=python3>Python3
<a class=anchor href=#python3>#</a></h2><p>在Python3中，转换字符串时，不能直接<code>pack('8s', 'i am str')</code>, 需要将字符串转换成二进制所以在语法中标记<code>pack('8s', b'i am str')</code>使用<code>'b'</code>来进行标记</p><p>以上来自<a href=http://python.jobbole.com/81554/>Darkbull</a> 这是转贴地址，不知道为什么我看的转贴挂的原帖地址失效了 😰</p><hr><hr><hr><h3 id=一不小心发现的语法>一不小心发现的语法
<a class=anchor href=#%e4%b8%80%e4%b8%8d%e5%b0%8f%e5%bf%83%e5%8f%91%e7%8e%b0%e7%9a%84%e8%af%ad%e6%b3%95>#</a></h3><p>py2.7</p><pre><code>while 'a' in a or b:
    break
# 没错，意思就是如果a或者是b包含‘a’的话…     
</code></pre><h3 id=-与--方法>* 与 ** 方法:
<a class=anchor href=#-%e4%b8%8e--%e6%96%b9%e6%b3%95>#</a></h3><p>呃，原来<code>*</code>在MarkDown里面是斜体的意思啊——需要斜体显示的前后各一个星号</p><pre><code>def a(* a, **b):
    balabala
</code></pre><p>这里的*a， a在函数中被赋值为一个元组，b被赋值为一个字典。所以在调用的时候嘞，只能把能往一个元组里塞的放在前面，而能够生成字典的放在后面</p><pre><code>a(1,2,3,4,5,6,7,8,9,a:'a',b:1,c:'nihao')
</code></pre><p>就像这么一样来调用。 另外，def a()函数中还能在前方再新加一个输入</p><pre><code>def aa(jiushishuowo, *a, **b):
    pass
</code></pre><p>这样的话，那么在调用的时候第一个逗号前面的内容会赋值给它。over，回去拿快递了~~~</p><p>🐶 年假前再来补充一下：约定名*args, **kwargs</p><h4 id=获取文件路径>获取文件路径
<a class=anchor href=#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e8%b7%af%e5%be%84>#</a></h4><pre><code>path = os.path.abspath(os.path.dirname(__file__))
# 获取当前运行文件的路径。需在本地有此文件，在命令行中出错

for root, subdirs, files in os.walk(path):
# 遍历所有path下文件  path为要遍历的路径
</code></pre><h4 id=同获取路径>同获取路径
<a class=anchor href=#%e5%90%8c%e8%8e%b7%e5%8f%96%e8%b7%af%e5%be%84>#</a></h4><pre><code>os.path.abspath('./')
os.path.abspath('Deskop')
os.path.abspath('Deskop') + os.path.sep
</code></pre><blockquote><p>&lsquo;C:\Users\Administrator&rsquo;</p></blockquote><blockquote><p>&lsquo;C:\Users\Administrator\Deskop&rsquo;</p></blockquote><blockquote><p>&lsquo;C:\Users\Administrator\Deskop\&rsquo;</p></blockquote><h3 id=获取指定目录下所有文件名列表>获取指定目录下所有文件名列表
<a class=anchor href=#%e8%8e%b7%e5%8f%96%e6%8c%87%e5%ae%9a%e7%9b%ae%e5%bd%95%e4%b8%8b%e6%89%80%e6%9c%89%e6%96%87%e4%bb%b6%e5%90%8d%e5%88%97%e8%a1%a8>#</a></h3><pre><code>os.listdir('D\IFData')
</code></pre><hr><h5 id=__dict__>_<em>dict</em>_
<a class=anchor href=#__dict__>#</a></h5><pre><code>class Province:
    country = 'China'

    def __init__(self, name, count):
        self.name = name
        self.count = count

    def func(self, *args, **kwargs):
        print 'func'

print Province.__dict__     # 类输出
obj1 = Province('HuBei', 100)
print obj1.__dict__         # 对象1
obj2 = Province('hulala', 3888)
print obj2.__dict__         # 对象2
</code></pre><blockquote><p><code>{'country': 'China', '__module__': '__main__', 'func': &lt;function func at 0x049EF470>, '__init__': &lt;function __init__ at 0x049EF4F0>, '__doc__': None}</code></p></blockquote><blockquote><p><code>{'count': 100, 'name': 'HuBei'}</code></p></blockquote><blockquote><p><code>{'count': 3888, 'name': 'hulala'}</code></p></blockquote><p>类输出的是全局的函数，变量等信息。
对象输出的只是对象拥有的普通变量而已</p><p>呃(⊙﹏⊙)，等下再去拿吧… 差点忘了说，这个__dict__与字典相配合来回赋值简直舒服… 步骤为：将某个变量=一个类（数据类（就是能够a.b这么调用的数值））然后这个变量就能a.b的这么使用了。 而后也能通过a.<strong>dict</strong>（这是一个字典）再将所需要的数值取出来，转赋值为别的东西。 反正我是用到了… 在想要实现一个函数来保存一个变量的某些属性的时候。（呃(⊙﹏⊙)用爱去理解我所描述的场合吧。）</p><h3 id=if-else>IF ELSE
<a class=anchor href=#if-else>#</a></h3><pre><code># 执行时会将IF前面整个表达式作为判断结果后的执行对象，
# 而不是仅仅替换某一个数字或者变量。  即 下方表达式运算结果
# 不是  `4`       和      `5`  而是如下所示
a = 1 + 3 if 1 == 2 else 2 + 1
a
a = 1 + 3 if 1 == 1 else 2 + 1
a
</code></pre><blockquote><p>3</p></blockquote><blockquote><p>4</p></blockquote><hr><hr><hr><h3 id=python-2-中的object新式类和经典类>Python 2 中的object新式类和经典类
<a class=anchor href=#python-2-%e4%b8%ad%e7%9a%84object%e6%96%b0%e5%bc%8f%e7%b1%bb%e5%92%8c%e7%bb%8f%e5%85%b8%e7%b1%bb>#</a></h3><pre><code># 作者：邹冲
# 链接：https://www.zhihu.com/question/19754936/answer/202650790
class A:
    def foo(self):
    print('called A.foo()')

class B(A):
    pass

class C(A):
    def foo(self):
    print('called C.foo()')

class D(B, C): 
    pass

if __name__ == '__main__':
    d = D() 
    d.foo()
</code></pre><blockquote><p>B、C 是 A 的子类，D 多继承了 B、C 两个类，其中 C 重写了 A 中的 foo() 方法。</p></blockquote><blockquote><p>如果 A 是经典类（如上代码），当调用 D 的实例的 foo() 方法时，Python 会按照深度优先的方法去搜索 foo() ，路径是 B-A-C ，执行的是 A 中的 foo() ；</p></blockquote><blockquote><p>如果 A 是新式类，当调用 D 的实例的 foo() 方法时，Python 会按照广度优先的方法去搜索 foo() ，路径是 B-C-A ，执行的是 C 中的 foo() 。</p></blockquote><blockquote><p>因为 D 是直接继承 C 的，从逻辑上说，执行 C 中的 foo() 更加合理，因此新式类对多继承的处理更为合乎逻辑。</p></blockquote><blockquote><p>在 Python 3.x 中的新式类貌似已经兼容了经典类，无论 A 是否继承 object 类， D 实例中的 foo() 都会执行 C 中的 foo() 。但是在 Python 2.7 中这种差异仍然存在，因此还是推荐使用新式类，要继承 object 类。</p></blockquote><h4 id=items>.items()
<a class=anchor href=#items>#</a></h4><p>一个字典 a，其a.items()为将每对对应值组为一个元组。即使键值也为一个字典也是将此字典作为元组元素。(￣▽￣)&rdquo; emm</p><hr><hr><h3 id=queue>Queue
<a class=anchor href=#queue>#</a></h3><p>队列，先进先出型。可存数字、字符…嘛，Python里啥都一样。所以啥都能存。用于事件按顺序执行。示例如~：</p><pre><code>import Queue
mqueue = Queue.Queue(maxsize = 3)
mqueue.put(10)
mqueue.put(15)
mqueue.put(12)
# 此时如果再往里存呢，就会卡住… 持续等待有空位置
# 所以
mqueue.get()        #取出第一个存入
mqueue.put('14sas4')  #继续存
## 在接触的项目中，是借用字典，来将处理函数作为Value，将Keys，put到队
列中，再进行取出执行。
</code></pre><p>如果队列中没有数值之后再<code>get</code>也会卡住……
所以以下东西就显得比较重要了：</p><h3 id=series和dataframe>series和dataframe
<a class=anchor href=#series%e5%92%8cdataframe>#</a></h3><p>先贴来源：<a href=http://blog.csdn.net/ly_ysys629/article/details/54944153>http://blog.csdn.net/ly_ysys629/article/details/54944153</a></p><h5 id=属性>属性
<a class=anchor href=#%e5%b1%9e%e6%80%a7>#</a></h5><pre><code>series    ：.index, .values, .name, .index.name
dataframe ：.columns, .index, .values
</code></pre><h5 id=font-colorredseriesfont>series:
<a class=anchor href=#font-colorredseriesfont>#</a></h5><p>一组数组（列表或元组），series除了一组数据外还包括一组索引（即只有行索引），索引可自行定义也可利用Series(),自动生成索引;</p><h5 id=font-colorreddataframefont>dataframe:
<a class=anchor href=#font-colorreddataframefont>#</a></h5><p>是表格型数据，既有行索引又有列索引，每列数据可以为不同类型数据（数值、字符串、布尔型值），可利用DataFrame（其他数据，dataframe属性)指定dataframe的属性创建dataframe。</p><h5 id=实例>实例
<a class=anchor href=#%e5%ae%9e%e4%be%8b>#</a></h5><h5 id=series>series
<a class=anchor href=#series>#</a></h5><pre><code>#创建series
import pandas as pd
obj_list=[1,2,3,4]
obj_tuple=(4,5,6,7)
obj_dict={'a':[1,2],'b':[2,3],'c':[3,4],'d':[4,5]}
obj_series_list=pd.Series(obj_list)#通过列表创建series
obj_series_tuple=pd.Series(obj_tuple,index=list('abcd'))
#通过元组创建series
obj_series_dict=pd.Series(obj_dict)#通过字典创建series
#定义属性
obj_series_list.index.name='zimu'
obj_series_list.name='data'

print &quot;#通过列表创建series&quot;
print obj_series_list
print &quot;#通过元组创建series&quot;
print obj_series_tuple
print &quot;#通过字典创建series&quot;
print obj_series_dict
#显示series类型及属性
print type(obj_series_list),obj_series_list.dtype
print obj_series_list.index,obj_series_list.index.name
print obj_series_list.values,obj_series_list.name
</code></pre><blockquote><p>#通过列表创建series</p></blockquote><blockquote><p>zimu</p></blockquote><blockquote><p>0 1</p></blockquote><blockquote><p>1 2</p></blockquote><blockquote><p>2 3</p></blockquote><blockquote><p>3 4</p></blockquote><blockquote><p>Name: data, dtype: int64</p></blockquote><hr><blockquote><p>#通过元组创建series</p></blockquote><pre><code>a    4
b    5
c    6
d    7
dtype: int32
</code></pre><hr><blockquote><p>#通过字典创建series</p></blockquote><pre><code>a    [1, 2]
b    [2, 3]
c    [3, 4]
d    [4, 5]
dtype: object
&lt;class 'pandas.core.series.Series'&gt; int64
RangeIndex(start=0, stop=4, step=1, name=u'zimu') zimu
[1 2 3 4] data
</code></pre><h5 id=dataframe>dataframe
<a class=anchor href=#dataframe>#</a></h5><pre><code>#创建dataframe
import pandas as pd
import numpy as np
obj_dict={'a':[1,2],'b':[2,3],'c':[3,4],'d':[4,5]}
obj_array=np.array([[1,2,3,4],[3,4,5,6]])
obj_series_1=pd.Series([11,12,13,14])
obj_series_2=pd.Series([21,22,23,24])
obj_dataframe_dict=pd.DataFrame(obj_dict)
#通过字典创建dataframe
obj_dataframe_array=pd.DataFrame(obj_array,index=['one','two'])
#通过矩阵创建dataframe
obj_dataframe_series=pd.DataFrame([obj_series_1,obj_series_2])
#通过series创建dataframe
obj_dataframe_dataframe=pd.DataFrame(obj_dataframe_series,index=
    [0,1,'one'],columns=[0,1,2,'a'])
#通过其他dataframe创建dataframe
print &quot;#通过字典创建dataframe&quot;
print obj_dataframe_dict
print &quot;#通过矩阵创建dataframe&quot;
print obj_dataframe_array
print &quot;#通过series创建dataframe&quot;
print obj_dataframe_series
print &quot;#通过其他dataframe创建dataframe&quot;
print obj_dataframe_dataframe
#dataframe属性
print obj_dataframe_dataframe.dtypes
print obj_dataframe_dataframe.values
print obj_dataframe_dataframe.columns
print obj_dataframe_dataframe.index
</code></pre><blockquote><p>输出结果为：
#通过字典创建dataframe
a b c d
0 1 2 3 4
1 2 3 4 5
#通过矩阵创建dataframe
0 1 2 3
one 1 2 3 4
two 3 4 5 6
#通过series创建dataframe
0 1 2 3
0 11 12 13 14
1 21 22 23 24
#通过其他dataframe创建dataframe
0 1 2 a
0 11.0 12.0 13.0 NaN
1 21.0 22.0 23.0 NaN
one NaN NaN NaN NaN
0 float64
1 float64
2 float64
a float64
dtype: object
[[ 11. 12. 13. nan]
[ 21. 22. 23. nan]
[ nan nan nan nan]]
Index([0, 1, 2, u&rsquo;a&rsquo;], dtype=&lsquo;object&rsquo;)
Index([0, 1, u&rsquo;one&rsquo;], dtype=&lsquo;object&rsquo;)
取数据的话，便是<code>obj_dataframe_dict['a'][0]</code>取出数值即为<code>1</code></p></blockquote><h3 id=自命名创建方式>自命名创建方式
<a class=anchor href=#%e8%87%aa%e5%91%bd%e5%90%8d%e5%88%9b%e5%bb%ba%e6%96%b9%e5%bc%8f>#</a></h3><pre><code>df4 = pd.DataFrame(np.random.randn(6, 4), 
    index=[u'第二', 4, 3, 2, 1, 0], columns=[u'第一',5,4,1])
#行为：     第一，      5，         4，         1
#列为：第二 -0.091305   ...
#       4   ...
#       3
#       2
#       1
#       0                                       ...
</code></pre><h3 id=查看>查看
<a class=anchor href=#%e6%9f%a5%e7%9c%8b>#</a></h3><pre><code>.dtypes     查看各行数据格式
.head()     查看前几行（默认5）
.tail()         查看后几行
.index      查看数据框引索
.columns        查看列名
.values     数据值
.T          转置
.sort           排序  .sort(columns = '***')根据***列数据进行排序
</code></pre><h6 id=font-colorgreen取数据方法见上font>取数据方法见上
<a class=anchor href=#font-colorgreen%e5%8f%96%e6%95%b0%e6%8d%ae%e6%96%b9%e6%b3%95%e8%a7%81%e4%b8%8afont>#</a></h6><h3 id=zip-和-数组变字典>zip 和 数组变字典
<a class=anchor href=#zip-%e5%92%8c-%e6%95%b0%e7%bb%84%e5%8f%98%e5%ad%97%e5%85%b8>#</a></h3><pre><code>a = [1,2,3]
b = [4,5,6]
c = [4,5,6,7,8]
zipped = zip(a,b)
</code></pre><blockquote><p>[(1, 4), (2, 5), (3, 6)]</p></blockquote><pre><code>zip(a,c)
</code></pre><blockquote><p>[(1, 4), (2, 5), (3, 6)]</p></blockquote><pre><code>zip(*zipped)
</code></pre><blockquote><p>[(1, 2, 3), (4, 5, 6)]</p></blockquote><p>zip 也可以二维矩阵变换（矩阵的行列互换）
因为其作用为按序号重组数组。（其英语翻译为拉链……）</p><h4 id=数组变字典>数组变字典~：
<a class=anchor href=#%e6%95%b0%e7%bb%84%e5%8f%98%e5%ad%97%e5%85%b8>#</a></h4><pre><code>dic(zip(a, b))
# a中值为key b中值为values
</code></pre><h3 id=字典操作>字典操作
<a class=anchor href=#%e5%ad%97%e5%85%b8%e6%93%8d%e4%bd%9c>#</a></h3><pre><code>dict= sorted(dic.items(), key=lambda d:d[0]) 
# 将字典按照键值升序排列
# d： 无所谓的参数
# d[0]：0为升序，1为降序
# 如果是字符型，那么‘1’‘10’‘12’… 才是‘2’’20‘，因为Python的比较是按照
    # 按序提取第一个字符进行比较。所以要排序，还是得用int
# 排序之后被转换为list类型。
for i in orderIDic:
            spamwriter.writerow(orderIDic[i])
# 变为
for i in orderIDic:
            spamwriter.writerow(i[1])
</code></pre><hr><h4 id=namedtuple>namedtuple
<a class=anchor href=#namedtuple>#</a></h4><pre><code>import collections
person = collections.namedtuple('P', 'name age gender')
# P: 类名   后面空格隔开的为变量名称

bob = person(name = 'B', age = 30, gender = 'male')
jane = Person(name = 'J', age = 29, gender = 'female')
for people in [bob, jane]:
    print (&quot;%s is %d years old %s&quot; % people)
</code></pre><p>元组的命名—— 命名之后可以由bob.name 来调用 （看了那个Python面向对象进阶， 老多<code>__hahah__()</code>函数之后，所以这明显是当成基本类的变量在用了。 emm 这么么说也不贴切 😔 果然理解程度还是跟不上的… emm 现在需要跟进的不是怎么用Python了，而是python的用法了，走起~ 继续写future笔记去了—— 这个得看的明白点儿😄）</p><hr><hr><h3 id=csv>CSV
<a class=anchor href=#csv>#</a></h3><h4 id=读取>读取
<a class=anchor href=#%e8%af%bb%e5%8f%96>#</a></h4><pre><code>import csv
reader = csv.reader(open('test.csv', 'rb')) 
for item in reader:
    print item
</code></pre><h5 id=官方是这么教你的>官方是这么教你的
<a class=anchor href=#%e5%ae%98%e6%96%b9%e6%98%af%e8%bf%99%e4%b9%88%e6%95%99%e4%bd%a0%e7%9a%84>#</a></h5><pre><code>#我记得我写过一次，怎么不见了…
import csv
with open('names.csv') as csvfile:
    reader = csv.DictReader(csvfilr)
    for row in reader:
        print (row['first_name'], row['last_name'])
</code></pre><h4 id=写入>写入
<a class=anchor href=#%e5%86%99%e5%85%a5>#</a></h4><pre><code>import csv
writer = csv.writer(open('test2.csv', 'wb'))
writer.writerow(['col1', 'col2', 'col3'])
data = [range(3)  for i in range(3)]
for item in data:
    writer.writerow(item)
</code></pre><h5 id=官方教你这么写>官方教你这么写
<a class=anchor href=#%e5%ae%98%e6%96%b9%e6%95%99%e4%bd%a0%e8%bf%99%e4%b9%88%e5%86%99>#</a></h5><pre><code>import csv
with open('names.csv') as csvfile:
    fieldnames = ['first_name', 'last_name']
    writer = csv.DictWriter(csvfile, fieldnames = fieldnames)
    
    writer.writeheader()
    writer.writerow('first_name' : 'Naled', 'last_name' : 'Beans')
</code></pre><p>须注意之处：writer.writerow()方法中的参数是list类型，如果你想在A1列写入&rsquo;hello&rsquo;，则必须是writer.writerow(&lsquo;hello&rsquo;)，不然&rsquo;hello&rsquo;会被看成是个list从而被分写入5列。写入CSV时，CSV文件的创建必须加上&rsquo;b&rsquo;参数，即csv.writer(open(&rsquo;test.csv&rsquo;, &lsquo;wb&rsquo;))，不然会出现隔行的现象。网上搜到的解释是：python正常写入文件的时候，每行的结束默认添加&rsquo;\n’，即0x0D，而writerow命令的结束会再增加一个0x0D0A，因此对于windows系统来说，就是两行，而采用’b&rsquo;参数，用二进制进行文件写入，系统默认是不添加0x0D的。</p><h4 id=关闭>关闭
<a class=anchor href=#%e5%85%b3%e9%97%ad>#</a></h4><pre><code>csvfile.close()
</code></pre><p>值得注意的是上面的文档是覆盖型创建，即，写数据只能在关闭文档之前完成，之后再打开文件，再写就会覆盖掉之前（清空再写） 下面的txt <code>mode = 'a'</code> 就属于添加型写入了，再关闭之后再打开会在最后一条开始继续添加。然后将csv中的&rsquo;w&rsquo;替换成‘a’就行了。记得带上&rsquo;b&rsquo;要不会出现数据隔行…隔行显示</p><h5 id=官方还叫你这么写嘞>官方还叫你这么写嘞
<a class=anchor href=#%e5%ae%98%e6%96%b9%e8%bf%98%e5%8f%ab%e4%bd%a0%e8%bf%99%e4%b9%88%e5%86%99%e5%98%9e>#</a></h5><pre><code>with open('na1me.csv', 'ab') as csvfile:
    spamwriter = csv.writer(csvfile, delimiter = ',')
    spamwriter.writerow(['adasd', 'w.c.w', 'lol'])
</code></pre><h3 id=txt保存>txt保存
<a class=anchor href=#txt%e4%bf%9d%e5%ad%98>#</a></h3><pre><code># 基本与CSV一致，emm其实都是保存为文档，就只有个后缀区别…
def text_save(content,filename,mode='a'):
    # Try to save a list variable in txt file.
    file = open(filename,mode)
    file.write(str(content)+'\n')
    file.close()
text_save(np.mean(self.trueRange[start: ]), 'atr.txt')
</code></pre><p>关于保存路径呢，windows 下必须?用 ‘.\.\..’没错，当前路径（相对路径）和绝对路径都是这样用的</p><p><code>mode</code> <code>b</code>代表二进制模式打开，而<code>a</code>就有用了，表示有此文件就打开，没的话就创建。</p><h3 id=json>json
<a class=anchor href=#json>#</a></h3><pre><code>和上述txt文件保存差不过，嗯应该说完全一样。因为我是用的是`json.dumps`
</code></pre><h4 id=dumpsloads>dumps、loads
<a class=anchor href=#dumpsloads>#</a></h4><pre><code>    这两个语句前者是将字典转化为str格式，后者是将str转换为字典。所以保  
存到文件也不过是 字典 -&gt; str -&gt;(用`write`写入)-&gt; 本地文件， 反之。
    与之相对比的是`dump`和`load`这个是直接保存至文件，但`s`多好用
需注意的是`dumps`有`indent`参数可用来指明转换为`str`之后的缩进参    
数。一般`4`（所以说这里说的是空格数？）。  哦，`loads`直接加载文件也
行，不用读出来`str`再去转换
</code></pre><h3 id=shelve>Shelve
<a class=anchor href=#shelve>#</a></h3><pre><code>对象的持久化存储——
目的：Shelve模块为任意能够pickle的Python对象实现持久化存储，并提供一个类似字典的
</code></pre><h2 id=接口>接口。
<a class=anchor href=#%e6%8e%a5%e5%8f%a3>#</a></h2><hr><hr><h2 id=列表list>列表List
<a class=anchor href=#%e5%88%97%e8%a1%a8list>#</a></h2><p>需提前定义，不能像变量一样随用随写…</p><p>以下来自于 <a href=http://www.jb51.net/article/47978.htm>Python 列表(List)操作方法详解</a></p><h3 id=列表操作包含以下函数>列表操作包含以下函数:
<a class=anchor href=#%e5%88%97%e8%a1%a8%e6%93%8d%e4%bd%9c%e5%8c%85%e5%90%ab%e4%bb%a5%e4%b8%8b%e5%87%bd%e6%95%b0>#</a></h3><pre><code>cmp(list1, list2)       # 比较两个列表的元素 
len(list)               # 列表元素个数 
max(list)               # 返回列表元素最大值 
min(list)               # 返回列表元素最小值 
list(seq)               # 将元组转换为列表 
</code></pre><h3 id=列表操作包含以下方法>列表操作包含以下方法:
<a class=anchor href=#%e5%88%97%e8%a1%a8%e6%93%8d%e4%bd%9c%e5%8c%85%e5%90%ab%e4%bb%a5%e4%b8%8b%e6%96%b9%e6%b3%95>#</a></h3><pre><code>list.append(obj)        # 在列表末尾添加新的对象
list.count(obj)         # 统计某个元素在列表中出现的次数
list.extend(seq)        # 在列表末尾一次性
    # 追加另一个序列中的多个值（用新列表扩展原来的列表）
list.index(obj)         # 从列表中找出某个值第一个匹配项的索引位置
list.insert(index, obj) # 将对象插入列表
list.pop(obj=list[-1])      #移除列表中的一个元素（默认最后一个元素）
    #，并且返回该元素的值
list.remove(obj)        # 移除列表中某个值的第一个匹配项
list.reverse()          # 反向列表中元素
list.sort([func])           # 对原列表进行排序
</code></pre><h2 id=字符串连接>字符串连接
<a class=anchor href=#%e5%ad%97%e7%ac%a6%e4%b8%b2%e8%bf%9e%e6%8e%a5>#</a></h2><p>来自<a href=http://www.cnblogs.com/chenjingyi/p/5741901.html>http://www.cnblogs.com/chenjingyi/p/5741901.html</a></p><h3 id=方法一>方法一
<a class=anchor href=#%e6%96%b9%e6%b3%95%e4%b8%80>#</a></h3><pre><code>website = 'python' + 'tab' + '.com'
</code></pre><h3 id=方法二>方法二
<a class=anchor href=#%e6%96%b9%e6%b3%95%e4%ba%8c>#</a></h3><pre><code>listStr = ['python', 'tab', '.com'] 
website = ''.join(listStr)
</code></pre><h3 id=方法三>方法三
<a class=anchor href=#%e6%96%b9%e6%b3%95%e4%b8%89>#</a></h3><pre><code>website = '%s%s%s' % ('python', 'tab', '.com')
</code></pre><p>结论： 连接个数少使用一，个数多使用二。 推荐，使用三 ~ ，~</p><h2 id=手动编译py文件>手动编译Py文件
<a class=anchor href=#%e6%89%8b%e5%8a%a8%e7%bc%96%e8%af%91py%e6%96%87%e4%bb%b6>#</a></h2><pre><code>import compileall
compileall.compile_dir(目录)
</code></pre><hr><hr><hr><h2 id=时间>时间
<a class=anchor href=#%e6%97%b6%e9%97%b4>#</a></h2><h4 id=datetime>datetime
<a class=anchor href=#datetime>#</a></h4><pre><code>from datetime import datetime
a = datetime.now().replace(hour=0, minute=0, second=0, microsecond=0) 
a.year  
a.hour      #int 型变量
</code></pre><blockquote><p>2017</p></blockquote><blockquote><p>0</p></blockquote><blockquote><p>获取当前本机电脑💻时间，replace为自定义某个数值。单独调用某个信息如a.year、a.hour</p></blockquote><h4 id=datetime-类型变量可直接相减获得间隔日>datetime 类型变量可直接相减获得间隔日
<a class=anchor href=#datetime-%e7%b1%bb%e5%9e%8b%e5%8f%98%e9%87%8f%e5%8f%af%e7%9b%b4%e6%8e%a5%e7%9b%b8%e5%87%8f%e8%8e%b7%e5%be%97%e9%97%b4%e9%9a%94%e6%97%a5>#</a></h4><pre><code>a = datetime.datetime.now()
# datetime.datetime(2017, 10, 18, 8, 52, 27, 5000)
b = datetime(2005, 2, 6)
# datetime.datetime(2005, 2, 6, 0, 0)
c = a - b 
# datetime.timedelta(4637, 31947, 5000)
c.days  # int 型
</code></pre><blockquote><p>4637</p></blockquote><h4 id=timedelta>timedelta
<a class=anchor href=#timedelta>#</a></h4><p>timedelta为datetime类型相减而来（datetime不能相加…），然后嘞，datetime.timedelta(1,35340)这是它的样子，前是天数，后是秒数。也就是说所有相减就是告诉你相距多少天零多少秒，都是标准单位（误）。要取出可 <code>.days</code> 和 `seconds``</p><h3 id=格式化输出当前时间>格式化输出当前时间
<a class=anchor href=#%e6%a0%bc%e5%bc%8f%e5%8c%96%e8%be%93%e5%87%ba%e5%bd%93%e5%89%8d%e6%97%b6%e9%97%b4>#</a></h3><pre><code>import time
print time.strftime('%Y-%m-%d %H:%M:%S',time.localtime(time.time()))
</code></pre><blockquote><p>2017-08-21 10:54:31</p></blockquote><h3 id=time>time
<a class=anchor href=#time>#</a></h3><pre><code>import time
time.time()     # 返回当前时间的时间戳（1970纪元后经过的浮点秒数）
# 返回值为float 可直接拿来运算，还是很舒服的。
</code></pre><hr><hr><h3 id=线程-threading>线程 threading
<a class=anchor href=#%e7%ba%bf%e7%a8%8b-threading>#</a></h3><h4 id=用于实现定时器>用于实现定时器
<a class=anchor href=#%e7%94%a8%e4%ba%8e%e5%ae%9e%e7%8e%b0%e5%ae%9a%e6%97%b6%e5%99%a8>#</a></h4><pre><code>import threading
def hel():
    print &quot;so you sucsessful to kill 5 seconde&quot;
time = threading.Timer(5, hel)
time.start()
</code></pre><blockquote><p>so you sucsessful to kill 5 seconde
在命令行中按下回车后消失，很有意思，并且当第二调用时time.start()时就会——</p></blockquote><blockquote><p>RuntimeError: threads can only be started once</p></blockquote><h4 id=循环调用>循环调用
<a class=anchor href=#%e5%be%aa%e7%8e%af%e8%b0%83%e7%94%a8>#</a></h4><p>以上的不能循环调用的话就没啥价值了，所以下面有个妖艳用法为：</p><pre><code>def fun():
    print &quot;So jian&quot;
    global timer
    timer = threading.Timer(5.5, fun)
    timer.start()
timer = threading.Timer(1, fun)
timer.start()
# 通过自调自的方法循环创建时间线程，另外，timer.cancel()可停止定时器工作。
# 值得注意的是，上面不循环调用的 在执行完函数之后依然会持续运行
# 所以得记得关闭。
</code></pre><p>比方说这个妖艳……呃 本来打算在调用函数里写上cancel但是…依然之后不能再次start()</p><h4 id=线程font-color10e5a6池font>线程池
<a class=anchor href=#%e7%ba%bf%e7%a8%8bfont-color10e5a6%e6%b1%a0font>#</a></h4><p>自实现或者使用<code>threadpool.ThreadPool</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span>    <span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> threadpool  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>sayhello</span>(str):
</span></span><span style=display:flex><span>        print <span style=color:#e6db74>&#34;Hello &#34;</span>,str
</span></span><span style=display:flex><span>            time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    name_list <span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;dd&#39;</span>,<span style=color:#e6db74>&#39;aa&#39;</span>,<span style=color:#e6db74>&#39;bb&#39;</span>,<span style=color:#e6db74>&#39;cc&#39;</span>]
</span></span><span style=display:flex><span>    start_time <span style=color:#f92672>=</span> time<span style=color:#f92672>.</span>time()
</span></span><span style=display:flex><span>    pool <span style=color:#f92672>=</span> threadpool<span style=color:#f92672>.</span>ThreadPool(<span style=color:#ae81ff>10</span>) 
</span></span><span style=display:flex><span>    requests <span style=color:#f92672>=</span> threadpool<span style=color:#f92672>.</span>makeRequests(sayhello, name_list) 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> req <span style=color:#f92672>in</span> requests:
</span></span><span style=display:flex><span>        pool<span style=color:#f92672>.</span>putRequest(req) 
</span></span><span style=display:flex><span>    pool<span style=color:#f92672>.</span>wait() 
</span></span><span style=display:flex><span>    print <span style=color:#e6db74>&#39;</span><span style=color:#e6db74>%d</span><span style=color:#e6db74> second&#39;</span><span style=color:#f92672>%</span> (time<span style=color:#f92672>.</span>time()<span style=color:#f92672>-</span>start_time)
</span></span></code></pre></div><hr><hr><hr><h1 id=math-库>Math 库
<a class=anchor href=#math-%e5%ba%93>#</a></h1><pre><code>import math
</code></pre><h3 id=数值取整>数值取整
<a class=anchor href=#%e6%95%b0%e5%80%bc%e5%8f%96%e6%95%b4>#</a></h3><pre><code>ceil、floor    还有一个不是此库中的round
</code></pre><p>找来翻译就是 ： 小区、地板、回合………… 好吧，是（抹灰泥装镶板、最低的，最小的、周围，围绕）</p><pre><code># 使用方法为：
math.ceil(3.12)
math.floor(3.24)
round(3.51)
round(3.10999999999, 10)
#取值时的参考步长，好像（😭）是10就是最大步长了，再大没意义
# 手动赋值超过9位也就是10位小数的时候在PyCharm里直接赋值调试就自己约了，
# 而一般产生精度漂移都是十几位小数开外的。emm   就这么表达了，看得懂
</code></pre><blockquote><p>4.0</p></blockquote><blockquote><p>3.0</p></blockquote><blockquote><p>4.0</p></blockquote><blockquote><p>3.11</p></blockquote><hr><hr><hr><hr><h1 id=令程序有序执行的方法>令程序有序执行的方法
<a class=anchor href=#%e4%bb%a4%e7%a8%8b%e5%ba%8f%e6%9c%89%e5%ba%8f%e6%89%a7%e8%a1%8c%e7%9a%84%e6%96%b9%e6%b3%95>#</a></h1><h2 id=对象伪类间变量传递>对象（伪类）间变量传递
<a class=anchor href=#%e5%af%b9%e8%b1%a1%e4%bc%aa%e7%b1%bb%e9%97%b4%e5%8f%98%e9%87%8f%e4%bc%a0%e9%80%92>#</a></h2><p>Like This：</p><pre><code>class A(object):
&quot;&quot;&quot;docstring for A&quot;&quot;&quot;
    def __init__(self, name):
        super(A, self).__init__()
        self.name = name
        self.a = 0
    def da(self):
        print self.name
        print self.a    
a = A('I am A')
a.da()


class B(object):
&quot;&quot;&quot;docstring for B&quot;&quot;&quot;
    def __init__(self, aclass):
        super(B, self).__init__()
        self.aclass = aclass
        self.aclass.a += 1
    def dada(self):
        self.aclass.da()
b = B(a)
b.dada()

class C(object):
&quot;&quot;&quot;docstring for B&quot;&quot;&quot;
    def __init__(self, aclass):
        super(C, self).__init__()
        self.aclass = aclass
        self.aclass.a += 1
    def dada(self):
        self.aclass.da()
c = C(a)
c.dada()
</code></pre><blockquote><p>I am A</p></blockquote><blockquote><p>0</p></blockquote><blockquote><p>I am A</p></blockquote><blockquote><p>1</p></blockquote><blockquote><p>I am A</p></blockquote><blockquote><p>2</p></blockquote><p>B与C分别在去改变读取在A中定义的数值。 嗯，没错，这么看的画确实时Python基础……所以没有这个基础的我看起来前期还挺费劲。当然，理解很好理解，就是在实现方法上不知原理的话就很难过。最主要的是，知道了原理在自己编写的时候可以的心用手，信手拈来。嗯~ o(<em>￣▽￣</em>)o就是这么写意和惬意。在VN.PY中有记录，不过还是拿过来吧，毕竟python用法</p><hr><h2 id=字典中建立函数映射方便调用>字典中建立函数映射，方便调用~
<a class=anchor href=#%e5%ad%97%e5%85%b8%e4%b8%ad%e5%bb%ba%e7%ab%8b%e5%87%bd%e6%95%b0%e6%98%a0%e5%b0%84%e6%96%b9%e4%be%bf%e8%b0%83%e7%94%a8>#</a></h2><pre><code>def add(x, y):
    return x + y
def sub(x, y):
    return x - y
a = {'add':add, 'sub':sub}
a
a['add'](1, 2)
a['sub'](1, 2)
</code></pre><blockquote><p>{&lsquo;add&rsquo;: &lt;function add at 0x02D162B0>, &lsquo;sub&rsquo;: &lt;function sub at 0x02D16530>}</p></blockquote><blockquote><p>3</p></blockquote><blockquote><p>-1</p></blockquote><h3 id=collections-模块>collections 模块
<a class=anchor href=#collections-%e6%a8%a1%e5%9d%97>#</a></h3><h4 id=namedtuple-1>namedtuple
<a class=anchor href=#namedtuple-1>#</a></h4><pre><code>给元组元素命名（貌似写过这个笔记欸，不过现在才发现这几个都是在一个模块下的）
</code></pre><h4 id=deque>deque
<a class=anchor href=#deque>#</a></h4><pre><code>#双端队列  快速插入 以及取出
l.insert(0, v)
l.pop(0)

l.popleft()
l.appendleft()
# 数据量大时，速度优于原生list
</code></pre><h6 id=a-game>a Game:
<a class=anchor href=#a-game>#</a></h6><pre><code>import sys
import time
from collections import deque
fancy_loading = deque('&gt;--------------------')
while True:
    print '\r%s' % ''.join(fancy_loading),
    fancy_loading.rotate(1)
    sys.stdout.flush()
    time.sleep(0.08)
    Result:
# 一个无尽循环的跑马灯
</code></pre><h4 id=counter>Counter
<a class=anchor href=#counter>#</a></h4><pre><code># 计数器
from collections import Counter
s = '''A Counter is a dict subclass for counting hashable objects. 
    It is an unordered collection where elements are stored as 
    dictionary keys and their counts are stored as dictionary values. 
    Counts are allowed to be any integer value including zero or 
    negative counts. The Counter class is similar to bags or multisets in other         
    languages.'''.lower()
c = Counter(s)
print c.most_common(5)
</code></pre><blockquote><p>[(&rsquo; &lsquo;, 54), (&rsquo;e&rsquo;, 32), (&rsquo;s&rsquo;, 25), (&lsquo;a&rsquo;, 24), (&rsquo;t&rsquo;, 24)]</p></blockquote><h4 id=orderdict>OrderDict
<a class=anchor href=#orderdict>#</a></h4><pre><code># 有序字典：记录了数据存入时的先后顺序
# 不过发现一个骚操作：
</code></pre><h4 id=defaultdict>defaultdict
<a class=anchor href=#defaultdict>#</a></h4><pre><code># 默认字典： 当key不存在时，返回此结果
</code></pre><hr><h2 id=线程>线程
<a class=anchor href=#%e7%ba%bf%e7%a8%8b>#</a></h2><pre><code>创建线程： 使用Threading模块创建，从threading.Thread继承，然后重写__init__ 和run 方法
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#f92672>import</span> threading
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    exitFlag <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>myThread</span> (threading<span style=color:#f92672>.</span>Thread):   <span style=color:#75715e>#继承父类threading.Thread</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>def</span> __init__(self, threadID, name, counter):        
</span></span><span style=display:flex><span>            threading<span style=color:#f92672>.</span>Thread<span style=color:#f92672>.</span>__init__(self)
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>threadID <span style=color:#f92672>=</span> threadID
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> name
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>counter <span style=color:#f92672>=</span> counter
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(self):      
</span></span><span style=display:flex><span>        <span style=color:#75715e>#把要执行的代码写到run函数里面 线程在创建后会直接运行run函数 </span>
</span></span><span style=display:flex><span>            print <span style=color:#e6db74>&#34;Starting &#34;</span> <span style=color:#f92672>+</span> self<span style=color:#f92672>.</span>name
</span></span><span style=display:flex><span>            写到这儿
</span></span><span style=display:flex><span>            print <span style=color:#e6db74>&#34;Exiting &#34;</span> <span style=color:#f92672>+</span> self<span style=color:#f92672>.</span>name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    thread1 <span style=color:#f92672>=</span> myThread(<span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#34;Thread - 1&#34;</span> , <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    thread1 <span style=color:#f92672>=</span> myThread(<span style=color:#ae81ff>2</span>, <span style=color:#e6db74>&#34;Thread - 2&#34;</span> , <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e># 开启</span>
</span></span><span style=display:flex><span>    thread1<span style=color:#f92672>.</span>start()
</span></span><span style=display:flex><span>    thread2<span style=color:#f92672>.</span>start()
</span></span></code></pre></div><h3 id=线程同步>线程同步
<a class=anchor href=#%e7%ba%bf%e7%a8%8b%e5%90%8c%e6%ad%a5>#</a></h3><p>不同线程对某个数据同时修改就很刺激，所以需要同步。（当然也可以选择不）
其实也简单，如下：</p><pre><code>import threading
threadingLock = threading.Lock()
# 从这儿领一把锁
# 然后在 run()函数中，“写到这儿——也就是工作函数之前，写上
threadingLock.acquire()
# 随后在工作函数之后
# threadingLock.release()
</code></pre><p>然后拿到小锁子的函数就能运行，运行完了把小锁子释放掉。为啥不是钥匙🔑……好吧。我就称呼它我就称呼它梭子吧——</p><h2 id=队列>队列
<a class=anchor href=#%e9%98%9f%e5%88%97>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md><span style=display:flex><span>    线程优先级队列
</span></span><span style=display:flex><span>    Queue.qsize()	    返回队列的里站了几个
</span></span><span style=display:flex><span>    Queue.empty()           如果队列为空，返回True,反之False
</span></span><span style=display:flex><span>    Queue.full()            如果队列满了，返回True,反之False
</span></span><span style=display:flex><span>    Queue.full 与 maxsize   大小对应
</span></span><span style=display:flex><span>    Queue.get([block[, timeout]]) 
</span></span><span style=display:flex><span>    	获取队列,timeout`等待时间
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    Queue.get_nowait() 相当 
</span></span><span style=display:flex><span>    Queue.get(False)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    Queue.put(item) 写入队列，timeout 等待时间
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    Queue.put_nowait(item) 相当
</span></span><span style=display:flex><span>    Queue.put(item, False)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    Queue.task_done()       在完成一项工作之后，
</span></span><span style=display:flex><span>    Queue.task_done()       函数向任务已经完成的队列发送一个信号
</span></span><span style=display:flex><span>    Queue.join()            实际上意味着等到队列为空，再执行别的操作
</span></span></code></pre></div><p>来段儿示例：来自<a href=http://www.runoob.com/python/python-multithreading.html>这儿</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#75715e>#!/usr/bin/python</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># -*- coding: UTF-8 -*-</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> Queue
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> threading
</span></span><span style=display:flex><span>    <span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    exitFlag <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>myThread</span> (threading<span style=color:#f92672>.</span>Thread):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>def</span> __init__(self, threadID, name, q):
</span></span><span style=display:flex><span>            threading<span style=color:#f92672>.</span>Thread<span style=color:#f92672>.</span>__init__(self)
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>threadID <span style=color:#f92672>=</span> threadID
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> name
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>q <span style=color:#f92672>=</span> q
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(self):
</span></span><span style=display:flex><span>            print <span style=color:#e6db74>&#34;Starting &#34;</span> <span style=color:#f92672>+</span> self<span style=color:#f92672>.</span>name
</span></span><span style=display:flex><span>            process_data(self<span style=color:#f92672>.</span>name, self<span style=color:#f92672>.</span>q)
</span></span><span style=display:flex><span>            print <span style=color:#e6db74>&#34;Exiting &#34;</span> <span style=color:#f92672>+</span> self<span style=color:#f92672>.</span>name
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>process_data</span>(threadName, q):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> <span style=color:#f92672>not</span> exitFlag:
</span></span><span style=display:flex><span>            queueLock<span style=color:#f92672>.</span>acquire()
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> workQueue<span style=color:#f92672>.</span>empty():
</span></span><span style=display:flex><span>                data <span style=color:#f92672>=</span> q<span style=color:#f92672>.</span>get()  
</span></span><span style=display:flex><span>                queueLock<span style=color:#f92672>.</span>release()
</span></span><span style=display:flex><span>                print <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>%s</span><span style=color:#e6db74> processing </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> (threadName, data)   
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                queueLock<span style=color:#f92672>.</span>release()
</span></span><span style=display:flex><span>            time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    threadList <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;Thread-1&#34;</span>, <span style=color:#e6db74>&#34;Thread-2&#34;</span>, <span style=color:#e6db74>&#34;Thread-3&#34;</span>]
</span></span><span style=display:flex><span>    nameList <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;One&#34;</span>, <span style=color:#e6db74>&#34;Two&#34;</span>, <span style=color:#e6db74>&#34;Three&#34;</span>, <span style=color:#e6db74>&#34;Four&#34;</span>, <span style=color:#e6db74>&#34;Five&#34;</span>]
</span></span><span style=display:flex><span>    queueLock <span style=color:#f92672>=</span> threading<span style=color:#f92672>.</span>Lock()
</span></span><span style=display:flex><span>    workQueue <span style=color:#f92672>=</span> Queue<span style=color:#f92672>.</span>Queue(<span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>    threads <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    threadID <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#75715e># 创建新线程</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> tName <span style=color:#f92672>in</span> threadList:
</span></span><span style=display:flex><span>        thread <span style=color:#f92672>=</span> myThread(threadID, tName, workQueue)
</span></span><span style=display:flex><span>        thread<span style=color:#f92672>.</span>start()
</span></span><span style=display:flex><span>        threads<span style=color:#f92672>.</span>append(thread)
</span></span><span style=display:flex><span>        threadID <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#75715e># 填充队列</span>
</span></span><span style=display:flex><span>    queueLock<span style=color:#f92672>.</span>acquire()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> word <span style=color:#f92672>in</span> nameList:
</span></span><span style=display:flex><span>        workQueue<span style=color:#f92672>.</span>put(word)
</span></span><span style=display:flex><span>    queueLock<span style=color:#f92672>.</span>release()
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#75715e># 等待队列清空</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> <span style=color:#f92672>not</span> workQueue<span style=color:#f92672>.</span>empty():    
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>pass</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#75715e># 通知线程是时候退出</span>
</span></span><span style=display:flex><span>    exitFlag <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>    <span style=color:#75715e># 等待所有线程完成</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> t <span style=color:#f92672>in</span> threads:
</span></span><span style=display:flex><span>        t<span style=color:#f92672>.</span>join()
</span></span><span style=display:flex><span>    print <span style=color:#e6db74>&#34;Exiting Main Thread&#34;</span>
</span></span></code></pre></div><blockquote><p>Starting Thread-1</p></blockquote><blockquote><p>Starting Thread-2</p></blockquote><blockquote><p>Starting Thread-3</p></blockquote><blockquote><p>Thread-1 processing One</p></blockquote><blockquote><p>Thread-2 processing Two</p></blockquote><blockquote><p>Thread-3 processing Three</p></blockquote><blockquote><p>Thread-1 processing Four</p></blockquote><blockquote><p>Thread-2 processing Five</p></blockquote><blockquote><p>Exiting Thread-3</p></blockquote><blockquote><p>Exiting Thread-1</p></blockquote><blockquote><p>Exiting Thread-2</p></blockquote><blockquote><p>Exiting Main Thread</p></blockquote><p>呃， 以上就是我现知道的终极用法，当然其基础于：</p><pre><code>workQueue = Queue.Queue(10)     
# 创建+设定队列长度（emm 小心卡死就是了）
# 只要满了再往里塞绝对死，无意外……(lll￢ω￢)
workQueue.put(word) 
# 往里塞。  基础就是塞个数字，高级就是塞个线程
workQueue.get() 
# 顺序往外取
# 括号里里面可以写进参数，然而，依然按照顺序往外取，插队办理啥的不存在
# 另外，队列空的话取依然会死……
</code></pre><h3 id=一些方法>一些方法
<a class=anchor href=#%e4%b8%80%e4%ba%9b%e6%96%b9%e6%b3%95>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    q <span style=color:#f92672>=</span> queue<span style=color:#f92672>.</span>Queue(maxsize<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>) 
</span></span><span style=display:flex><span>    q<span style=color:#f92672>.</span>qsize() <span style=color:#75715e>#查看队列大小 </span>
</span></span><span style=display:flex><span>    q<span style=color:#f92672>.</span>empty() <span style=color:#75715e>#判断队列是否为空 </span>
</span></span><span style=display:flex><span>    q<span style=color:#f92672>.</span>full() 
</span></span><span style=display:flex><span>    <span style=color:#75715e>#如果maxsize设置了大小(eg:2)，如果q.put()了2个元素，则返回真，反之，则为假 </span>
</span></span><span style=display:flex><span>    q<span style=color:#f92672>.</span>get_nowait() 
</span></span><span style=display:flex><span>    <span style=color:#75715e># 如果队列中没有元素了，只用q.get()</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>（</span>当然<span style=color:#960050;background-color:#1e0010>，</span>可以设置<span style=color:#960050;background-color:#1e0010>`</span>q<span style=color:#f92672>.</span>get(block<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span><span style=color:#960050;background-color:#1e0010>）`）</span>会使程序卡住<span style=color:#960050;background-color:#1e0010>，</span>用q<span style=color:#f92672>.</span>get_nowait()则会报错而不卡住 
</span></span><span style=display:flex><span>    q<span style=color:#f92672>.</span>put_nowait() 
</span></span><span style=display:flex><span>    <span style=color:#75715e># 如果maxsize设置了大小，用q.put()超过范围则会卡住（当然</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 可以设置属性q.put(block=False)）。用q.put_nowait()则会报错而不卡住</span>
</span></span></code></pre></div><hr><h3 id=老夫的demo>老夫的Demo
<a class=anchor href=#%e8%80%81%e5%a4%ab%e7%9a%84demo>#</a></h3><p><em><strong>消费生产者关系</strong></em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> threading
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> queue
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> threadpool
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>pool <span style=color:#f92672>=</span> threadpool<span style=color:#f92672>.</span>ThreadPool(<span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>que <span style=color:#f92672>=</span> queue<span style=color:#f92672>.</span>Queue()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dataList <span style=color:#f92672>=</span> [<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>6</span>,<span style=color:#ae81ff>7</span>,<span style=color:#ae81ff>8</span>,<span style=color:#ae81ff>9</span>,<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>dataList1 <span style=color:#f92672>=</span> [<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#e6db74>&#39;a&#39;</span>, <span style=color:#e6db74>&#39;b&#39;</span>]
</span></span><span style=display:flex><span>dataList2 <span style=color:#f92672>=</span> [<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>6</span>]
</span></span><span style=display:flex><span>dataList3 <span style=color:#f92672>=</span> [<span style=color:#ae81ff>7</span>,<span style=color:#ae81ff>8</span>,<span style=color:#ae81ff>9</span>,<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>printLock <span style=color:#f92672>=</span> threading<span style=color:#f92672>.</span>Lock()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>workList <span style=color:#f92672>=</span> [dataList1, dataList2, dataList3]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>worker</span>():    
</span></span><span style=display:flex><span>   <span style=color:#75715e>## 消费者</span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>#printLock.acquire()</span>
</span></span><span style=display:flex><span>    aaa <span style=color:#f92672>=</span> que<span style=color:#f92672>.</span>get()
</span></span><span style=display:flex><span>    print(aaa)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> aaa:
</span></span><span style=display:flex><span>        print (i)
</span></span><span style=display:flex><span>    <span style=color:#75715e>#printLock.release()</span>
</span></span><span style=display:flex><span>    time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>geter</span>(task):
</span></span><span style=display:flex><span>    <span style=color:#75715e>## 生产者</span>
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;emm, put in_:&#34;</span>, task)
</span></span><span style=display:flex><span>    time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    que<span style=color:#f92672>.</span>put(task)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    a <span style=color:#f92672>=</span> threading<span style=color:#f92672>.</span>Thread(target<span style=color:#f92672>=</span>worker)
</span></span><span style=display:flex><span>    a<span style=color:#f92672>.</span>start()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> workList:
</span></span><span style=display:flex><span>    geter(i)
</span></span></code></pre></div><hr><hr><h2 id=进程>进程
<a class=anchor href=#%e8%bf%9b%e7%a8%8b>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> multiprocessing
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>worker_1</span>(interval, lock, low):
</span></span><span style=display:flex><span>    print (<span style=color:#e6db74>&#34;worker_1&#34;</span>)
</span></span><span style=display:flex><span>    print (time<span style=color:#f92672>.</span>time())
</span></span><span style=display:flex><span>    lock<span style=color:#f92672>.</span>acquire()
</span></span><span style=display:flex><span>    time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>0.1</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;I got the lock&#34;</span>)
</span></span><span style=display:flex><span>    time<span style=color:#f92672>.</span>sleep(interval)
</span></span><span style=display:flex><span>    print(low)
</span></span><span style=display:flex><span>    print (<span style=color:#e6db74>&#34;end worker_1&#34;</span>)
</span></span><span style=display:flex><span>    lock<span style=color:#f92672>.</span>release()
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>worker_2</span>(interval, lock):
</span></span><span style=display:flex><span>    print (<span style=color:#e6db74>&#34;worker_2&#34;</span>)
</span></span><span style=display:flex><span>    print (time<span style=color:#f92672>.</span>time())   
</span></span><span style=display:flex><span>    lock<span style=color:#f92672>.</span>acquire()
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;I got the lock&#34;</span>)
</span></span><span style=display:flex><span>    time<span style=color:#f92672>.</span>sleep(interval)
</span></span><span style=display:flex><span>    print (<span style=color:#e6db74>&#34;end worker_2&#34;</span>)
</span></span><span style=display:flex><span>    lock<span style=color:#f92672>.</span>release()
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>worker_3</span>(interval, lock):
</span></span><span style=display:flex><span>    print (<span style=color:#e6db74>&#34;worker_3&#34;</span>)
</span></span><span style=display:flex><span>    print (time<span style=color:#f92672>.</span>time())
</span></span><span style=display:flex><span>    lock<span style=color:#f92672>.</span>acquire()
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;I got the lock&#34;</span>)
</span></span><span style=display:flex><span>    time<span style=color:#f92672>.</span>sleep(interval)
</span></span><span style=display:flex><span>    print (<span style=color:#e6db74>&#34;end worker_3&#34;</span>)
</span></span><span style=display:flex><span>    lock<span style=color:#f92672>.</span>release()
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    printLock <span style=color:#f92672>=</span> multiprocessing<span style=color:#f92672>.</span>Lock()
</span></span><span style=display:flex><span>    <span style=color:#75715e># 🔒 来自关爱的小锁子 </span>
</span></span><span style=display:flex><span>    p1 <span style=color:#f92672>=</span> multiprocessing<span style=color:#f92672>.</span>Process(target <span style=color:#f92672>=</span> worker_1, args <span style=color:#f92672>=</span> (<span style=color:#ae81ff>2</span>, printLock, [<span style=color:#e6db74>&#34;asd&#34;</span>, {<span style=color:#e6db74>&#39;s&#39;</span>:<span style=color:#ae81ff>1</span>}, [<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>]]))<span style=color:#f92672>.</span>start()
</span></span><span style=display:flex><span>    p2 <span style=color:#f92672>=</span> multiprocessing<span style=color:#f92672>.</span>Process(target <span style=color:#f92672>=</span> worker_2, args <span style=color:#f92672>=</span> (<span style=color:#ae81ff>3</span>, printLock))<span style=color:#f92672>.</span>start()
</span></span><span style=display:flex><span>    p3 <span style=color:#f92672>=</span> multiprocessing<span style=color:#f92672>.</span>Process(target <span style=color:#f92672>=</span> worker_3, args <span style=color:#f92672>=</span> (<span style=color:#ae81ff>4</span>, printLock))<span style=color:#f92672>.</span>start()
</span></span><span style=display:flex><span>    w <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;a&#39;</span>:p1, <span style=color:#e6db74>&#39;b&#39;</span>:p2, <span style=color:#e6db74>&#39;c&#39;</span>:p3}
</span></span><span style=display:flex><span>    <span style=color:#75715e># 创建三个进程去运行这三个函数</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#p1.start()</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#p2.start()</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#p3.start()</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#for i in w:</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#    w[i].start()</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 启动进程</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;The number of CPU is:&#34;</span> <span style=color:#f92672>+</span> str(multiprocessing<span style=color:#f92672>.</span>cpu_count()))   
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> p <span style=color:#f92672>in</span> multiprocessing<span style=color:#f92672>.</span>active_children():
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;child   p.name:&#34;</span> <span style=color:#f92672>+</span> p<span style=color:#f92672>.</span>name <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;</span><span style=color:#ae81ff>\t</span><span style=color:#e6db74>p.id&#34;</span> <span style=color:#f92672>+</span> str(p<span style=color:#f92672>.</span>pid))
</span></span><span style=display:flex><span>    print (<span style=color:#e6db74>&#34;Main All Done&#34;</span>)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># dt 2018年5月18日11点22分</span>
</span></span></code></pre></div><blockquote><p>worker_1
1526613489.1864893
worker_2
1526613489.1932006
The number of CPU is:4
child p.name:Process-3 p.id208
child p.name:Process-1 p.id206
child p.name:Process-2 p.id207
Main All Done
worker_3
1526613489.1968668
I got the lock
[&lsquo;asd&rsquo;, {&rsquo;s&rsquo;: 1}, [1, 2, 3]]
end worker_1
I got the lock</p><p>end worker_2
I got the lock
end worker_3</p></blockquote><p>插一句话
线程和进程的关系，貌似与电脑双系统和系统再开虚拟机的关系emm 对于资源利用的角度上。</p><h5 id=没有传参的进程>没有传参的进程
<a class=anchor href=#%e6%b2%a1%e6%9c%89%e4%bc%a0%e5%8f%82%e7%9a%84%e8%bf%9b%e7%a8%8b>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> multiprocessing
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>sayHello</span>():
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#39;hello~ I can see you&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    p1 <span style=color:#f92672>=</span> multiprocessing<span style=color:#f92672>.</span>Process(target<span style=color:#f92672>=</span>sayHello)
</span></span><span style=display:flex><span>    p2 <span style=color:#f92672>=</span> multiprocessing<span style=color:#f92672>.</span>Process(target<span style=color:#f92672>=</span>sayHello)
</span></span><span style=display:flex><span>    p3 <span style=color:#f92672>=</span> multiprocessing<span style=color:#f92672>.</span>Process(target<span style=color:#f92672>=</span>sayHello)
</span></span><span style=display:flex><span>    p1<span style=color:#f92672>.</span>start()
</span></span><span style=display:flex><span>    p2<span style=color:#f92672>.</span>start()
</span></span><span style=display:flex><span>    p3<span style=color:#f92672>.</span>start()
</span></span></code></pre></div><p>如果只是单纯运行，这样就可以了，之所以做这个测试是因为我忌惮于那个<code>args</code>的传参，毕竟<code>()</code>里面若有元素存在就必须要有逗号… 看来没有传参的话就不需要了
一个参数<code>a</code>的时候: <code>(a, )</code>emmm🤔</p><h3 id=将进程定义为类>将进程定义为类
<a class=anchor href=#%e5%b0%86%e8%bf%9b%e7%a8%8b%e5%ae%9a%e4%b9%89%e4%b8%ba%e7%b1%bb>#</a></h3><pre><code>import multiprocessing
import time
class ClockProcess(multiprocessing.Process):
    def __init__(self, interval):
        multiprocessing.Process.__init__(self)
        self.interval = interval
    def run(self):
        n = 5
        while n &gt; 0:
            print(&quot;the time is {0}&quot;.format(time.ctime()))
            time.sleep(self.interval)
            n -= 1 
if __name__ == '__main__':
    p = ClockProcess(3)
    p.start()
</code></pre><p>以上，<code>p.start()</code>被调用时，自动调用<code>run()</code> 另外时间戳都是瞎戳的，所以… emm 这都一年之前的东西了，现在才想起来戳时间有点儿纪念意义(⊙﹏⊙)</p><blockquote><p>2018年5月18日</p></blockquote><h4 id=属性-1>属性
<a class=anchor href=#%e5%b1%9e%e6%80%a7-1>#</a></h4><pre><code>daemon ：是否伴随主程序结束而结束
Lock: 锁：（如下， 防止访问共享资源时冲突，如以上打印时间时出现的不连续打印😰）
def worker(lock, var):
    try:
        ***
    finally:
        lock.release()
lock = multiprocessing.Lock()
var = '我是变量'
p = multiptocessing.Process(target = worker, args = (lock, var))
</code></pre><h2 id=font-colorcc0000警个告font><em><strong>警个告</strong></em>
<a class=anchor href=#font-colorcc0000%e8%ad%a6%e4%b8%aa%e5%91%8afont>#</a></h2><p>创建进程分支的函数选择只能隶属于<code>__main__</code>下或者是隶属与创建进程的函数级别相同的级别，例如今天在main下一个函数中选择目标函数为此函数的函数就不可以… 如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>a</span>():
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>c</span>(para):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>pass</span>
</span></span><span style=display:flex><span>    	<span style=color:#f92672>*</span>(target<span style=color:#f92672>=</span>b, args<span style=color:#f92672>=</span>(<span style=color:#ae81ff>1</span>,)) 	<span style=color:#960050;background-color:#1e0010>🌹</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>*</span>(target<span style=color:#f92672>=</span>c, args<span style=color:#f92672>=</span>(<span style=color:#ae81ff>1</span>,)) 	<span style=color:#960050;background-color:#1e0010>❌</span>
</span></span><span style=display:flex><span>    	
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>b</span>(para):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>pass</span>
</span></span></code></pre></div><p>emm，上述表述的很明确，但是昨天又重新犯了这个问题… 进程的执行者放到了类中的某个函数，然后又提出到<code>__main__ </code>中函数，所以都不能执行，最终放到`<strong>main</strong>``外，与它同级，也就是def 前无空格。 才能“受命”。</p><h4 id=通过队列来存储不同进程产生的结果>通过队列来存储不同进程产生的结果
<a class=anchor href=#%e9%80%9a%e8%bf%87%e9%98%9f%e5%88%97%e6%9d%a5%e5%ad%98%e5%82%a8%e4%b8%8d%e5%90%8c%e8%bf%9b%e7%a8%8b%e4%ba%a7%e7%94%9f%e7%9a%84%e7%bb%93%e6%9e%9c>#</a></h4><p>{来自}(<a href=https://blog.csdn.net/u014556057/article/details/66974452>https://blog.csdn.net/u014556057/article/details/66974452</a>)</p><pre tabindex=0><code># -*- coding:utf-8 -*-
from multiprocessing import Process, Queue, Lock

L = [1, 2, 3]


def add(q, lock, a, b):
    lock.acquire()  # 加锁避免写入时出现不可预知的错误
    L1 = range(a, b)
    lock.release()
    q.put(L1)
    print L1

if __name__ == &#39;__main__&#39;:
    q = Queue()
    lock = Lock()
    p1 = Process(target=add, args=(q, lock, 20, 30))
    p2 = Process(target=add, args=(q, lock, 30, 40))
    p1.start()
    p2.start()
    p1.join()
    p2.join()

    L += q.get() + q.get()
    print L
</code></pre><blockquote><p>[20, 21, 22, 23, 24, 25, 26, 27, 28, 29]
[30, 31, 32, 33, 34, 35, 36, 37, 38, 39]
[1, 2, 3, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]</p></blockquote><hr><hr><h2 id=再加一个协程>再加一个协程
<a class=anchor href=#%e5%86%8d%e5%8a%a0%e4%b8%80%e4%b8%aa%e5%8d%8f%e7%a8%8b>#</a></h2><h3 id=基础实现>基础实现：
<a class=anchor href=#%e5%9f%ba%e7%a1%80%e5%ae%9e%e7%8e%b0>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># yield</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>creatAor</span>():
</span></span><span style=display:flex><span>    mylist <span style=color:#f92672>=</span> range(<span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> mylist:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>yield</span> i<span style=color:#f92672>*</span>i
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mygenerator <span style=color:#f92672>=</span> creatAor()  <span style=color:#75715e># 生成一个生成器</span>
</span></span><span style=display:flex><span>print (mygenerator)
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> mygenerator:
</span></span><span style=display:flex><span>    print (i)
</span></span></code></pre></div><blockquote><p>&lt;generator object creatAor at 0x7f54ed368f10>
0
1
4</p></blockquote><p>当调用函数时，其返回并不立马执行（显示）——emm 经过十几分钟😰的观察👀说那么玄乎，.其实就是在函数执行过程中，在<code>yield</code>处把后面紧接的东西记录下来，之后最后生成一个可迭代的对象。 所以网上说时生成器也不可厚非，但表达真的是……不过貌似.不仅仅是记录后面紧跟的东西…</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$</span> vim 
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>creatAor</span>():
</span></span><span style=display:flex><span>    mylist <span style=color:#f92672>=</span> range(<span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;so jia nei?&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> mylist:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;pre a hou ga&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>yield</span> i<span style=color:#f92672>*</span>i
</span></span><span style=display:flex><span>        print (<span style=color:#e6db74>&#34;nihoua&#34;</span>)
</span></span><span style=display:flex><span>    print (<span style=color:#e6db74>&#34;2333333&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mygenerator <span style=color:#f92672>=</span> creatAor()
</span></span><span style=display:flex><span>print (mygenerator)
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> mygenerator:
</span></span><span style=display:flex><span>    print (i)
</span></span></code></pre></div><blockquote><p>&lt;generator object creatAor at 0x7fe2585a8f10>
so jia nei?
pre a hou ga
0
nihoua
pre a hou ga
1
nihoua
pre a hou ga
4
nihoua
2333333</p></blockquote><p>所以看这苗头像是重新执行了一次函数，但是将后面紧跟的东西也进行了记录</p><p>应用到协程中，便是：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>consumer</span>():
</span></span><span style=display:flex><span>    r <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>        n <span style=color:#f92672>=</span> <span style=color:#66d9ef>yield</span> r
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> n:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#39;[CONSUMER] Consuming </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>....&#39;</span> <span style=color:#f92672>%</span> n)
</span></span><span style=display:flex><span>        time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>        r <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;200 OK&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>produce</span>(c):
</span></span><span style=display:flex><span>    c<span style=color:#f92672>.</span>next()
</span></span><span style=display:flex><span>    n <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> n <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>5</span>:
</span></span><span style=display:flex><span>        n <span style=color:#f92672>=</span> n <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#39;[PRODUCER] Producing </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>...&#39;</span> <span style=color:#f92672>%</span> n)
</span></span><span style=display:flex><span>        r <span style=color:#f92672>=</span> c<span style=color:#f92672>.</span>send(n)
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#39;[PRODUCER] Consumer return: </span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span> <span style=color:#f92672>%</span> r)
</span></span><span style=display:flex><span>    c<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__<span style=color:#f92672>==</span><span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    c <span style=color:#f92672>=</span> consumer()
</span></span><span style=display:flex><span>    produce(c)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> c:
</span></span><span style=display:flex><span>        print(i)
</span></span></code></pre></div><blockquote><p>[PRODUCER] Producing 1&mldr;
[CONSUMER] Consuming 1&mldr;.
[PRODUCER] Consumer return: 200 OK</p><p>[PRODUCER] Producing 2&mldr;
[CONSUMER] Consuming 2&mldr;.
[PRODUCER] Consumer return: 200 OK</p><p>[PRODUCER] Producing 3&mldr;
[CONSUMER] Consuming 3&mldr;.
[PRODUCER] Consumer return: 200 OK
&mldr;
&mldr;</p></blockquote><p>那么，是什么道理呢？</p><h4 id=send-next-方法的背后今生>send next 方法的背后今生
<a class=anchor href=#send-next-%e6%96%b9%e6%b3%95%e7%9a%84%e8%83%8c%e5%90%8e%e4%bb%8a%e7%94%9f>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>my</span>():
</span></span><span style=display:flex><span>    value <span style=color:#f92672>=</span> <span style=color:#66d9ef>yield</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    value <span style=color:#f92672>=</span> <span style=color:#66d9ef>yield</span> value
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#39;finally: &#39;</span>, value)
</span></span><span style=display:flex><span>ge <span style=color:#f92672>=</span> my()
</span></span><span style=display:flex><span>print(ge<span style=color:#f92672>.</span>next())
</span></span><span style=display:flex><span>print(ge<span style=color:#f92672>.</span>send(<span style=color:#ae81ff>2</span>))
</span></span><span style=display:flex><span>print(ge<span style=color:#f92672>.</span>send(<span style=color:#ae81ff>3</span>))
</span></span></code></pre></div><blockquote><p>1
2
(&lsquo;finally: &lsquo;, 3)
Traceback (most recent call last):
File &ldquo;yield_emm3.py&rdquo;, line 8, in print(ge.send(3))
StopIteration</p></blockquote><p>可知：
当<code>next</code>时，<code>yield</code>挂起，但将之后的<code>1</code>返回。而后<code>send</code>激活了之前挂起赋值动作，但此时<code>yield 1</code>被替换为<code>send</code>来的<code>2</code>所以<code>value</code>被置为<code>2</code>. 再第三次调用，完成赋值动作之后，由于只被挂起两次动作，而这里调取了三次，所以报错 停止递归 。若直接递归则得到1 和 None.</p><p>所以 <code>next</code>与<code>send</code>都是用来激活挂起动作而使用的，但<code>send</code>好在可以与之交互。
在<code>send``之前需先</code>next<code>否则提示</code>can&rsquo;t send * to a just-started generator`(⊙﹏⊙) 我上面阐述的挂起，激活，是不是出现了什么偏差…</p><blockquote><p>2018年5月18日16点30分</p></blockquote><h3 id=较完善方案>较完善方案：
<a class=anchor href=#%e8%be%83%e5%ae%8c%e5%96%84%e6%96%b9%e6%a1%88>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> gevent
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>f</span>(n):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(n):
</span></span><span style=display:flex><span>       print gevent<span style=color:#f92672>.</span>getcurrent(), i
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>g2 <span style=color:#f92672>=</span> gevent<span style=color:#f92672>.</span>spawn(f, <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>g3 <span style=color:#f92672>=</span> gevent<span style=color:#f92672>.</span>spawn(f, <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>g1<span style=color:#f92672>.</span>join()
</span></span><span style=display:flex><span>g3<span style=color:#f92672>.</span>join()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> gevent
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> gevent <span style=color:#f92672>import</span> monkey; monkey<span style=color:#f92672>.</span>patch_all()
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> urllib2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>f</span>(url):
</span></span><span style=display:flex><span>    print <span style=color:#e6db74>&#39;GET: </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#39;</span> <span style=color:#f92672>%</span> url
</span></span><span style=display:flex><span>    resp <span style=color:#f92672>=</span> urllib2<span style=color:#f92672>.</span>urlopen(url)
</span></span><span style=display:flex><span>    data <span style=color:#f92672>=</span> resp<span style=color:#f92672>.</span>read()
</span></span><span style=display:flex><span>    print <span style=color:#e6db74>&#39;[</span><span style=color:#e6db74>%d</span><span style=color:#e6db74>] bytes received from </span><span style=color:#e6db74>%s</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span> <span style=color:#f92672>%</span>(len(data), url)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>gevent<span style=color:#f92672>.</span>joinall([
</span></span><span style=display:flex><span>    gevent<span style=color:#f92672>.</span>spawn(f, <span style=color:#e6db74>&#39;http://www.cnblogs.com/kaituorensheng/&#39;</span>),
</span></span><span style=display:flex><span>    gevent<span style=color:#f92672>.</span>spawn(f, <span style=color:#e6db74>&#39;https://www.python.org/&#39;</span>),
</span></span><span style=display:flex><span>    gevent<span style=color:#f92672>.</span>spawn(f, <span style=color:#e6db74>&#39;https://www.baidu.com&#39;</span>),
</span></span><span style=display:flex><span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> gevent <span style=color:#f92672>import</span> monkey  
</span></span><span style=display:flex><span>monkey<span style=color:#f92672>.</span>patch_all()  
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> gevent  
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> gevent <span style=color:#f92672>import</span> Greenlet  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Task</span>(Greenlet):  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __init__(self, name):  
</span></span><span style=display:flex><span>        Greenlet<span style=color:#f92672>.</span>__init__(self)  
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> name      
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>_run</span>(self):  
</span></span><span style=display:flex><span>        print <span style=color:#e6db74>&#34;Task </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>: some task...&#34;</span> <span style=color:#f92672>%</span> self<span style=color:#f92672>.</span>name  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>t1 <span style=color:#f92672>=</span> Task(<span style=color:#e6db74>&#34;task1&#34;</span>)  
</span></span><span style=display:flex><span>t2 <span style=color:#f92672>=</span> Task(<span style=color:#e6db74>&#34;task2&#34;</span>)  
</span></span><span style=display:flex><span>t1<span style=color:#f92672>.</span>start()  
</span></span><span style=display:flex><span>t2<span style=color:#f92672>.</span>start()  
</span></span><span style=display:flex><span><span style=color:#75715e># here we are waiting all tasks  </span>
</span></span><span style=display:flex><span>gevent<span style=color:#f92672>.</span>joinall([t1,t2])  
</span></span></code></pre></div><p>和线程 进程 差不多一个用法，只不过没锁，也不需要锁。</p><hr><hr><hr><h3 id=futures>futures
<a class=anchor href=#futures>#</a></h3><h4 id=futuresthreadpoolexecutor>futures.ThreadPoolExecutor
<a class=anchor href=#futuresthreadpoolexecutor>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#66d9ef>with</span> futures<span style=color:#f92672>.</span>ThreadPoolExecutor(<span style=color:#ae81ff>16</span>) <span style=color:#66d9ef>as</span> executor:
</span></span><span style=display:flex><span>    executor<span style=color:#f92672>.</span>map(run, urls)
</span></span><span style=display:flex><span>    <span style=color:#75715e># 这里是个爬虫，urls就是一个前方run函数的输入变量</span>
</span></span></code></pre></div><hr><hr><hr><h2 id=父类中的变量与类中变量>父类中的变量与类中变量
<a class=anchor href=#%e7%88%b6%e7%b1%bb%e4%b8%ad%e7%9a%84%e5%8f%98%e9%87%8f%e4%b8%8e%e7%b1%bb%e4%b8%ad%e5%8f%98%e9%87%8f>#</a></h2><p>在使用<code>self.a</code> 的时候——呃其实是实例化之后a.a时，会只在父类中寻找相关变量，而解决办法居然是将<code>super(A, self).__init__(CtaEngine, setting)</code>移动到变量定义之后，所以谁说这玩意放前面和放后面没有区别的！（欸?😘 这个之后有过说明，不过忘记写在哪儿了，再说一下，就是super&mldr;.表示父类的初始化动作，__init__因为这个函数名子父相同不会重写，会合并。）</p><h3 id=列表的增删添>列表的增删添
<a class=anchor href=#%e5%88%97%e8%a1%a8%e7%9a%84%e5%a2%9e%e5%88%a0%e6%b7%bb>#</a></h3><pre><code>append      # 在最后添加一元素
extend      # c.extend(a) 将列表a中元素加到c中去。可自加
+           # 连接两方数组元素 c = a + c        然而创建新对象，耗内存… 所以没啥
</code></pre><p>用</p><pre><code>del         # 删除对应下标元素 del c[0] 删除c列表第一位元素
pop         # c.pop()   删除最后一位元素
remove      # 删除指定值元素，有相同值时只会删除第一位
[ : ]           # 使用切片进行删除
insert      # c.insert(0, 1)将1插入到c的最前方，可插列表，插入还是列表
</code></pre><h3 id=一个函数的有效方式只在循环中执行一次---代码日志>一个函数的有效方式只在循环中执行一次 - 代码日志
<a class=anchor href=#%e4%b8%80%e4%b8%aa%e5%87%bd%e6%95%b0%e7%9a%84%e6%9c%89%e6%95%88%e6%96%b9%e5%bc%8f%e5%8f%aa%e5%9c%a8%e5%be%aa%e7%8e%af%e4%b8%ad%e6%89%a7%e8%a1%8c%e4%b8%80%e6%ac%a1---%e4%bb%a3%e7%a0%81%e6%97%a5%e5%bf%97>#</a></h3><p><a href=https://codeday.me/bug/20170901/65228.html>这</a>是原链接
emm 代码反正照着输入是不会有结果的，但感觉挺有戏先保留，以后技术提升再来看</p><h4 id=自己的方法>自己的方法
<a class=anchor href=#%e8%87%aa%e5%b7%b1%e7%9a%84%e6%96%b9%e6%b3%95>#</a></h4><p>自己的方法很简单，很暴力，就是用字典啊—— 当执行过一次之后直接把调用关系扭到别的地方，反正只要是知道结果的判断都可以用字典来代替么。</p><h3 id=函数调用函数-and-语法糖->函数调用函数 and 语法糖 @
<a class=anchor href=#%e5%87%bd%e6%95%b0%e8%b0%83%e7%94%a8%e5%87%bd%e6%95%b0-and-%e8%af%ad%e6%b3%95%e7%b3%96->#</a></h3><pre><code>import time

def timehel(hell):
    def wrapper():
            start = time.clock()
            hell()
            end =time.clock()
            print 'used:', end - start
        return wrapper
</code></pre><p>@timehel
def foo():
print &lsquo;a ho ga&rsquo;</p><blockquote><p>a ho ga</p></blockquote><blockquote><p>used: 0.000489465229975</p></blockquote><p>其上@timehel 和 foo = timehel(foo)等价（感谢<a href=http://www.cnblogs.com/rollenholt/archive/2012/05/02/2479833.html>被遗忘的博客</a>）… 就是把下方函数当成输入，然后执行通俗来翻译就是：</p><pre><code>@：呼叫timehel   来执行下面这孙子。
</code></pre><p>这里是官方教你怎么用：
<a href=https://wiki.python.org/moin/PythonDecoratorLibrary>https://wiki.python.org/moin/PythonDecoratorLibrary</a></p><p>其中 函数中定义函数就类似于“父子关系”，也或者叫另辟空间。每次执行父函数时，子函数会有也尽在此时会有被执行的机会，会不会被执行，就看其在其父亲面前的表现了（他爸有没有叫他（有没有调用…））。</p><h3 id=变量作用域>变量作用域
<a class=anchor href=#%e5%8f%98%e9%87%8f%e4%bd%9c%e7%94%a8%e5%9f%9f>#</a></h3><p>因为从这个@ 这儿学到的，所以：</p><pre><code>def hel(x):
    def inner():
        print x
    return inner
p1 = hel(1)
p1 = hel(1)

p1()
</code></pre><blockquote><p>1</p></blockquote><pre><code>p2()
</code></pre><blockquote><p>2</p></blockquote><p>闭包——如果没有inner这东西，下面绝不会输出东西，反而会报错。 直接<code>p1</code>,<code>p2</code>又不会再输出任何东西，只有在定义时会运行一次。 对比于<code>def hel(x): print x</code> 其中内层原因 先不深究，就脑补成外层需运行时才能去找那些变量，而其中的函数会主动去外围找所需的变量。</p><h4 id=应用案例>应用案例
<a class=anchor href=#%e5%ba%94%e7%94%a8%e6%a1%88%e4%be%8b>#</a></h4><pre><code>import time

def coseTime(func):
    print func
    def inner(*args, **kwargs):
        print args, kwargs
        start = time.clock()
        func(*args, **kwargs)
        end = time.clock()
        print args, kwargs

        print ('Running time: %s Seconds' % (end-start))
    return inner

@coseTime
def hel(x):
    print ('hello~')

hel(12)
</code></pre><blockquote><p>&lt;function hel at 0x02BC5070>
(12,) {}
hello~
(12,) {}
Running time: 0.000446197317167 Seconds</p></blockquote><p>用来无视变量来记录 函数运行所需时间的——同时输出其在运行时接入的变量</p><hr><hr><h2 id=functools>functools
<a class=anchor href=#functools>#</a></h2><p>就姑且放这儿吧，毕竟也算是为了有序执行而接触到的</p><h3 id=partial>partial
<a class=anchor href=#partial>#</a></h3><pre><code>import functools
def add(a, b):
    print a, b
    return a, b
addplus = functools.partial(add, 3)
addplus(7)
</code></pre><blockquote><p>3 7</p></blockquote><pre><code>addplus(add, b = 6)
addplus(7)
</code></pre><blockquote><p>7 6</p></blockquote><p>这函数作用是 提前给定函数一个变量值…The functools module is for higher-order functions: functions that act on or return other functions. In general, any callable object can be treated as a function for the purposes of this module.</p><p>我的接触场景是在PyQt 中信号槽循环连接时，用了partial在connect之后<code>.connect(partial(self.start, i))</code>去唯一化相同功能的复用。不过我之前也应该写过类似的，那时我找的解决办法时在连接调用时传参(在Python GUI里面应该会写有吧，假如两三个月前我没脑子短期性失忆的话😭)。emm那个传参是利用Qt机制 不知道孰优孰劣😄</p><pre><code>运气好，直接翻到：
    ——那里的应用场景是在鼠标点击按钮捕获点击事件click时传递的参数~
</code></pre><h1 id=lambda>lambda
<a class=anchor href=#lambda>#</a></h1><p>使用方法为：</p><pre><code>func = lambda x:x*x
# :前x表示函数输入，:后为返回值，x*x是这个函数收到输入后所执行的动作
w = lambda x:func(x)
</code></pre><hr><hr><hr><hr><hr><h1 id=网络编程>网络编程
<a class=anchor href=#%e7%bd%91%e7%bb%9c%e7%bc%96%e7%a8%8b>#</a></h1><h2 id=socket>socket
<a class=anchor href=#socket>#</a></h2><pre><code>import socket
# 服务端
s = socket.socket()
host = socket.gethostname()
port = 12345
s.bind((host, port))
s.listen(5)
while True:
    c, addr = s.accept()
    print &quot;link address is&quot;, addr
    c.send('welcome here')
    c.close()
# 客户端
s = socket.socket()
host = socket.gethostname()
port = 12345
s.connect((host, port))
# 此时服务端便弹出 link address is：('192.168.*.*', 64*5)
print s.recv(1024)
# 客户端显示welcome here
</code></pre><h2 id=select----与socket配合的跨平台的异步io模型>select : 与Socket配合的跨平台的异步io模型
<a class=anchor href=#select----%e4%b8%8esocket%e9%85%8d%e5%90%88%e7%9a%84%e8%b7%a8%e5%b9%b3%e5%8f%b0%e7%9a%84%e5%bc%82%e6%ad%a5io%e6%a8%a1%e5%9e%8b>#</a></h2><p>import select
import socket
import Queue</p><p>#create a socket
server = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
server.setblocking(False)
#set option reused
server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR , 1)</p><p>server_address= (&lsquo;192.168.1.102&rsquo;,10001)
server.bind(server_address)</p><p>server.listen(10)</p><p>#sockets from which we except to read
inputs = [server]</p><p>#sockets from which we expect to write
outputs = []</p><p>#Outgoing message queues (socket:Queue)
message_queues = {}</p><p>#A optional parameter for select is TIMEOUT
timeout = 20</p><p>while inputs:
print &ldquo;waiting for next event&rdquo;
readable , writable , exceptional = select.select(inputs, outputs, inputs, timeout)</p><pre><code># When timeout reached , select return three empty lists
if not (readable or writable or exceptional) :
    print &quot;Time out ! &quot;
    break;    
for s in readable :
    if s is server:
        # A &quot;readable&quot; socket is ready to accept a connection
        connection, client_address = s.accept()
        print &quot;    connection from &quot;, client_address
        connection.setblocking(0)
        inputs.append(connection)
        message_queues[connection] = Queue.Queue()
    else:
        data = s.recv(1024)
        if data :
            print &quot; received &quot; , data , &quot;from &quot;,s.getpeername()
            message_queues[s].put(data)
            # Add output channel for response    
            if s not in outputs:
                outputs.append(s)
        else:
            #Interpret empty result as closed connection
            print &quot;  closing&quot;, client_address
            if s in outputs :
                outputs.remove(s)
            inputs.remove(s)
            s.close()
            #remove message queue 
            del message_queues[s]
for s in writable:
    try:
        next_msg = message_queues[s].get_nowait()
    except Queue.Empty:
        print &quot; &quot; , s.getpeername() , 'queue empty'
        outputs.remove(s)
    else:
        print &quot; sending &quot; , next_msg , &quot; to &quot;, s.getpeername()
        s.send(next_msg)

for s in exceptional:
    print &quot; exception condition on &quot;, s.getpeername()
    #stop listening for input on the connection
    inputs.remove(s)
    if s in outputs:
        outputs.remove(s)
    s.close()
    #Remove message queue
    del message_queues[s]
</code></pre><p><a href=http://www.cnblogs.com/coser/archive/2012/01/06/2315216.html>糖拌咸鱼 - 记录学习的点点滴滴~</a></p><p>简单来说一下<code>select</code>的作用：
返回值：三个列表
select方法用来监视文件描述符(当文件描述符条件不满足时，select会阻塞)，当某个文件描述符状态改变后，会返回三个列表
1、当参数1 序列中的fd满足“可读”条件时，则获取发生变化的fd并添加到fd_r_list中
2、当参数2 序列中含有fd时，则将该序列中所有的fd添加到 fd_w_list中
3、当参数3 序列中的fd发生错误时，则将该发生错误的fd添加到 fd_e_list中
4、当超时时间为空，则select会一直阻塞，直到监听的句柄发生变化
当超时时间 ＝ n(正整数)时，那么如果监听的句柄均无任何变化，则select会阻塞n秒，之后返回三个空列表，如果监听的句柄有变化，则直接执行。
<code>epoll</code>很好的改进了<code>select</code> 具体请看(深入理解python中的select模块)[http://blog.csdn.net/songfreeman/article/details/51179213]</p><hr><hr><hr><h2 id=引用模块>引用模块
<a class=anchor href=#%e5%bc%95%e7%94%a8%e6%a8%a1%e5%9d%97>#</a></h2><p>action.py中引用model.py为例</p><h3 id=同一文件夹下>同一文件夹下
<a class=anchor href=#%e5%90%8c%e4%b8%80%e6%96%87%e4%bb%b6%e5%a4%b9%e4%b8%8b>#</a></h3><pre><code>from model import *
# or
import model
</code></pre><h3 id=其下级文件here下>其下级文件"here"下
<a class=anchor href=#%e5%85%b6%e4%b8%8b%e7%ba%a7%e6%96%87%e4%bb%b6here%e4%b8%8b>#</a></h3><pre><code># 在model.py 文件中创建__init__.py空文件
from here import model
# or
form here.model import *
</code></pre><h3 id=在上级文件下>在上级文件下
<a class=anchor href=#%e5%9c%a8%e4%b8%8a%e7%ba%a7%e6%96%87%e4%bb%b6%e4%b8%8b>#</a></h3><pre><code>import sys
sys.path.append(&quot;..&quot;)
# 添加上级文件 路径
# import model
</code></pre><h3 id=在上级文件的下级文件中也就是在隔壁wang文件中>在上级文件的下级文件中（也就是在隔壁“wang”文件中）
<a class=anchor href=#%e5%9c%a8%e4%b8%8a%e7%ba%a7%e6%96%87%e4%bb%b6%e7%9a%84%e4%b8%8b%e7%ba%a7%e6%96%87%e4%bb%b6%e4%b8%ad%e4%b9%9f%e5%b0%b1%e6%98%af%e5%9c%a8%e9%9a%94%e5%a3%81wang%e6%96%87%e4%bb%b6%e4%b8%ad>#</a></h3><pre><code># 需要创建__init__.py空文件
# 添加上级文件路径
import wang.model
</code></pre><h2 id=解决编码问题>解决编码问题
<a class=anchor href=#%e8%a7%a3%e5%86%b3%e7%bc%96%e7%a0%81%e9%97%ae%e9%a2%98>#</a></h2><pre><code>import sys
reload(sys) 
sys.setdefaultencoding('utf8')
# 这段直接塞它嘴里
</code></pre><h3 id=输出提示打印乱码>输出提示打印乱码
<a class=anchor href=#%e8%be%93%e5%87%ba%e6%8f%90%e7%a4%ba%e6%89%93%e5%8d%b0%e4%b9%b1%e7%a0%81>#</a></h3><pre><code>#coding: utf-8  
n=raw_input(unicode('请输入文字','utf-8').encode('gbk'))  
print n  
</code></pre><h3 id=内存异常占用>内存异常占用
<a class=anchor href=#%e5%86%85%e5%ad%98%e5%bc%82%e5%b8%b8%e5%8d%a0%e7%94%a8>#</a></h3><pre><code>import sys
v = 1
sys.getsizeof(v)
# 可以读出 此变量emm 或者说 对象的内存占用大小
</code></pre><h2 id=异常>异常
<a class=anchor href=#%e5%bc%82%e5%b8%b8>#</a></h2><h3 id=plan1->plan1 ：
<a class=anchor href=#plan1->#</a></h3><pre><code>try:
#正常的操作
except:
#发生异常，执行这块代码
else:
#如果没有异常执行这块代码(在执行完try下函数没有异常发生)
</code></pre><h3 id=列表的坑>列表的坑
<a class=anchor href=#%e5%88%97%e8%a1%a8%e7%9a%84%e5%9d%91>#</a></h3><p>当a 为一个列表
a = [1, 2, 3]
b = a
c = a
d = a
b.append(4)</p><p>这时，abcd四个列表都变成[1, 2, 3, 4]，emm… 所以直接以后不要把一个列表赋值给两个变量…除非不涉及修改，慎重慎重。。不过python中列表有<code>copy</code>一说，不过还没试过</p><h3 id=staticmethod>@staticmethod
<a class=anchor href=#staticmethod>#</a></h3><pre><code>定义类中的的这个方法为静态方法，同理的还有`@classmethod`类方法。
</code></pre><h3 id=常见异常>常见异常
<a class=anchor href=#%e5%b8%b8%e8%a7%81%e5%bc%82%e5%b8%b8>#</a></h3><pre><code>1.AssertionError：当assert断言条件为假的时候抛出的异常
2.AttributeError：当访问的对象属性不存在的时候抛出的异常
3.IndexError：超出对象索引的范围时抛出的异常
4.KeyError：在字典中查找一个不存在的key抛出的异常
5.NameError：访问一个不存在的变量时抛出的异常
6.OSError：操作系统产生的异常
7.SyntaxError：语法错误时会抛出此异常
8.TypeError：类型错误，通常是不通类型之间的操作会出现此异常
9.ZeroDivisionError：进行数学运算时除数为0时会出现此异常··
</code></pre><hr><hr><hr><h1 id=事件模式中事件篡改事故>事件模式中，事件篡改事故
<a class=anchor href=#%e4%ba%8b%e4%bb%b6%e6%a8%a1%e5%bc%8f%e4%b8%ad%e4%ba%8b%e4%bb%b6%e7%af%a1%e6%94%b9%e4%ba%8b%e6%95%85>#</a></h1><p>在循环创建事件时，将<code>event</code> <code>put</code>到队列中，此时，被处理一半，因为不在一个线程所以下一个循环来临就将<code>event</code>的内容进行了修改。 杜绝此方法除了添加锁，只好将事件<code>copy</code>之后再传入时间引擎。如此便可暂防止事件处理一半被修改的事情发生。</p><hr><hr><hr><h1 id=代码块注释>代码块注释
<a class=anchor href=#%e4%bb%a3%e7%a0%81%e5%9d%97%e6%b3%a8%e9%87%8a>#</a></h1><p><a href=https://www.jetbrains.com/help/pycharm/surrounding-blocks-of-code-with-language-constructs.html>Surrounding Blocks of Code with Language Constructs</a></p><h3 id=visualstudio模式>VisualStudio模式：
<a class=anchor href=#visualstudio%e6%a8%a1%e5%bc%8f>#</a></h3><pre><code>#region Description(说明)
print &quot;code here&quot;
#endregion
</code></pre><h3 id=netbeans模式>NetBeans模式：
<a class=anchor href=#netbeans%e6%a8%a1%e5%bc%8f>#</a></h3><pre><code>// &lt;editor-fold desc=&quot;Description&quot;&gt;
code here
// &lt;/editor-fold&gt;
</code></pre><h1 id=类>类
<a class=anchor href=#%e7%b1%bb>#</a></h1><pre><code>以后详谈，本着一切皆对象的原则，所以对于类的了解决定了Python的认知，先记一个
def __init__(self):
        super(Proformance, self).__init__()
#这个super表示了继承类和被继承类的 __init__调用时序，其它重名函数是覆盖，这个……
</code></pre><h2 id=数据类>数据类
<a class=anchor href=#%e6%95%b0%e6%8d%ae%e7%b1%bb>#</a></h2><p>用一个类来表示一个数据类型（这几天想着这个表示不同数据类型的组合方法恰类似于C中的结构体，然后<code>Python</code>中的数组元素存储各种东西什么类啊、数组套数组啊，字典存储啊，恰巧与C中的指针指向指针……emm ）如：</p><pre><code>class A(object):
    def __init__(self):
    self.a = 'a'
    self.b = 'b'
A().__dict__
</code></pre><blockquote><p>{&lsquo;a&rsquo;: &lsquo;a&rsquo;, &lsquo;b&rsquo;: &lsquo;b&rsquo;}</p></blockquote><p>但是<code>A().__dict__['a'] = 'It is a'</code> 虽然不会报错，但之后再次调用<code>A().__dict__</code>显示结果还是一样，但：</p><pre><code>a = A()
a.__dict__['a'] = 'It is a'
a.__dict__
</code></pre><blockquote><p>{&lsquo;a&rsquo;: &lsquo;It is a&rsquo;, &lsquo;b&rsquo;: &lsquo;b&rsquo;}</p></blockquote><p>这样我就用过一次，在不确定数据类会有几个元素甚至不知道会是什么名称的时候来创建的，毕竟：(这样的方式可以随便添加嘛)</p><pre><code>a.__dict__['w'] = 'It is www'
a.__dict__
</code></pre><blockquote><p>{&lsquo;a&rsquo;: &lsquo;It is a&rsquo;, &lsquo;b&rsquo;: &lsquo;b&rsquo;, &lsquo;w&rsquo;: &lsquo;It is www&rsquo;</p></blockquote><h3 id=若出现docx模块pyinstaller打包问题>若出现docx模块pyInstaller打包问题
<a class=anchor href=#%e8%8b%a5%e5%87%ba%e7%8e%b0docx%e6%a8%a1%e5%9d%97pyinstaller%e6%89%93%e5%8c%85%e9%97%ae%e9%a2%98>#</a></h3><p>大概的解决步骤是这样的：
找到python-docx包安装路径下的一个名为default.docx的文件，我是通过everything这个强大的搜索工具全局搜索找到这个文件的，它在我本地所在的路径是：E:\code\env.env\Lib\site-packages\docx\templates
把找到的default.docx文件复制到我的py脚本文件所在的目录下。
修改脚本中创建Document对象的方式：
从原来的创建方式：
document = Document()
修改为：
import os
document = Document(docx=os.path.join(os.getcwd(), &lsquo;default.docx&rsquo;))
再次用pyinstaller工具打包脚本为exe文件
把default.docx文件复制到与生成的exe文件相同的路径下，再次运行exe文件，顺利运行通过，没有再出现之前的报错，问题得到解决。
作者：(m2fox)[https://www.jianshu.com/p/94ac13f6633e]
來源：简书</p><h4 id=拼接list字符串>拼接List字符串
<a class=anchor href=#%e6%8b%bc%e6%8e%a5list%e5%ad%97%e7%ac%a6%e4%b8%b2>#</a></h4><p>将list中的元素拼接起来，并使用<code>,</code>隔开可这么来：</p><pre><code>import itertools 
list = ['123', '567']
xlist = &quot;,&quot;.join(list)
or
ylist = &quot;,&quot;.join(*list)
s = .join(itertools.chain(kwargs.keys()))
</code></pre><p>区别在于x为一个元素添加一个<code>,</code>，y为把列表中的素也拆分之后再添加</p><h3 id=simplehttpserver>SimpleHTTPServer
<a class=anchor href=#simplehttpserver>#</a></h3><p>小型的局域网嘛☺，很常用，不过在Python3中有了变化…</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>$</span> Python2
</span></span><span style=display:flex><span>    python <span style=color:#f92672>-</span>m SimpleHTTPServer 
</span></span><span style=display:flex><span>    <span style=color:#f92672>---</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>$</span> Python3
</span></span><span style=display:flex><span>    python <span style=color:#f92672>-</span>m http<span style=color:#f92672>.</span>server
</span></span></code></pre></div><p>顺带一提：<code>-m</code>是可以在外执行内库的操作，🦑大概是这个意思吧—— 用<code>pdb</code>的时候也是这么用的…</p><h3 id=老夫的月份生成>老夫的月份生成
<a class=anchor href=#%e8%80%81%e5%a4%ab%e7%9a%84%e6%9c%88%e4%bb%bd%e7%94%9f%e6%88%90>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># -*- coding:utf-8 -*-</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> datetime
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> copy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>splitMonth</span>(start, end):
</span></span><span style=display:flex><span>    start <span style=color:#f92672>=</span> str2Date(start)
</span></span><span style=display:flex><span>    end <span style=color:#f92672>=</span> str2Date(end)
</span></span><span style=display:flex><span>    _delta <span style=color:#f92672>=</span> end <span style=color:#f92672>-</span> start
</span></span><span style=display:flex><span>    datelist <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> _delta<span style=color:#f92672>.</span>days <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>10</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># 拆分</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 按*月*拆分（10日间隔）</span>
</span></span><span style=display:flex><span>        n <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>        _start <span style=color:#f92672>=</span> copy<span style=color:#f92672>.</span>copy(start)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> _delta<span style=color:#f92672>.</span>days <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>            n <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> _start<span style=color:#f92672>.</span>day <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>:
</span></span><span style=display:flex><span>                _end <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>date(_start<span style=color:#f92672>.</span>year, _start<span style=color:#f92672>.</span>month, <span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> end <span style=color:#f92672>&gt;</span> _end:
</span></span><span style=display:flex><span>                    datelist<span style=color:#f92672>.</span>append((date2str(_start), date2str(_end)))
</span></span><span style=display:flex><span>                    _start <span style=color:#f92672>=</span> _end <span style=color:#f92672>+</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                    datelist<span style=color:#f92672>.</span>append((date2str(_start), date2str(end)))
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>elif</span> _start<span style=color:#f92672>.</span>day <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>20</span>:
</span></span><span style=display:flex><span>                _end <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>date(_start<span style=color:#f92672>.</span>year, _start<span style=color:#f92672>.</span>month, <span style=color:#ae81ff>20</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> end <span style=color:#f92672>&gt;</span> _end:
</span></span><span style=display:flex><span>                    datelist<span style=color:#f92672>.</span>append((date2str(_start), date2str(_end)))
</span></span><span style=display:flex><span>                    _start <span style=color:#f92672>=</span> _end <span style=color:#f92672>+</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                    datelist<span style=color:#f92672>.</span>append((date2str(_start), date2str(end)))
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                _end <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>date(_start<span style=color:#f92672>.</span>year, _start<span style=color:#f92672>.</span>month, _start<span style=color:#f92672>.</span>day) <span style=color:#f92672>+</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>15</span>)
</span></span><span style=display:flex><span>                _end <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>date(_end<span style=color:#f92672>.</span>year, _end<span style=color:#f92672>.</span>month, <span style=color:#ae81ff>1</span>) <span style=color:#f92672>-</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> end <span style=color:#f92672>&gt;</span> _end:
</span></span><span style=display:flex><span>                    datelist<span style=color:#f92672>.</span>append((date2str(_start), date2str(_end)))
</span></span><span style=display:flex><span>                    _start <span style=color:#f92672>=</span> _end <span style=color:#f92672>+</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                    datelist<span style=color:#f92672>.</span>append(date2str(_start), date2str(end))
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            _delta <span style=color:#f92672>=</span> end <span style=color:#f92672>-</span> _start <span style=color:#f92672>+</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> datelist
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> [(date2str(start), date2str(end))]
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>splitMouthBySE_N</span>(start, end, n):
</span></span><span style=display:flex><span>    start <span style=color:#f92672>=</span> str2Date(start)
</span></span><span style=display:flex><span>    end <span style=color:#f92672>=</span> str2Date(end)
</span></span><span style=display:flex><span>    _delta <span style=color:#f92672>=</span> end <span style=color:#f92672>-</span> start
</span></span><span style=display:flex><span>    datelist <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> _delta<span style=color:#f92672>.</span>days <span style=color:#f92672>&gt;</span> n:
</span></span><span style=display:flex><span>        <span style=color:#75715e># 拆分</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 按*月*拆分（10日间隔）</span>
</span></span><span style=display:flex><span>        _start <span style=color:#f92672>=</span> copy<span style=color:#f92672>.</span>copy(start)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> _delta<span style=color:#f92672>.</span>days <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>            _loop <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> _n <span style=color:#f92672>in</span> range(int(<span style=color:#ae81ff>30</span><span style=color:#f92672>/</span>n)):
</span></span><span style=display:flex><span>                _loop <span style=color:#f92672>=</span> _loop <span style=color:#f92672>+</span> n
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> _start<span style=color:#f92672>.</span>day <span style=color:#f92672>&lt;</span> _loop:
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> _start<span style=color:#f92672>.</span>month <span style=color:#f92672>==</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>and</span> _loop <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>28</span>:
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>if</span> _start<span style=color:#f92672>.</span>year<span style=color:#f92672>%</span><span style=color:#ae81ff>4</span>:
</span></span><span style=display:flex><span>                            _end <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>date(_start<span style=color:#f92672>.</span>year, _start<span style=color:#f92672>.</span>month, <span style=color:#ae81ff>28</span>)
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                            _end <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>date(_start<span style=color:#f92672>.</span>year, _start<span style=color:#f92672>.</span>month, <span style=color:#ae81ff>29</span>)
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                        _end <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>date(_start<span style=color:#f92672>.</span>year, _start<span style=color:#f92672>.</span>month, _loop)
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> end <span style=color:#f92672>&gt;</span> _end:
</span></span><span style=display:flex><span>                        datelist<span style=color:#f92672>.</span>append((date2str(_start), date2str(_end)))
</span></span><span style=display:flex><span>                        _start <span style=color:#f92672>=</span> _end <span style=color:#f92672>+</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                        datelist<span style=color:#f92672>.</span>append((date2str(_start), date2str(end)))
</span></span><span style=display:flex><span>                        _delta <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>                    _end <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>date(_start<span style=color:#f92672>.</span>year, _start<span style=color:#f92672>.</span>month, _start<span style=color:#f92672>.</span>day) <span style=color:#f92672>+</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>15</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                _end <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>date(_end<span style=color:#f92672>.</span>year, _end<span style=color:#f92672>.</span>month, <span style=color:#ae81ff>1</span>) <span style=color:#f92672>-</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> end <span style=color:#f92672>&gt;</span> _end:
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> _start <span style=color:#f92672>&gt;</span> _end:
</span></span><span style=display:flex><span>                        _delta <span style=color:#f92672>=</span> end <span style=color:#f92672>-</span> _start <span style=color:#f92672>+</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                        datelist<span style=color:#f92672>.</span>append((date2str(_start), date2str(_end)))
</span></span><span style=display:flex><span>                    _start <span style=color:#f92672>=</span> _end <span style=color:#f92672>+</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                    datelist<span style=color:#f92672>.</span>append((date2str(_start), date2str(end)))
</span></span><span style=display:flex><span>                    _delta <span style=color:#f92672>=</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                _delta <span style=color:#f92672>=</span> end <span style=color:#f92672>-</span> _start <span style=color:#f92672>+</span> datetime<span style=color:#f92672>.</span>timedelta(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> datelist
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> [(date2str(start), date2str(end))]
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>gropdate</span>(datelist, itemNum<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>, gropNum<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>):
</span></span><span style=display:flex><span>    <span style=color:#75715e>#将传入datelist[(str(start1), str(end1)), (str(start2), str(end2))...] -&gt; 传入为月碎片</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 打按月对月碎片进行打组。 </span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 传入参数 itemNum: 一个组含几个月, gropNum: 将这些碎片打为几组</span>
</span></span><span style=display:flex><span>    _dic <span style=color:#f92672>=</span> collections<span style=color:#f92672>.</span>OrderedDict()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> datelist:
</span></span><span style=display:flex><span>        <span style=color:#75715e># 按月分组</span>
</span></span><span style=display:flex><span>        keyName <span style=color:#f92672>=</span> i[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39;-&#39;</span>)[<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> keyName <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> _dic:
</span></span><span style=display:flex><span>            _dic[keyName] <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>        _dic[keyName]<span style=color:#f92672>.</span>append(i)
</span></span><span style=display:flex><span>    monthList <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    groups <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    groupListTemp <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    groupList <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> _dic<span style=color:#f92672>.</span>keys():
</span></span><span style=display:flex><span>        <span style=color:#75715e># 得到月份列表</span>
</span></span><span style=display:flex><span>        monthList<span style=color:#f92672>.</span>append(i) <span style=color:#75715e>#[1,2,3...,7,8,9]</span>
</span></span><span style=display:flex><span>    monthNum <span style=color:#f92672>=</span> len(monthList)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> gropNum:
</span></span><span style=display:flex><span>        itemNum <span style=color:#f92672>=</span> round(float(monthNum)<span style=color:#f92672>/</span>gropNum)
</span></span><span style=display:flex><span>        itemNum <span style=color:#f92672>=</span> int(itemNum)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> itemNum:
</span></span><span style=display:flex><span>        slipNum <span style=color:#f92672>=</span> int(monthNum<span style=color:#f92672>/</span>itemNum)
</span></span><span style=display:flex><span>        start <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>        end <span style=color:#f92672>=</span> int(itemNum)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> mon <span style=color:#f92672>in</span> range(slipNum):
</span></span><span style=display:flex><span>            groups<span style=color:#f92672>.</span>append(monthList[int(start):int(end)])
</span></span><span style=display:flex><span>            start <span style=color:#f92672>=</span> copy<span style=color:#f92672>.</span>copy(end)
</span></span><span style=display:flex><span>            end <span style=color:#f92672>=</span> end <span style=color:#f92672>+</span> itemNum
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> monthNum<span style=color:#f92672>%</span>itemNum:
</span></span><span style=display:flex><span>            groups<span style=color:#f92672>.</span>append(monthList[start:monthNum])    <span style=color:#75715e># 非整除补足</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> groups:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> ii <span style=color:#f92672>in</span> i:
</span></span><span style=display:flex><span>                groupListTemp<span style=color:#f92672>.</span>append(_dic[ii])
</span></span><span style=display:flex><span>            groupList<span style=color:#f92672>.</span>append(groupListTemp)
</span></span><span style=display:flex><span>            groupListTemp <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> groupList
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>None</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span><span style=color:#75715e># region 日期`date`格式与`str`转换处理</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>date2str</span>(_date):
</span></span><span style=display:flex><span>    <span style=color:#75715e># datetime.date 转换为 str    (有为了适配原程序的补零操作…)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> _date<span style=color:#f92672>.</span>month <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>:
</span></span><span style=display:flex><span>        strDate <span style=color:#f92672>=</span> str(_date<span style=color:#f92672>.</span>year) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;-&#39;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;0&#39;</span><span style=color:#f92672>+</span>str(_date<span style=color:#f92672>.</span>month) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;-&#39;</span> <span style=color:#f92672>+</span> str(_date<span style=color:#f92672>.</span>day)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        strDate <span style=color:#f92672>=</span> str(_date<span style=color:#f92672>.</span>year) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;-&#39;</span> <span style=color:#f92672>+</span> str(_date<span style=color:#f92672>.</span>month) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;-&#39;</span> <span style=color:#f92672>+</span> str(_date<span style=color:#f92672>.</span>day)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> _date<span style=color:#f92672>.</span>day <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>:
</span></span><span style=display:flex><span>        strDate <span style=color:#f92672>=</span> strDate[:<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;0&#39;</span><span style=color:#f92672>+</span>str(_date<span style=color:#f92672>.</span>day)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> strDate
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>str2Date</span>(_str):
</span></span><span style=display:flex><span>    <span style=color:#75715e># str 转换为 datetime.date</span>
</span></span><span style=display:flex><span>    y, m, d <span style=color:#f92672>=</span> _str<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39;-&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> datetime<span style=color:#f92672>.</span>date(int(y), int(m), int(d))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># endregion </span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    print(splitMouthBySE_N(<span style=color:#e6db74>&#39;2016-01-02&#39;</span>, <span style=color:#e6db74>&#39;2018-03-01&#39;</span>, <span style=color:#ae81ff>5</span>))
</span></span></code></pre></div><h2 id=python36之后的奇淫技巧>Python3.6之后的奇淫技巧
<a class=anchor href=#python36%e4%b9%8b%e5%90%8e%e7%9a%84%e5%a5%87%e6%b7%ab%e6%8a%80%e5%b7%a7>#</a></h2><ol><li>可使用下划线将长数字隔开，便于阅读 <code>10000</code>=<code>10_000</code></li><li>字符串操作除了 <code>%</code>和<code>format</code>之外还有<code>f</code>操作</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$</span> <span style=color:#f92672>%</span>
</span></span><span style=display:flex><span>s <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>%s</span><span style=color:#e6db74> is </span><span style=color:#e6db74>%d</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> (<span style=color:#e6db74>&#39;two&#39;</span>, <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$</span> format
</span></span><span style=display:flex><span>s <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{fruit}</span><span style=color:#e6db74> is </span><span style=color:#e6db74>{color}</span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>.</span>format(fruit<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;apple&#39;</span>, color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;red&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$</span> f
</span></span><span style=display:flex><span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Bob&#39;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;Hello, </span><span style=color:#e6db74>{</span>name<span style=color:#e6db74>}</span><span style=color:#e6db74>!&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>### 甚至</span>
</span></span><span style=display:flex><span>a <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>b <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;Five plus ten is </span><span style=color:#e6db74>{</span>a <span style=color:#f92672>+</span> b<span style=color:#e6db74>}</span><span style=color:#e6db74> and not </span><span style=color:#e6db74>{</span><span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> (a <span style=color:#f92672>+</span> b)<span style=color:#e6db74>}</span><span style=color:#e6db74>.&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#### 精度</span>
</span></span><span style=display:flex><span>PI <span style=color:#f92672>=</span> <span style=color:#ae81ff>3.141592653</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Pi is </span><span style=color:#e6db74>{</span>PI<span style=color:#e6db74>:</span><span style=color:#e6db74>.2f</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#e6db74>&#39;Pi is 3.14&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> error <span style=color:#f92672>=</span> <span style=color:#ae81ff>50159747054</span>
</span></span><span style=display:flex><span><span style=color:#75715e>##### 以16进制格式化</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;Programmer Error: </span><span style=color:#e6db74>{</span>error<span style=color:#e6db74>:</span><span style=color:#e6db74>#x</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span><span style=color:#e6db74>&#39;Programmer Error: 0xbadc0ffee&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>##### 以二进制格式化</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#39;Programmer Error: </span><span style=color:#e6db74>{</span>error<span style=color:#e6db74>:</span><span style=color:#e6db74>#b</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#e6db74>&#39;Programmer Error: 0b101110101101110000001111111111101110&#39;</span>
</span></span></code></pre></div><p>3.变量注释 <code>def my_add(a: int, b: int) -> int: \n return 0</code> 仅仅用来注释，其实传参出参并不受控制…</p><hr><h1 id=魔法方法>魔法方法
<a class=anchor href=#%e9%ad%94%e6%b3%95%e6%96%b9%e6%b3%95>#</a></h1><p>假设定义类 <code>EmmNe</code>, <code>EmmNe</code>拥有<code>self.aaa</code>与<code>self.aaadict</code>、列表<code>self.aaalist</code> 且<code>__init__</code>允许两个传参</p><p>__len__:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> __len__(self):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> len(self<span style=color:#f92672>.</span>aaa)
</span></span><span style=display:flex><span><span style=color:#75715e># 则在外`len`此实例化对象时，会返回这个结果</span>
</span></span></code></pre></div><p>__getitem__:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> __getitem__(self, key)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> self<span style=color:#f92672>.</span>aaadict[key]
</span></span><span style=display:flex><span>en <span style=color:#f92672>=</span> EmmNe(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>print(en[<span style=color:#960050;background-color:#1e0010>`</span>])
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#就像上面那样。 不过还有下面的用法</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> __getitem__(self, index):
</span></span><span style=display:flex><span>    retrun self<span style=color:#f92672>.</span>aaalist[index]
</span></span><span style=display:flex><span>w <span style=color:#f92672>=</span> Emm(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> w:
</span></span><span style=display:flex><span>    print (i)
</span></span><span style=display:flex><span><span style=color:#75715e># 则输出列表中内容</span>
</span></span></code></pre></div><p>__setitem__:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> __setitem__(self, key, value)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> self<span style=color:#f92672>.</span>aaadict[key] <span style=color:#f92672>=</span> value
</span></span><span style=display:flex><span><span style=color:#75715e># 拥有此方法，则在外可将实例对象当作字典操作:</span>
</span></span><span style=display:flex><span>enp[<span style=color:#e6db74>&#39;a&#39;</span>] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;asd&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 就像这样</span>
</span></span></code></pre></div><h3 id=collectionss>collectionss
<a class=anchor href=#collectionss>#</a></h3><p>总结一句话： <code>collections</code>出品， 必属精品。
马上能想到的 有序字典，还有那啥都是出自此个模块之下。
今天用的 计数也是出自此处 反正之后 这个里面能实现的功能，那就放弃手写吧————😓
from collections import Counter</p><h3 id=function-annotations>Function Annotations
<a class=anchor href=#function-annotations>#</a></h3><p>Annotations are stored in the <strong>annotations</strong> attribute of the function as a dictionary and have no effect on any other part of the function. Parameter annotations are defined by a colon after the parameter name, followed by an expression evaluating to the value of the annotation. Return annotations are defined by a literal ->, followed by an expression, between the parameter list and the colon denoting the end of the def statement. The following example has a positional argument, a keyword argument, and the return value annotated:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>f</span>(ham: str, eggs: str <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;eggs&#39;</span>) <span style=color:#f92672>-&gt;</span> str:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;Annotations:&#34;</span>, f<span style=color:#f92672>.</span>__annotations__)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;Arguments:&#34;</span>, ham, eggs)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> ham <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39; and &#39;</span> <span style=color:#f92672>+</span> eggs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>f(<span style=color:#e6db74>&#39;spam&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> Annotations: {<span style=color:#e6db74>&#39;ham&#39;</span>: <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>class</span> <span style=color:#960050;background-color:#1e0010>&#39;</span><span style=color:#a6e22e>str</span><span style=color:#e6db74>&#39;&gt;, &#39;</span><span style=color:#66d9ef>return</span><span style=color:#e6db74>&#39;: &lt;class &#39;</span>str<span style=color:#e6db74>&#39;&gt;, &#39;</span>eggs<span style=color:#e6db74>&#39;: &lt;class &#39;</span>str<span style=color:#e6db74>&#39;&gt;}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> Arguments: spam eggs
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> <span style=color:#e6db74>&#39;spam and eggs&#39;</span>
</span></span></code></pre></div><h3 id=logger>Logger
<a class=anchor href=#logger>#</a></h3><p>模块名： logging
上手容易，功能丰富，性能肯定也好过自己✍
另外，懒———</p><pre tabindex=0><code>import sys
import logging
import logging_error

logger1 = logging.getLogger(&#39;loger1&#39;)
logger2 = logging.getLogger(&#39;loger2&#39;)
#实例化两个logger,默认名称为：`root`
&#34;&#34;&#34;
我居然以为root是程序执行处的名字，以为放到函数中就会显示函数名。emm
所以才有了下面多层函数嵌套…，以及调用外部`import`
&#34;&#34;&#34;

formatter = logging.Formatter(&#39;[%(name)s]%(asctime)s %(levelname)-8s: %(message)s&#39;)
#定义日志格式：
&#34;&#34;&#34;
%(name)s Logger的名字
%(levelno)s 数字形式的日志级别
%(levelname)s 文本形式的日志级别
%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有
%(filename)s 调用日志输出函数的模块的文件名
%(module)s 调用日志输出函数的模块名|
%(funcName)s 调用日志输出函数的函数名|
%(lineno)d 调用日志输出函数的语句所在的代码行
%(created)f 当前时间，用UNIX标准的表示时间的浮点数表示|
%(relativeCreated)d 输出日志信息时的，自Logger创建以来的毫秒数|
%(asctime)s 字符串形式的当前时间。默认格式是“2003-07-08 16:49:45,896”。逗号后面的是毫秒
%(thread)d 线程ID。可能没有
%(threadName)s 线程名。可能没有
%(process)d 进程ID。可能没有
%(message)s 用户输出的消息
&#34;&#34;&#34;

fileHandler = logging.FileHandler(&#39;loger.log&#39;)
fileHandler.setFormatter(formatter)

consoleHandler = logging.StreamHandler(sys.stdout)
consoleHandler.formatter = formatter
#配置文件、终端日志处理器。可以使用不同格式，来区分处理

logger1.addHandler(fileHandler)
logger2.addHandler(fileHandler)
logger1.addHandler(consoleHandler)
logger2.addHandler(consoleHandler)
#为日志机添加处理器

logger1.setLevel(logging.INFO)
#logger2.setLevel()
#设置各日志机打印等级


logger1.debug(&#39;debugO&#39;)
logger1.info(&#39;info&#39;)
logger2.info(&#39;info&#39;)
logger1.error(&#39;error&#39;)
def warn_msg():
    logger1.warn(&#39;warn msg&#39;)
    warn_msg2()
def warn_msg2():
    logger2.warn(u&#39;warn 信息&#39;)
    logging_error.error_demo()
warn_msg()
</code></pre><p>当然，logger还有别的调用方法，不过这应该就够了，
具体要怎么实现，就去找官方文档了。
预防针： 多种配置方法、日志重复输出:<a href=http://python.jobbole.com/86887/>见此</a></p><h2 id=lambda函数>lambda函数
<a class=anchor href=#lambda%e5%87%bd%e6%95%b0>#</a></h2><h3 id=排序>排序
<a class=anchor href=#%e6%8e%92%e5%ba%8f>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span>aaa
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> [{<span style=color:#e6db74>&#39;time&#39;</span>: <span style=color:#ae81ff>1</span>}, {<span style=color:#e6db74>&#39;time&#39;</span>: <span style=color:#ae81ff>3</span>}, {<span style=color:#e6db74>&#39;time&#39;</span>: <span style=color:#ae81ff>2</span>}]
</span></span><span style=display:flex><span>sorted(aaa, key <span style=color:#f92672>=</span> <span style=color:#66d9ef>lambda</span> x: x[<span style=color:#e6db74>&#34;time&#34;</span>])
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> [{<span style=color:#e6db74>&#39;time&#39;</span>: <span style=color:#ae81ff>1</span>}, {<span style=color:#e6db74>&#39;time&#39;</span>: <span style=color:#ae81ff>2</span>}, {<span style=color:#e6db74>&#39;time&#39;</span>: <span style=color:#ae81ff>3</span>}]
</span></span><span style=display:flex><span>sorted(aaa, key <span style=color:#f92672>=</span> <span style=color:#66d9ef>lambda</span> x: x[<span style=color:#e6db74>&#34;time&#34;</span>], reverse<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>&gt;&gt;&gt;</span> [{<span style=color:#e6db74>&#39;time&#39;</span>: <span style=color:#ae81ff>3</span>}, {<span style=color:#e6db74>&#39;time&#39;</span>: <span style=color:#ae81ff>2</span>}, {<span style=color:#e6db74>&#39;time&#39;</span>: <span style=color:#ae81ff>1</span>}]
</span></span></code></pre></div><h2 id=mock>Mock
<a class=anchor href=#mock>#</a></h2><p>使用: unittest</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>    mock<span style=color:#f92672>.</span>patch<span style=color:#f92672>.</span>object: Mock <span style=color:#75715e># 一个类, 后接方法</span>
</span></span><span style=display:flex><span>    mock<span style=color:#f92672>.</span>patch: Mock <span style=color:#75715e># 一个方法, 按路径</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@mock.patch</span>(<span style=color:#e6db74>&#34;databases.wx_service.get_user_base_info&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@mock.patch.object</span>(wx_service<span style=color:#f92672>.</span>WeChat_OAP, <span style=color:#e6db74>&#34;send_template_msg&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test_create_weawarning</span>(self, mock_send_template_msg, mock_get_user_base_info):
</span></span><span style=display:flex><span>        <span style=color:#75715e># 装饰器生效从内到外, 传入参数顺序, 从左到右</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>pass</span>
</span></span><span style=display:flex><span>        mock_send_template_msg<span style=color:#f92672>.</span>return_value <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>/</span>{}<span style=color:#f92672>/</span>[]<span style=color:#f92672>/</span>() 皆可  设定mock返回值
</span></span><span style=display:flex><span>        mock_get_user_base_info<span style=color:#f92672>.</span>side_effect <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>/</span>{}<span style=color:#f92672>/</span>[]<span style=color:#f92672>/</span>(), <span style=color:#e6db74>&#39;&#39;</span><span style=color:#f92672>/</span>{}<span style=color:#f92672>/</span>[]<span style=color:#f92672>/</span>()] 设定每次调用mock函数依次返回返回值
</span></span></code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#彻底摆脱to_dict和from_dict>彻底摆脱<code>to_dict</code>和<code>from_dict</code></a><ul><li><a href=#使用-pydantic>使用 <code>pydantic</code></a></li></ul></li><li><a href=#多个类属性一次赋值>多个类属性一次赋值</a></li><li><a href=#列表表达式-二维数组边一维-取字典内变一维>列表表达式 二维数组边一维 取字典内变一维</a></li><li><a href=#pip-not-found-issue>PiP Not Found Issue</a></li><li><a href=#modulenotfounderror-no-module-named-pip>ModuleNotFoundError: No module named &lsquo;pip&rsquo;</a><ul><li><a href=#升级pip时出现问题可由下方命令修复>升级<code>PiP</code>时出现问题可由下方命令修复</a></li></ul></li><li><a href=#ssl校验>SSL校验</a><ul><li><a href=#使用国内镜像下载python>使用国内镜像下载Python</a></li><li><a href=#声明参数类型>声明参数类型</a></li><li><a href=#时间处理>时间处理</a></li><li><a href=#合并字典>合并字典</a></li><li><a href=#聊胜于无的小玩意-preety-tools>聊胜于无的小玩意 preety tools</a></li><li><a href=#ide>IDE?</a></li><li><a href=#beautifulsoup>BeautifulSoup</a></li><li><a href=#datetime字符串转时间--时间转字符串>datetime字符串转时间 时间转字符串:</a></li><li><a href=#保存數據到xlsxsqlite3csv>保存數據到xlsx，sqlite3、csv：</a></li><li><a href=#image下>Image下：</a></li><li><a href=#pandas>Pandas:</a></li></ul></li><li><a href=#闲语>闲语：</a><ul><li></li></ul></li></ul><ul><li><ul><li></li><li><a href=#变量>变量</a></li></ul></li><li><a href=#变换数据类型>变换数据类型</a><ul><li></li></ul></li><li><a href=#python3>Python3</a><ul><li><a href=#一不小心发现的语法>一不小心发现的语法</a></li><li><a href=#-与--方法>* 与 ** 方法:</a></li><li><a href=#获取指定目录下所有文件名列表>获取指定目录下所有文件名列表</a></li><li><a href=#if-else>IF ELSE</a></li><li><a href=#python-2-中的object新式类和经典类>Python 2 中的object新式类和经典类</a></li><li><a href=#queue>Queue</a></li><li><a href=#series和dataframe>series和dataframe</a></li><li><a href=#自命名创建方式>自命名创建方式</a></li><li><a href=#查看>查看</a></li><li><a href=#zip-和-数组变字典>zip 和 数组变字典</a></li><li><a href=#字典操作>字典操作</a></li><li><a href=#csv>CSV</a></li><li><a href=#txt保存>txt保存</a></li><li><a href=#json>json</a></li><li><a href=#shelve>Shelve</a></li></ul></li><li><a href=#接口>接口。</a></li><li><a href=#列表list>列表List</a><ul><li><a href=#列表操作包含以下函数>列表操作包含以下函数:</a></li><li><a href=#列表操作包含以下方法>列表操作包含以下方法:</a></li></ul></li><li><a href=#字符串连接>字符串连接</a><ul><li><a href=#方法一>方法一</a></li><li><a href=#方法二>方法二</a></li><li><a href=#方法三>方法三</a></li></ul></li><li><a href=#手动编译py文件>手动编译Py文件</a></li><li><a href=#时间>时间</a><ul><li></li><li><a href=#格式化输出当前时间>格式化输出当前时间</a></li><li><a href=#time>time</a></li><li><a href=#线程-threading>线程 threading</a></li></ul></li></ul><ul><li><ul><li><a href=#数值取整>数值取整</a></li></ul></li></ul><ul><li><a href=#对象伪类间变量传递>对象（伪类）间变量传递</a></li><li><a href=#字典中建立函数映射方便调用>字典中建立函数映射，方便调用~</a><ul><li><a href=#collections-模块>collections 模块</a></li></ul></li><li><a href=#线程>线程</a><ul><li><a href=#线程同步>线程同步</a></li></ul></li><li><a href=#队列>队列</a><ul><li><a href=#一些方法>一些方法</a></li><li><a href=#老夫的demo>老夫的Demo</a></li></ul></li><li><a href=#进程>进程</a><ul><li></li><li><a href=#将进程定义为类>将进程定义为类</a></li></ul></li><li><a href=#font-colorcc0000警个告font><em><strong>警个告</strong></em></a><ul><li></li></ul></li><li><a href=#再加一个协程>再加一个协程</a><ul><li><a href=#基础实现>基础实现：</a></li><li><a href=#较完善方案>较完善方案：</a></li><li><a href=#futures>futures</a></li></ul></li><li><a href=#父类中的变量与类中变量>父类中的变量与类中变量</a><ul><li><a href=#列表的增删添>列表的增删添</a></li><li><a href=#一个函数的有效方式只在循环中执行一次---代码日志>一个函数的有效方式只在循环中执行一次 - 代码日志</a></li><li><a href=#函数调用函数-and-语法糖->函数调用函数 and 语法糖 @</a></li><li><a href=#变量作用域>变量作用域</a></li></ul></li><li><a href=#functools>functools</a><ul><li><a href=#partial>partial</a></li></ul></li></ul><ul><li><a href=#socket>socket</a></li><li><a href=#select----与socket配合的跨平台的异步io模型>select : 与Socket配合的跨平台的异步io模型</a></li><li><a href=#引用模块>引用模块</a><ul><li><a href=#同一文件夹下>同一文件夹下</a></li><li><a href=#其下级文件here下>其下级文件"here"下</a></li><li><a href=#在上级文件下>在上级文件下</a></li><li><a href=#在上级文件的下级文件中也就是在隔壁wang文件中>在上级文件的下级文件中（也就是在隔壁“wang”文件中）</a></li></ul></li><li><a href=#解决编码问题>解决编码问题</a><ul><li><a href=#输出提示打印乱码>输出提示打印乱码</a></li><li><a href=#内存异常占用>内存异常占用</a></li></ul></li><li><a href=#异常>异常</a><ul><li><a href=#plan1->plan1 ：</a></li><li><a href=#列表的坑>列表的坑</a></li><li><a href=#staticmethod>@staticmethod</a></li><li><a href=#常见异常>常见异常</a></li></ul></li></ul><ul><li><ul><li><a href=#visualstudio模式>VisualStudio模式：</a></li><li><a href=#netbeans模式>NetBeans模式：</a></li></ul></li></ul><ul><li><a href=#数据类>数据类</a><ul><li><a href=#若出现docx模块pyinstaller打包问题>若出现docx模块pyInstaller打包问题</a></li><li><a href=#simplehttpserver>SimpleHTTPServer</a></li><li><a href=#老夫的月份生成>老夫的月份生成</a></li></ul></li><li><a href=#python36之后的奇淫技巧>Python3.6之后的奇淫技巧</a></li></ul><ul><li><ul><li><a href=#collectionss>collectionss</a></li><li><a href=#function-annotations>Function Annotations</a></li><li><a href=#logger>Logger</a></li></ul></li><li><a href=#lambda函数>lambda函数</a><ul><li><a href=#排序>排序</a></li></ul></li><li><a href=#mock>Mock</a></li></ul></nav></div></aside></main></body></html>