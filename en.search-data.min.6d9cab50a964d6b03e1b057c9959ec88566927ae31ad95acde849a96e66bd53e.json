[{"id":0,"href":"/docs/programmer/","title":"ç¨‹åºå‘˜ç¬”è®°","section":"Docs","content":" ç®€ä»‹ # åŒ…å«åŸºæœ¬çŸ¥è¯†ã€ç¼–ç¨‹è¯­è¨€ã€åç«¯ã€å‰ç«¯ã€ç½‘ç»œç­‰ï¼Œè¿˜æœ‰ä¸€äº›äº¤å‰é¢†åŸŸã€‚\n"},{"id":1,"href":"/docs/programmer/gui/example/table-of-contents/with-toc/","title":"With ToC","section":"Table of Contents","content":" Caput vino delphine in tamen vias # Cognita laeva illo fracta # Lorem markdownum pavent auras, surgit nunc cingentibus libet Laomedonque que est. Pastor An arbor filia foedat, ne fugit aliter, per. Helicona illas et callida neptem est Oresitrophos caput, dentibus est venit. Tenet reddite famuli praesentem fortibus, quaeque vis foret si frondes gelidos gravidae circumtulit inpulit armenta nativum.\nTe at cruciabere vides rubentis manebo Maturuit in praetemptat ruborem ignara postquam habitasse Subitarum supplevit quoque fontesque venabula spretis modo Montis tot est mali quasque gravis Quinquennem domus arsit ipse Pellem turis pugnabant locavit Natus quaerere # Pectora et sine mulcere, coniuge dum tincta incurvae. Quis iam; est dextra Peneosque, metuis a verba, primo. Illa sed colloque suis: magno: gramen, aera excutiunt concipit.\nPhrygiae petendo suisque extimuit, super, pars quod audet! Turba negarem. Fuerat attonitus; et dextra retinet sidera ulnas undas instimulat vacuae generis? Agnus dabat et ignotis dextera, sic tibi pacis feriente at mora euhoeque comites hostem vestras Phineus. Vultuque sanguine dominoque metuit risi fama vergit summaque meus clarissimus artesque tinguebat successor nominis cervice caelicolae.\nLimitibus misere sit # Aurea non fata repertis praerupit feruntur simul, meae hosti lentaque citius levibus, cum sede dixit, Phaethon texta. Albentibus summos multifidasque iungitur loquendi an pectore, mihi ursaque omnia adfata, aeno parvumque in animi perlucentes. Epytus agis ait vixque clamat ornum adversam spondet, quid sceptra ipsum est. Reseret nec; saeva suo passu debentia linguam terga et aures et cervix de ubera. Coercet gelidumque manus, doluit volvitur induta?\nEnim sua # Iuvenilior filia inlustre templa quidem herbis permittat trahens huic. In cruribus proceres sole crescitque fata, quos quos; merui maris se non tamen in, mea.\nGermana aves pignus tecta # Mortalia rudibusque caelum cognosceret tantum aquis redito felicior texit, nec, aris parvo acre. Me parum contulerant multi tenentem, gratissime suis; vultum tu occupat deficeret corpora, sonum. E Actaea inplevit Phinea concepit nomenque potest sanguine captam nulla et, in duxisses campis non; mercede. Dicere cur Leucothoen obitum?\nPostibus mittam est nubibus principium pluma, exsecratur facta et. Iunge Mnemonidas pallamque pars; vere restitit alis flumina quae quoque, est ignara infestus Pyrrha. Di ducis terris maculatum At sede praemia manes nullaque!\n"},{"id":2,"href":"/docs/programmer/gui/example/table-of-contents/without-toc/","title":"Without ToC","section":"Table of Contents","content":" At me ipso nepotibus nunc celebratior genus # Tanto oblite # Lorem markdownum pectora novis patenti igne sua opus aurae feras materiaque illic demersit imago et aristas questaque posset. Vomit quoque suo inhaesuro clara. Esse cumque, per referri triste. Ut exponit solisque communis in tendens vincetis agisque iamque huic bene ante vetat omina Thebae rates. Aeacus servat admonitu concidit, ad resimas vultus et rugas vultu dignamque Siphnon.\nQuam iugulum regia simulacra, plus meruit humo pecorumque haesit, ab discedunt dixit: ritu pharetramque. Exul Laurenti orantem modo, per densum missisque labor manibus non colla unum, obiectat. Tu pervia collo, fessus quae Cretenque Myconon crate! Tegumenque quae invisi sudore per vocari quaque plus ventis fluidos. Nodo perque, fugisse pectora sorores.\nSumme promissa supple vadit lenius # Quibus largis latebris aethera versato est, ait sentiat faciemque. Aequata alis nec Caeneus exululat inclite corpus est, ire tibi ostendens et tibi. Rigent et vires dique possent lumina; eadem dixit poma funeribus paret et felix reddebant ventis utile lignum.\nRemansit notam Stygia feroxque Et dabit materna Vipereas Phrygiaeque umbram sollicito cruore conlucere suus Quarum Elis corniger Nec ieiunia dixit Vertitur mos ortu ramosam contudit dumque; placabat ac lumen. Coniunx Amoris spatium poenamque cavernis Thebae Pleiadasque ponunt, rapiare cum quae parum nimium rima.\nQuidem resupinus inducto solebat una facinus quae # Credulitas iniqua praepetibus paruit prospexit, voce poena, sub rupit sinuatur, quin suum ventorumque arcadiae priori. Soporiferam erat formamque, fecit, invergens, nymphae mutat fessas ait finge.\nBaculum mandataque ne addere capiti violentior Altera duas quam hoc ille tenues inquit Sicula sidereus latrantis domoque ratae polluit comites Possit oro clausura namque se nunc iuvenisque Faciem posuit Quodque cum ponunt novercae nata vestrae aratra Ite extrema Phrygiis, patre dentibus, tonso perculit, enim blanda, manibus fide quos caput armis, posse! Nocendo fas Alcyonae lacertis structa ferarum manus fulmen dubius, saxa caelum effuge extremis fixum tumor adfecit bella, potentes? Dum nec insidiosa tempora tegit spirarunt. Per lupi pars foliis, porreximus humum negant sunt subposuere Sidone steterant auro. Memoraverit sine: ferrum idem Orion caelum heres gerebat fixis?\n"},{"id":3,"href":"/docs/programmer/gui/example/","title":"Blog æ„å»º","section":"å›¾å½¢ç”¨æˆ·ç•Œé¢-GUI","content":" Blog æ„å»º # #blog #hugo\nHugoç‰¹æ®ŠMarkdownè¯­æ³•ç®€ä»‹(Introduction) # Ferre hinnitibus erat accipitrem dixi Troiae tollens # Lorem markdownum, a quoque nutu est quodcumque mandasset veluti. Passim inportuna totidemque nympha fert; repetens pendent, poenarum guttura sed vacet non, mortali undas. Omnis pharetramque gramen portentificisque membris servatum novabis fallit de nubibus atque silvas mihi. Dixit repetitaque Quid; verrit longa; sententia mandat quascumque nescio solebat litore; noctes. Hostem haerentem circuit plenaque tamen.\nPedum ne indigenae finire invergens carpebat Velit posses summoque De fumos illa foret Est simul fameque tauri qua ad # Locum nullus nisi vomentes. Ab Persea sermone vela, miratur aratro; eandem Argolicas gener.\nMe sol # Nec dis certa fuit socer, Nonacria dies manet tacitaque sibi? Sucis est iactata Castrumque iudex, et iactato quoque terraeque es tandem et maternos vittis. Lumina litus bene poenamque animos callem ne tuas in leones illam dea cadunt genus, et pleno nunc in quod. Anumque crescentesque sanguinis progenies nuribus rustica tinguet. Pater omnes liquido creditis noctem.\nif (mirrored(icmp_dvd_pim, 3, smbMirroredHard) != lion(clickImportQueue, viralItunesBalancing, bankruptcy_file_pptp)) { file += ip_cybercrime_suffix; } if (runtimeSmartRom == netMarketingWord) { virusBalancingWin *= scriptPromptBespoke + raster(post_drive, windowsSli); cd = address_hertz_trojan; soap_ccd.pcbServerGigahertz(asp_hardware_isa, offlinePeopleware, nui); } else { megabyte.api = modem_flowchart - web + syntaxHalftoneAddress; } if (3 \u0026lt; mebibyteNetworkAnimated) { pharming_regular_error *= jsp_ribbon + algorithm * recycleMediaKindle( dvrSyntax, cdma); adf_sla *= hoverCropDrive; templateNtfs = -1 - vertical; } else { expressionCompressionVariable.bootMulti = white_eup_javascript( table_suffix); guidPpiPram.tracerouteLinux += rtfTerabyteQuicktime(1, managementRosetta(webcamActivex), 740874); } var virusTweetSsl = nullGigo; Trepident sitimque # Sentiet et ferali errorem fessam, coercet superbus, Ascaniumque in pennis mediis; dolor? Vidit imi Aeacon perfida propositos adde, tua Somni Fluctibus errante lustrat non.\nTamen inde, vos videt e flammis Scythica parantem rupisque pectora umbras. Haec ficta canistris repercusso simul ego aris Dixit! Esse Fama trepidare hunc crescendo vigor ululasse vertice exspatiantur celer tepidique petita aversata oculis iussa est me ferro.\n"},{"id":4,"href":"/docs/programmer/ml/stable-diffusion/","title":"AIç”»å›¾","section":"æœºå™¨å­¦ä¹ ","content":" èµ·æ‰‹å¼ # æ­£ # best quality, (mature:1.3),perfect face, beautiful face,western, sharp focus, solo,beautiful woman,sexy,shiny skin,Navy blouse, beige shorts, soft light,cinematic lighting, sunny, dusk, outdoor,depth of field,shidudou,red_dress, å # (worst quality, low quality:2), NSFW, monochrome, zombie, overexposure, watermark, text, bad anatomy, bad hand,((extra hands)),extra fingers, too many fingers, fused fingers, bad arm, distorted arm, extra arms, fused arms, extra legs, missing leg,disembodied leg,extra nipples, detached arm, liquid hand, inverted hand, disembodied limb, oversized head, extra body, extra navel, (hair between eyes),sketch, duplicate, ugly, huge eyes, text, logo, worst face, (bad and mutated hands:1.3), (blurry:2.0), horror, geometry, bad_prompt, (bad hands), (missing fingers), multiple limbs, bad anatomy, (interlocked fingers:1.2), Ugly Fingers, (extra digit and hands and fingers and legs and arms:1.4), (deformed fingers:1.2), (long fingers:1.2), bad hand, extra legs, easynegative monochrome, (impassive:1.4), featureless, colorless, characterless, teen, young, grotesque, 3d max, desaturated, paintings, sketches, (worst quality:1.7), (low quality:1.7), (normal quality:1.7), lowres, normal quality, skin spots, acnes, skin blemishes, age spot,close-up,badhanv4, å®‰è£…é—®é¢˜è§£å†³ # è¿è¡Œ.shè„šæœ¬è‡ªåŠ¨åˆ›å»ºçš„venvç¯å¢ƒåœ¨../venvä¸­ï¼Œæœ‰æ—¶å€™bash webui.shç”¨ä¸å¯¹è™šæ‹Ÿç¯å¢ƒæ—¶å¯ä»¥æ‰‹åŠ¨ç”¨pythonæ‰§è¡Œ\ngit clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git cd stable-diffusion-webui git checkout 22bcc7be428c94e9408f589966c2040187245d81 bash webui.sh --skip-torch-cuda-test --no-half --precision full --use-cpu all --listen ç”±äºä»¥ä¸Šcheckoutäº†ï¼Œæ‰€ä»¥å¾ˆå¤šåº“ç‰ˆæœ¬è·Ÿä¸ä¸Šäº†ã€‚è™½ç„¶å®ƒä¼šåˆ›å»ºæ–°çš„è™šæ‹Ÿç¯å¢ƒï¼Œä½†æ˜¯æˆ‘çš„torchå®‰è£…çš„æœ€æ–°ç‰ˆæœ¬ã€‚æ‰€ä»¥é‡åˆ°äº†ä¸‹é¢é—®é¢˜ï¼Œç°åœ¨ç½—åˆ—è§£å†³åŠæ³•å¦‚ä¸‹ï¼š\né‡‡ç”¨è¿è¡Œä¹Ÿå¯\nsource venv/bin/activate python webui.py --skip-torch-cuda-test --no-half --precision full --use-cpu all --listen TypeError: AsyncConnectionPool.init() got an unexpected keyword argument \u0026lsquo;socket_options\u0026rsquo;\npip install --upgrade httpx ModuleNotFoundError: No module named \u0026rsquo;torchvision.transforms.functional_tensor'\nvim /home/ian/Desktop/stable-diffusion-webui/venv/lib/python3.10/site-packages/basicsr/data/degradations.py ä¿®æ”¹from torchvision.transforms.functional_tensor import rgb_to_grayscaleä¸ºfrom torchvision.transforms._functional_tensor import rgb_to_grayscale\nè§’è‰²æ§åˆ¶ - ContralNet # ControlNet 1.1åŒ…æ‹¬14ä¸ªæ¨¡å‹ï¼ˆ11ä¸ªç”Ÿäº§å°±ç»ªæ¨¡å‹å’Œ3ä¸ªå®éªŒæ€§æ¨¡å‹ï¼‰ï¼š\næ’ä»¶åœ°å€ï¼š æœ¬åœ°ï¼šextensions/sd-webui-controlnet ä¸‹è½½åœ°å€ï¼šgit clone https://github.com/Mikubill/sd-webui-controlnet æ’ä»¶æ¨¡å‹åœ°å€ï¼š æœ¬åœ°ï¼šmodels/ControlNet ä¸‹è½½åœ°å€ï¼šgit clone https://huggingface.co/lllyasviel/ControlNet-v1-1 æ¨¡å‹åç§° æ¨¡å‹æè¿° æ¨¡å‹å’Œé…ç½®æ–‡ä»¶ control_v11p_sd15_canny ä½¿ç”¨ Canny è¾¹ç¼˜æ£€æµ‹ç®—æ³•çš„æ¨¡å‹ control_v11p_sd15_canny.pth / control_v11p_sd15_canny.yaml control_v11p_sd15_mlsd ä½¿ç”¨æœ€å°é•¿åº¦åˆ†å‰²çº¿æ£€æµ‹ç®—æ³• (MLSD) çš„æ¨¡å‹ control_v11p_sd15_mlsd.pth / control_v11p_sd15_mlsd.yaml control_v11f1p_sd15_depth ç”Ÿæˆæ·±åº¦ä¿¡æ¯çš„æ¨¡å‹ control_v11f1p_sd15_depth.pth / control_v11f1p_sd15_depth.yaml control_v11p_sd15_normalbae åº”ç”¨æ³•çº¿ä¼°è®¡å’Œè‡ªç¼–ç å™¨ (BAE) çš„æ¨¡å‹ control_v11p_sd15_normalbae.pth / control_v11p_sd15_normalbae.yaml control_v11p_sd15_seg ç”¨äºå›¾åƒåˆ†å‰²çš„æ¨¡å‹ control_v11p_sd15_seg.pth / control_v11p_sd15_seg.yaml control_v11p_sd15_inpaint ç”¨äºå›¾åƒä¿®å¤çš„æ¨¡å‹ control_v11p_sd15_inpaint.pth / control_v11p_sd15_inpaint.yaml control_v11p_sd15_lineart ç”¨äºçº¿ç¨¿ç”Ÿæˆçš„æ¨¡å‹ control_v11p_sd15_lineart.pth / control_v11p_sd15_lineart.yaml control_v11p_sd15s2_lineart_anime ç”¨äºåŠ¨æ¼«çº¿ç¨¿ç”Ÿæˆçš„æ¨¡å‹ control_v11p_sd15s2_lineart_anime.pth / control_v11p_sd15s2_lineart_anime.yaml control_v11p_sd15_openpose ç”¨äºäººä½“å§¿åŠ¿ä¼°è®¡çš„æ¨¡å‹ control_v11p_sd15_openpose.pth / control_v11p_sd15_openpose.yaml control_v11p_sd15_scribble ç”¨äºæ¶‚é¸¦ç”Ÿæˆçš„æ¨¡å‹ control_v11p_sd15_scribble.pth / control_v11p_sd15_scribble.yaml control_v11p_sd15_softedge ç”¨äºè½¯è¾¹ç¼˜ç”Ÿæˆçš„æ¨¡å‹ control_v11p_sd15_softedge.pth / control_v11p_sd15_softedge.yaml control_v11e_sd15_shuffle ä½¿ç”¨æ·±åº¦ä¼°è®¡å’Œå·ç§¯ç¥ç»ç½‘ç»œçš„æ¨¡å‹è¿›è¡Œå›¾åƒé‡æ’ control_v11e_sd15_shuffle.pth / control_v11e_sd15_shuffle.yaml control_v11e_sd15_ip2p ä½¿ç”¨å›¾åƒä¿®å¤å’Œå·ç§¯ç¥ç»ç½‘ç»œçš„æ¨¡å‹è¿›è¡Œå›¾åƒåˆ°å›¾åƒçš„è½¬æ¢ control_v11e_sd15_ip2p.pth / control_v11e_sd15_ip2p.yaml control_v11f1e_sd15_tile ä½¿ç”¨æ·±åº¦ä¼°è®¡å’Œå›¾åƒç“¦ç‰‡ç”Ÿæˆçš„æ¨¡å‹ control_v11f1e_sd15_tile.pth / control_v11f1e_sd15_tile.yaml è¶…åˆ†ç®—æ³•æ’ä»¶ # .pthæ–‡ä»¶æ”¾åˆ° models/ESRGAN/ ç›®å½•ä¸‹\næ— /Noneï¼šå•çº¯çš„æ”¾å¤§ï¼Œä¸åšä»»ä½•ä¼˜åŒ–å¤„ç†ã€‚ Lanczosï¼šä½¿ç”¨åŠ æƒå¹³å‡æ’å€¼æ–¹æ³•ï¼Œåˆ©ç”¨åŸå§‹å›¾åƒè‡ªèº«çš„åƒç´ ä¿¡æ¯ï¼Œå¢åŠ å›¾åƒçš„ç»†èŠ‚ï¼Œä»è€Œæé«˜å›¾åƒçš„åˆ†è¾¨ç‡ã€‚ä¼ ç»Ÿçš„çº¯æ•°å­¦ç®—æ³•ï¼Œæ•ˆæœä¸€èˆ¬ã€‚ Nearestï¼šä½¿ç”¨ç®€å•çš„æ’å€¼æ–¹æ³•ï¼ŒåŸºäºæœ€è¿‘é‚»åƒç´ çš„å€¼è¿›è¡Œæ’å€¼ï¼Œä»è€Œå¢åŠ å›¾åƒçš„ç»†èŠ‚å’Œæé«˜åˆ†è¾¨ç‡ã€‚ä¼ ç»Ÿçš„çº¯æ•°å­¦ç®—æ³•ï¼Œæ•ˆæœä¸€èˆ¬ï¼Œè¿˜ä¸å¦‚ Lanczos çš„æ•ˆæœå¥½ã€‚ LDSRï¼šåŸºäºæ·±åº¦å­¦ä¹ ï¼Œé€šè¿‡ä½¿ç”¨è½»é‡çº§çš„ç½‘ç»œç»“æ„å’Œæ®‹å·®å­¦ä¹ ï¼Œå®ç°è¾ƒé«˜çš„è¶…åˆ†æ€§èƒ½å’Œè®¡ç®—æ•ˆç‡ã€‚é€‚ç”¨äºå„ç§éœ€è¦å¿«é€Ÿä¸”å‡†ç¡®åœ°æé«˜å›¾åƒåˆ†è¾¨ç‡çš„åº”ç”¨åœºæ™¯ï¼Œå¦‚å®æ—¶è§†é¢‘å¤„ç†ã€ç§»åŠ¨è®¾å¤‡å›¾åƒå¤„ç†ç­‰ã€‚ ESRGANï¼šå…¨ç§°Enhanced Super-Resolution Generative Adversarial Networks ï¼ˆå¢å¼ºè¶…åˆ†ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼‰ï¼ŒåŸºäºæ·±åº¦å­¦ä¹ çš„è¶…åˆ†è¾¨ç‡ç®—æ³•ã€‚å¢åŠ äº†å¾ˆå¤šçœ‹ä¸Šå»å¾ˆçœŸå®çš„çº¹ç†ï¼Œä½†æ˜¯æœ‰æ—¶å¯èƒ½ä¼šè¿‡åº¦æ‹Ÿåˆï¼Œå‡ºç°ä¸å¥½çš„æ•ˆæœã€‚ 4x-UltraSharpï¼šåŸºäºESRGANåšäº†ä¼˜åŒ–ï¼Œæ¯”è¾ƒé€‚åˆå¤„ç†çœŸäººã€‚ ESRGAN_4xï¼šReal ESRGANï¼Œå®Œå…¨ä½¿ç”¨çº¯åˆæˆæ•°æ®æ¥å°½é‡è´´è¿‘çœŸå®æ•°æ®è¿›è¡Œè®­ç»ƒã€‚è…¾è®¯è´¡çŒ®ã€‚ R-ESRGAN 4x+ï¼šåŸºäºReal ESRGANçš„ä¼˜åŒ–æ¨¡å‹ï¼Œé€‚åˆæ”¾å¤§çœŸå®é£æ ¼çš„å›¾ç‰‡ï¼Œå¸¸ç”¨ã€‚ R-ESRGAN 4x+ Anime6Bï¼šåŸºäºReal ESRGANçš„ä¼˜åŒ–æ¨¡å‹ï¼Œé€‚åˆæ”¾å¤§åŠ¨æ¼«é£æ ¼çš„å›¾ç‰‡ï¼Œå¸¸ç”¨ã€‚ ScuNET GANï¼šåŸºäºæ·±åº¦å­¦ä¹ ï¼Œä½¿ç”¨ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGANï¼‰è¿›è¡Œè®­ç»ƒã€‚ä¸»è¦ç”¨åœ¨æé«˜å›¾åƒçš„è§†è§‰æ•ˆæœå’Œæ„ŸçŸ¥è´¨é‡ï¼Œä¾‹å¦‚åœ¨å›¾åƒå¢å¼ºã€è§†é¢‘å¤„ç†ç­‰ã€‚ ScuNET PSNRï¼šåŸºäºæ·±åº¦å­¦ä¹ ï¼Œä½¿ç”¨å‡æ–¹è¯¯å·®ï¼ˆPSNRï¼‰è¿›è¡Œè®­ç»ƒã€‚ä¸»è¦ç”¨åœ¨æé«˜å›¾åƒçš„å®¢è§‚è´¨é‡å’Œå‡†ç¡®æ€§ï¼Œä¾‹å¦‚åœ¨åŒ»å­¦å›¾åƒåˆ†æã€ç›‘æ§è§†é¢‘å¤„ç†ç­‰ã€‚ SwinIR_4xï¼šä½¿ç”¨Swin Transformeræ€æƒ³ï¼ŒåŸºäºè‡ªæ³¨æ„åŠ›æœºåˆ¶çš„Transformerç»“æ„ï¼Œé€‚åˆå„ç§å›¾åƒçš„è¶…åˆ†ï¼Œæ¯”è¾ƒé€šç”¨ã€‚ è§†é¢‘è½¬è§†é¢‘ # TemporalKit å¸§æ¢å¸§\nå®šè„¸è¾“å‡º # sd-webui-roop\næ£€æµ‹nsfwå¤ªä¸¥æ ¼ # turn off stable diffusion webui (close terminal) open the folder where you have stable diffusion webui installed go toÂ extensions/sd-webui-roop/scripts make and save a copy of theÂ cimage.pyÂ file in case something goes wrong openÂ cimage.pyÂ in any text editor and delete lines 8, 7, 6, 2. The final code should look like this: import tempfile def convert_to_sd(img): shapes = [] # --ç•¥-- return [any(shapes), tempfile.NamedTemporaryFile(delete=False, suffix=\u0026#34;.png\u0026#34;)] "},{"id":5,"href":"/posts/japanese/","title":"Japanese Learning","section":"Blog","content":" ã‚ˆã‚Šã€ã»ã© # 2æœˆã¯ã€€1æœˆã‚ˆã‚Šã€€ãšã£ã©ã€€å¯’ã„ã§ã™ã€‚ 1ãŒã¤ã¯ã€€2æœˆã»ã©ã€€ã•ã‚€ããªã„ã§ã™ï¼ˆå¯’ããªã„ï¼‰ã€‚ ãƒ¼ãƒ¼ãƒ¼ãƒ¼æ¯”è¾ƒ å‰ï¼Œè‚¯å®šï¼Œåå¦å®šã€‚ 1æœˆã‚ˆã‚Šã€€2æœˆã»ã†ãŒã€€å¯’ã„ã§ã™ã€‚ å®¶æ—ã§èª°ãŒã€€ä¸€ç•ªæ­ŒãŒä¸Šæ‰‹ã§ã™ã‹ã€‚ ãƒ¼ãƒ¼ãƒ¼ã‚ˆã‚Šè¢«æ¯”è€…ã€€ã»ãŒé€‰å®šè€…ã€æ›´åŠ è€… ãƒ¼ãƒ¼ãƒ¼ã§ï¼šåˆ’åˆ†èŒƒå›´ã€€ã„ã¡ã°ã‚“ï¼šæœ€é«˜ 1æœˆã¨ã€€2æœˆã¨ã€€ã¨ã©ã¡ã‚‰ãŒã€€å¯’ã„ã§ã™ã‹ã€‚ ...2æœˆã®ã»ã†ãŒå¯’ã„ã§ã™ã€‚ ãƒ¼ãƒ¼äºŒé€‰ä¸€å¥å‹ã€‚...ã¨..ã¨ã€€ç­”å¥ï¼šã®ã»ã†ãŒãƒ¼ãƒ¼æ›´ï½å†·ã€‚ ã»ã†ãŒã€€ã„ã„ã§ã™ã€€ä¸€ç±»å½¢/äºŒç±»å½¢ ã»ã†ãŒã€€ã„ã„ã§ã™ ã„ã‚‹ï¼šçŠ¬ãŒã„ã‚‹ã€€æœ‰ç‹— N-\u0026gt;N çª—é‚£å„¿æœ‰çš„äºº # å˜åŒ– # ã„ãƒ¼ï¼ãã€€+ãªã‚‹ï¼ˆãªã‚Šã¾ã™)ã€€ã ãƒ¼ï¼ã«ã€€+ã™ã‚‹ï¼ˆã—ã¾ã™ï¼‰ æˆä¸ºâ€¦å˜æˆâ€¦ ä½¿æˆ/å˜ä¸ºâ€¦ # å‰è€…ï¼Œæ— ä¸»è§‚åè€…æœ‰ä¸»è§‚è¦å˜ äºŒç±»å½¢/å ã«ã€€ãªã‚Šã¾ã™ã€€\u0026hellip;ã«ã€€ã—ã¾ã™ å˜æˆæŸç§N ãƒ¼ãƒ¼ãƒ¼æ€§è´¨çŠ¶æ€å‘ç”Ÿå˜åŒ– åè€…å› ä¸»è¯­æ„å¿—ã€åŠ¨ä½œå¼•èµ·ã€€é›»æ°—ã‚’æ¶ˆã—ï¼ˆã‘ã—ï¼‰ã§ã€æš—ï¼ˆãã‚‰ï¼‰ãã—ã¾ã™ã€‚ã€€ã‚‚ã†æ˜¥ã«ãªã£ãŸã‹ã‚‰ã€æš–ã‹ããªã‚‹ã€‚ã€€ï¼ˆã‚ãŸãŸã‹ã„ï¼‰ã€€å¤œï¼ˆã‚ˆã‚‹ï¼‰ã«ã€€ãªã‚Šã¾ã—ãŸã€‚éƒ¨å±‹ãŒæš—ããªã‚Šã¾ã—ãŸã€‚ã€€åè¯ã«ã€€ã—ã¾ã™ã€‚è¦ä»€ä¹ˆ æ¯å­ã¯ã€€åŒ»è€…ã«ã€€ãªã‚Šã¾ã™ã€‚ã€€è©±ã‚’ã€€ç°¡å˜ï¼ˆã‹ã‚“ãŸã‚“ï¼‰ã«ã€€ã—ã¾ã™ã€‚ ä»Šå¹´ï¼ˆã“ã¨ã—ï¼‰ä¸ƒæ­³ã«ã€€ãªã‚Šã¾ã—ãŸã€‚ æ¬²ã—ã„ã€€ãªã‚Šã¾ã—ãŸ\nã ãƒ¼ï¼ãª # ã“ã®ä¼šç¤¾ã§æ­ŒãŒä¸€ç•ªä¸Šæ‰‹ãªäººã¯ã ã‚Œã§ã™ã‹ã€‚ ãƒ¼ãƒ¼æ£®ã•ã‚“ã +ã¨æ€ï¼ˆãŠã‚‚ï¼‰ã„ã¾ã™ å¹¶åˆ— # ä¸€ç±»å½¢ ã¦ ä¸€ç±»å½¢(ã„ãƒ¼ï¼ã) äºŒç±»å½¢ ã§ äºŒç±»å½¢ å1 ã§ å2 åŠ¨ã¦+ã„ã¾ã™\nè¯è¯­ç»†åˆ† # éŸ³ï¼ˆãŠã¨ï¼‰ï¼šç‰©ä½“å‘å‡º å£°ï¼ˆã“ãˆï¼‰ï¼šäººã€åŠ¨ç‰©æ„å¿—ç‰©å‘å‡º ã§ãã‚‹ã ã‘ã€€è»½ã„ï¼ˆã‹ã‚‹ã„ï¼‰ã—ã¾ã™ã€‚ãƒ¼ãƒ¼å°½é‡â€¦â€¦\nå‡å®š # +ã‚Œã°ï¼š # ç¾å®Ÿã‚’ç›´è¦–ãªã‘ã‚Œã°ï¼äººé–“å¤‰ã‚ã‚‰ãªã„ã‚“ã ã€‚ã€€ç›´è¦–ã‘ã‚Œã°ã€€ã‚“ã ï¼ï¼ï¼ \u0026hellip;ã‚Œã°ã€\u0026hellip;ã»ã©ã€€\u0026hellip;ã‚Œã°ã€\u0026hellip;ã ã‘ã€€è¶Š\u0026hellip;è¶Š\u0026hellip; å‰è€… .^. è¡¨ç¨‹åº¦ åè€… .^. è¡¨ä¸¤ä»¶äº‹ç‰© é£Ÿã¹ã‚Œã°é£Ÿã¹ã‚‹ã»ã©ç¾å‘³ã—ã„ã§ã™ã‚ˆã€‚ã€€ã€œã€€ã€ã€œ\næ„æ„¿é‚€è¯· # \u0026hellip;ãŸã„ã€€ã‚²ã‚¨ãƒ (game)ã‚’ã—ãŸã„ã§ã™ã€‚ å‹‰å¼·ã—ããªã„ã§ã™ã€‚ \u0026hellip;ã¾ã—ã‚‡ã†/ã¾ã›ã‚“ãŒã€€ã‚‚ã†é…(ãŠã)ã„ã§ã™ã‹ã‚‰ã€å¯(ã­)ã¾ã—ã‚‡ã†ã€‚ \u0026hellip;ã¾ã—ã‚‡ã†ã‹ã€€æš‘ã„ã§ã™ã‹ã‚‰ã€ã‚¯ãƒ¼ãƒ©ãƒ¼ã‚’(ããƒ¼ã‚‰ãƒ¼ã‚’)ã¤ã‘ã¾ã—ã‚‡ã†ã‹ã€‚ ã‚ã£ã€é›¨(ã‚ã‚)ãŒé™ã£ã¦ã„ã¾ã™ã­ã€‚å‚˜ã‚’è²¸(ã‹)ã—ã¾ã—ã‚‡ã†ãŒã€‚ ãŠè¦‹åˆã„(ãŠã¿ã‚ã„)æ•…éƒ·ã¸å¸°ã‚Šã¾ã—ãŸã€‚ å›å®¶ç›¸äº²ï¼ˆæœ‰ä¸ªè€å®¶çš„è¯ï¼Œæ‰“ä¸å‡ºæ¥å“¦ å®Ÿå®¶(ã˜ã£ã‹)è²Œä¼¼ä¿ƒéŸ³çš„å¬ä¸å‡ºæ¥â€¦â€¦ï¼‰\nè¯æ€§è½¬æ¢ # V-\u0026gt;N:..+ã“ã¨ # ..ã“ã¨ãŒã€€ã§ãã¾ã™ã€€ã‚±ãƒ¼ã‚­ã‚’ä½œã‚‹ã“ã¨ãŒã€€ã§ãã¾ã™ã‹ã€‚ ...ã¯..ã“ã¨ã§ã™ã€€ä»•äº‹(ã—ã“ã¨)ã¯æ—¥æœ¬èªã‚’æ•™(ãŠã—)ãˆã‚‹ã“ã¨ã§ã™ã€‚ ..å‰ã« ã”é£¯ã‚’é£Ÿã¹ã‚‹å‰ã«æ‰‹(ã¦)ã‚’æ´—(ã‚ã‚‰)ã£ã¨ãã ã•ã„ã€‚é£Ÿäº‹ï¼ˆã—ã‚‡ãã˜ï¼‰ N-\u0026gt;N:\u0026hellip;+ã¨ã“ã‚ã€€# ã‚ã®ã€€çª“ï¼ˆã¾ã©ï¼‰ã®ã¨ã“ã‚ã«ã€€ã„ã‚‹äººã¯èª°ã§ã™ã‹ã€‚ ..é‚£å„¿ï¼ˆäººä¹Ÿå¯+ï¼‰ "},{"id":6,"href":"/posts/some-notes-can-make-things-easier-and-more-enjoyable/","title":"æ‚ç¬”è®°","section":"Blog","content":" Swiftï¼š # [Swiftæ•™ç¨‹] # \u0026gt;https://github.com/ipader/SwiftGuide; Swift å¼€æºé¡¹ç›®ç²¾é€‰: # \u0026gt;https://github.com/ipader/SwiftGuide/blob/master/Featured.md SwiftGuide: # \u0026gt;https://github.com/ipader/SwiftGuide/blob/master/Featured-Articles.md Swiftï¼Œä»¥ä¸Šã€‚\nPelicanï¼š # é«˜äº®æ˜¾ç¤ºMarkdown: # void main() { printf(\u0026quot;é«˜äº®ï¼Ÿ\u0026quot;); // å¦èµ·ä¸€è¡Œ é¦–è¡Œç¼©è¿›ï¼Œä¹¦å†™å³å¯ } æ ‡é¢˜ï¼š # åœ¨ç¼–è¾‘æ–‡å­—çš„æ—¶å€™ï¼Œåœ¨å‰é¢åŠ ä¸Šâ€œ#â€å·ï¼Œå¯ä»¥å°†ä¹‹åä¸€è¡Œæ–‡å­—ä½œä¸ºæ ‡é¢˜å¤§å­—ä½“æ˜¾ç¤ºï¼Œç¼–è¾‘ä¸­çæŒ‰ï¼Œæ‰‹è¯¯æ•²å‡ºæ¥çš„å­—ç¬¦ï¼Œç»“æœå´å¾ˆæœ‰ç”¨å‘¢ã€‚æˆ–è®¸å…¶ä»–å­—ç¬¦ä¹Ÿæœ‰ä½œç”¨ï¼Œä¸è¿‡è¿™å·²ç»æ»¡è¶³æ—¥å¸¸ç¼–è¾‘æ‰€éœ€ï¼Œä¸åšè¿‡å¤šæ¢ç©¶äº†ã€‚å……å®å†…å®¹ï¼Œå¾€å¾€æ˜¯é¦–è¦çš„ã€‚\nåˆ©ç”¨Disqusæ·»åŠ è¯„è®ºç³»ç»Ÿï¼š # åœ¨æ­¤ç½‘ç«™æ³¨å†Œä¸€ä¸ªå¸å·ï¼Œåœ¨è®¾ç½®ä¸­æ‰¾è§shortnameï¼Œåº”è¯¥ä¸ºè‡ªå·±è®¾ç½®ã€‚ ç„¶ååœ¨Pelicanconf.pyè¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­æ·»åŠ \n:::iidentifier\nDISQUS_SITENAME = â€œyours shortnameâ€\nè´´å›¾ç‰‡ï¼š # åœ¨å›½å†…æ‰¾äº†ä¸€ä¸ªZ4Aå›¾åºŠï¼Œæ„Ÿè§‰ä¸é”™ã€‚ æ³¨å†Œå®Œæ¯•ï¼Œä¸Šä¼ å¥½å›¾ç‰‡åº”ç”¨é“¾æ¥è‡ªåŠ¨ç”Ÿæˆï¼Œç›´æ¥è¯¶å¤åˆ¶ç²˜è´´å³å¯ã€‚HTMLã€BBCodeã€Markdownçš„ï¼Œå¦å¤–åˆ†ä¸ºå®Œæ•´å›¾ç‰‡ï¼Œä¸­ç­‰å›¾ç‰‡ï¼Œç¼©ç•¥å›¾ä¸‰ç§ä¸åŒå°ºå¯¸çš„é“¾æ¥ã€‚æ„Ÿè§‰è‰¯å¿ƒã€‚å¦å¤–ï¼Œç‚¹å‡»å›¾ç‰‡åè·³è½¬å›¾åºŠï¼Œå¯ä»¥æŸ¥çœ‹åŸå›¾ç‰‡æ–‡ä»¶ï¼Œæ›´æ˜¯èˆ’å¿ƒèµå¿ƒæ‚¦ç›®ï½ å…è´¹ä½¿ç”¨ï¼ŒæåŠ›æ¨èã€‚åªä¸è¿‡å›¾ç‰‡ä¸èƒ½åŠ å…¥ç¼©è¿›åçš„â€œä»£ç æ â€ã€‚\næ•°å­¦å…¬å¼ï¼š $ $e^{i\\pi} + 1 = 0$ $ $ä¹‹é—´æ— ç©ºæ ¼\n$$e^{i\\pi} + 1 = 0$$\nå¤±è´¥â€¦â€¦æ’å…¥æ’ä»¶å¤±è´¥ã€‚ä¹‹åæœ‰éœ€è¦æ—¶å†æŸ¥æ‰¾åŸå› ã€‚ (ä¸è¿‡è¿™ä¸ªå›¾åºŠå·²ç»åºŸäº†ã€‚â€¦â€¦é»˜å“€)\nLinux åµŒå…¥å¼Cç·¨ç¨‹ # Git ååŠ©å¼€å‘æäº¤ä»£ç ä¹‹ç±» å‚è€ƒæµç¨‹ï¼ˆå¤åˆ¶äº \u0026gt;https://github.com/numbbbbb/the-swift-programming-language-in-chineseï¼‰ æœ‰äº›æœ‹å‹å¯èƒ½ä¸å¤ªæ¸…æ¥šå¦‚ä½•å¸®å¿™ç¿»è¯‘ï¼Œæˆ‘è¿™é‡Œå†™ä¸€ä¸ªç®€å•çš„æµç¨‹ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒä¸€ä¸‹ï¼š é¦–å…ˆforkæˆ‘çš„é¡¹ç›® æŠŠforkè¿‡å»çš„é¡¹ç›®ä¹Ÿå°±æ˜¯ä½ çš„é¡¹ç›®cloneåˆ°ä½ çš„æœ¬åœ° åœ¨å‘½ä»¤è¡Œè¿è¡Œgit branch developæ¥åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ è¿è¡Œgit checkout developæ¥åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ è¿è¡Œgit remote add upstream https://github.com/numbbbbb/the-swift-programming-language-in-chinese.git æŠŠæˆ‘çš„åº“æ·»åŠ ä¸ºè¿œç«¯åº“ è¿è¡Œgit remote updateæ›´æ–° è¿è¡Œgit fetch upstream gh-pagesæ‹‰å–æˆ‘çš„åº“çš„æ›´æ–°åˆ°æœ¬åœ° è¿è¡Œgit rebase upstream/gh-pageså°†æˆ‘çš„æ›´æ–°åˆå¹¶åˆ°ä½ çš„åˆ†æ”¯ è¿™æ˜¯ä¸€ä¸ªåˆå§‹åŒ–æµç¨‹ï¼Œåªéœ€è¦åšä¸€éå°±è¡Œï¼Œä¹‹åè¯·ä¸€ç›´åœ¨developåˆ†æ”¯è¿›è¡Œä¿®æ”¹ã€‚ å¦‚æœä¿®æ”¹è¿‡ç¨‹ä¸­æˆ‘çš„åº“æœ‰äº†æ›´æ–°ï¼Œè¯·é‡å¤6ã€7ã€8æ­¥ã€‚ ä¿®æ”¹ä¹‹åï¼Œé¦–å…ˆpushåˆ°ä½ çš„åº“ï¼Œç„¶åç™»å½•GitHubï¼Œåœ¨ä½ çš„åº“çš„é¦–é¡µå¯ä»¥çœ‹åˆ°ä¸€ä¸ªpull request```æŒ‰é’®ï¼Œç‚¹å‡»å®ƒï¼Œå¡«å†™ä¸€äº›è¯´æ˜ä¿¡æ¯ï¼Œç„¶åæäº¤å³å¯ã€‚\nå…³äºPelicanè¿™ä¸ªæ–‡ç« å†™çš„å®Œå®Œå…¨å…¨äº†ï¼š # \u0026gt;http://www.wengweitao.com/shi-yong-pelican-github-pagesda-jian-ge-ren-bo-ke.html Vim # Vimä¸­æ·»åŠ å¤šè¡Œæ³¨é‡Šoråˆ é™¤ï¼š # ä½¿ç”¨Ctrl+vè¿›å…¥VISUAL BLOCKçŠ¶æ€ ç„¶åä¸Šä¸‹ç§»åŠ¨å…‰æ ‡é€‰æ‹©è¡Œæ•°ï¼Œè¾“å…¥Iï¼Œæ”¹ä¸ºINSERT(paste)çŠ¶æ€ï¼Œé”®å…¥å†…å®¹æŒ‰ä¸‹Escç»“æŸï¼Œå³å¯ã€‚ åˆ é™¤åˆ™ä¸ºé€‰ä¸­ä¹‹åç›´æ¥æŒ‰åˆ é™¤åŠŸèƒ½é”®å¦‚ï¼šdã€cçš†å¯ï¼Œå³å¯åˆ é™¤æ‰€é€‰ä¸€åˆ—\nBlog # Pelican # Pelican Static Site Generator, Powered by Pythonï¼šPelicanæ˜¯pythonè¯­è¨€å†™çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨ã€‚å› ä¸ºä¹‹å‰ä¸€ç›´å¼„ä¸å¥½Jekyll çŠ¯ä¸ç€æ‰åœ¨è¿™ä¸€é¢—æ ‘ä¸Šï¼Œæ‰€ä»¥æœåˆ°äº†æ­¤åŒç±»è½¯ä»¶ã€‚\nç½‘ä¸Šçš„é‚£äº›æ•™ç¨‹ä¸çŸ¥é“ä¸ºä»€ä¹ˆé²œæœ‰ä¸€æ¬¡æ•ˆä»¿æˆåŠŸçš„ï¼Œéƒ½æ˜¯å„ç§é—®é¢˜ã€‚çœŸå¿ƒä»–ä»¬æ²¡æœ‰é‡è§è¿‡å—ï¼Ÿå› æ­¤æˆ‘ä¹Ÿä¸è‡ªå·±è´´è¿™ä¸ªæ•™ç¨‹äº†ï¼Œé™¤éé‚£ä¸€å¤©å¼„æ‡‚äº†é‚£äº›é—®é¢˜æ‰€åœ¨ï¼Œå¦åˆ™ä¸è¿‡å¼ è´´ä¸€äº›ç½‘ä¸Šç°æœ‰çš„ç¤ºä¾‹è€Œå·²ï¼Œè€Œä¸”è¿˜æ˜¯ä¸èƒ½ä¿è¯å®Œå…¨æ­£ç¡®çš„ç¤ºä¾‹ï¼Œæ²¡æœ‰ä»»ä½•ä»·å€¼ã€‚\nDate: 2016-06-18 Title:The 2st Blog Tags: 2st,pelicanã®ã¯ã˜ã¦åˆä½“é¨“ Slug: test2 å°±åƒè¿™æ ·\næ¥ä¸‹æ¥å°†æœ¬åœ°çš„æ›´åˆ°Gite: 2016-06-18tHubï¼Œè‡³æ­¤å°±ç®—å‘Šä¸€æ®µè½ã€‚æœªèƒ½è§£å†³çš„é—®é¢˜è¿˜æœ‰å¾ˆå¤šï¼Œæ¢è¨€ä¹‹å…¶å®å°±æ˜¯é—®é¢˜ä»¬è¿˜æ²¡ç€æ‰‹å»è§£å†³ã€‚\nä¾‹å¦‚ï¼Œå›è½¦ç¬¦æ€ä¹ˆæ•²ç°åœ¨éƒ½ä¸çŸ¥é“ï¼Œä¸€ç¯‡æ–‡ç« åªèƒ½è¿™ä¹ˆä¸€æ¡é¾™ä¸€ç›´æ‰“ä¸‹å»ã€‚çœŸæ˜¯å›§â€¦ã€‚å¦å¤–æ²¡æ³•æ·»åŠ é“¾æ¥ï¼Œæ—è¾¹é‚£ä¸ªé‚®ä»¶çš„åœ°å€éƒ½è¿˜æ˜¯åˆ«äººçš„â€”â€”è¿™ä¸ªä¸»é¢˜çš„å¼€å‘è€…ã€‚å¦‚æœææ¸…è¿™ä¸¤å¤„ï¼Œä¼°è®¡å°±èƒ½ä¸å†å»ç ”ç©¶åˆ«çš„åŠŸèƒ½äº†ï¼Œæ¯•ç«Ÿåªæ˜¯ä¸€ä¸ªåšå®¢ï¼Œèƒ½æ›´çœ‹çš„è¿‡å»å°±å¥½ã€‚å“ˆã€‚\nå¦å¤–ï¼Œå°†ç”¨åˆ°çš„å‘½ä»¤åœ¨æ­¤å¤‡ä»½ make htmlâ€”â€”â€”â€” make serveâ€”â€”â€”â€”\noutputæ–‡ä»¶å¤¹å†…ï¼š git initâ€”â€”â€”â€” git add .â€”â€”â€”â€” git commit -m \u0026lsquo;first commit\u0026rsquo; â€”â€”â€”â€” git remote add origin git@github.com:IanVzs/IanVzs.github.io.gitâ€”â€”â€”â€” git push -u origin master\næ­¤å¤–åˆšåˆšå‘ç°ç¼–è¾‘æ—¶é¦–è¡Œç©ºæ ¼å¼€å§‹åˆ™å°†æ­¤æ®µçº¢è‰²é«˜äº®æ˜¾ç¤º å°±åƒè¿™æ · å°±åƒè¿™æ ·å¹¶ä¸ä¼šâ€¦ åªä¸è¿‡åœ¨åˆšå¼€å§‹ã€‚ ä¸è¿‡åº”è¯¥æ˜¯æ±‰å­—ç¼©è¿›ï¼Œå¹¶ä¸”ä¸Šä¸€è¡Œæ²¡æœ‰å†…å®¹ï¼Œä¼šæœ‰é«˜äº®æ˜¾ç¤ºã€‚è²Œä¼¼æ˜¯ä¸ºäº†æ–¹ä¾¿å†™ç¨‹åºï¼Ÿæˆ–è®¸ç¨‹åºå¯ä»¥ç”¨è¿™æ ·çš„æ–¹å¼æ¥æ’å…¥ï¼Œè€Œä¸éœ€è¦ç”¨é‚£ä¸ªä¸“ç”¨çš„é«˜äº®è¯­å¥:::*erä»€ä¹ˆçš„ã€‚\nç„¶è€Œäº‹å®å¹¶ä¸åƒä»¥ä¸Šé‚£ä¹ˆé¡ºåˆ©â€¦â€¦ä¸Šä¼ ä¾ç„¶é”™è¯¯é¢‘å‡º æ‰€ä»¥æ¥ä¸‹æ¥æ˜¯æˆåŠŸä»£ç ä¾æ¬¡å†æ’åˆ— git init\ngit add -A git remote remove origin git remote add origin https://github.com/IanVzs/IanVzs.github.io.git git add -A git push --set-upstream origin master -f git init git add -A git remote remove origin git remote add origin https://github.com/IanVzs/IanVzs.github.io.git git add -A git push --set-upstream origin master -f å¹¶ä¸”ä¹‹å‰å†™åœ¨æ­¤å¤„çš„æ›´æ–°æ–‡ç« ä¹Ÿä¸€ç›´æ²¡æ³•æ›´æ–°å‡ºæ¥ï¼Œæ‰€ä»¥å°†ç¬¬äºŒç¯‡æ‹†åˆ†äº†ï¼Œåˆ†ä¸¤ä¸ªæ–‡ä»¶æ¥ä¸Šä¼ ï¼Œå¦åˆ™åªçœ‹é‚£ä¸ªæˆåŠŸupdate å®åœ¨æœ‰ä¸ä¿¡ä»»æ„Ÿè§‰ï¼Œç°åœ¨å¦‚æœè¿™ç¯‡æ–‡ç« è¿˜æ˜¯æ— æ³•æ›´æ–°ï¼Œé‚£çœŸçš„æ˜¯â€¦â€¦ å¦‚æœèƒ½çš„è¯ï¼Œçœ‹æ¥ä¸€ç¯‡æ–‡ç« è¿˜æœ‰å­—æ•°é™åˆ¶ï¼Ÿ åº”è¯¥æ²¡ æŒ‰ç†ï¼Œæ›´æ–°åçš„æ–‡ä»¶ä¹Ÿä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶äº†ï¼Œæˆ‘ä¹Ÿæ¢äº†æ–‡ä»¶åéƒ½ä¸èƒ½æ›´æ–°å…¶å†…å®¹æ˜¯åœ¨ä»¤äººä¸è§£ã€‚\nç°åœ¨å‘¢ï¼Œå°±æ„Ÿè§‰é¡ºæ‰‹å¤šäº†ï¼Œåªéœ€è¦ git init git add . git git commit -m â€œhiaâ€ git push \u0026ndash;set-upstream -f å³å¯ã€‚\nç°åœ¨ï¼Œåˆ›å»ºå®Œæ–°çš„ ä¹‹åï¼Œå®˜ç½‘æœ‰äº†è¯¦ç»†çš„è¯´æ˜ï¼š\necho \u0026#34;# ianvzs.github.io\u0026#34; \u0026gt;\u0026gt; README.md git init git add README.md git commit -m \u0026#34;first commit\u0026#34; git remote add origin https://github.com/IanVzs/ianvzs.github.io.git git push -u origin master ç®€å•æ˜äº†ã€‚\nhexo # è€Œä¹‹åå› ä¸ºå…¶ä¸»é¢˜æˆ‘é€‰çš„ä¸å¥½ï¼Œç„¶ååˆè§Šè§nodejsï¼Œæ‰€ä»¥å°†blogä½¿ç”¨hexoæ¥å†™äº†ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨æ•™ç¨‹äº†â€”â€” title: Hello World\nWelcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick Start # Create a new post # $ hexo new \u0026#34;My New Post\u0026#34; More info: Writing\nRun server # $ hexo server More info: Server\nGenerate static files # $ hexo generate More info: Generating\nDeploy to remote sites # $ hexo deploy More info: Deployment\nä¿®æ”¹é…ç½® # blogæ ¹ç›®å½•ä¸‹_config.yml, ä»¥åŠthemesä¸‹_config.yml\nè¿æ¥github: # deploy: type: git repo: https://github.com/*******/**.git branch: master npm install hexo-deploy-git --save themes # huemanä¸»é¢˜çš„å›¾ç‰‡é…ç½®åœ°å€ä¸º: /themes/hueman/source/css/images å¯åœ¨themes/hueman/_config.ymlä¸­è¿›è¡Œä¿®æ”¹å„é¡¹å›¾ç‰‡é…ç½® Git # git ç‰ˆæœ¬åˆ‡æ¢ # å°†é¡¹ç›®å…‹éš†ä¹‹åï¼Œå¯é€šè¿‡\n$ git tag // æŸ¥çœ‹tag \u0026gt; v1 \u0026gt; v2 \u0026gt; v3 $ git show v1 //æ ¹æ®tag æŸ¥çœ‹ç‰ˆæœ¬å· \u0026gt; tag v1 \u0026gt; Tagger: user \u0026gt; Data: Fri May 23 17:47:00 2018 +0800 \u0026gt; \u0026#39;ä¸ºäº†éƒ¨è½\u0026#39; \u0026gt; commit 5b123b31h4bvb31 \u0026gt; Aurhor user \u0026gt; ç­‰ $ git reset --hard 5b123b31h4bvb31 // æ ¹æ®ç‰ˆæœ¬å·å›é€€ç‰ˆæœ¬ éƒ¨ç½²åˆ°æœåŠ¡å™¨ # åœ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨çš„æ—¶å€™ï¼Œå‘ç°æœ‰â€˜nodeâ€™: No such file or directoryçš„é”™è¯¯ï¼Œè§£å†³åŠæ³•æ˜¯åˆ›å»ºè½¯è¿æ¥ï¼š\nln -s /usr/bin/nodejs /usr/bin/node å¦å¤–ï¼Œç›´æ¥æ‹·è¿‡å»çš„blogé¡¹ç›®æ²¡æ³•ç”¨hexoç›´æ¥è¿è¡Œâ€¦ è§£å†³åŠæ³•æ˜¯ï¼š\n// å¹¶æ²¡æœ‰è§£å†³å•Šï¼ï¼ï¼ï¼ (âŠ™ï¹âŠ™)ï¼Œâ•®(â•¯-â•°)â•­å…¶å®æ˜¯npmåœ¨æœåŠ¡å™¨aptå®‰è£…çš„ç‰ˆæœ¬å¤ªä½äº†â€¦ åœ¨å®˜ç½‘ä¸‹äº†æœ€æ–°ç‰ˆï¼Œç„¶åå†æ¬¡é€šè¿‡æ–°ç‰ˆnpmå®‰è£…hexoå°±å¯ä»¥ç›´æ¥ç”¨äº†ã€‚\n2021-04-21 # emmmmmå¦‚ä»Šé‡æ–°å†æ¬¡ç¿»çœ‹ï¼Œè§‰å¾—o(âˆ©âˆ©)o\u0026hellip;å“ˆå“ˆã€‚ è¿™æ¬¡æ‰¾äº†ä¸ªä¸é”™çš„æ¨¡æ¿ï¼Œæ¯”ä¹‹å‰ç”¨çš„æ²¡æœ‰åˆ†é¡µå¼ºå¤šäº†ï¼Œè€Œä¸”è¿˜æœ‰äº†æœç´¢åŠŸèƒ½ã€‚ç®€ç›´å®Œç¾ç¬¦åˆå¹³æ—¶æŸ¥é˜…çš„éœ€æ±‚ã€‚\n"},{"id":7,"href":"/posts/make-things-easy-and-enjoyable/","title":"Make things easy and enjoy","section":"Blog","content":" å‘½ä»¤è¡Œçš„ç®€ä¾¿ç”Ÿæ´» ğŸ’¦ğŸ¤£ # åä¼ : [[å°å‘½ä»¤]]\nVirtualBox: linux æ²¡æœ‰æƒé™è®¿é—®å…±äº«æ–‡ä»¶å¤¹çš„é—®é¢˜ # é”™è¯¯åŸå› åŠè§£å†³åŠæ³•\nè¿™ä¸ªè‡ªåŠ¨mountçš„æ–‡ä»¶å¤¹linux_shareçš„æ‰€æœ‰è€…ä¸ºrootï¼Œæ‰€å±çš„ç»„æ˜¯vboxsfï¼Œå¹¶ä¸”åªæœ‰è¿™ä¸¤ä¸ªç”¨æˆ·æœ‰è®¿é—®æƒé™ã€‚Virtualboxçš„å…±äº«æ–‡ä»¶å¤¹ä¸€èˆ¬éƒ½æŒ‚è½½åœ¨/mediaä¸‹é¢ï¼Œç”¨llæŸ¥çœ‹ä¼šå‘ç°æ–‡ä»¶å¤¹çš„æ‰€æœ‰è€…æ˜¯rootï¼Œæ‰€æœ‰ç»„æ˜¯vboxsfï¼Œæ‰€ä»¥æ–‡ä»¶ç®¡ç†å»æ— æ³•è®¿é—®æ˜¯æ­£å¸¸çš„ï¼Œè§£å†³æ–¹æ³•æ˜¯æŠŠä½ è‡ªå·±åŠ å…¥åˆ°vboxsfç»„é‡Œé¢ã€‚\n# æŠŠè‡ªå·±æ·»åŠ åˆ°è¿™ä¸ªvboxsfç»„é‡Œé¢: sudo usermod -a -G vboxsf {USERNAME} éœ€è¦é‡å¯æœºå™¨æ‰èƒ½ç”Ÿæ•ˆ\nDelete Git Submodule # é€†åˆå§‹åŒ–æ¨¡å—ï¼Œå…¶ä¸­{MOD_NAME}ä¸ºæ¨¡å—ç›®å½•ï¼Œæ‰§è¡Œåå¯å‘ç°æ¨¡å—ç›®å½•è¢«æ¸…ç©º git submodule deinit {MOD_NAME} åˆ é™¤.gitmodulesä¸­è®°å½•çš„æ¨¡å—ä¿¡æ¯ï¼ˆ\u0026ndash;cachedé€‰é¡¹æ¸…é™¤.git/modulesä¸­çš„ç¼“å­˜ï¼‰ git rm --cached {MOD_NAME} apt å®‰è£…å‰æŸ¥çœ‹åº“é‡Œç‰ˆæœ¬ # sudo apt-cache madison kdenlive 4Kæ˜¾ç¤ºå™¨è½¯ä»¶ä¸é€‚é…å¯¼è‡´çš„å­—å¤ªå°é—®é¢˜ # åœ¨è·¯å¾„: /usr/share/applicationsä¸‹ å°†å¯¹åº”çš„.desktopæ–‡ä»¶ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€,å°†Execä¿®æ”¹ä¸º:\nExec=env QT_DEVICE_PIXEL_RATIO=2 /opt/resolve/bin/resolve ä¸»è¦æ˜¯å¢åŠ env QT_DEVICE_PIXEL_RATIO=2, ä¸Šè¿°ä¾‹ä¸­æ‰€ç¤ºä¸ºè¾¾èŠ¬å¥‡çš„é…ç½®. (ä¸è¿‡å¾ˆå¯æƒœå®ƒå¹¶ä¸èƒ½å’Œæˆ‘çš„AMD 5700g+Ubuntu22.04+ä¸çŸ¥å“ªå„¿æ¥çš„é©±åŠ¨ä¸€èµ·å·¥ä½œ. è™½ç„¶ç¡®å®å˜å¥½äº†.)\nåˆ‡æ¢ç”¨æˆ·é»˜è®¤ç»ˆç«¯ç¨‹åº # èµ¢åœ¨èµ·è·‘çº¿: useradd -s /bin/bash ian åŠ›æŒ½ç‹‚æ¾œ: usermod -s /bin/bash ian å¥‹èµ·åæŠ—: chsh + æŒ‰æç¤ºæ“ä½œ Github Personal access tokens # github å¹²æ‰äº†httpsè´¦å·å¯†ç pull push ä¹‹å https pull push ä¸“ç”¨ url\n4kç å­— # æ›´æ”¹è¯­è¨€ # export LC_ALL=C # æ”¹äº†ç¡®å®å¤§å¤šæ•°æˆè‹±æ–‡äº†ï¼Œä¸è¿‡æ ‘è“æ´¾æ±‰åŒ–å¤ªç‹ äº†ï¼Œconsole-setupé‡Œè¿˜æœ‰è‹¥å¹²æ˜¯ä¸­æ–‡å°±å¾ˆè ¢... unset LC_ALL # æ”¹å›åŸå§‹ æ›´æ”¹tty1å­—ä½“å¤§å° # sudo dpkg-reconfigure console-setup æ“ä½œç²˜è´´æ¿/å‰ªè´´æ¿/å‰ªåˆ‡æ¿ # xsel\nå°†è¾“å‡ºå­˜å‚¨åˆ°ç²˜è´´æ¿ # echo \u0026#34;ashsaihs\u0026#34; | xsel -i -b è¾“å‡ºç²˜è´´æ¿ä¿¡æ¯ # xsel -o -b ç”±xsel --helpå¯å¾—-i -oåˆ†åˆ«ä»£è¡¨æ ‡å‡†è¾“å…¥è¾“å‡º(input output) -bä»£è¡¨: -b, \u0026ndash;clipboard Operate on the CLIPBOARD selection\nç¾åŒ– # themes # Orchis Flatabulous XFCE Flatabulous\nå›¾æ ‡ # sudo add-apt-repository ppa:numix/ppa sudo apt install numix-icon-theme-circle æ–‡ä»¶ç¼–ç æ ¼å¼å—…æ¢ # pip install chardet python f = open(\u0026#34;file.path\u0026#34;, \u0026#34;rb\u0026#34;) bdata = f.read() f.close() result = chardet.detect(bdata) debianå¢åŠ dockerç”¨æˆ·ç»„,ä¼˜åŒ–æ¯æ¬¡sudoé—®é¢˜ # æ‘˜æŠ„è‡ªè¿™é‡Œ\næ£€æŸ¥æ˜¯å¦å·²æœ‰dockerç”¨æˆ·ç»„ cat /etc/group | grep docker 1æ— åˆ™åˆ›å»º sudo groupadd docker æ·»åŠ æŒ‡å®šç”¨æˆ·åˆ°dockerç”¨æˆ·ç»„ sudo usermod -aG docker {ç”¨æˆ·å} ä½¿ç”¨1æ£€æŸ¥2æ˜¯å¦æˆåŠŸ é‡å¯docker sudo systemctl restart docker ç»™.sockæ·»åŠ æƒé™ sudo chmod a+rw /var/run/docker.sock æ£€æŸ¥æ˜¯å¦æˆåŠŸ su {ç”¨æˆ·å} docker ps -a ä½¿ç”¨å„ç§è·³æ¿ä¹‹åçš„è¿œç¨‹æ–‡ä»¶ä¼ è¾“ # sz \u0026amp;\u0026amp; rz # å®‰è£… # # macå®‰è£… brew install zssh # linuxå®‰è£… sudo apt-get install zssh å–ä»£sshè¿æ¥ # zssh username@xxx.xxx.x.x ä½¿ç”¨ # cd destination_dir #è¿›å…¥åˆ°ç›®çš„åœ°ç›®å½• è¾“å…¥crtl+@ç»„åˆé”®(macæ˜¯command+@)åˆ‡æ¢åˆ°zssh -- 2022-06-08 å‘ç°macä¹Ÿæ˜¯`control`+@ å³(`shift+2`å’Œé”®ç›˜å¸ƒå±€æœ‰å…³) cd orgin_dir #è¿›å…¥æºç›®å½• sz example.txt #ä¸Šä¼ æ–‡ä»¶ exit #é€€å‡ºzssh sz åœ¨æœåŠ¡å™¨ä¸Šå‡†å¤‡è¦ä¸‹è½½æ–‡ä»¶ sz abcde.py è¾“å…¥crtl+@ç»„åˆé”®(macæ˜¯command+@)åˆ‡æ¢åˆ°zssh cd destination_dir #è¿›å…¥åˆ°ä¸‹è½½ç›®å½• rz #æ¥æ”¶ä¸‹è½½æ–‡ä»¶ åœ¨æ‰§è¡Œä¸Šä¼ ä¸‹è½½è¿‡ç¨‹ï¼Œå¼€å§‹æ—¶åœ¨ç•Œé¢ä¸Šä½“ç°ä¸å¤ªæ˜æ˜¾ï¼Œéœ€è¦è€å¿ƒç­‰å¾…ä¸€ä¸‹\nè¯—å¥ # sudo apt install fortunes-zh # æ˜¾ç¤º fortune ä»£ç é‡ç»Ÿè®¡ # $ cloc . 6605 text files. 5869 unique files. 1049 files ignored. github.com/AlDanial/cloc v 1.86 T=6.47 s (862.2 files/s, 137709.8 lines/s) -------------------------------------------------------------------------------- Language files blank comment code -------------------------------------------------------------------------------- JavaScript 4200 69941 83775 452071 HTML 169 42890 164 69664 JSON 306 62 0 51362 Markdown 363 17792 0 49232 CSS 135 1670 901 14540 Stylus 131 1401 1112 6947 XML 8 3004 1289 5010 TypeScript 92 881 2953 4684 SVG 6 0 1 4299 EJS 105 49 15 1921 YAML 55 71 117 1564 Bourne Shell 1 163 112 791 DTD 1 179 177 514 make 5 42 8 114 Nix 1 1 0 19 Bourne Again Shell 1 5 13 7 zsh 1 4 13 7 DOS Batch 1 0 0 5 CoffeeScript 1 1 0 0 -------------------------------------------------------------------------------- SUM: 5582 138156 90650 662751 -------------------------------------------------------------------------------- xfceæ·»åŠ å±å¹•åˆ†è¾¨ç‡ # Virtual1: ä½¿ç”¨vmwareè™šæ‹Ÿå‡ºæ¥çš„æ˜¾ç¤ºå™¨åç§° å…·ä½“æ‰§è¡Œæ—¶æ›¿æ¢ä¹‹\nxrandr --newmode \u0026#34;1920x1080_60.00\u0026#34; 173.00 1920 2048 2248 2576 1080 1083 1088 1120 -hsync +vsync xrandr --addmode Virtual1 \u0026#34;1920x1080_60.00\u0026#34; xrandr --output Virtual1 --mode \u0026#34;1920x1080_60.00\u0026#34; ç»™ç”¨æˆ·æ·»åŠ sudoæƒé™ # echo: ä½¿ç”¨vimæ·»åŠ è¿™è¡Œæ¯”è¾ƒä¿é™©\nchmod u+w /etc/sudoers echo \u0026#39;{username} ALL=(ALL) ALL\u0026#39; \u0026gt; /etc/sudoers chmod u-w /etc/sudoers ======= æŸ¥çœ‹ç«¯å£å ç”¨ # netstat -ntulp | grep 80 find æ–‡ä»¶æŸ¥æ‰¾ # ä»Šå¤©(2018å¹´12æœˆ12æ—¥ï¼Œ17ç‚¹08åˆ†)åœ¨ä¼—å¤šæ–‡ä»¶é‡Œæ‰¾ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™â€¦ æƒ³åˆ°findå‘½ä»¤ã€‚ä¸è¿‡ä¹‹å‰æ²¡æœ‰æ€ä¹ˆäº†è§£è¿‡ï¼Œæ‰€ä»¥â€¦ æˆ‘å±…ç„¶ç”¨äº†tree | grep filename.filetypeæ¥æ‰¾ä¸œè¥¿ã€‚ ç»“æœè·¯å¾„å¤ªæ·±â€”â€”å°±æœ€å¤šç¡®è®¤äº†æ­¤æ–‡ä»¶çš„å­˜åœ¨æ€§ã€‚ éšåï¼Œæ‰çŸ¥é“findè¦åŠ -nameå‚æ•°ã€‚ emm\u0026hellip;ä¸è¿‡å¯¹äºfindå¤šåŠŸèƒ½æ¥è¯´ä¹Ÿè¯´å¾—è¿‡å»ã€‚ éšåä¾¿æœ‰äº†ä»¥ä¸‹è¿™ä¸ªå‘½ä»¤:\nfind . -name \u0026#34;cifar.py\u0026#34; -exec vim {} \\; æ²¡é”™~ï¼ŒæŸ¥æ‰¾ä¹‹åå¹¶ç¼–è¾‘â€”â€”ğŸ˜„ é™¤æ­¤ä¹‹å¤–ï¼Œå½“ç„¶å¯èƒ½ç”¨äº rmã€grepç­‰å»æ›¿æ¢vimè¿›è¡Œæ“ä½œã€‚ å…¶ä¸­ï¼Œ{}è‡ªç„¶æ—¶ä»£è¡¨åŒ¹é…æ–‡ä»¶çš„è·¯å¾„ã€‚ å¦‚æœä¸æ­¢ä¸€ä¸ªé‚£ä¹ˆâ€¦å°±ï¼š vimä¸ºä¾‹ï¼Œä¼šå…³é—­ä¸€ä¸ªçª—å£å†æ‰“å¼€å¦ä¸€ä¸ªğŸ˜“ å¦å¤–ï¼Œé…åˆgrepæŸ¥æ‰¾æ–‡æœ¬å†…å®¹çš„æ—¶å€™ï¼Œéœ€è¦åœ¨æœ€åé¢åŠ -printå¦åˆ™åªæœ‰åŒ¹é…æ–‡æœ¬ï¼Œä¸æ˜¾ç¤ºæ–‡ä»¶è·¯å¾„ã€‚\nWindows è½¬æ¢ç£ç›˜åˆ†åŒºæ ¼å¼ # æ–¹æ³•/æ­¥éª¤ # 1 1.Uç›˜å¼•å¯¼ï¼Œè¿›å…¥PEç³»ç»Ÿ\n2 ç”¨peè¿›å»ï¼Œæ‰¾åˆ°è¿è¡Œè¾“å…¥cmd\n3 è¾“å…¥â€Diskpartâ€(ä¸ç”¨è¾“å…¥å¼•å·ï¼Œä¸‹åŒ)ï¼Œå¹¶æŒ‰å›è½¦ï¼Œè¿›å…¥æ“ä½œç•Œé¢\n4 è¾“å…¥ï¼šâ€list diskâ€ï¼ŒæŸ¥çœ‹ç£ç›˜ä¿¡æ¯ã€‚ä¸€èˆ¬ä¼šå‡ºç°ä¸¤ä¸ªé€‰é¡¹ï¼Œä¸€ä¸ªæ˜¯ä½ çš„ç¡¬ç›˜ï¼Œä¸€ä¸ªæ˜¯Uç›˜ï¼Œè¦æ³¨æ„åŒºåˆ†ã€‚\n5 è¾“å…¥ï¼šâ€select disk 0â€ï¼Œé€‰æ‹©disk 0ä¸ºå½“å‰æ“ä½œçš„ç£ç›˜ï¼ˆä¹Ÿå°±æ˜¯ç”µè„‘çš„ ç¡¬ç›˜ï¼‰\n6 è¾“å…¥ï¼šâ€Cleanâ€ï¼Œæ¸…ç©ºå½“å‰ç£ç›˜åˆ†åŒº\n7 è¾“å…¥ï¼šâ€convert mbrâ€ï¼Œè½¬æ¢ä¸ºMBRåˆ†åŒºã€‚\n8 OKï¼Œæå®šï¼Œå¯ä»¥å®‰è£…WIN7äº†\nWindowsè¿œç¨‹æ¡Œé¢ # mstsc # WInè‡ªå¸¦åº”ç”¨ï¼Œä¸è¿‡ç”¨çš„æ—¶å€™å¾—å…³é—­é˜²ç«å¢™å°±å¾ˆä¼¤ Windows è¾“å…¥æ³•æ•…éšœ # ctfmon.exe win+R æ‰§è¡Œæ­¤ï¼Œé‡å¯è¾“å…¥æ³• Win å®‰è£…Ubuntu # #åœ¨powerShellä¸­ç®¡ç†å‘˜è¿è¡Œ Enable-WindowsOptionalFeature -Online -FeatureName Microsoft- Windows-Subsystem-Linux\nWindows è‡ªå¯åŠ¨é¡¹ç›®å½• # C:\\Users\\Administrator\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup\nåœ¨æ­¤ç›®å½•ä¸‹æ·»åŠ å…¥å¿«æ·æ–¹å¼åˆ™åœ¨ç³»ç»Ÿå¯åŠ¨ä¹‹åè‡ªåŠ¨åŠ è½½ï¼Œä½†ä¼šæœ‰ä¸€äº›å»¶æ—¶ï¼Œä¸åŒäºç›´æ¥å®šä¹‰çš„è‡ªå¯åŠ¨é¡¹ï¼Œç®—æ˜¯ä¼˜å…ˆçº§æœ€è½åçš„é¡¹ç›®å§\nWindows æŸ¥çœ‹ç”µæ± ä½¿ç”¨æƒ…å†µ # powercfg /BatteryReport # é€‚ç”¨äºWin8+ Python Pip # pip install -r *.txt # ä»*.txt æ–‡ä»¶è¯»å–éœ€è¦å®‰è£…çš„æ’ä»¶åˆ—è¡¨ win Ubuntu æ—¶é—´ä¸ä¸€è‡´ # timedatectl set-local-rtc true #é‡‡ç”¨æœ¬åœ°æ—¶é—´ æ¨è Ubuntu å‡çº§ç³»ç»Ÿ # sudo update-manager -c -d #ä¼šæ£€æµ‹æ˜¯å¦æœ‰ç³»ç»Ÿæ›´æ–°ï¼Œ #å¦‚æœéƒ½æ›´æ–°å®Œæ¯•ï¼Œ #åˆ™æé†’æœ‰æ–°ç‰ˆæœ¬ç³»ç»Ÿæ˜¯å¦æ›´æ–° Windows æ›´æ–°ç³»ç»Ÿé”™è¯¯ # dism++ ä½ å€¼å¾—æ‹¥æœ‰\nå¦å¤–ï¼š æ— æ³•è¿æ¥åˆ°æ›´æ–°æœåŠ¡ã€‚æˆ‘ä»¬å°†ç¨åå†è¯•ï¼Œä½ ä¹Ÿå¯ä»¥ç«‹å³è¿›è¡Œæ£€æŸ¥ã€‚å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·ç¡®ä¿ä½ å·²è¿æ¥åˆ° Internetã€‚\nå¯èƒ½æ˜¯ æœ¬åœ°ç»„ç­–ç•¥ä¸­çš„windowsæ›´æ–°çš„â€œæŒ‡å®šIntranet Microsoftæ›´æ–°æœåŠ¡ä½ç½®â€è¢«æ›´æ”¹è¿‡\nè§£å†³åŠæ³•ä¸º\ngpedit.msc æ‰“å¼€â€œæœ¬åœ°ç»„ç­–ç•¥ç¼–è¾‘å™¨â€å±•å¼€â€œè®¡ç®—æœºé…ç½®â€â€”â€œç®¡ç†æ¨¡ç‰ˆâ€â€”â€œWindowsç»„ä»¶â€â€”â€œWindows æ›´æ–°â€ï¼ˆä¸“ä¸šç‰ˆç§°ä¸ºWindows Updateï¼‰ \u0026ldquo;æŒ‡å®šIntranet Microsoftæ›´æ–°æœåŠ¡ä½ç½®â€ï¼Œç‚¹å‡»â€œæœªé…ç½®\u0026rdquo; Ubuntu æ¡Œé¢æ˜¾ç¤ºé—®é¢˜ # å¸è½½ ibus è¾“å…¥æ³•ï¼Œä¼šå‡ºç°æ¡Œé¢æ˜¾ç¤ºä¸å®Œå…¨çš„æƒ…å†µï¼Œä»»åŠ¡æ æ˜¾ç¤ºï¼Œå¯åŠ¨æ æ¶ˆå¤±ï¼Œé”®ç›˜å¿«æ·é”®æ— æ³•ä½¿ç”¨ã€‚è§£å†³åŠæ³•æ˜¯é‡æ–°å®‰è£… Unity ä¹‹åå¯åŠ¨Unity å°±ä¼šé‡æ–°æ‰“å¼€æ¡Œé¢ç¯å¢ƒâ€¦å…¶å®æ˜¯åˆé‡æ–°å®‰è£…äº† ibus å—¯â€¦â€¦â€¦\nVim è®¾ç½®Tabç©ºæ ¼æ•° # :set tabstop=4 #æ·»åŠ è‡³ç”¨æˆ·vimé…ç½®æ–‡ä»¶ï¼š .vimrc ä¸‹å³å¯ æ­£åˆ™è¡¨è¾¾å¼ # ä½œä¸ºçŸ­å°ç²¾æ‚çš„ä¸œè¥¿å˜ï¼Œä»Šå¤©åœ¨é™åˆ¶å¯†ç ç±»å‹å’Œé•¿åº¦çš„æ—¶å€™å°å°½äº†ç”œå¤´ã€‚ä½†åœ¨åˆ†ç±»æ—¶â€¦ä¸å¥½åˆ†ï¼Œåº”è¯¥å•ç‹¬å†™ä¸€ä¸ªç¬”è®°çš„ï¼Œä½†çŸ­å°ç²¾æ‚å˜›ï¼Œæ‰€ä»¥å°±æ”¾åœ¨å‘½ä»¤è¡Œè¿™é‡Œäº†ã€‚\nimport re # å¥½å§ï¼Œå…¶å®æ— æ‰€è°“çš„ï¼Œå› ä¸ºä¸‹é¢å¹¶æ²¡æœ‰ç”¨åˆ°Pythonæ­£åˆ™æ¨¡å— a = QtCore.QRegExp(\u0026quot;[A-Za-z]{0,5}[1-9][0-9]{0,5}\u0026quot;) a = QtCore.QRegExp(\u0026quot;[a-zA-Z0-9]{0,12}$\u0026quot;) a = QtCore.QRegExp(\u0026quot;[a-zA-Z0-9]+$\u0026quot;) a = QtCore.QRegExp(\u0026quot;[a-zA-Z0-9\\,\\.\\\\\\!\\?\\#\\$\\%\\^\\\u0026amp;\\*\\(\\)\\)_\\_\\=\\`\\+]+$\u0026quot;) è¿™é‡Œçš„[]ä¸­å†…å®¹æ˜¯è¾“å…¥èŒƒå›´ï¼Œ{}ä¸­çš„åˆ™æ˜¯é•¿åº¦é™åˆ¶ï¼Œè€Œ+å°±æ˜¯ä¸é™é•¿åº¦ ä¸*ç±»ä¼¼ã€‚ $ æ˜¯ç»“å°¾æ ‡å¿—ã€‚ overã€‚\né—²çš„æ²¡äº‹æ‰¾äº‹è®°ï¼š # å®‰è£…äº†ä¸€ä¸ªç¾å›½ç‰ˆçš„windows 10 pro N ç»“æœå­—ä½“ç¼ºå¤±ï¼Œç³»ç»Ÿé»˜è®¤ç¼–ç æ–¹å¼æ˜¯Asciiä¸æ˜¯utfâ€¦â€¦å¯¼è‡´ç¨‹åºä¸­çš„è¾“å‡ºä¸­æ–‡éƒ½å‡ºç°é—®é¢˜ã€‚ç»“æœåœ¨è¿™äº›ä¸æ„æˆç”Ÿäº§åŠ›çš„ä»½å„¿ä¸Šæµªè´¹æ—¶é—´ï¼ŒçœŸæ˜¯é—²çš„æ²¡äº‹æ‰¾äº‹â€¦ Vim # æŸ¥çœ‹ç¼–ç æ ¼å¼ `:set fenc` è®¾ç½®æ–‡ä»¶æ ¼å¼`:set fileformat=unix`æˆ–è€…`:set fileformat=dos` â€”â€”é’ˆå¯¹äºæ¢è¡Œç¬¦ set tabstop=4ã€set expandtabå‰è€…æ˜¯ä¸€ä¸ªtabçš„é•¿åº¦ï¼Œåè€…æ˜¯tabæ¢ä¸ºç©ºæ ¼â€¦\nGoodApps # Nitruxã€Flatabulous-masterï¼š # ä¸»é¢˜ï¼Œå›¾æ ‡ ç”¨æ¥ç¾åŒ–å¾ˆæ¼‚äº®ï¼Œå›¾ä¾‹æ ·å¼å¯ä»¥å‚çœ‹è¿™ä¸¤è€…çš„Githubã€‚\nGoldenDictï¼š # ä¸€æ¬¾è¯å…¸ï¼Œå…¶å¯ä»¥æ·»åŠ ç½‘ç»œç¿»è¯‘æºï¼Œè¿˜å¯ä»¥è‡ªè¡Œä¸‹è½½æœ¬åœ°ç¿»è¯‘æ–‡ä»¶ï¼Œæœ¬åœ°å†…å®¹æˆ‘ä¸‹è½½çš„å«æœ‰ï¼šæ—¥æ±‰ã€æ±‰æ—¥ã€è‹±ç‰›æ´¥ï¼Œæœ—é“ï¼Œè¿˜æœ‰æœ¬æœ¬è‰çº²ç›®â€¦â€¦æ²¡é”™ï¼Œç¡®å®è¿˜æœ‰ç§‘æ™®ç±»çš„ç¿»è¯‘æºã€‚å„ç§å¥‡å¼‚ç¿»è¯‘æœ¬éƒ½æœ‰ã€‚\nXwareï¼š # ä¸€æ¬¾è¿…é›·çš„æ›¿ä»£ï¼Œç½‘ç»œè¿œç¨‹ä¸‹è½½ï¼Œå®Œå…¨èƒ½å½“ä¸€ä¸ªæ²¡æœ‰å¹¿å‘Šçš„è¿…é›·æ¥ä½¿ã€‚ åªä¸è¿‡éœ€è¦è´¦æˆ·å¯†ç ï¼Œè¿˜æœ‰ï¼Œåœ¨å®‰è£…å®Œæ¯•ä¹‹åï¼Œéœ€è¦é¢„å…ˆè®¾ç½®ä¸€ç•ªï¼Œå°†Xwareæ‰˜ç®¡æ”¹ä¸ºç”¨æˆ·æ€upstarï¼Œæˆ–è€…ç®€å•çš„è‡ªåŠ¨å¯åŠ¨ã€‚å¦åˆ™ä¼šæ˜¾ç¤ºETM æ²¡æœ‰é“¾æ¥ï¼Œä¸èƒ½ä½¿ç”¨ã€‚å¦å¤–å°†æŒ‚è½½ï¼Œå®é™…ä½œç”¨æ˜¯ä¸‹è½½ä¿å­˜ä½ç½®ï¼Œä¹Ÿè®¾ç½®ä¸€ä¸‹ã€‚è¿™ä¹ˆé•¿æ—¶é—´äº†ï¼Œè‹±æ–‡è·¯å¾„åº”è¯¥å…»æˆä¹ æƒ¯â€¦â€¦\nMyPaintï¼š # ç”»å›¾å·¥å…·ï¼Œå¾ˆå¥½ä½¿ã€‚\nChrome: # è¿™ä¸ªæµè§ˆå™¨ä¸ç”¨è¯´ï¼Œè¿™é‡Œä»‹ç»çš„æ˜¯å…³äºå®ƒä¿®æ”¹hostsæ–‡ä»¶ä¹‹åå¯èƒ½ä»ç„¶æ— æ³•ä½¿ç”¨è°·æ­Œæœç´¢çš„é—®é¢˜ã€‚\n1.å› ä¸ºï¼Œé»˜è®¤çš„æ˜¯httpï¼Œæ•…æ˜¾ç¤ºå·²è¢«é‡å®šå‘å•Šï¼Œå•¥çš„ã€‚åªè¦åœ¨åœ°å€æ å‰è¾“å…¥httpså°±å¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚ 2.å½“ç„¶ï¼Œè¿™æ ·çš„è¯æ— æ³•ä½¿ç”¨ç½‘é¡µé‡Œçš„æŒ‰é’®â€œä½¿ç”¨è°·æ­Œæœç´¢â€ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹å…¶é»˜è®¤ã€‚å¯ä»¥åœ¨Chrome://net-internals/ ä¸­ï¼Œæ‰¾è§HSTSé€‰é¡¹å¡ï¼ŒDomainä¸­è¾“å…¥æƒ³è¦é»˜è®¤å¼ºåˆ¶ä½¿ç”¨httpsçš„ç½‘å€ã€‚ï¼ˆPSï¼šå› ä¸ºæˆ‘çš„ä½¿ç”¨googleè‡ªåŠ¨è·³è½¬è°·æ­Œé¦™æ¸¯ï¼Œæ‰€ä»¥è¿™é‡Œç”¨google.comè¿˜æ˜¯ä¸è¡Œçš„ï¼Œå¾—åŠ ä¸Š.hkçš„åç¼€ã€‚ï¼‰ 3.ä»¥ä¸Šä¿®æ”¹æ–¹æ³•åº”è¯¥åªèƒ½è®¾ç½®ä¸€ä¸ªé»˜è®¤ç½‘å€å‘¢ï¼Œä¸è¿‡ä¸€ä¸ªgoogleæœç´¢å°±å¤Ÿäº†â€¦â€¦ å—¯ï¼Œæˆ‘è¦æ±‚æ¯”è¾ƒä½ã€‚ è‡³äºå…¶ä»–æµè§ˆå™¨ï¼Œå¤§æ¦‚æ˜¯é»˜è®¤httpsçš„ï¼Œå› ä¸ºå¯ä»¥ç›´æ¥è®¿é—®å˜›ã€‚ è‡ªç„¶è¿˜æœ‰å¾ˆå¥½çš„åˆ«çš„ç¨å¾®ä¸“ä¸šçš„å·¥å…·ï¼Œè¿™ä¸ªä¼šåœ¨ä¹‹åæŒç»­æ›´æ–°å‡ºæ¥ï¼Œç”¨å­¦ä¹ ç¬”è®°çš„å½¢å¼ï¼ˆè€Œä¸”ï¼Œç­‰æˆ‘å­¦ä¼šåœ¨æ–‡ç« é‡Œæ·»åŠ é“¾æ¥å•Šï¼Œå›¾ç‰‡å•Šä¹‹åï¼‰ã€‚ä»¥ä¸Šå…¥é—¨çº§ã€å¸¸ç”¨çº§çš„ä¹Ÿä¼šæŒç»­æ›´æ–°çš„ï½ ä¸‹è½½é“¾æ¥æˆ‘ä»¥åŠä¹‹åéƒ½ä¸ä¼šè´´å‡ºæ¥ï¼Œå—¯ï¼Œæ¯•ç«Ÿæ²¡æœ‰æ°¸è¿œä¿å­˜çš„ï¼Œé“¾æ¥ç»å¸¸å¤±æ•ˆã€‚è‡ªè¡Œæœç´¢æ€»æ˜¯å¥½çš„ï¼Œè¿˜èƒ½é¡ºä¾¿äº†è§£ä¸€ä¸‹è¿™å—è½¯ä»¶çš„ä½¿ç”¨æ–¹æ³•ï¼Œä»¥åŠç±»ä¼¼æ›¿ä»£è½¯ä»¶çš„å‡ºç°ã€‚\nNethackï¼š # çµ‚ç«¯é‹è¡Œçš„ä¸€æ¬¾åœ°ç‰¢éŠæˆ²ï¼Œç›¸ç•¶é«˜çš„è‡ªç”±åº¦å’Œéš¨æ©Ÿç¨‹åº¦ï¼Œé™¤å»ä¸€åˆ‡æ€ªç‰©å’Œåœ°åœ–éƒ½æ˜¯ç”¨ç¬¦è™Ÿä¾†ä»£æ›¿ï¼Œæˆ°é¬¥éç¨‹å°±æ˜¯ç”¨æ–‡å­—ä¿¡æ¯ä¾†æè¿°ï¼Œåœ¨å‰µé€ å’Œæ€ç´¢æ–¹é¢ç°¡ç›´ä¸€æµã€‚ä»¥å¾Œæœ‰ç©ºé–’è‚¯å®šè¦ç©ä¸€ç©ï½\nVirbox ï¼š # sudo mount /dev/cdrom // ^^^ç›®æ¨™åœ°^^^ //æ›è¼‰å…‰ç›¤ sudo mount -t vboxsf //^^Name^^ ^^^ç›®æ¨™åœ°^^^ //æ›è¼‰è™›æ“¬æ©Ÿå…±äº«æ–‡ä»¶ ä¸‹é¢æ˜¯å…¶ä»–è½¯ä»¶çš„å­¦ä¹ ç¬”è®°ï¼šï¼ˆç­‰å¾…æ›´æ–°â€”â€”ï¼‰ # Linuxï¼š # å—¯ï¼Œè¿™æ˜¯ä¸ªè½¯ä»¶â€¦è¯¦è§ã€ŠLinuxã®ãƒãƒ¼ãƒˆã€‹\nPelican : # é™æ€ç½‘é¡µç¼–è¾‘ç”Ÿæˆå·¥å…·ã€‚ keywordsï¼šPythonã€markdown\nBlenderï¼š # é–‹æºå»ºæ¨¡ï¼Œå‹•ç•«è»Ÿä»¶ã€‚\nå¿«æ·éµè¨˜éŒ„ï¼š # Nã€T\t//ç·¨è¼¯æ¬„å‘¼å‡ºã€éš±è— T\t//å´é‡ç‰©é«”ï¼ŒNå´é‡ç·¨è¼¯çª—å£ B\t//é¸æ“‡ Tab\t//æ¨¡å¼åˆ‡æ› Ctrl+U\t//ç”¨æˆ¶ç•Œé¢ä¿å­˜ Z\t//ç‰©é«”é¡¯ç¤ºæ¨£å¼åˆ‡æ› ç·šæ¡†ã€é€è¦– H\t//åˆªé™¤ G\t//ç§»å‹• musicboxï¼š # Linux å‘½ä»¤è¡Œä¸‹çš„ ç¶²æ˜“é›²éŸ³æ¨‚ ã€‚å¤ ç²¾ç°¡å¤ è±å¯Œï¼Œå¯¦çˆ²ç¶“é©—é©šè±”ã€‚\nåŸºæ–¼Pythonï¼š # \u0026gt;https://github.com/darknessomi/musicbox xSwipeï¼š # å¤šæŒ‡è§¦æ§è½¯ä»¶ã€‚é€šè¿‡å°†è§¦æ§æ¿æ‰‹åŠ¿æ˜ å°„æˆå¿«æ·é”®ï¼Œå¯ä»¥æ”¯æŒç”šè‡³äº”æŒ‡æ“ä½œï¼Œè¿˜æœ‰ä¾§è¾¹åŠŸèƒ½ã€‚åœ¨githubä¸­æœç´¢xSwipeå³å¯ï¼Œå…¶ä¸­æœ‰è¯¦ç»†å®‰è£…è¯´æ˜ã€‚ä¹‹åå¯ä»¥åœ¨.confæ–‡ä»¶ä¸­æŸ¥çœ‹å’Œä¿®æ”¹æ˜ å°„å¿«æ·é”®ã€‚å¦æœ€åå¦‚æœä¸èƒ½è¿è¡Œï¼Œå¯èƒ½éœ€è¦æ³¨é”€é‡å¯ç”µè„‘æ–¹å¯ã€‚ è¿è¡Œ perl xSwipe.plå³å¯æ‰§è¡Œã€‚\nOpenCVï¼š # å¼€æºè®¡ç®—æœºè§†è§‰åº“ã€‚ ç®€å•è®°å½•ä¸€ä¸‹ç¼–è¯‘è¿‡ç¨‹ï¼š(å…¶å¯¦æ²’å•¥ç”¨çš„ï¼Œè‡ªå·±çˆ¬å®˜ç¶²æ‰¾å®‰è£æ•™ç¨‹å»ï¼ŒåŸºæœ¬æ²’ç”¨ã€‚)\n1. è§£å†³ä¾èµ–ï¼Œç¼–è¯‘å·¥å…· # sudo apt-get install build-essential sudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev sudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev` 2. github ä¸‹è½½æºç¨‹åº # git clone https://github.com/opencv/opencv.git 3. Building OpenCV from Source Using CMake, Using the Command Line # cd ~/opencv mkdir release cd release cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local .. 4. # make sudo make install all from \u0026gt;http://docs.opencv.org/2.4/doc/tutorials/introduction/linux_install/linux_install.html // (æˆ–è¨±å®‰è£éç¨‹å°±é€™å¥æœ‰ç”¨ 23333) Thanks for your teaching. Simplenote: # ä¸€æ¬¾ç¬”è®°è½¯ä»¶ï¼Œæ”¯æŒmarkdownç¼–è¾‘ï¼Œå¾ˆè½»é‡ã€åªèƒ½è®°å½•æ–‡å­—æœ‰ç‚¹å„¿ä¼¤ã€‚ä¸è¿‡æœ‰Linuxç‰ˆå°±å¾ˆçˆ½ã€‚è€Œä¸”åŒæ­¥é€Ÿåº¦ã€å¯åŠ¨é€Ÿåº¦éƒ½å¾ˆè¿…é€Ÿã€‚ç•Œé¢ç®€å•åˆ°ä¸è¡Œã€‚æ‰‹æœºä¸€æ¬¡ä¸å¹¸åˆ·æœºä¹‹åï¼Œæœ‰é“äº‘ç¬”è®°æ‡’å¾—è£…ï¼Œä¹‹åå°±ç”¨æ­¤è½¯ä»¶å§â€¦ scp # server copy? è¿™ä¸ªç®€å†™ä¸æ™“å¾—ï¼Œä¸è¿‡ç¡®å®æ˜¯é€‚ç”¨äºè¿œç¨‹è¿æ¥ä¼ è¾“æ–‡ä»¶çš„â€¦\nscp ian@123.123.41.3(ğŸ˜€):/home/ian/nihou.txt ./files scp ./files ian@123.123.41.3(ğŸ˜€):/home/ian/nihou.txt åˆ é™¤Winç³»ç»ŸæœåŠ¡ # sc delete serverName Termux # ç±»ä¼¼äºWINç«¯çš„Subsystemâ€”â€”å…¶å®æ›´åƒUbuntuä¸‹çš„è™šæ‹Ÿç»ˆç«¯ã€‚ ä¸è¿‡è¿™ä¸œè¥¿åŠŸèƒ½å¼ºå¤§ï¼Œé™¤äº†å°†å®‰å“é‡Œçš„Linuxå‘æŒ¥å‡ºæ¥ã€‚è¿˜æœ‰Termux APIæ¥è°ƒç”¨æ‰‹æœºçš„åº•å±‚æ¥å£ã€‚\nsshä¸æ‰‹æœºè¿æ¥ # å…¶å®åº”è¯¥æ”¾åœ¨sshçš„æ“ä½œé‡Œé¢ï¼Ÿ emmï¼Œè¿˜æ˜¯å°±è¿™å„¿å§ã€‚\n*pc # **ç”µè„‘ç”Ÿæˆå¯†åŒ™,æ— è§†å¯†ç è®¾ç½®å…¨éƒ¨å›è½¦\nssh-keygen -t rsa **ç”µè„‘å¼€å¯sshdæœåŠ¡,ç”¨äºæ‰‹æœºçš„sshè¿æ¥åˆ°ç”µè„‘æ‹·è´id_rsa.pubå†…å®¹\nsystemctl start sshd ç„¶è€Œæˆ‘ç”¨çš„æ˜¯winå­ç³»ç»Ÿæ‰€ä»¥ï¼šsshd re-exec requires execution with an absolute path\nphone # **æ‰‹æœºè¿æ¥æ‹·è´\n$HOME/.ssh/authorized_keys -\u0026gt; ä¸ç®¡ç”¨ä»€ä¹ˆå¤åˆ¶ï¼Œç„¶åæ”¾åˆ°è¿™ä¸ªè·¯å¾„å°±å¥½ã€‚ **æŸ¥çœ‹æ‰‹æœºçš„ç”¨æˆ·å\nwhoami **å¼€å¯æœåŠ¡\nsshd -p 9000 *pc # è¿æ¥åˆ°æ‰‹æœº\nssh u0_222@192.168.1.14 -p 9000 Over, å…¶ä½™é—®é¢˜æŸ¥çœ‹æ–‡ä»¶æƒé™ï¼Ÿ ä¸è¿‡è¿˜æ˜¯è‡ªå»ºæ–‡ä»¶.sshå‡ºé”™ç‡ä¸º0å§ã€‚\n2018å¹´12æœˆ4æ—¥11ç‚¹27åˆ†,å½“æˆ‘åè¿‡æ¥æ“ä½œçš„æ—¶å€™â€¦ å—¯ï¼Œæœç„¶åœ¨æƒé™è¿™é‡Œå‡ºé—®é¢˜äº†â€¦ å¦å¤–ï¼Œç”µè„‘ç«¯å¼€å¯sshdçš„æ—¶å€™ç”¨çš„ç»å¯¹åœ°å€â€¦ å› ä¸ºæ˜¯Sybï¼Ÿ\nchmod 700 ~/.ssh chmod 600 ~/.ssh/authorized_keys ğŸ˜“ å¿«æ·é”®(æœ‰ç”¨çš„éŸ³é‡é”®ï¼Ÿ) # æ˜¾ç¤ºæ‰©å±•åŠŸèƒ½æŒ‰é”®\næ–¹æ³•ä¸€:\nä»å·¦å‘å³æ»‘åŠ¨,æ˜¾ç¤ºéšè—å¼å¯¼èˆªæ ,é•¿æŒ‰å·¦ä¸‹è§’çš„KEYBOARD. æ–¹æ³•äºŒ:\nä½¿ç”¨Termuxå¿«æ·é”®:éŸ³é‡++Qé”® å¸¸ç”¨å¿«æ·é”®\nCtrlé”®æ˜¯ç»ˆç«¯ç”¨æˆ·å¸¸ç”¨çš„æŒ‰é”® â€“ ä½†å¤§å¤šæ•°è§¦æ‘¸é”®ç›˜éƒ½æ²¡æœ‰è¿™ä¸ªæŒ‰é”®ã€‚ä¸ºæ­¤ï¼ŒTermuxä½¿ç”¨éŸ³é‡å‡å°æŒ‰é’®æ¥æ¨¡æ‹ŸCtrlé”®ã€‚åœ¨è§¦æ‘¸é”®ç›˜ä¸ŠæŒ‰éŸ³é‡å‡å°+ Lå‘é€ä¸åœ¨ç¡¬ä»¶é”®ç›˜ä¸ŠæŒ‰Ctrl + Lç›¸åŒçš„è¾“å…¥ã€‚ Ctrl+A -\u0026gt; å°†å…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦– Ctrl+C -\u0026gt; ä¸­æ­¢å½“å‰è¿›ç¨‹ Ctrl+D -\u0026gt; æ³¨é”€ç»ˆç«¯ä¼šè¯ Ctrl+E -\u0026gt; å°†å…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾ Ctrl+K -\u0026gt; ä»å…‰æ ‡åˆ é™¤åˆ°è¡Œå°¾ Ctrl+L -\u0026gt; æ¸…é™¤ç»ˆç«¯ Ctrl+Z -\u0026gt; æŒ‚èµ·ï¼ˆå‘é€SIGTSTPåˆ°ï¼‰å½“å‰è¿›ç¨‹ éŸ³é‡åŠ é”®ä¹Ÿå¯ä»¥ä½œä¸ºäº§ç”Ÿç‰¹å®šè¾“å…¥çš„ç‰¹æ®Šé”®.\néŸ³é‡åŠ +E -\u0026gt; Escé”® éŸ³é‡åŠ +T -\u0026gt; Tabé”® éŸ³é‡åŠ +1 -\u0026gt; F1ï¼ˆå’ŒéŸ³é‡å¢åŠ + 2â†’F2ç­‰ï¼‰ éŸ³é‡åŠ +0 -\u0026gt; F10 éŸ³é‡åŠ +B -\u0026gt; Alt + Bï¼Œä½¿ç”¨readlineæ—¶è¿”å›ä¸€ä¸ªå•è¯ éŸ³é‡åŠ +F -\u0026gt; Alt + Fï¼Œä½¿ç”¨readlineæ—¶è½¬å‘ä¸€ä¸ªå•è¯ éŸ³é‡åŠ +X -\u0026gt; Alt+X éŸ³é‡åŠ +W -\u0026gt; å‘ä¸Šç®­å¤´é”® éŸ³é‡åŠ +A -\u0026gt; å‘å·¦ç®­å¤´é”® éŸ³é‡åŠ +S -\u0026gt; å‘ä¸‹ç®­å¤´é”® éŸ³é‡åŠ +D -\u0026gt; å‘å³ç®­å¤´é”® éŸ³é‡åŠ +L -\u0026gt; | ï¼ˆç®¡é“å­—ç¬¦ï¼‰ éŸ³é‡åŠ +H -\u0026gt; ã€œï¼ˆæ³¢æµªå·å­—ç¬¦ï¼‰ éŸ³é‡åŠ +U -\u0026gt; _ (ä¸‹åˆ’çº¿å­—ç¬¦) éŸ³é‡åŠ +P -\u0026gt; ä¸Šä¸€é¡µ éŸ³é‡åŠ +N -\u0026gt; ä¸‹ä¸€é¡µ éŸ³é‡åŠ +. -\u0026gt; Ctrl + \\ï¼ˆSIGQUITï¼‰ éŸ³é‡åŠ +V -\u0026gt; æ˜¾ç¤ºéŸ³é‡æ§åˆ¶ éŸ³é‡åŠ +Q -\u0026gt; æ˜¾ç¤ºé¢å¤–çš„æŒ‰é”®è§†å›¾ Rdfind # æ›¿ä»£æ–¹æ¡ˆ # Rdfindæ˜¯å‘½ä»¤è¡Œçš„, DuplicatePhotoFinder1.6.3æ˜¯æœ‰UIçš„, å¯ä»¥å±•ç¤ºå‡ºå†…å®¹, ä¸è¿‡å¾ˆå‚», ä¸èƒ½å¤šé€‰ä¸€æ¬¡åˆ é™¤, åªèƒ½ä¸€ä¸ªä¸€ä¸ªåˆ é™¤\u0026hellip;.. æ‰€ä»¥æˆ‘åšäº†ä¸€ä¸ªæ‰˜ç®¡é¼ æ ‡ç‚¹å‡»å™¨. å¦‚ä¸‹\nä½¿ç”¨Rdfind è¿›è¡Œé‡å¤æ–‡ä»¶æŸ¥è¯¢, ç„¶ååˆ äº†, èŠ‚çœç£ç›˜ç©ºé—´.\nä¸è¿‡æˆ‘å‡†å¤‡è‡ªå·±åšä¸€ä¸ª, æ›´æ–¹ä¾¿åˆ å‡å›¾ç‰‡, æ‰€ä»¥ä»¥ååº”è¯¥ä¼šç”¨è‡ªå·±åšçš„, è¿™ä¸ªå°±ç•™ä¸‹å‚è€ƒå§.\næŸ¥è¯¢é‡å¤ # drfind /Image/`, ç»“æœæŠ¥è¡¨å­˜äºå½“å‰ç›®å½•`results.txt\nç»ˆç«¯è¾“å‡º # rdfind -dryrun true /Image\nåˆ é™¤ç©ºæ–‡ä»¶å’Œé‡å¤æ–‡ä»¶ # rdfind -deleteduplicates true -ignoreempty false /Image\nåˆ é™¤é‡å¤æ–‡ä»¶ # rdfind -deleteduplicates true /Image\né¼ æ ‡è‡ªåŠ¨ç‚¹å‡» # é€‰æ‹©ç‚¹, ä¸åˆ°1sä¸€ç‚¹, ç»ˆç«¯æ— æ³•ç«‹å³å®æ—¶ä¸­æ–­, ä¼°è®¡è¦ç”¨ä¸ŠListenerä¸è¿‡ç°åœ¨è¿™æ ·ä¹Ÿå¯ä»¥å•¦.\nimport time from datetime import date, datetime from pynput import mouse from pynput.mouse import Button, Controller mouse = Controller() sign_start = False print(\u0026#34;è¯·å°†é¼ æ ‡ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®, è¾“å…¥`r`å¼€å§‹.\u0026#34;) str_input = None position_loop = None while 1: str_input = str_input or input() if str_input == \u0026#39;r\u0026#39;: position_loop = position_loop or mouse.position mouse.position = position_loop # mouse.move(position_loop[0], position_loop[-1]) mouse.press(Button.left) time.sleep(0.2) mouse.release(Button.left) print(f\u0026#34;{datetime.now()} - clicked - {position_loop}.\u0026#34;) time.sleep(0.4) else: print(\u0026#34;è¾“å…¥é”™è¯¯, ç¨‹åºç»“æŸ.\u0026#34;) break "},{"id":8,"href":"/posts/daily-notes/","title":"Daily Notes","section":"Blog","content":" 2021å¹´09æœˆ26æ—¥ æµ‹è¯•ä¸€ä¸‹æ˜¯ä¸æ˜¯èƒ½æŒ‚è§†é¢‘å‘¢ï¼š\n2021å¹´09æœˆ09æ—¥ ä»Šå¤©é‡æ–°å¼„äº†blog,å¢åŠ äº†Makefileå¯ä»¥æ›´åŠ æ— é—¹åŒ–çš„æ“ä½œäº† çœŸæ˜¯ä¸ªå¥½ä¸œè¥¿ ä¸è¿‡hexo deployæ”¾åœ¨é‡Œé¢ä¸€ç›´å‡ºé—®é¢˜ï¼Œé‡æ–°æ‰§è¡Œä¸€éåˆå¥½äº†ä¸æ¸…æ¥šå•¥åŸå› ã€‚ã€‚ã€‚åˆ†ä¸åŒçš„makeå­é¡¹è¯•è¯•\nåŒæ—¶ä¹Ÿæ¢äº†èƒŒæ™¯ï¼Œä¸€ä¼šå„¿æ‰“ä¸ªreleaseå».\nç¼…æ€€\n2018å¹´12æœˆ12æ—¥ ä»Šå„¿å¼€å§‹ï¼Œä»¥åä¿¡ç¬”è®°å°±å†™åœ¨ä¸Šé¢äº†â€”â€”æœ¬æ¥ç¬”è®°å°±æ²¡é¡ºåºï¼Œè€Œè€ƒè™‘ç¿»çœ‹çš„æ—¶å€™æ€»æ˜¯ç¿»é¡µå¤ªéº»çƒ¦ï¼Œemm è™½è¯´è¶Šæ¥è¶Šä¹ æƒ¯grepä½† â€¦æœ‰æ—¶å€™è¿˜æ˜¯è¦çœ‹ç½‘é¡µçš„å˜›ã€‚è€Œæ–°ç¬”è®°çš„ç¿»çœ‹ç‡æ€»æ˜¯é«˜è¿‡æ—§ç¬”è®°ï¼Œæ‰€ä»¥å°±ç”¨è¿™ä¸ªé¡ºåº~ğŸ˜„\nEeont size=4\u0026gt;åŸå› ï¼š\nä»Šå¤©å†³å®šæ¯å¤©éƒ½å†™æ¯æ—¥çš„å­¦ä¹ æ€»ç»“ï¼Œä»¥æ­¤æ¥æ¿€åŠ±ã€‚å¦åˆ™æ¯å¤©ä¸‹æ¥æ€»è§‰å¾—æ¯«æ— æ”¶è·ï¼Œé¢‡æœ‰ç©ºè™šå¯‚å¯å†·çš„æ„Ÿè§‰ï¼Œä¹Ÿæœ‰å½“å¤©å­¦ä¹ çš„ä¸çœŸå®æ„Ÿã€‚æ­¤æ–‡ç« åšåšæ€»æ¦‚ï¼Œç›®å½•çš„ä½œç”¨ï¼Œè¯¦ç»†çš„å­¦ä¹ ç¬”è®°å°±å†™åœ¨è¯¦ç»†çš„æ–‡ç« ä¸‹é¢ã€‚\nå› ä¸ºï¼Œæš‘å‡è¦å­¦ä¹ æ—¥è¯­ï¼Œæ‰€ä»¥æ—¥å¸¸ç”Ÿæ´»ä¸­èƒ½ç”¨æ—¥è®°å°±å°½é‡ç”¨äº†ã€‚å¯¹äºåŸ¹å…»æ—¥è¯­è¯­æ„Ÿå’Œç»“æ„çš„è®°å¿†åŠä¹ æƒ¯ï¼Œå¾ˆæœ‰ä½œç”¨ã€‚ æ—¥è¯­\n16-07-14 ç”¨äºæ¯”è¾ƒçš„å¥å‹ï¼šã‚ˆã‚Šã€€ã»ã© å˜åŒ–ã€ä½¿å˜åŒ–çš„å¥å¼ã€‚ 16-07-16 æ˜¨å¤©ç”¨çš„Winodosæ‰€ä»¥æ²¡å‘å†™äº†ã€‚ é‡æ–°è®°äº†åˆä¸Šçš„18è¯¾å†…å®¹ã€‚ 16-07-18 Bç«™ä¸Šçš„æ¯æ™šä¸€å¥æ„Ÿè§‰ä¸é”™ã€‚å› ä¸ºæ˜¯é•¿å¥å˜›ï¼Œèƒ½å¤Ÿæ›´åŠ è¯¦ç»†äº†è§£å¥å­é€»è¾‘å’Œè¯è¯­ä½¿ç”¨è§„å¾‹ 16-07-19 å¾©ç¿’ Pelican\n16-07-14 æ¢äº†ä¸€ä¸ªæ›´åŠ æ¸…æ˜çš„ä¸»é¢˜ï¼Œèƒ½å¤Ÿèƒ½å¥½çš„æœç´¢ï¼Œå¹¶ä¸”æ˜¾ç¤ºæ ¼å¼ä¹Ÿå¾ˆé¡ºçœ¼ã€‚è€Œä¸”èƒ½å¤Ÿè‡ªåŠ¨å½¢æˆTagsç­‰çš„æ–‡ç« é“¾æ¥ã€‚åŸºæœ¬ä¸Šæ»¡è¶³æˆ‘çš„å†™ä½œè¿˜æœ‰ä»¥åç”¨æ¥æœç´¢çš„éœ€æ±‚äº†ã€‚è€Œä¸”ä¹Ÿå¾ˆç®€çº¦æ¼‚äº®ã€‚ æ˜å¤©å†å­¦ä¹ ä¸€äº›åµŒå…¥å¼ä»¥åŠLinuxçš„å†…å®¹ï½ 16-07-19 æ’å…¥å›¾ç‰‡ï¼šå›¾åºŠ è¯„è®ºç³»ç»Ÿï¼šDisqus æ•°å­¦å…¬å¼ï¼šlatex\nLinux\n16-07-16 SSH rsync VNC ç­‰å‘½ä»¤çš„å­¦ä¹ å’Œä½¿ç”¨ã€‚ä¸ºæ­¤ï¼Œå€’æ˜¯ä¸“é—¨å®‰è£…äº†ä¸€ä¸ªUbuntuçš„Serveryç‰ˆæœ¬çš„è™šæ‹Ÿæœºã€‚ 16-07-17 disk LVM 16-07-18 å¤ä¹ äº†ä¸€äº›ç½‘ç»œéƒ¨åˆ†ã€‚ 16-07-18 Vi \u0026amp;\u0026amp; Vim æœç„¶åœ¨äº†è§£äº†ä¸€äº›æŒ‰éµçš„ä½œç”¨ä¹‹å¾Œæ„Ÿè¦ºç„¡æ„§â€˜æ–¼ç·¨è¼¯å™¨ä¹‹ç¥â€™çš„ç¨±è™Ÿã€‚è¼¸å…¥æ³•ä¸å°å¿ƒé»æˆç¹é«”äº†ï¼Œæ‡¶å¾—æ”¹å›ç°¡é«”â€”â€”â€”â€”æˆ–è¨±æœ‰â€˜æ‡¶â€™çš„æ¯”è³½æˆ‘èƒ½é€²ä¸‰ç”²ã€‚ 16-07-26 é€™å…©ä¸‰å¤©çœ‹äº†çœ‹ åµŒå…¥å¼çš„ARMç³»åˆ—æ¿é–‹ç™¼ï¼Œç•¶ç„¶ä¸»è¦çœ‹äº†çœ‹Linux ç§»æ¤ä¸€é¡ã€‚åªä¸éèªªæ˜¯æ•™ç¨‹ä¹Ÿä¸éæ˜¯æµç¨‹å§ã€‚é€šç¯‡ä¸‹ä¾†åŸºæœ¬ä¸Šç”¨çš„æœ€å¤šçš„èªå¥å³ä½¿ æŠŠé€™å€‹é€™æ¨£ï¼Œé‚£å€‹é€™æ¨£ä¸€ä¸‹ã€‚å…·é«”çˆ²ä»€éº¼å…¨ç„¶ã‚ã‹ã‚Šã¾ã›ã‚“ã­ï¼ ä¸éä¹Ÿæ²’é—œä¿‚ï¼Œç•™ä¸‹ä¾†è‡ªå·±å›é ­å†çœ‹çœ‹å°±è¡Œäº†ã€‚å¾Œé¢å†çœ‹ä¸€ä¸‹Qtç¨‹åºçš„ç§»æ¤å°±å¯ä»¥å®Œç¾æ”¶å®˜äº†ï¼Œåœ¨åµŒå…¥å¼çš„é ˜åŸŸã€‚ 16-08-03 çœ‹å®Œäº†â€”â€”åªä¸éå¾ˆå¯æƒœæ²’æœ‰å¯¦é©—æ¿ï¼Œæ‰€ä»¥ä¸èƒ½é€²è¡Œå¯¦é©—ã€‚é–‹å­¸ä¹‹å¾Œåœ¨å­¸æ ¡å§ã€‚ç•¶ç„¶ï¼Œå­¸ç¿’æ–·ç·šäº†ä¸€äº›æ™‚å€™ï¼Œå—¯å—¯â€¦â€¦ 16-08-11 musicbox Nethack â€”â€”â€”â€”A Game\né‚„æ²’ç©ï¼Œæˆ–è€…èªªé‚„æ²’çœ‹èªªæ˜æ‰‹å†Šå…ˆçç©ä¸€æ°£ã€‚é›–èªªæœ‰ä¸€å¡Œç³Šå¡—ï¼Œä¸éæˆ‘æœ‰é æ„Ÿï¼Œé€™ç¢ºå¯¦æ˜¯ä¸€æ¬¾å¾ˆå¥½çš„è‡ªç”±åœ°ç‰¢éŠæˆ²ã€‚ Blender ãƒ¼ãƒ¼å»ºæ¨¡ å‹•ç•«è»Ÿä»¶\n16-08-03 é‡æº«ä¸€ä¸‹Blenderï¼Œåœ¨å¿«æ·éµä¸Šç•¥åšä¸€äº›è¨˜éŒ„ï¼Œå¦å‰‡æ¯æ¬¡éƒ½å¿˜â€¦â€¦ :::ideerçš„ä¸Šä¸€è¡Œä¸èƒ½ä¸ºç©ºï¼Œç¼©è¿›ä¸€ä¸‹ï¼Œç„¶åå†™å°±å¯ä»¥äº†ã€‚ :::ideerçš„ä¸Šä¸€è¡Œä¸èƒ½ä¸ºç©ºï¼Œç¼©è¿›ä¸€ä¸‹ï¼Œç„¶åå†™å°±å¯ä»¥äº†ã€‚ è—è¡“\n16-08-11 é€™å¹¾å¤©åœ¨çœ‹ã€Šè—è¡“æ¦‚è«–ã€‹ã€Šä»€éº¼æ˜¯è—è¡“ã€‹ã€Šé›»å½±ç†è«–åŸºç¤ã€‹ï¼Œå› çˆ²æ˜¯ä¸‹åˆ°Readerä¸Šäº†ï¼Œå€’ä¹Ÿæ²’æœ‰é–‹æ©Ÿä¾†å¯«ç¸½çµã€‚ä¹‹å¾Œæœ‰ä»€éº¼ç¸½çµä¹‹é¡å°±å†å¦é–‹ä¸€å€‹æ–‡ç« å°ˆé–€è¨˜éŒ„å€‹äººæ‰€æ„Ÿæ‰€å¾—ã€‚ 16-8-29\nç»ˆç»“ å¾€åä½œä¸ºå‡æœŸå­¦ä¹ è®°å½•ä¸å®šæ—¶æ›´\n17-04-08 å¥½ä¸œè¥¿è‡ªç„¶è¦é‡æ–°å¯åŠ¨ï¼Œåªä¸è¿‡é…èµ·æ¥æœ‰äº›éº»çƒ¦ï¼Œå‰äº›æ—¥å­çš„.mdæ–‡ä»¶ä¹Ÿä¸¢å…‰äº†ï¼Œæ‰€ä»¥ä¸€ç›´æ‡’å¾—å†å†™ã€‚å®åœ¨ä¸åº”è¯¥â€¦â€¦\n18-05-15 å±…ç„¶åœ¨å…¬å¸å·¥ä½œæ—¶é—´æ¥å°†åšå®¢æ¥æ›´äº†â€¦ emm ä¹Ÿæ²¡åŠæ³• è°ƒè¯•æ—¶é—´å¤ªé•¿ï¼Œä¸€è¾¹ç­‰ç»“æœä¸€è¾¹å„¿å°±æŠŠåšå®¢é‡æ•´äº†ä¸€éã€‚ ä½†è¿˜æœ‰ä¸€äº›æ–‡ç« ä¸å¥½æ„æ€æ”¾ä¸Šæ¥ï¼Œä¹‹åæ•´ç†ä¸€ä¸‹æ”¾å‘—.é¡ºä¾¿ä¸€è¯´ï¼Œæˆ‘ä¹‹å‰18å¹´å…¶å®ä¹Ÿé‡æ•´è¿‡ä¸€æ¬¡â€¦ä¸è¿‡ä¼´éšç€æˆ‘çš„Ubuntuç³»ç»Ÿsaybye ç”šè‡³ä¸¢å¤±äº†æˆ‘Uç›˜é‡Œé¢ä¿å­˜çš„ä¸€äº›èŠå¤©è®°å½•ï¼ï¼ï¼ï¼ï¼ï¼ï¼ ğŸ˜” æ•…äººè¥¿è¾é»„é¹¤æ¥¼ ç™½äº‘ç©ºè½½è½»æ‚ æ‚  ä¸è¯†äººé—´å¥½é¢œè‰² æ±Ÿè¾¹é»„èŠ±ä¸¤å¯¹æ„ å»å¹´17å¹´ä½³ä½œ~~~lul\n18-06-21 ä»Šå¤©åˆé‡æ•´äº†ä¿ºå°è£…çš„MySQL Connecterçš„pythonåº“ï¼Œå®Œå–„äº†ä¹‹å‰çš„æŸ¥æ‰¾åŠŸèƒ½å’Œåˆ é™¤åŠŸèƒ½ã€‚ ä¸è¿‡è¯è¯´ä¹‹å‰å†™çš„æ’å…¥åŠŸèƒ½å°±æ˜¯å¥½ç”¨hhhhã€‚ å—¯~ o(ï¿£â–½ï¿£)o æœ‰ç©ºå¹²è„†å†ç”¨pythonå»å†™ä¸€ä¸ªmysqlçš„è¡¨è®¾è®¡ç¨‹åºç®—äº†~ å°±ç±»ä¼¼powerDesigneråœ¨MySQLè¿™è¾¹å„¿çš„ä½œç”¨ï¼Œé¡ºä¾¿ä¹Ÿå¥½æƒ³å†™ä¸€ä¸ªèƒ½ä»£æ›¿Navicatçš„å°å·¥å…·â€¦ åæ­£éƒ½æ˜¯å¤§å®¶éƒ½æ˜¯è°ƒç”¨sqlè¯­å¥ã€‚(âŠ™ï¹âŠ™) å…¶å®å‘å±•å‘å±•æˆ‘è¿™ä¸ªå°åº“å°±èƒ½åšäº†ã€‚æœ‰æ—¶é—´å†è¯´å‘—(æ²¡æ—¶é—´~ï¼Œ~)\n"},{"id":9,"href":"/docs/programmer/gui/example/table-of-contents/","title":"Table of Contents","section":"Blog æ„å»º","content":" Ubi loqui # Mentem genus facietque salire tempus bracchia # Lorem markdownum partu paterno Achillem. Habent amne generosi aderant ad pellem nec erat sustinet merces columque haec et, dixit minus nutrit accipiam subibis subdidit. Temeraria servatum agros qui sed fulva facta. Primum ultima, dedit, suo quisque linguae medentes fixo: tum petis.\nRapit vocant si hunc siste adspice # Ora precari Patraeque Neptunia, dixit Danae Cithaeron armaque maxima in nati Coniugis templis fluidove. Effugit usus nec ingreditur agmen ac manus conlato. Nullis vagis nequiquam vultibus aliquos altera suum venis teneas fretum. Armos remotis hoc sine ferrea iuncta quam!\nLocus fuit caecis # Nefas discordemque domino montes numen tum humili nexilibusque exit, Iove. Quae miror esse, scelerisque Melaneus viribus. Miseri laurus. Hoc est proposita me ante aliquid, aura inponere candidioribus quidque accendit bella, sumpta. Intravit quam erat figentem hunc, motus de fontes parvo tempestate.\niscsi_virus = pitch(json_in_on(eupViral), northbridge_services_troubleshooting, personal( firmware_rw.trash_rw_crm.device(interactive_gopher_personal, software, -1), megabit, ergonomicsSoftware(cmyk_usb_panel, mips_whitelist_duplex, cpa))); if (5) { managementNetwork += dma - boolean; kilohertz_token = 2; honeypot_affiliate_ergonomics = fiber; } mouseNorthbridge = byte(nybble_xmp_modem.horse_subnet( analogThroughputService * graphicPoint, drop(daw_bit, dnsIntranet), gateway_ospf), repository.domain_key.mouse(serverData(fileNetwork, trim_duplex_file), cellTapeDirect, token_tooltip_mashup( ripcordingMashup))); module_it = honeypot_driver(client_cold_dvr(593902, ripping_frequency) + coreLog.joystick(componentUdpLink), windows_expansion_touchscreen); bashGigabit.external.reality(2, server_hardware_codec.flops.ebookSampling( ciscNavigationBacklink, table + cleanDriver), indexProtocolIsp); Placabilis coactis nega ingemuit ignoscat nimia non # Frontis turba. Oculi gravis est Delphice; inque praedaque sanguine manu non.\nif (ad_api) { zif += usb.tiffAvatarRate(subnet, digital_rt) + exploitDrive; gigaflops(2 - bluetooth, edi_asp_memory.gopher(queryCursor, laptop), panel_point_firmware); spyware_bash.statePopApplet = express_netbios_digital( insertion_troubleshooting.brouter(recordFolderUs), 65); } recursionCoreRay = -5; if (hub == non) { portBoxVirus = soundWeb(recursive_card(rwTechnologyLeopard), font_radcab, guidCmsScalable + reciprocalMatrixPim); left.bug = screenshot; } else { tooltipOpacity = raw_process_permalink(webcamFontUser, -1); executable_router += tape; } if (tft) { bandwidthWeb *= social_page; } else { regular += 611883; thumbnail /= system_lag_keyboard; } Caesorum illa tu sentit micat vestes papyriferi # Inde aderam facti; Theseus vis de tauri illa peream. Oculos uberaque non regisque vobis cursuque, opus venit quam vulnera. Et maiora necemque, lege modo; gestanda nitidi, vero? Dum ne pectoraque testantur.\nVenasque repulsa Samos qui, exspectatum eram animosque hinc, aut manes, Assyrii. Cupiens auctoribus pariter rubet, profana magni super nocens. Vos ius sibilat inpar turba visae iusto! Sedes ante dum superest extrema.\n"},{"id":10,"href":"/docs/programmer/langs/","title":"ç¼–ç¨‹è¯­è¨€","section":"ç¨‹åºå‘˜ç¬”è®°","content":" C # Python # _index Note of Python Python Gui Vn.Pyç¬”è®°-äº¤æ˜“å¹³å°å®¢æˆ·ç«¯ OpenCV Paddle pyinstaller-pythonæ‰“åŒ… PyPi PyTest stable-diffusion Pyå°å·¥å…·å’ŒåŠŸèƒ½æ€§æ–¹æ³• paramiko ä½¿ç”¨ - ssh\u0026amp;sftp æœºå™¨å­¦ä¹ å¸¸ç”¨åº“åŸºæœ¬ç”¨æ³• é—®é¢˜ [[docs/programmer/langs/java/noteOfjava### çˆªæ´¼è°ƒç”¨Python]] Golang # Rust # Java # [[noteOfjava#Javaè¯­æ³•]] [[noteOfjava#Maven é¡¹ç›®æ ‡å‡†ç›®å½•ç»“æ„]] "},{"id":11,"href":"/docs/programmer/cloudnative/redis/","title":"ä¸­é—´ä»¶","section":"äº‘åŸç”Ÿ","content":" Redisç¬”è®°ç›®å½• # è¿™ä¸ªè®°å½•çš„å¾ˆå¥½: ä½çš„Notionç¬”è®°\nåŸºç¡€ç†è®º # æ¦‚å†µ æ•°æ®ç»“æ„ Redisæ•°æ®ç»“æ„2 Redisé«˜æ€§èƒ½IOæ¨¡å‹ æŒä¹…åŒ–æœºåˆ¶ ç¼“å­˜æ·˜æ±°/åˆ  é˜»å¡ç‚¹ä¸å¼‚æ­¥æœºåˆ¶ åŸå­æ“ä½œã€ç®¡é“ã€äº‹åŠ¡ å†…å­˜ç¢ç‰‡ é¢ä¸´é—®é¢˜ # ç¼“å†²åŒºæº¢å‡º ç¼“å­˜é›ªå´©ã€å‡»ç©¿ã€ç©¿é€ã€é¢„çƒ­ã€æ±¡æŸ“ è¯»å–è¿‡æœŸæ•°æ® æ•°æ®å€¾æ–œ è„‘è£‚ é¢è¯•é—®é¢˜ é«˜çº§ç¯‡ # ä¸»ä»æ¶æ„-ä¸»ä»åŒæ­¥ ä¸»ä»å“¨å…µæ¶æ„ åˆ‡ç‰‡é›†ç¾¤-Redis Cluster Redis Cluster é€šä¿¡å¼€é”€ åˆ‡ç‰‡é›†ç¾¤-Codis æ•°æ®ç»“æ„é€‰æ‹© æœªæ¥ç¯‡ # Redis 6.0 æ–°ç‰¹æ€§ éæ˜“å¤±å†…å­˜-NVM å®æˆ˜ç¯‡ # Rediså»¶è¿Ÿæ’æŸ¥æ€è·¯ Rediså®æ—¶ç›‘æ§å·¥å…·ä¸€è§ˆ redis infoå‘½ä»¤è¯¦è§£ RDBå¿«ç…§åˆ†æ Redis åˆ†å¸ƒå¼é” Redis åˆ†å¸ƒå¼é”-Redission "},{"id":12,"href":"/docs/programmer/cloudnative/","title":"äº‘åŸç”Ÿ","section":"ç¨‹åºå‘˜ç¬”è®°","content":" Redis # _index The basics of Redis Advanced knowledge of Redis k8s # _index k8så¸¸ç”¨å‘½ä»¤å’Œé…ç½®æ–‡ä»¶è§£æ [k8s æŠ€æœ¯åˆ†äº«](docs/programmer/cloudnative/k8s/k8s æŠ€æœ¯åˆ†äº«.md) [k8s é…å¥—è¯´æ˜](docs/programmer/cloudnative/k8s/k8s é…å¥—è¯´æ˜.md) [Argo ä½¿ç”¨è®°å½•](docs/programmer/cloudnative/k8s/Argo ä½¿ç”¨è®°å½•.md) elkåœ¨k8sä¸Šçš„éƒ¨ç½²ä½¿ç”¨ç¤ºä¾‹ Git Docker # Note of Docker Note of Podman Tips of problems Docker # Note of Docker åç«¯æ¡†æ¶ # Djangoå»ºç«™ "},{"id":13,"href":"/docs/programmer/gui/","title":"å›¾å½¢ç”¨æˆ·ç•Œé¢-GUI","section":"ç¨‹åºå‘˜ç¬”è®°","content":" æ¡Œé¢åº”ç”¨å¼€å‘ # Qt PyQt(PySide) Hugoç‰¹æ®ŠMarkdownè¯­æ³•è¯´æ˜ "},{"id":14,"href":"/docs/programmer/database/","title":"Database","section":"ç¨‹åºå‘˜ç¬”è®°","content":" [å›¾æ•°æ®åº“: dgraph](dgraph - Graph DB.md) Note of db data - MongoDB Note of db data - MySQL URLè¿æ¥ # URLç‰¹æ®Šå­—ç¬¦è½¬ä¹‰ # åœ¨æ„å»ºæ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²æ—¶ï¼ŒURLä¸­çš„æŸäº›å­—ç¬¦å…·æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå¦‚æœå®ƒä»¬å‡ºç°åœ¨ç”¨æˆ·åæˆ–å¯†ç ä¸­ï¼Œåˆ™éœ€è¦è¢«è½¬ä¹‰ã€‚ä»¥ä¸‹æ˜¯éœ€è¦è½¬ä¹‰çš„å­—ç¬¦åŠå…¶å¯¹åº”çš„URLç¼–ç ï¼š\nç©ºæ ¼ï¼š%20 !ï¼š%21 \u0026quot;ï¼š%22 #ï¼š%23 $ï¼š%24 %ï¼š%25 \u0026amp;ï¼š%26 'ï¼š%27 (ï¼š%28 )ï¼š%29 *ï¼š%2A +ï¼š%2B ,ï¼š%2C /ï¼š%2F :ï¼š%3A ;ï¼š%3B \u0026lt;ï¼š%3C =ï¼š%3D \u0026gt;ï¼š%3E ?ï¼š%3F @ï¼š%40 [ï¼š%5B \\ï¼š%5C ]ï¼š%5D ^ï¼š%5E _ï¼š%5F `ï¼ˆç©ºæ ¼ï¼‰ï¼š%60 {ï¼š%7B |ï¼š%7C }ï¼š%7D ~ï¼š%7E ç¤ºä¾‹ # å‡è®¾å¯†ç æ˜¯ hihi#wav12391176393ï¼Œå…¶ä¸­åŒ…å«ç‰¹æ®Šå­—ç¬¦ #ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è½¬ä¹‰ã€‚\nfrom urllib.parse import quote_plus password = \u0026#34;hihi#wav12391176393\u0026#34; encoded_password = quote_plus(password) URL = f\u0026#39;mysql://root:{encoded_password}@127.0.0.1:3306/installer\u0026#39; "},{"id":15,"href":"/docs/programmer/hardware/","title":"ç¡¬ä»¶","section":"ç¨‹åºå‘˜ç¬”è®°","content":" ç¡¬ä»¶ç¯‡ # è¿™é‡Œè™½è¯´æ˜¯\u0026quot;ç¡¬ä»¶ç¯‡\u0026quot;å…¶å®å¹¶ä¸æ˜¯ä»…æœ‰ç¡¬ä»¶è¯¥æ€ä¹ˆé…ï¼Œè€ŒåŒ…æ‹¬äº†åœ¨è¿™äº›ç¡¬ä»¶ä¸Šï¼Œè½¯ä»¶åº”è¯¥å¦‚ä½•éƒ¨ç½²ã€‚ å½“ç„¶ï¼Œä¹Ÿä¼šæœ‰ä¸€äº›ç¡¬ä»¶çš„ä½¿ç”¨ç»éªŒã€‚\nä¾¿æºå±å¹• "},{"id":16,"href":"/docs/programmer/langs/python/python%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/","title":"PythonåŒ…ç®¡ç†","section":"Python","content":" [[Rye ç®€å•ä½¿ç”¨æŒ‡å—]] # Rye æ˜¯ä¸€ä¸ªç”± Flask ä½œè€… Armin Ronacher å¼€å‘çš„ Python ç‰ˆæœ¬å’Œä¾èµ–ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼äº Pyenv + Poetry çš„ç»„åˆã€‚\nå®‰è£… Rye # curl --proto \u0026#39;=https\u0026#39; --tlsv1.2 -sSf https://sh.rustup.rs | sh # å®‰è£…cargo cargo install --git https://github.com/mitsuhiko/rye rye # å®‰è£…rye cargoçš„ .bashrc ç›¸å…³:\nç•¥ç•¥ç•¥ç•¥ç•¥ç•¥ . \u0026#34;$HOME/.cargo/env\u0026#34; åŸºæœ¬å‘½ä»¤ # åˆå§‹åŒ–æ–°é¡¹ç›® # rye init my_project cd my_project æŒ‡å®š Python ç‰ˆæœ¬ # rye pin 3.9.10 # æŒ‡å®šä½¿ç”¨ Python 3.9.10 æ·»åŠ ä¾èµ– # rye add flask==2.3.2 rye add black --dev # æ·»åŠ å¼€å‘ä¾èµ– åŒæ­¥ä¾èµ– # rye sync è¿è¡Œé¡¹ç›® # rye run python main.py å¸¸ç”¨å·¥å…· # rye fmt # æ ¼å¼åŒ–ä»£ç  rye lint # ä»£ç æ£€æŸ¥ rye test # è¿è¡Œæµ‹è¯• ä¼˜åŠ¿ç‰¹ç‚¹ # å†…ç½® Python ç‰ˆæœ¬ç®¡ç†ï¼Œè‡ªåŠ¨ä¸‹è½½æ‰€éœ€ Python ç‰ˆæœ¬ ä½¿ç”¨æ ‡å‡†çš„ pyproject.toml æ–‡ä»¶ æ— éœ€æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼Œè‡ªåŠ¨æ„ŸçŸ¥é¡¹ç›®ç¯å¢ƒ å†…ç½®å¸¸ç”¨å¼€å‘å·¥å…· (fmt/lint/test) ç¤ºä¾‹é¡¹ç›®ç»“æ„ # my_project/ â”œâ”€â”€ .python-version â”œâ”€â”€ pyproject.toml â”œâ”€â”€ src/ â”‚ â””â”€â”€ ... â””â”€â”€ tests/ â””â”€â”€ ... æç¤ºï¼šRye é€‚åˆå°å‹åˆ°ä¸­å‹é¡¹ç›®ï¼Œå¯¹äºå¤§å‹é¡¹ç›®å¯èƒ½éœ€è¦è¯„ä¼°æ˜¯å¦æ»¡è¶³éœ€æ±‚ã€‚\nè¿™ç¯‡ç¬”è®°åŒ…å«äº† Rye çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•å’Œä¸»è¦ç‰¹æ€§ï¼Œä½ å¯ä»¥å°†å…¶ä¿å­˜ä¸º [[Rye ç®€å•ä½¿ç”¨æŒ‡å—]] æˆ–å…¶ä»–ä½ å–œæ¬¢çš„æ ‡é¢˜ã€‚éœ€è¦æ›´è¯¦ç»†çš„å†…å®¹å¯ä»¥éšæ—¶è¡¥å……ã€‚\n"},{"id":17,"href":"/docs/programmer/cloudnative/redis/redis%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2/","title":"Redisé›†ç¾¤éƒ¨ç½²","section":"ä¸­é—´ä»¶","content":" [!note] ä»¥ä¸‹æ˜¯ä¸º Redis 7.2.4ï¼ˆæœ€æ–°ç‰ˆæœ¬-æˆ‘æ›¿æ¢æˆäº†latestï¼‰ç¼–å†™çš„å®Œæ•´ docker-compose.yml æ–‡ä»¶ï¼ŒåŒ…å« 6 ä¸ªèŠ‚ç‚¹ (3 ä¸» + 3 ä») çš„å®Œæ•´é…ç½®ï¼š\nå®‰è£… # version: \u0026#39;3.8\u0026#39; services: redis-7000: image: redis:latest container_name: redis-7000 command: redis-server /usr/local/etc/redis/redis.conf volumes: - ./config/redis-7000.conf:/usr/local/etc/redis/redis.conf - ./data/7000:/data networks: - redis-cluster-net ports: - \u0026#34;7000:7000\u0026#34; - \u0026#34;17000:17000\u0026#34; redis-7001: image: redis:latest container_name: redis-7001 command: redis-server /usr/local/etc/redis/redis.conf volumes: - ./config/redis-7001.conf:/usr/local/etc/redis/redis.conf - ./data/7001:/data networks: - redis-cluster-net ports: - \u0026#34;7001:7001\u0026#34; - \u0026#34;17001:17001\u0026#34; redis-7002: image: redis:latest container_name: redis-7002 command: redis-server /usr/local/etc/redis/redis.conf volumes: - ./config/redis-7002.conf:/usr/local/etc/redis/redis.conf - ./data/7002:/data networks: - redis-cluster-net ports: - \u0026#34;7002:7002\u0026#34; - \u0026#34;17002:17002\u0026#34; redis-7003: image: redis:latest container_name: redis-7003 command: redis-server /usr/local/etc/redis/redis.conf volumes: - ./config/redis-7003.conf:/usr/local/etc/redis/redis.conf - ./data/7003:/data networks: - redis-cluster-net ports: - \u0026#34;7003:7003\u0026#34; - \u0026#34;17003:17003\u0026#34; redis-7004: image: redis:latest container_name: redis-7004 command: redis-server /usr/local/etc/redis/redis.conf volumes: - ./config/redis-7004.conf:/usr/local/etc/redis/redis.conf - ./data/7004:/data networks: - redis-cluster-net ports: - \u0026#34;7004:7004\u0026#34; - \u0026#34;17004:17004\u0026#34; redis-7005: image: redis:latest container_name: redis-7005 command: redis-server /usr/local/etc/redis/redis.conf volumes: - ./config/redis-7005.conf:/usr/local/etc/redis/redis.conf - ./data/7005:/data networks: - redis-cluster-net ports: - \u0026#34;7005:7005\u0026#34; - \u0026#34;17005:17005\u0026#34; networks: redis-cluster-net: driver: bridge é…å¥—æ“ä½œæ­¥éª¤ # åˆ›å»ºç›®å½•å’Œé…ç½®æ–‡ä»¶ mkdir -p redis-cluster/{config,data/{7000,7001,7002,7003,7004,7005}} cd redis-cluster ç”Ÿæˆæ‰€æœ‰é…ç½®æ–‡ä»¶ï¼ˆä¸€é”®ç”Ÿæˆè„šæœ¬ï¼‰ for port in {7000..7005}; do cat \u0026gt; config/redis-${port}.conf \u0026lt;\u0026lt;EOF port ${port} cluster-enabled yes cluster-config-file nodes.conf cluster-node-timeout 5000 appendonly yes dir /data # é‡è¦ï¼šæ›¿æ¢ä¸ºä½ çš„å®¿ä¸»æœºIPï¼ˆéå®¹å™¨IPï¼‰ cluster-announce-ip 192.168.1.100 cluster-announce-port ${port} cluster-announce-bus-port 1${port} EOF done å¯åŠ¨æ‰€æœ‰å®¹å™¨ podman-compose up -d åˆå§‹åŒ–é›†ç¾¤ podman exec -it redis-7000 redis-cli --cluster create \\ $(for port in {7000..7005}; do echo -n \u0026#34;$(hostname -I | awk \u0026#39;{print $1}\u0026#39;):${port} \u0026#34;; done) \\ --cluster-replicas 1 å…³é”®é…ç½®è¯´æ˜ # cluster-announce-ip å‚æ•°\nå¿…é¡»è®¾ç½®ä¸º å®¿ä¸»æœºçš„çœŸå® IPï¼ˆä¸èƒ½æ˜¯ 127.0.0.1 æˆ–å®¹å™¨ IPï¼‰ å¦‚æœä½¿ç”¨å±€åŸŸç½‘è®¿é—®ï¼Œä¾‹å¦‚ 192.168.1.100 å¦‚æœä½¿ç”¨å…¬ç½‘è®¿é—®ï¼Œè®¾ç½®ä¸ºå…¬ç½‘ IP ç«¯å£æ˜ å°„è§„åˆ™\nå®¢æˆ·ç«¯ç«¯å£ï¼š7000-7005 é›†ç¾¤æ€»çº¿ç«¯å£ï¼š17000-17005ï¼ˆå¿…é¡»å¼€æ”¾ï¼‰ å®‰å…¨å»ºè®®ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…åšï¼‰\n# åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ requirepass your_strong_password masterauth your_strong_password éªŒè¯é›†ç¾¤çŠ¶æ€ # # æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯ podman exec -it redis-7000 redis-cli -p 7000 cluster info # æŸ¥çœ‹èŠ‚ç‚¹æ‹“æ‰‘ podman exec -it redis-7000 redis-cli -p 7000 cluster nodes å¸¸è§é—®é¢˜è§£å†³ # èŠ‚ç‚¹æ— æ³•åŠ å…¥é›†ç¾¤\næ£€æŸ¥ cluster-announce-ip æ˜¯å¦èƒ½è¢«å…¶ä»–èŠ‚ç‚¹è®¿é—® æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦å¼€æ”¾ 7000-7005 å’Œ 17000-17005 ç«¯å£ å®¢æˆ·ç«¯è¿æ¥è¶…æ—¶\nç¡®ä¿å®¢æˆ·ç«¯ä½¿ç”¨ å®¿ä¸»æœºçš„ IP è€Œä¸æ˜¯å®¹å™¨ IP æ£€æŸ¥ Redis é…ç½®æ–‡ä»¶ä¸­çš„ port å’Œ cluster-announce-port æ˜¯å¦ä¸€è‡´ ä½¿ç”¨ # Python # from loguru import logger from redis.cluster import RedisCluster, ClusterNode def test_redis_cluster(): # ä½¿ç”¨ ClusterNode å¯¹è±¡ï¼Œå¹¶ç¡®ä¿ç«¯å£ä¸º int ç±»å‹ # å¯ä»¥åªä½¿ç”¨ä¸€ä¸ªnodeä¹Ÿå¯ä»¥ä¼ å…¥å¤šä¸ªé˜²æ­¢å•ä¸ªæ•…éšœæ— æ³•è¿æ¥(å•ä¸ªè¿æ¥æˆåŠŸåä¼šè‡ªåŠ¨å‘ç°å…¶å®ƒ) startup_nodes = [ ClusterNode(host=\u0026#34;192.168.105.156\u0026#34;, port=7000), ClusterNode(host=\u0026#34;192.168.105.156\u0026#34;, port=7001), ClusterNode(host=\u0026#34;192.168.105.156\u0026#34;, port=7002), ] try: rc = RedisCluster(startup_nodes=startup_nodes, decode_responses=True) except Exception as e: logger.error(f\u0026#34;è¿æ¥ Redis é›†ç¾¤å¤±è´¥: {e}\u0026#34;) return # æµ‹è¯•å†™å…¥å’Œè¯»å–æ•°æ® try: rc.set(\u0026#34;test-key\u0026#34;, \u0026#34;hello redis cluster\u0026#34;) value = rc.get(\u0026#34;test-key\u0026#34;) logger.info(f\u0026#34;test-key: {value}\u0026#34;) except Exception as e: logger.error(f\u0026#34;æ“ä½œ Redis é›†ç¾¤å¤±è´¥: {e}\u0026#34;) if __name__ == \u0026#34;__main__\u0026#34;: test_redis_cluster() å¼‚æ­¥IO # import asyncio from loguru import logger from redis.asyncio.cluster import RedisCluster, ClusterNode async def test_redis_cluster(): # å®šä¹‰é›†ç¾¤å¯åŠ¨èŠ‚ç‚¹ï¼Œä½¿ç”¨ ClusterNode å¯¹è±¡ï¼Œç¡®ä¿ç«¯å£ä¸º int ç±»å‹ startup_nodes = [ ClusterNode(host=\u0026#34;192.168.105.156\u0026#34;, port=7000), ClusterNode(host=\u0026#34;192.168.105.156\u0026#34;, port=7001), ClusterNode(host=\u0026#34;192.168.105.156\u0026#34;, port=7002), ] try: # åˆ›å»º Redis é›†ç¾¤å®¢æˆ·ç«¯ rc = RedisCluster(startup_nodes=startup_nodes, decode_responses=True) except Exception as e: logger.error(f\u0026#34;è¿æ¥ Redis é›†ç¾¤å¤±è´¥: {e}\u0026#34;) return try: # å¼‚æ­¥å†™å…¥æ•°æ® await rc.set(\u0026#34;test-key\u0026#34;, \u0026#34;hello redis cluster\u0026#34;) # å¼‚æ­¥è¯»å–æ•°æ® value = await rc.get(\u0026#34;test-key\u0026#34;) logger.info(f\u0026#34;test-key: {value}\u0026#34;) except Exception as e: logger.error(f\u0026#34;æ“ä½œ Redis é›†ç¾¤å¤±è´¥: {e}\u0026#34;) finally: # ä½¿ç”¨ aclose() æ–¹æ³•å…³é—­å®¢æˆ·ç«¯è¿æ¥ await rc.aclose() if __name__ == \u0026#34;__main__\u0026#34;: asyncio.run(test_redis_cluster()) "},{"id":18,"href":"/docs/programmer/net/crawler/selenium-grid/","title":"Selenium Grid","section":"Net","content":" [!note] ä¸€ä¸ªç”¨äºåˆ†å¸ƒå¼æµ‹è¯•çš„å·¥å…·ï¼Œå®ƒå…è®¸ä½ åœ¨å¤šä¸ªæœºå™¨ä¸Šå¹¶è¡Œè¿è¡Œæµ‹è¯•ã€‚é€šè¿‡ Selenium Gridï¼Œä½ å¯ä»¥åŒæ—¶åœ¨å¤šä¸ªæµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿä¸Šæ‰§è¡Œæµ‹è¯•ï¼Œä»è€ŒåŠ å¿«æµ‹è¯•é€Ÿåº¦å¹¶æé«˜æµ‹è¯•è¦†ç›–ç‡ã€‚\nä¸»è¦ç‰¹ç‚¹ï¼š # å¹¶è¡Œæ‰§è¡Œï¼šå¯ä»¥åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸ŠåŒæ—¶è¿è¡Œæµ‹è¯•ï¼Œæ˜¾è‘—å‡å°‘æµ‹è¯•æ—¶é—´ã€‚ è·¨æµè§ˆå™¨æµ‹è¯•ï¼šæ”¯æŒåœ¨ä¸åŒçš„æµè§ˆå™¨ï¼ˆå¦‚ Chromeã€Firefoxã€Edge ç­‰ï¼‰ä¸Šè¿è¡Œæµ‹è¯•ã€‚ è·¨å¹³å°æµ‹è¯•ï¼šæ”¯æŒåœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼ˆå¦‚ Windowsã€macOSã€Linux ç­‰ï¼‰ä¸Šè¿è¡Œæµ‹è¯•ã€‚ é›†ä¸­ç®¡ç†ï¼šé€šè¿‡ä¸€ä¸ªä¸­å¿ƒèŠ‚ç‚¹ï¼ˆHubï¼‰æ¥ç®¡ç†å¤šä¸ªæµ‹è¯•èŠ‚ç‚¹ï¼ˆNodeï¼‰ï¼Œæ–¹ä¾¿é…ç½®å’Œç›‘æ§ã€‚ åŸºæœ¬æ¶æ„ï¼š # Hubï¼šä¸­å¿ƒèŠ‚ç‚¹ï¼Œè´Ÿè´£æ¥æ”¶æµ‹è¯•è¯·æ±‚å¹¶å°†å…¶åˆ†å‘åˆ°åˆé€‚çš„èŠ‚ç‚¹ã€‚ Nodeï¼šæµ‹è¯•èŠ‚ç‚¹ï¼Œè´Ÿè´£æ‰§è¡Œå®é™…çš„æµ‹è¯•ä»»åŠ¡ã€‚æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥é…ç½®ä¸åŒçš„æµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿã€‚ ç¤ºä¾‹ï¼š # å‡è®¾ä½ æœ‰ä¸€ä¸ªæµ‹è¯•å¥—ä»¶éœ€è¦åœ¨ Chromeã€Firefox å’Œ Edge ä¸Šè¿è¡Œï¼Œä½ å¯ä»¥é…ç½®ä¸€ä¸ª Selenium Gridï¼Œå…¶ä¸­åŒ…å«ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹åˆ†åˆ«è¿è¡Œä¸åŒçš„æµè§ˆå™¨ã€‚ç„¶åï¼Œä½ å¯ä»¥é€šè¿‡ Hub å°†æµ‹è¯•åˆ†å‘åˆ°è¿™äº›èŠ‚ç‚¹ä¸Šå¹¶è¡Œæ‰§è¡Œã€‚\npodman-composeéƒ¨ç½² # version: \u0026#39;3\u0026#39; services: selenium-hub: image: selenium/hub:latest ports: - \u0026#34;4442:4442\u0026#34; - \u0026#34;4443:4443\u0026#34; - \u0026#34;4444:4444\u0026#34; environment: - SE_EVENT_BUS_PUBLISH_PORT=4442 - SE_EVENT_BUS_SUBSCRIBE_PORT=4443 security_opt: - no-new-privileges:true selenium-node-chrome: image: selenium/node-chrome:latest shm_size: 1g dns: - 8.8.8.8 environment: - SE_EVENT_BUS_HOST=selenium-hub - SE_EVENT_BUS_PUBLISH_PORT=4442 - SE_EVENT_BUS_SUBSCRIBE_PORT=4443 depends_on: - selenium-hub security_opt: - no-new-privileges:true Pythonä»£ç  # from selenium import webdriver from selenium.webdriver.common.by import By from selenium.webdriver.support.wait import WebDriverWait from selenium.webdriver.support import expected_conditions as EC from settings import RemoteBrowserAPIHost # hub éƒ¨ç½²host class Browser: def __init__(self, headless=True, account_info=None): self.headless = headless self.input_element = None self.account_info = account_info logger.debug(f\u0026#34;å…¶å®ƒæ¨¡å¼ä½¿ç”¨è¿œç¨‹æµè§ˆå™¨\u0026#34;) op = webdriver.ChromeOptions() self.browser = webdriver.Remote(command_executor=RemoteBrowserAPIHost + \u0026#34;/wd/hub\u0026#34;, options=op) self.session_id = self.browser.session_id RDS.update_browser_heartbeat(self.session_id) logger.info(f\u0026#34;æµè§ˆå™¨ è¿æ¥æˆåŠŸ!\u0026#34;) "},{"id":19,"href":"/docs/programmer/basetc/obsidian/","title":"Obsidianç¬”è®°è½¯ä»¶","section":"åŸºç¡€å·¥å…·å’Œé…ç½®","content":"ä½¿ç”¨obsidianè¿›è¡Œç¬”è®°ç¼–å†™æˆ–è®¸æ˜¯ä¸ªå¥½ä¸»æ„.\n"},{"id":20,"href":"/docs/programmer/ml/%E5%9B%BE%E7%89%87%E8%83%8C%E6%99%AF%E6%B6%88%E9%99%A4/","title":"å›¾ç‰‡èƒŒæ™¯æ¶ˆé™¤","section":"æœºå™¨å­¦ä¹ ","content":" ä¸€ã€å·¥å…· rembg # https://github.com/danielgatis/rembg\nrembg i -m birefnet-massive 20241126-140049.jpg 49-max.png é»˜è®¤ä½¿ç”¨u2netæ¨¡å‹ï¼Œ ä½¿ç”¨-m å¯ä»¥æŒ‡å®šæ¨¡å‹è¿è¡Œ\näºŒã€æ¨¡å‹ # Model Name Download Link Source Link Description æè¿° u2net Download Source A pre-trained model for general use cases. ç”¨äºé€šç”¨ç”¨é€”çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚ u2netp Download Source A lightweight version of u2net model. u2netæ¨¡å‹çš„è½»é‡ç‰ˆã€‚ u2net_human_seg Download Source A pre-trained model for human segmentation. ç”¨äºäººç±»åˆ†å‰²çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚ u2net_cloth_seg Download Source A pre-trained model for clothes parsing. ç”¨äºæœè£…è§£æçš„é¢„è®­ç»ƒæ¨¡å‹ï¼ˆä¸Šè¡£ã€ä¸‹è¡£ã€å…¨èº«ï¼‰ã€‚ silueta Download Source A reduced size version of u2net (43MB). u2netçš„ç²¾ç®€ç‰ˆï¼ˆ43MBï¼‰ã€‚ isnet-general-use Download Source A new pre-trained model for general use cases. æ–°çš„é€šç”¨é¢„è®­ç»ƒæ¨¡å‹ã€‚ isnet-anime Download Source High-accuracy segmentation for anime characters. é«˜ç²¾åº¦çš„åŠ¨æ¼«è§’è‰²åˆ†å‰²æ¨¡å‹ã€‚ sam Download Encoder Source A pre-trained model for any use cases. ç”¨äºä»»ä½•ç”¨é€”çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚ birefnet-general Download Source A pre-trained model for general use cases. ç”¨äºé€šç”¨ç”¨é€”çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚ birefnet-general-lite Download Source A light pre-trained model for general use cases. è½»é‡çº§çš„é€šç”¨é¢„è®­ç»ƒæ¨¡å‹ã€‚ birefnet-portrait Download Source A pre-trained model for human portraits. ç”¨äºäººåƒçš„é¢„è®­ç»ƒæ¨¡å‹ã€‚ birefnet-dis Download Source A pre-trained model for dichotomous image segmentation. ç”¨äºäºŒåˆ†å›¾åƒåˆ†å‰²çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚ birefnet-hrsod Download Source A pre-trained model for high-resolution salient object detection. ç”¨äºé«˜åˆ†è¾¨ç‡æ˜¾è‘—ç›®æ ‡æ£€æµ‹çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚ birefnet-cod Download Source A pre-trained model for concealed object detection. ç”¨äºéšè”½ç‰©ä½“æ£€æµ‹çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚ birefnet-massive Download Source A pre-trained model with a massive dataset. ä½¿ç”¨å¤§è§„æ¨¡æ•°æ®é›†çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚ birefnet-massive # æ•ˆæœæœ€å¥½ï¼Œ æœ€åƒé…ç½® å¤§æ¦‚ç”¨12Gå†…å­˜\n"},{"id":21,"href":"/docs/programmer/cloudnative/elk/%E6%97%A5%E5%BF%97%E6%94%B6%E9%9B%86%E7%B3%BB%E7%BB%9F/","title":"æ—¥å¿—æ”¶é›†ç³»ç»Ÿ: loki+promtail+Grafana","section":"äº‘åŸç”Ÿ","content":"todo\n"},{"id":22,"href":"/docs/programmer/langs/golang/%E6%8A%8Agolang%E5%BD%93%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80%E7%94%A8/","title":"æŠŠGolangå½“è„šæœ¬è¯­è¨€ç”¨","section":"Golang","content":" æ”¯æŒ # Go è½¯ä»¶åŒ…ï¼š\ngithub.com/fatih/color[8]Â æ˜¯ç”¨äºè¾“å‡ºå¯¹åº”ç¼–ç é¢œè‰²çš„åŒ…ã€‚\ngithub.com/schollz/progressbar[9]Â æ˜¯ç”¨äºä¸ºæ‰§è¡Œæ—¶é—´è¿‡ä¹…çš„ä»»åŠ¡åˆ›å»ºè¿›åº¦æ¡çš„åŒ…ã€‚\ngithub.com/jimlawless/whereami[10]Â æ˜¯ç”¨äºæ•è·æºä»£ç çš„æ–‡ä»¶åã€è¡Œå·ã€å‡½æ•°ç­‰ä¿¡æ¯çš„åŒ…ï¼Œè¿™å¯¹äºæ”¹æ­£é”™è¯¯ä¿¡æ¯ååˆ†æœ‰ç”¨ï¼\ngithub.com/spf13/cobra[11]Â æ˜¯ç”¨äºæ›´è½»æ¾åœ°åˆ›å»ºå¸¦æœ‰è¾“å…¥é€‰é¡¹å’Œç›¸å…³æ–‡æ¡£çš„å¤æ‚è„šæœ¬çš„åŒ…ã€‚\n"},{"id":23,"href":"/docs/programmer/basetc/%E7%BB%88%E7%AB%AF%E6%B5%8F%E8%A7%88%E5%99%A8/","title":"ç»ˆç«¯æµè§ˆå™¨","section":"åŸºç¡€å·¥å…·å’Œé…ç½®","content":" åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨æµè§ˆå™¨ # ä¸€ã€lynx # å®‰è£… # sudo apt install lynx ä½¿ç”¨ # lynx https://github.com äºŒã€carbonyl # ä½¿ç”¨ # docker run --rm -ti docker.io/fathyb/carbonyl https://youtube.com åƒåœ¾ï¼Œ å¤ªæ¨¡ç³Šäº†ï¼Œå›¾ç‰‡æ¨¡ç³Šå°±ç®—äº†ï¼Œ å­—ä¹Ÿè·Ÿç€æ¨¡ç³Šï¼Œ åæ­£åŸºæœ¬å¤„äºä¸èƒ½ç”¨çš„çŠ¶æ€\n"},{"id":24,"href":"/docs/programmer/gui/ffmpeg/","title":"ffmpeg ä½¿ç”¨","section":"å›¾å½¢ç”¨æˆ·ç•Œé¢-GUI","content":" å‘½ä»¤ # [[å°å‘½ä»¤#13. ffmpeg æå–è§†é¢‘ä¸­éŸ³é¢‘]] [[å°å‘½ä»¤#21. å‹ç¼©è§†é¢‘]] 1. ä¿®æ”¹å›¾ç‰‡åˆ†è¾¨ç‡ # ffmpeg -i input.jpg -vf scale=iw/2:ih/2 output.jpg # é›†ä½“æ“ä½œ for file in *.png; do ffmpeg -i \u0026#34;$file\u0026#34; -vf scale=iw/2:ih/2 \u0026#34;${file%.png}-2.png\u0026#34;; done 2. å‹ç¼©å›¾ç‰‡ # 1 - 9 è¶Šå¤§è¶Šç‹ \nffmpeg -i input.jpg -compression_level 9 output.jpg # é›†ä½“å‹ç¼© for file in *.png; do ffmpeg -i \u0026#34;$file\u0026#34; -compression_level 9 \u0026#34;${file%.png}-2.png\u0026#34;; done "},{"id":25,"href":"/docs/programmer/platforms/%E9%80%86%E5%90%91/","title":"é€†å‘ä¸‰æ¿æ–§","section":"å¹³å°","content":"çªç„¶æƒ³èµ·å®ƒ: [[noteOfjava]]\nä¸‰æ¿æ–§ - apktool # https://apktool.org/docs/install/#linux\njava -jar apktool.jar d -f -o outputDir yourApp.apk // æˆ– ./apktool d -f -o outputDir yourApp.apk æ–‡ä»¶ç›®å½•è¯´æ˜:\nç›®å½•/æ–‡ä»¶å ç”¨é€” å†…å®¹ original ä¿å­˜ Apktool æ— æ³•ç›´æ¥å¤„ç†çš„åŸå§‹æ–‡ä»¶ AndroidManifest.xml å’Œç­¾åä¿¡æ¯ç›®å½• META-INF res åŒ…å«åº”ç”¨ç¨‹åºçš„èµ„æºæ–‡ä»¶ drawable (å›¾ç‰‡èµ„æº), layout (å¸ƒå±€æ–‡ä»¶), values (å­—ç¬¦ä¸²ç­‰), menu (èœå•å®šä¹‰), xml (å…¶ä»– XML èµ„æº) smali åŒ…å«åç¼–è¯‘åçš„å­—èŠ‚ç æ–‡ä»¶ .smali æ–‡ä»¶ï¼Œæ¯ä¸ªå¯¹åº”ä¸€ä¸ª Java ç±»çš„æ–¹æ³• assets å­˜æ”¾åŸå§‹æ–‡ä»¶èµ„æºï¼Œä¸ç»ç¼–è¯‘å¤„ç† éŸ³é¢‘ã€è§†é¢‘ã€HTMLã€å­—ä½“ç­‰æ–‡ä»¶ lib å­˜æ”¾ native åº“ï¼ˆ.so æ–‡ä»¶ï¼‰ ä¸åŒå¹³å°æ¶æ„çš„ .so æ–‡ä»¶ AndroidManifest.xml åº”ç”¨çš„æ¸…å•æ–‡ä»¶ï¼Œå®šä¹‰åº”ç”¨åç§°ã€åŒ…åã€ç‰ˆæœ¬ã€æƒé™ç­‰ XML æ ¼å¼çš„é…ç½®ä¿¡æ¯ apktool.yml Apktool çš„é…ç½®æ–‡ä»¶ï¼Œå­˜å‚¨è§£ç å’Œé‡å»ºå‚æ•° æ¡†æ¶ç‰ˆæœ¬ã€èµ„æºä½ç½®ã€ç¼–ç è®¾ç½®ç­‰ æ³¨æ„äº‹é¡¹ï¼š ä¿®æ”¹èµ„æºæˆ–ä»£ç åï¼Œä½¿ç”¨ Apktool é‡æ–°æ‰“åŒ… APKã€‚ ç¡®ä¿éµå®ˆæ³•å¾‹æ³•è§„å’Œä½¿ç”¨åè®®ã€‚ Smali æ˜¯ä¸€ç§ç”¨äº Android åº”ç”¨ç¨‹åºçš„DEXï¼ˆDalvik Executableï¼‰æ–‡ä»¶çš„æ±‡ç¼–è¯­è¨€ã€‚å®ƒæ˜¯DEXä»£ç çš„åæ±‡ç¼–è¡¨ç¤ºï¼Œç±»ä¼¼äºJavaçš„å­—èŠ‚ç ã€‚Smali è¯­æ³•å…·æœ‰ç‰¹å®šçš„ç»“æ„å’Œè§„åˆ™ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›åŸºæœ¬æ¦‚å¿µå’Œè¯­æ³•ï¼š\nSmaliè¯­è¨€ # åŸºæœ¬ç»“æ„ # ä¸€ä¸ª Smali æ–‡ä»¶é€šå¸¸åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š\nå¤´éƒ¨ä¿¡æ¯ï¼šåŒ…æ‹¬æ–‡ä»¶ç‰ˆæœ¬ã€åˆ›å»ºæ—¥æœŸç­‰ã€‚ ç±»å®šä¹‰ï¼šä»¥ .class å¼€å¤´ï¼Œåè·Ÿç±»åå’Œçˆ¶ç±»åã€‚ å­—æ®µå®šä¹‰ï¼šä»¥ .field å¼€å¤´ï¼Œå®šä¹‰ç±»çš„å­—æ®µã€‚ æ–¹æ³•å®šä¹‰ï¼šä»¥ .method å¼€å¤´ï¼Œå®šä¹‰ç±»çš„æ–¹æ³•ã€‚ æŒ‡ä»¤ï¼šæ–¹æ³•å†…éƒ¨çš„æ“ä½œç ï¼Œæ‰§è¡Œå…·ä½“çš„æ“ä½œã€‚ ç±»å®šä¹‰ # .class public Lcom/example/MyClass; .super Ljava/lang/Object; .source \u0026#34;MyClass.java\u0026#34; .classï¼šå®šä¹‰ä¸€ä¸ªç±»ï¼Œpublic è¡¨ç¤ºè®¿é—®æƒé™ï¼ŒLcom/example/MyClass; æ˜¯ç±»çš„å…¨é™å®šåã€‚ .superï¼šæŒ‡å®šçˆ¶ç±»ï¼Œè¿™é‡Œæ˜¯ Ljava/lang/Object;ï¼Œè¡¨ç¤ºç»§æ‰¿è‡ª Object ç±»ã€‚ .sourceï¼šæŒ‡å®šæºæ–‡ä»¶çš„åç§°ã€‚ å­—æ®µå®šä¹‰ # .field private static myField:I .fieldï¼šå®šä¹‰ä¸€ä¸ªå­—æ®µï¼Œprivate static è¡¨ç¤ºè®¿é—®æƒé™å’Œé™æ€å±æ€§ï¼ŒmyField æ˜¯å­—æ®µåï¼Œ:I è¡¨ç¤ºå­—æ®µç±»å‹ä¸º intã€‚ æ–¹æ³•å®šä¹‰ # .method public static main([Ljava/lang/String;)V .methodï¼šå®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œpublic static è¡¨ç¤ºè®¿é—®æƒé™å’Œé™æ€æ–¹æ³•ï¼Œmain æ˜¯æ–¹æ³•åï¼Œ[Ljava/lang/String; è¡¨ç¤ºå‚æ•°ç±»å‹ä¸ºå­—ç¬¦ä¸²æ•°ç»„ï¼ŒV è¡¨ç¤ºè¿”å›ç±»å‹ä¸º voidã€‚ æŒ‡ä»¤ # åœ¨æ–¹æ³•å†…éƒ¨ï¼Œä½ ä¼šæ‰¾åˆ°ä¸€ç³»åˆ—çš„æŒ‡ä»¤ï¼Œå®ƒä»¬ç”¨äºæ‰§è¡Œæ“ä½œï¼š\naload_0 // å°†å±€éƒ¨å˜é‡0çš„å¼•ç”¨æ¨é€åˆ°æ“ä½œæ•°æ ˆ invoke-static {p0}, Lcom/example/MyClass;-\u0026gt;myMethod(Ljava/lang/String;)V // è°ƒç”¨ä¸€ä¸ªé™æ€æ–¹æ³• const/4 v0, 0x1 // å°†æ•´æ•°1æ¨é€åˆ°å±€éƒ¨å˜é‡v0 return-void // ä»å½“å‰æ–¹æ³•è¿”å›void aload_0ï¼šåŠ è½½å¼•ç”¨ç±»å‹å±€éƒ¨å˜é‡åˆ°æ“ä½œæ•°æ ˆã€‚ invoke-staticï¼šè°ƒç”¨ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œ{p0} æ˜¯å‚æ•°ï¼ŒLcom/example/MyClass;-\u0026gt;myMethod(Ljava/lang/String;)V æ˜¯æ–¹æ³•çš„å…¨é™å®šåå’Œæè¿°ç¬¦ã€‚ const/4ï¼šå°†ä¸€ä¸ªå°çš„æ•´æ•°å€¼æ¨é€åˆ°å±€éƒ¨å˜é‡ã€‚ return-voidï¼šä»æ–¹æ³•è¿”å›ã€‚ æ³¨é‡Š # Smali æ–‡ä»¶ä¸­ä¹Ÿå¯ä»¥åŒ…å«æ³¨é‡Šï¼Œä½¿ç”¨ # å¼€å¤´çš„è¡Œæ˜¯æ³¨é‡Šã€‚\n# This is a comment æ•°æ®ç±»å‹ # Smali ä½¿ç”¨ç‰¹å®šçš„ç¬¦å·æ¥è¡¨ç¤ºæ•°æ®ç±»å‹ï¼š\nVï¼švoid Zï¼šboolean Bï¼šbyte Sï¼šshort Cï¼šchar Iï¼šint Jï¼šlong Fï¼šfloat Dï¼šdouble Lfully/qualified/Class;ï¼šå¯¹è±¡ç±»å‹ è¿™åªæ˜¯ Smali è¯­æ³•çš„ä¸€ä¸ªç®€è¦æ¦‚è¿°ã€‚ç”±äº Smali æ˜¯ä¸€ç§ä½çº§è¯­è¨€ï¼Œå®ƒåŒ…å«è®¸å¤šå¤æ‚çš„æŒ‡ä»¤å’Œç»“æ„ï¼Œç†è§£å®ƒéœ€è¦æ—¶é—´å’Œå®è·µã€‚\nhttpsè¯ä¹¦ # Android # mount -o remount,rw /system mv /sdcard/c8750f0d.0 /system/etc/security/cacerts/ chmod 644 /system/etc/security/cacerts/* chcon u:object_r:system_file:s0 /system/etc/security/cacerts/* mount -o remount,ro /system the perms \u0026amp; selinux context labels, so everything is as readable as before # Delete the temp cert directory \u0026amp; this script itself\n"},{"id":26,"href":"/docs/programmer/langs/python/%E8%A7%84%E8%8C%83/","title":"Pythonç¼–ç è§„èŒƒ","section":"Python","content":" å‡½æ•°è¿”å›å€¼å®šä¹‰ # å¤šä¸ªè¿”å›å€¼ - Tuple # async def function_name(package_name: str) -\u0026gt; Tuple[ParamsPushLvl2Pool, bool]: pass æ”¯æŒä¼ å…¥å¤šç±»å‹ - Union # ex: Union[ExpiryT, None] = None, è¿­ä»£ # def _yield_offer_info(_session, from_days_ago: int) -\u0026gt; Iterator[Offer]: "},{"id":27,"href":"/docs/programmer/database/note-of-db-data-mariadb/","title":"æ•°æ®åº“-MariaDBç¯‡","section":"Database","content":" MariaDBæ•°æ®åº“ ğŸ“Š # ä¸€ã€å®‰è£… # Docker Run # You need to specify one of MARIADB_ROOT_PASSWORD, MARIADB_ROOT_PASSWORD_HASH, MARIADB_ALLOW_EMPTY_ROOT_PASSWORD and MARIADB_RANDOM_ROOT_PASSWORD\ndocker run -p 3306:3306 --name mariadb11 -e MARIADB_ROOT_PASSWORD=mrp1234 mariadb:11 "},{"id":28,"href":"/docs/programmer/langs/golang/%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","title":"å¸¸ç”¨å‘½ä»¤","section":"Golang","content":" build # ç¼–è¯‘ä¸ªåç«¯æœåŠ¡ï¼Œè§£å†³æœ‰äº›åŒ…ä¾èµ–é—®é¢˜\ngo build -ldflags \u0026#39;-w -s\u0026#39; -tags netgo -insta llsuffix netgo -o xxxxx æ¸…ç† # æ¸…ç†GOPATH: go clean -modcache # è®¾ç½®å¤§ç£ç›˜çš„æ–°è·¯å¾„ export GOPATH=/mnt/data/go/gopath "},{"id":29,"href":"/docs/programmer/ml/%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%A1%8C%E4%B8%BA%E8%87%AA%E5%8A%A8%E7%BC%96%E6%8E%92%E5%92%8C%E4%BB%BB%E5%8A%A1/","title":"æœºå™¨äººè¡Œä¸ºè‡ªåŠ¨ç¼–æ’å’Œä»»åŠ¡","section":"æœºå™¨å­¦ä¹ ","content":" ä¸€ã€åˆ†å±‚ # äººæœºäº¤äº’å‹çš„ä»äººåˆ°æœºå™¨é€å±‚çœ‹æ˜¯\næ¥å—ç«¯ï¼š è¯­éŸ³è¯†åˆ« \u0026amp; å›¾åƒè¯†åˆ« \u0026amp; å‹åŠ›æ„ŸçŸ¥ è¯­ä¹‰ç†è§£ï¼š è¯­è¨€å¤§æ¨¡å‹/è¯­ä¹‰æå–æ¨¡å‹ï¼Œ å‰è€…ä¸“ä¸šï¼Œåè€…ä¸“ç²¾ çŠ¶æ€æ„ŸçŸ¥ï¼šå›¾åƒè¯†åˆ« \u0026amp; å…¶ä»–ä¼ æ„Ÿå™¨ è¡Œä¸ºç¼–æ’ï¼š è¯­è¨€å¤§æ¨¡å‹/å›¾æ•°æ®ç¼–æ’/è¡Œä¸ºæ ‘ åŠ¨ä½œæ‰§è¡Œ äºŒã€æœ€å°ç³»ç»Ÿæµç¨‹ # ä½¿ç”¨è€…å‘å‡ºå‘½ä»¤ï¼Œæ¥æ”¶ç«¯æ¥å—è¿›è¡Œè¯­ä¹‰ç†è§£ï¼Œè·çŸ¥ä½¿ç”¨è€…ç›®çš„ -\u0026gt; å‚æ•°ä¸€ å½“è·çŸ¥ç›®çš„ä¹‹åï¼Œå…ˆå¯¹å½“å‰çŠ¶æ€è¿›è¡Œåˆ†æï¼ˆæ‰€å¤„ç¯å¢ƒå’Œå½“å‰æ‰§è¡Œä»»åŠ¡çŠ¶æ€ï¼‰ -\u0026gt; å‚æ•°äºŒ å°†è·å–åˆ°çš„ä¸¤å‚æ•°éƒ½ä¼ äºä»»åŠ¡ç¼–æ’æ¨¡å‹åï¼ŒåŸºäºå½“å‰çŠ¶æ€å’Œå‘½ä»¤åˆ›å»ºåç»­æµç¨‹ æœ€åæŒ‰æ­¥éª¤æ‰§è¡Œä»»åŠ¡å³å¯ ä¸‰ã€æ‰€éœ€æŠ€æœ¯ # è¯­éŸ³è¯†åˆ«ï¼š æœ¬åœ°éƒ¨ç½²æ¨¡å‹å¯é€‰ç”¨é˜¿é‡ŒParaformerï¼Œåœ°å€ï¼šhttps://github.com/modelscope/FunASR/wiki/paraformerï¼Œ æˆ‘è¿™é‡Œä¹Ÿæœ‰ä¸ªdemoé¡¹ç›®: https://github.com/IanVzs/asr åŸºæœ¬å’Œwikié‡Œç¤ºä¾‹ä¸€æ · å¦‚æœéœ€è¦ttsçš„è¯å¯ä»¥ç”¨: https://github.com/kuangdd/ttskitï¼Œ å¯ä»¥åœ¨æ‰§è¡ŒåŠ¨ä½œçš„æ—¶å€™â€œè¯´â€å‡ºæ¥è°ƒè¯•ç”¨ æˆ–è€…è°ƒè®¯é£æœåŠ¡æ¥å£ï¼Œåœ°å€ï¼šhttps://www.xfyun.cn/doc/asr/voicedictation/API.html#%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E6%B5%81%E7%A8%8B ä»¥ä¸Šä¸¤ä¸ªéƒ½æ¶µç›–äº†æµå¼å’Œè¯­éŸ³æ–‡ä»¶è¯†åˆ«ä¸¤ç§æ–¹å¼ï¼Œå‡†ç¡®ç‡éƒ½ç›¸å½“é«˜å¯ä»¥æ»¡è¶³å‡ ä¹ä»»ä½•åœºåˆä½¿ç”¨ å›¾åƒè¯†åˆ«ï¼š ç›®æ ‡è¯†åˆ«å¯ç”¨yoloï¼Œæˆ–è€…ç”¨é£æ¡¨ç›¸å…³æ¨¡å‹ï¼Œä¸è¿‡è¿™ä¸¤ä¸ªåªèƒ½è·å–åˆ°äºŒç»´ä¿¡æ¯ï¼Œè¦å¯¹ç‰©ä½“è¿›è¡Œå‡†ç¡®å®šä½è¿˜éœ€è¦æ­é…â€œåŒç›®æ·±åº¦ä¼°è®¡ç®—æ³•â€æ‰å¯ä»¥ç»„è£…å‡ºæ¥ä¸‰ç»´ä¿¡æ¯ å½“ç„¶ä¹Ÿå¯ä»¥ç”¨å¤šæ¨¡æ€å¤§æ¨¡å‹æ›¿æ¢yoloï¼Œä½†æ˜¯é€Ÿåº¦ä¼šå˜æ…¢ï¼Œå…¶è·å–åˆ°çš„è¿˜æ˜¯äºŒç»´æ•°æ®ï¼Œå¯ä»¥å¯¹è§†é‡é‡Œçš„ç‰©ä½“è¿›è¡Œå¹¿æ³›çš„è¯†åˆ«ä½†æ˜¯æ— æ³•åšåˆ°ç²¾å‡†å®šä½ï¼šhttps://community.modelscope.cn/669e26f4962e585a2565ab42.html å‹åŠ›æ„ŸçŸ¥æˆ–å…¶ä»–ä¼ æ„Ÿå™¨ï¼š åµŒå…¥å¼å†…å®¹ï¼Œ å…·ä½“æƒ…å†µå…·ä½“å®ç° å¤§æ¨¡å‹promptå·¥ç¨‹å’Œå¾®è°ƒï¼š promptå¯ä»¥æ»¡è¶³å¤§å¤šæ•°åœºæ™¯éœ€æ±‚ï¼Œå¯è§ï¼š https://www.promptingguide.ai/zh å¾®è°ƒLoraæŠ€æœ¯ æœ‰éœ€è¦å†çœ‹ï¼Œå…·ä½“å¾—æ ¹æ®å¤§æ¨¡å‹é€‰å‹ï¼Œå»çœ‹ç›¸å¯¹åº”å¤§æ¨¡å‹çš„å…·ä½“å¾®è°ƒæ–‡æ¡£ æ±‰è¯­ç±»çš„å¯é€‰ChatGLM, QWenè¿™äº› Mixtral-8x7b è¿™ç§æ··åˆæ¨¡å‹æˆ–è®¸æ›´é€‚åˆä½ çš„ä½¿ç”¨åœºæ™¯ å››ã€ä¼˜åŒ–ç‚¹ # åœ¨è·‘é€šæœ€å°ç³»ç»Ÿçš„å•çº¿ç¨‹æµç¨‹ä¹‹åï¼Œ å°±å¯ä»¥å°±ä»»åŠ¡ä¸­æ–­ã€å¤„ç†å¹²æ‰°ã€å¤§æ¨¡å‹æ•ˆæœä¼˜åŒ–è¿›è¡Œå¯¹ç‚¹çš„æå‡ã€‚ æ‰€ç”¨æ–¹æ¡ˆå¤§ä½“ä¸Šä¹Ÿå°±æ˜¯ï¼š\nåŒæ­¥æ”¹å¼‚æ­¥ï¼šå°†æœ€å°ç³»ç»Ÿæµç¨‹ä¸­çš„æ­¥éª¤ç”±1-\u0026gt;2-\u0026gt;3-\u0026gt;4ä¿®æ”¹ä¸ºäº’ç›¸ç‹¬ç«‹çš„1, 2, 3, 4æ¯ä¸ªä»»åŠ¡éƒ½åŸºäºäº‹ä»¶å˜åŒ–è¿›è¡Œè§¦å‘ï¼Œå¦‚æ‹¿çº¢çƒï¼Œçªç„¶è§†é‡ä¸­çº¢çƒå…¨éƒ¨å˜ä¸ºç»¿çƒï¼Œå› å¤–ç•ŒçŠ¶æ€æ”¹å˜å°±åº”è‡ªä¸»è§¦å‘ç¬¬ä¸‰æ­¥ç¼–æ’ä»»åŠ¡å¯¹å½“å‰çš„æŠ“å–åŠ¨ä½œè¿›è¡Œä¸­æ–­ã€‚ å¤šä»»åŠ¡èåˆï¼š ç»­æ¥1ä¸­çº¢ç»¿çƒæ‰€æè¿°çš„ï¼Œå¯¹æŠ“å–çº¢çƒå’Œå–æ¶ˆæŠ“å–åŠ¨ä½œè¿™ä¸¤ä¸ªä»»åŠ¡è¿›è¡Œèåˆ æˆ–è€…è¯´åŸæœ¬è§†é‡åªæœ‰ä¸€ä¸ªçº¢çƒï¼Œçªç„¶å˜æˆä¸¤ä¸ªï¼Œå°±éœ€è¦å¯¹æŠ“å–ä¸€ä¸ªçº¢çƒçš„ä»»åŠ¡ç¼–æ’å’ŒæŠ“å–ä¸¤ä¸ªçº¢çƒçš„ä»»åŠ¡ç¼–æ’è¿›è¡Œèåˆ å¯¹å¤§è¯­è¨€æ¨¡å‹è¿›è¡Œâ€œé©¯åŒ–â€ï¼Œå›ºåŒ–å¤§æ¨¡å‹è¾“å‡ºå†…å®¹æ ¼å¼ï¼Œé“¾å¼æ€è€ƒæå‡å‡†ç¡®åº¦ï¼š å¤§è¯­è¨€æ¨¡å‹ç»å¸¸æ€§èƒ¡è¨€ä¹±è¯­æˆ–é€»è¾‘ä¸å‡†ï¼Œå¾ˆæ­£å¸¸ï¼Œéœ€è¦åå¤äº†è§£æŠŠæ§ éœ€è¦å¯¹å¤§æ¨¡å‹åŠ¨ä½œåšé£æ§ æ€»ä¹‹ï¼Œä»¥ä¸Šå·¥ä½œæ‰€æ¶‰é¢†åŸŸå¾ˆå¤šï¼Œæ¯ä¸ªé¢†åŸŸæ‰€è¦æ±‚éƒ½åé«˜ï¼Œè¦å®ç°åªèƒ½æ˜¯æ­ç§¯æœ¨ã€‚è¿™æ ·å°±ä½¿å¾—è¿™ä¸ªå·¥ä½œæ›´åŠ åå‘å·¥ç¨‹ä¸€äº›ï¼Œå¹¶ä¸æ€ä¹ˆåç ”ç©¶ç±»ã€‚è¯­éŸ³è¯†åˆ«èƒ½åŠ›ç°åœ¨å·²ç»ç›¸å½“é«˜å°½ç®¡æ‹¿æ¥ç”¨ï¼Œä¸ç”¨æŠ•å…¥æ— ç”¨æ—¶é—´ã€‚ å›¾åƒè¿™å—å„¿æ‰€æŠ•å…¥çš„ç²¾åŠ›ä¼šæ¯”è¾ƒå¤šï¼Œå°¤å…¶æ˜¯åœ¨å…·ä½“å®šä½æŸä¸ªç‰©ä½“ä¸Šã€‚\nè¦ç”¨ä¼ æ„Ÿå™¨çš„è¯ï¼Œé‚£åµŒå…¥å¼ç›¸å…³çŸ¥è¯†ä¹Ÿå¾—æŒæ¡ã€‚\nå¤§æ¨¡å‹çš„ä½œç”¨åœ¨è¿™é‡Œæ— éå°±æ˜¯æ¯”ä¸“ä¸šçš„å°æ¨¡å‹æ›´ä¸ºé€šç”¨ï¼Œå¯ä»¥å¤„ç†æ›´å¤šæ„æ–™ä¹‹å¤–çš„çŠ¶å†µï¼Œä½†æ˜¯ç›¸å¯¹åº”çš„ï¼Œè¿˜å¾—ä¸“é—¨å†™ä¸€ä¸ªé’ˆå¯¹å®ƒçš„ä¹±è¾“å‡ºçš„é£æ§ã€‚\nå¦ä¸€ä¸ªè€—æ—¶ç‚¹å°±æ˜¯åœ¨ä»»åŠ¡ç¼–æ’ä¸Šï¼Œéœ€è¦ä½ è‡ªå·±æ•´ç†å‡ºä¸€äº›é€šç”¨ã€ç‹¬ç«‹ä¸è€¦åˆçš„å­ä»»åŠ¡ï¼Œäº¤ç”±å¤§æ¨¡å‹å»æ­ç§¯æœ¨ï¼Œè¿™å°±æ˜¯ä½ å’Œå¤§æ¨¡å‹å»ç£¨åˆçš„è¿‡ç¨‹ï¼Œä¼šå¾ˆçƒ¦ã€‚\n"},{"id":30,"href":"/docs/programmer/net/tools/ngrok/","title":"ngrok - ä¸€ä¸ªå…è´¹å†…ç½‘ç©¿é€apiå·¥å…·","section":"Net","content":" ngrok - ä¸€ä¸ªå…è´¹å†…ç½‘ç©¿é€apiå·¥å…· # å®˜ç½‘: https://dashboard.ngrok.com/get-started/setup/linux\næ­¥éª¤è¯´æ˜ # ä¸€å…±ä¸‰æ­¥, å®‰è£…ã€é…ç½®ã€å‘å¸ƒå°±æ˜¯è¿™ä¹ˆç®€å•:\ncurl -s https://ngrok-agent.s3.amazonaws.com/ngrok.asc \\ | sudo tee /etc/apt/trusted.gpg.d/ngrok.asc \u0026gt;/dev/null \\ \u0026amp;\u0026amp; echo \u0026#34;deb https://ngrok-agent.s3.amazonaws.com buster main\u0026#34; \\ | sudo tee /etc/apt/sources.list.d/ngrok.list \\ \u0026amp;\u0026amp; sudo apt update \\ \u0026amp;\u0026amp; sudo apt install ngrok ngrok config add-authtoken {authtoken} \u0026gt; Authtoken saved to configuration file: {home}/.config/ngrok/ngrok.yml # å‘å¸ƒåº”ç”¨ ngrok http http://localhost:8080 æˆåŠŸè¾“å‡º: # ngrok (Ctrl+C to quit) Try our new Traffic Inspector: https://ngrok.com/r/ti Session Status online Account ian (Plan: Free) Version 3.13.0 Region Asia Pacific (ap) Web Interface http://127.0.0.1:4040 Forwarding https://ccf7-138-59-113-191.ngrok-free.app -\u0026gt; http://localhost:8011 Connections ttl opn rt1 rt5 p50 p90 0 0 0.00 0.00 0.00 0.00\nä½¿ç”¨ # è®¿é—® https://ccf7-138-59-113-191.ngrok-free.app å°±å¯ä»¥ç”¨å•¦.\n"},{"id":31,"href":"/docs/programmer/basetc/curl/","title":"curl","section":"åŸºç¡€å·¥å…·å’Œé…ç½®","content":" å¸¸ç”¨å‘½ä»¤ # æ–‡ä»¶ä¸Šä¼  curl -F \u0026#34;file=@./1.jpg\u0026#34; -X POST \u0026#34;http://localhost:8080/upload\u0026#34; # ä¸Šä¼ å¤šä¸ª curl -F \u0026#34;upload=@./1.jpg\u0026#34; -F \u0026#34;upload=@./2.jpg\u0026#34; -X POST \u0026#34;http://localhost:8080/uploadMul ä»£ç†IP curl -x {proxyserver}.com -U \u0026#34;{username}-zone-custom-region-ru-session-31fa4be5f7fa2389-sessTime-3:{passwd}\u0026#34; https://jsonip.com/ Post Json curl -X POST -H \u0026#34;Content-Type: application/json\u0026#34; -d \u0026#39;{\u0026#34;key1\u0026#34;:\u0026#34;value1\u0026#34;,\u0026#34;key2\u0026#34;:\u0026#34;value2\u0026#34;}\u0026#39; http://example.com/api/resource å‚æ•° # å‚æ•° ä½œç”¨ ç¤ºä¾‹ -k httpsæ—¶å¿½ç•¥è¯ä¹¦éªŒè¯ curl -k \u0026hellip; "},{"id":32,"href":"/docs/programmer/net/crawler/mitmproxy/","title":"mitmproxy","section":"Net","content":" å®‰è£… # ä»£ç ç¤ºä¾‹ # #!/bin/env python import asyncio import sys from mitmproxy import options from mitmproxy.tools import dump class RequestLogger: def request(self, flow): print(flow.request.url) def response(self, flow): print(f\u0026#34;rsp; {flow.response.headers}\u0026#34;) async def start_proxy(host, port): opts = options.Options(listen_host=host, listen_port=port) master = dump.DumpMaster( opts, with_termlog=False, with_dumper=False, ) master.addons.add(RequestLogger()) await master.run() return master if __name__ == \u0026#39;__main__\u0026#39;: host=sys.argv[1] port=int(sys.argv[2]) asyncio.run(start_proxy(host, port)) "},{"id":33,"href":"/docs/programmer/basetc/%E6%96%87%E6%9C%AC%E4%B8%89%E5%89%91%E5%AE%A2/","title":"æ–‡æœ¬ä¸‰å‰‘å®¢","section":"åŸºç¡€å·¥å…·å’Œé…ç½®","content":" grep # ä¸€ã€æˆ–å’Œè¿‡æ»¤ # grep \u0026#34;abc\\|123\u0026#34; test.log` | grep -v \u0026#34;xyz\u0026#34; äºŒã€æ’é™¤æŸ(äº›)æ–‡ä»¶(å¤¹) # 1. æ’é™¤æ–‡ä»¶: # --exclude=\n2. æ’é™¤æ–‡ä»¶ç±»å‹: # grep \u0026#34;get_wx_mapping\u0026#34; . -r --exclude=*.{log,} {}ä¸­è²Œä¼¼å¿…é¡»æœ‰,ï¼Œ ä¹Ÿå°±æ˜¯è¯´å¿…é¡»ä¼ å…¥ä¸ºåˆ—è¡¨ï¼Œ ä¸ç„¶ä¸ç”Ÿæ•ˆï¼Œ å€’å’ŒPythonçš„tupleç±»å‹æœ‰äº›ç›¸åƒã€‚\n3. æ’é™¤æ–‡ä»¶å¤¹: # --exclude-dir=\nä¸ª: grep \u0026#34;get_wx_mapping\u0026#34; . -r --exclude-dir=log äº›: grep \u0026#34;get_wx_mapping\u0026#34; . -r --exclude-dir={log,__pycache__} sed # awk # åªèƒ½ä½¿ç”¨ å•å¼•å· åŒå¼•å·ä¸è¡Œçš„å‘¦( \u0026quot;{print $1}\u0026quot; âœ— )\nawk \u0026#39;{print $1}\u0026#39; # ç¬¬ä¸€åˆ— ä¸€ã€awkç®—æ•° # [[å°å‘½ä»¤#18. awkç®—æ•°]]\ngrep 400586 sched.log.2024-05-28 | grep æ¡ | awk \u0026#39;{print $8}\u0026#39; | awk -F\u0026#39;æ¡,\u0026#39; \u0026#39;{sum += $1} END {print sum}\u0026#39; awk -F'æ¡,' '{sum += $1} END {print sum}' ç”¨æ¡è¿›è¡Œåˆ†å‰²å–$1ç¬¬ä¸€ä¸ªè¿›è¡Œsumæ±‚å’Œè®¡ç®— awk '{print $8}' è¿™é‡Œæ³¨æ„ä½¿ç”¨å•å¼•å· 250\nåŸæ—¥å¿—æ•°æ®ä¸º:\n2024-05-28 18:15:51 sched WARNING [1178]: await self.redis.enqueue_update_db(*update_tasks) 1æ¡, 0 is: 400586 + 2024-05-28 05:24:52 + MY 2024-05-28 18:49:20 sched WARNING [1178]: await self.redis.enqueue_update_db(*update_tasks) 3æ¡, 0 is: 400586 + 2024-05-28 03:02:38 + MY 2024-05-28 18:59:50 sched WARNING [1178]: await self.redis.enqueue_update_db(*update_tasks) 4æ¡, 0 is: 400586 + 2024-05-28 04:12:04 + MY äºŒã€æŸ¥çœ‹æ–‡æœ¬åˆ— # awk -F \u0026#39;,\u0026#39; \u0026#39;{print $NF}\u0026#39; , åˆ†éš”ç¬¦ $NF æœ«å°¾ åŒç†ä¹Ÿå¯ $1 $1, $3 è¡¨ç¤º1åˆ—+3åˆ—,å¹¶ä¸å«2åˆ— ä¸‰ã€ç»Ÿè®¡æ¯ç§’å¤šå°‘æ¡æ—¥å¿— # cut -d \u0026lsquo;.\u0026rsquo; å¾ˆé‡è¦, å› ä¸ºuniq -c ä¼šæŠŠå¸¦ç¬¦å·çš„ç›¸åŒæ•°æ®ä½œä¸ºåˆ†å¼€ç»Ÿè®¡å°±å¾ˆè¿·æƒ‘ tr -d \u0026lsquo;,\u0026rsquo; ä¹Ÿå¯ä»¥ç”¨\ngrep \u0026#34;status_code: 200\u0026#34; max_power_pro_max.log | awk \u0026#39;{print $1, $2}\u0026#39; | cut -d \u0026#39;.\u0026#39; -f 1 | uniq -c | awk \u0026#39;{print $2, $3, $4 \u0026#34;: \u0026#34; $1 \u0026#34; logs\u0026#34;}\u0026#39; cut å‘½ä»¤ç¬”è®° # cut å‘½ä»¤ç”¨äºä»æ¯è¡Œæ–‡æœ¬ä¸­æå–æ–‡æœ¬åˆ—ã€‚\nåŸºæœ¬ç”¨æ³•ï¼š cut OPTION... [FILE]... é€‰é¡¹ï¼š -d CHARï¼šæŒ‡å®šå­—æ®µåˆ†éš”ç¬¦ï¼Œé»˜è®¤æ˜¯åˆ¶è¡¨ç¬¦ã€‚ -f FIELDSï¼šæŒ‡å®šè¦æå–çš„å­—æ®µï¼Œå¯ä»¥æ˜¯å•ä¸ªæ•°å­—æˆ–ä¸€ç³»åˆ—æ•°å­—ï¼ˆä¾‹å¦‚ï¼Œ1,3,5ï¼‰ã€‚ ç¤ºä¾‹ï¼š æå–æ–‡ä»¶ data.txt ä¸­çš„ç¬¬ä¸€å’Œç¬¬ä¸‰åˆ—ï¼ˆå‡è®¾å­—æ®µç”±é€—å·åˆ†éš”ï¼‰ï¼š cut -d \u0026#39;,\u0026#39; -f 1,3 data.txt æå– IP åœ°å€çš„ç¬¬ä¸€ä¸ªéƒ¨åˆ†ï¼š\necho \u0026#34;192.168.1.1\u0026#34; | cut -d \u0026#39;.\u0026#39; -f 1 tr å‘½ä»¤ç¬”è®° # tr å‘½ä»¤ç”¨äºè½¬æ¢æˆ–åˆ é™¤æ–‡æœ¬æµä¸­çš„å­—ç¬¦ã€‚\nåŸºæœ¬ç”¨æ³•ï¼š tr [OPTION]... SET1 [SET2] é€‰é¡¹ï¼š -dï¼šåˆ é™¤ SET1 ä¸­æŒ‡å®šçš„æ‰€æœ‰å­—ç¬¦ã€‚ -sï¼šå‹ç¼©è¿ç»­çš„ SET1 ä¸­çš„å­—ç¬¦ä¸ºä¸€ä¸ªå­—ç¬¦ã€‚ ç¤ºä¾‹ï¼š åˆ é™¤æ–‡æœ¬ä¸­çš„æ‰€æœ‰é€—å·ï¼š echo \u0026#34;1,2,3,4,5\u0026#34; | tr -d \u0026#39;,\u0026#39; å°†æ–‡æœ¬ä¸­çš„å°å†™å­—æ¯è½¬æ¢ä¸ºå¤§å†™ï¼š\necho \u0026#34;hello world\u0026#34; | tr \u0026#39;a-z\u0026#39; \u0026#39;A-Z\u0026#39; å››ã€sort + uniq # uniq å‘½ä»¤çš„å·¥ä½œåŸç†æ˜¯åªèšåˆç›¸é‚»çš„é‡å¤è¡Œã€‚ æ‰€ä»¥å¦‚æœè¦ç»Ÿè®¡æ€»é¢‘æ¬¡çš„è¯å°±éœ€è¦å…ˆä½¿ç”¨sortè¿›è¡Œæ’åº\nç¤ºä¾‹ # apple banana apple cat fruits.txt | uniq -c 1 apple 1 banana 1 apple cat fruits.txt | sort | uniq -c 2 apple 1 banana "},{"id":34,"href":"/docs/programmer/basetc/tmux/","title":"Tmuxä½¿ç”¨ç¬”è®°","section":"åŸºç¡€å·¥å…·å’Œé…ç½®","content":" tmux # ä»postsä¸­è¿ç§»æ¥\nä¸°å¯Œçº¯æ–‡å­—ç»ˆç«¯çª—å£ï¼Œå¯ä»¥åˆ›å»ºç»ˆç«¯å‰¯æœ¬(åæ­£ä¹Ÿæ˜¯æˆ‘å–å¾—åå­—)â€”\u0026ndash;ç±»ä¼¼äºwinçš„å¤šæ¡Œé¢ã€‚ä¹Ÿå¯ä»¥åˆ†å‰²ç»ˆç«¯(ç•Œé¢ç±»ä¼¼vimåˆ†å‰²)l\u0026ndash;è¿™ä¾¿æ˜¯ç±»ä¼¼äºwinçš„å¤šçª—å£äº†ã€‚ (å®˜æ–¹ç¿»è¯‘: \u0026lsquo;çª—æ ¼\u0026rsquo;ï¼Ÿ)\nè¿›å…¥: tmux é€€å‡º: exit ç±»ä¼¼äºvimå‘½ä»¤æ¨¡å¼ï¼š ctrl+bä»¥ä¸‹ç®€å†™ä¸ºCL_Bã€‚ åˆ›å»ºå¤šæ¡Œé¢: CL_B + c æŸ¥çœ‹å…¨éƒ¨çª—å£ï¼Œç±»ä¼¼win+Tab: CL_B + s ä½¿ç”¨çª—å£å·åˆ‡æ¢æ¡Œé¢: CL_B + NUM å…³é—­å½“å‰çª—å£: CL_B + \u0026amp;,emmç›´æ¥exit\u0026hellip; åˆ›å»ºå¤šçª—å£: CL_B + \u0026quot; (å‚ç›´ä¸Šä¸‹)ã€CL_B + % (æ°´å¹³å·¦å³) è°ƒæ•´çª—å£ä½ç½®ã€å¤§å° CL_B + space (é»˜è®¤å¸ƒå±€è½®æ¢) æ˜¾ç¤ºçª—å£ç¼–å·: CL_B + q æš‚æ—¶æœ€å¤§åŒ–å½“å‰çª—æ ¼: CL_B + z åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªçª—æ ¼: CL_B + o å¯¹æ¢çª—æ ¼ä½ç½®: CL_B + CL_O(ctrl + o) è®¾ç½® # å¯ç”¨é¼ æ ‡è§¦æ§æ¿ # set -g mouse on å¤åˆ¶ç»ˆç«¯å±•ç¤ºå†…å®¹ # å¤åˆ¶ # set-window-option -g mode-keys vi #å¯ä»¥è®¾ç½®ä¸ºviæˆ–emacs set-window-option -g utf8 on #å¼€å¯çª—å£çš„UTF-8æ”¯æŒ CL_B + [ Spaceç©ºæ ¼å¼€å§‹é€‰æ‹©(å¯ä½¿ç”¨?,/viå·¥å…·è¾…åŠ©å®šä½, åœ¨æœ‰äº›ç»ˆç«¯ä¸­ä¸å¤§å¥½ä½¿) Enterå›è½¦ç¡®è®¤é€‰æ‹©(åœ¨æœ‰äº›ç»ˆç«¯ä¸­ä¸å¤§å¥½ä½¿) CB_B + ] å¯ç²˜è´´ å¿…é¡»ä¿è¯ä»¥ä¸Šå…¨åœ¨Tmuxä¸­è¿›è¡Œå“ˆ å†æ¬¡è®°å½• # æŒ‰ä¸‹ä¸‰ä¸ªæŒ‰é”®è¿›å…¥æ–‡æœ¬å¤åˆ¶æ¨¡å¼: CTRL + b + [ æŒ‰ä¸‹ä¸¤ä¸ªæŒ‰é”®è¿›å…¥æ–‡æœ¬å¼€å§‹å¤åˆ¶çš„èµ·å§‹ä½ç½®: CTRL + ç©ºæ ¼ ä¸Šä¸‹å·¦å³é”®æˆ–è€…Page up/downé€‰æ‹©è¦å¤åˆ¶çš„æ–‡æœ¬, é€‰ä¸­äº†è¦å¤åˆ¶çš„æ–‡æœ¬åï¼ŒæŒ‰ALT + wï¼Œå°†æ–‡æœ¬ä¿å­˜åˆ°tmuxçš„bufferä¸­ æŒ‰CTRL + b + ]å°†æ–‡æœ¬ç²˜è´´åˆ°æŸå¤„ "},{"id":35,"href":"/docs/programmer/platforms/os/steam/","title":"Steam","section":"å¹³å°","content":" åŒäººæˆè¡Œ # Winä¸Šå­˜æ¡£ä½ç½®ï¼š /Users/{user name}/AppData/Local/ItTakesTwo Linux Steam å­˜æ¡£ä½ç½®: ~/.steam/steam/steamapps/compatdata/3097223920/pfx/drive_c/users/steamuser/AppData/Local/ItTakesTwo$ è¯´æ˜ # ~/.steam/steam/steamapps/compatdata/ä¸ºsteam portonç»Ÿä¸€è™šæ‹Ÿç¯å¢ƒä½ç½® 3097223920ä¸ºsteamä¸ºæ¯ä¸ªæ¸¸æˆéƒ½åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ç¯å¢ƒ pfx/drive_c/users/steamuserè¿™äº›å°±æ˜¯windowsä¸‹çš„å­˜å‚¨è·¯å¾„äº†, steamuserä¸ºé»˜è®¤ç”¨æˆ·åpfxè¡¨ç¤ºç§æœ‰å­˜å‚¨ç©ºé—´ï¼Ÿå¤§æ¦‚\n2686703063 - GTAV\n"},{"id":36,"href":"/docs/programmer/platforms/android/waydroid/","title":"Linux è·‘å®‰å“","section":"å¹³å°","content":" Waydroid # å®‰è£… # sudo apt install curl ca-certificates curl https://repo.waydro.id | sudo bash sudo apt install waydroid é…ç½® # sudo http_proxy=\u0026#34;http://127.0.0.1:7890\u0026#34; https_proxy=\u0026#34;http://127.0.0.1:7890\u0026#34; waydroid init sudo systemctl stop waydroid-container sudo /usr/bin/python3 /usr/bin/waydroid -w container start sudo systemctl start waydroid-container sudo systemctl status waydroid-container ARMå…¼å®¹å±‚ # git clone https://github.com/casualsnek/waydroid_script cd waydroid_script python -m pip install -r requirements.txt # å»ºè®®ç”¨è™šæ‹Ÿç¯å¢ƒå“ˆï½ python main.py install libhoudini é…ç½®é¡µé¢ # https://docs.waydro.id/usage/waydroid-prop-options\nè§£å†³appæ£€æµ‹ç½‘ç»œé—®é¢˜ # åŒ…åé€šé…\nwaydroid prop set persist.waydroid.fake_wifi \u0026#34;com.netease.*\u0026#34; sudo ufw allow 53 sudo ufw allow 67 sudo ufw default allow FORWARD æŒ‚è½½æ–‡ä»¶ # sudo mount --bind ~/Downloads ~/.local/share/waydroid/data/media/0/Download adb # adb connect \u0026lt;IP\u0026gt;:5555 "},{"id":37,"href":"/docs/programmer/cloudnative/%E5%AE%B9%E5%99%A8/note-of-podman/","title":"Podman","section":"äº‘åŸç”Ÿ","content":" Podman # å¸¸ç”¨å‘½ä»¤ # 2. å¯åŠ¨å®¹å™¨å¹¶è¿›å…¥äº¤äº’æ¨¡å¼ # ä½ å¯ä»¥ä½¿ç”¨ docker run å‘½ä»¤å¯åŠ¨å®¹å™¨å¹¶è¿›å…¥å®¹å™¨çš„äº¤äº’å¼ shellã€‚è¿™æ ·ä½ å°±å¯ä»¥è¿›å…¥å®¹å™¨å†…éƒ¨è¿›è¡Œè°ƒè¯•ã€‚\nå¤åˆ¶ä»£ç \ndocker run -it --entrypoint /bin/bash nova-crawler:latest å‚æ•°è¯´æ˜ï¼š # -itï¼š-i è¡¨ç¤ºä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œ-t ç»™å®¹å™¨åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨ç»ˆç«¯ä¸å®¹å™¨äº¤äº’ã€‚ --entrypoint /bin/bashï¼šè¿™å°†è¦†ç›–å®¹å™¨çš„é»˜è®¤å…¥å£ç‚¹ï¼Œç›´æ¥å¯åŠ¨ä¸€ä¸ª bash shell ä»¥ä¾¿ä½ è¿›å…¥å®¹å™¨è¿›è¡Œè°ƒè¯•ã€‚ nova-crawler:latestï¼šä½ è¦è¿è¡Œçš„é•œåƒåç§°ã€‚ 3. å¯åŠ¨å®¹å™¨å¹¶è°ƒè¯•ç‰¹å®šå‘½ä»¤ # å¦‚æœä½ ä¸æƒ³è¿›å…¥å®¹å™¨çš„ shellï¼Œè€Œæ˜¯æƒ³ç›´æ¥æ‰§è¡Œè°ƒè¯•å‘½ä»¤ï¼ˆæ¯”å¦‚å¯åŠ¨åº”ç”¨å¹¶åœ¨è°ƒè¯•æ¨¡å¼ä¸‹è¿è¡Œï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\nbash\nå¤åˆ¶ä»£ç \ndocker run -it --entrypoint /bin/bash nova-crawler:latest -c \u0026quot;your-debug-command\u0026quot;\n4. æŸ¥çœ‹å®¹å™¨æ—¥å¿— # å¦‚æœä½ å¸Œæœ›åœ¨è°ƒè¯•æ—¶æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—è¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\nbash\nå¤åˆ¶ä»£ç \ndocker logs \u0026lt;container_id\u0026gt;\nä½ å¯ä»¥é€šè¿‡ docker ps æŸ¥æ‰¾è¿è¡Œçš„å®¹å™¨ IDï¼Œç„¶åæŸ¥çœ‹æ—¥å¿—è¾“å‡ºã€‚\n5. è°ƒè¯•æ—¶æŒ‚è½½æœ¬åœ°ç›®å½•ï¼ˆå¯é€‰ï¼‰ # å¦‚æœä½ éœ€è¦è°ƒè¯•ä»£ç ï¼Œå¹¶ä¸”å¸Œæœ›æŒ‚è½½æœ¬åœ°ç›®å½•åˆ°å®¹å™¨ä¸­è¿›è¡Œå®æ—¶ç¼–è¾‘ï¼Œå¯ä»¥ä½¿ç”¨ -v å‚æ•°æ¥æŒ‚è½½æœ¬åœ°ç›®å½•ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ çš„æœ¬åœ°ä»£ç åœ¨ /path/to/your/code ç›®å½•ä¸‹ï¼š\nbash\nå¤åˆ¶ä»£ç \ndocker run -it -v /path/to/your/code:/app --entrypoint /bin/bash nova-crawler:latest\nè¿™ä¼šå°†æœ¬åœ°çš„ /path/to/your/code ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„ /app ç›®å½•ä¸‹ã€‚ä½ å¯ä»¥åœ¨å®¹å™¨å†…è®¿é—®å¹¶è°ƒè¯•è¿™ä¸ªä»£ç ã€‚\næ€»ç»“ï¼š # ä½¿ç”¨ docker run -it --entrypoint /bin/bash æ¥å¯åŠ¨å®¹å™¨å¹¶è¿›å…¥ bash shell è¿›è¡Œè°ƒè¯•ã€‚ ä½¿ç”¨ docker run -it -v /local/dir:/container/dir æ¥æŒ‚è½½æœ¬åœ°ç›®å½•è¿›è¡Œè°ƒè¯•ã€‚ å¸Œæœ›è¿™èƒ½å¸®ä½ é¡ºåˆ©å¯åŠ¨å¹¶è°ƒè¯• nova-crawler å®¹å™¨ï¼\nå‘½ä»¤ç”¨æ³• # å‘½ä»¤å‡ ä¹å’Œdockerä¸€è‡´, alias docker=podmanå®Œå…¨å¯ä»¥æ— æ„ŸçŸ¥\nä¸åŒç‚¹ # pullè·¯å¾„éœ€è¦å®Œæ•´(official) podman pull docker.io/library/mysql:5.7 pull å…¶ä»–ç¤ºä¾‹(ä¸»è¦çœ‹docker pullçš„è¾“å‡ºğŸ‘¿) # FROM tiangolo/uvicorn-gunicorn:python3.11 podman pull docker.io/tiangolo/uvicorn-gunicorn:python3.11 è¿ç§»é•œåƒå­˜å‚¨è·¯å¾„ # åˆ‡æ¢åˆ°\nlazydocker # [[Note of Docker#lazydocker å¯è§†åŒ–]]\nexport DOCKER_HOST=unix:///run/user/1000/podman/podman.sock lazydocker VSCode # Dev Containers # https://code.visualstudio.com/remote/advancedcontainers/docker-options\nåœ¨æ’ä»¶è®¾ç½®ä¸­, å°†Docker Pathé‡Œdockerä¿®æ”¹ä¸ºpodmanå³å¯\nç½‘ç»œ # å®¹å™¨å†…è®¿é—®å®¿ä¸»æœº # [!note] host.docker.internal\nDocker æä¾›äº† host.docker.internal è¿™ä¸ªç‰¹æ®Šçš„ DNS åç§°ï¼Œå®ƒä¼šè§£æä¸º å®¿ä¸»æœºçš„ IP åœ°å€ã€‚\nslirp4netnsé—®é¢˜ # podman network connect example-network example-containerä¼šæŠ¥é”™ podman ç½‘ç»œè¿æ¥æœªé’ˆå¯¹ slirp4netns å®ç°Â #19577 æœ¬åœ°é•œåƒå­˜å‚¨è·¯å¾„ # â›” æ²¡ç”Ÿæ•ˆ\ngo install github.com/evnix/boltdbweb@latest sudo boltdbweb --db-name=/var/lib/containers/storage/libpod/bolt_state.db --port=8008 ä¿®æ”¹å…¶ä¸­ç¼“å­˜çš„/etc/containers/storage.confæ–‡ä»¶å†…å®¹.\næ¢æº # æ–‡ä»¶: /etc/containers/registries.conf\n[registries.search] registries = [\u0026#39;registry.aliyuncs.com\u0026#39;, \u0026#39;docker.io\u0026#39;] [registries.insecure] registries = [] [registries.block] registries = [] [registries_mirror] registry = \u0026#39;docker.io\u0026#39; mirrors = [\u0026#39;registry.aliyuncs.com\u0026#39;] "},{"id":38,"href":"/docs/programmer/ml/%E7%88%AC%E8%99%AB/","title":"çˆ¬è™«","section":"æœºå™¨å­¦ä¹ ","content":"https://github.com/SeleniumHQ/seleniumhq.github.io/blob/trunk/examples/python/tests/getting_started/first_script.py#L4\nSelenium # chromedriveråœ°å€ # https://googlechromelabs.github.io/chrome-for-testing/#stable\ngeckodriver(firefox)åœ°å€ # https://github.com/mozilla/geckodriver/releases\nFirefox headleesè¿è¡Œéœ€è¦çš„ä¾èµ– # apt-get install -y wget bzip2 libxtst6 libgtk-3-0 libx11-xcb-dev libdbus-glib-1-2 libxt6 libpci-dev libasound2 "},{"id":39,"href":"/posts/android%E7%8E%A9%E6%9C%BA/","title":"å®‰å“ç©æœº","section":"Blog","content":" shizuku # å¯åŠ¨å‘½ä»¤:\nadb shell sh /storage/emulated/0/Android/data/moe.shizuku.privileged.api/start.sh è‡ªåŠ¨ä»»åŠ¡ AutoTask # è‡ªåŠ¨åŒ–ä»»åŠ¡\nScene # æŸ¥çœ‹å®‰å“è¿›ç¨‹ç®¡ç†\nApp Ops # Appæƒé™ç›‘æµ‹\nADB # è®¾ç½®httpä»£ç† # adb shell settings put global http_proxy 192.168.105.230:8080 adb shell settings put global https_proxy 192.168.105.230:8080 # åˆ é™¤ä»£ç† adb shell settings delete global http_proxy Deleted 1 rows adb shell settings delete global https_proxy Deleted 1 rows adb shell settings delete global global_http_proxy_host Deleted 1 rows adb shell settings delete global global_https_proxy_host Deleted 0 rows adb shell settings delete global global_http_proxy_port Deleted 1 rows adb shell settings delete global global_https_proxy_port Deleted 0 rows # éœ€è¦å†²èµ·ç”Ÿæ•ˆ - æœ‰çš„æœºå™¨å¯èƒ½ä¸ç”¨ adb reboot "},{"id":40,"href":"/docs/programmer/platforms/os/ubuntu/","title":"Ubuntu","section":"å¹³å°","content":" ä¸€ã€Snap # å¦‚æœUbuntuæœ‰é—®é¢˜,é‚£ä¹ˆå¾ˆæœ‰å¯èƒ½æ˜¯å› ä¸ºSnap\nFirefox # åœ¨å‡çº§Ubuntu 24.04åå†…å­˜å ç”¨æä¸ºä¸æ­£å¸¸, å¤šæ¬¡æ’æŸ¥æ— æœ, å¢åŠ äº†äº¤æ¢ç©ºé—´è¿˜æ˜¯æ²¡æœ‰æ²»æœ¬, å‡ ç»æ’æŸ¥ç»ˆäºå‘ç°æ˜¯firefoxçš„é—®é¢˜, ä¸”æ˜¯Snapçš„firefoxçš„é—®é¢˜,æ‰€ä»¥æ‰‹åŠ¨ä¸‹è½½åˆ«çš„ç‰ˆæœ¬åä¿®æ”¹å¦‚ä¸‹:\nä¿®æ”¹/usr/bin/firefoxä¸­çš„æœ€ä¸€å¼€å§‹çš„ç›‘æµ‹å®‰è£…å’Œè¿è¡Œä¸ºè‡ªè¡Œä¸‹è½½è½¯ä»¶è·¯å¾„ æ·»åŠ gnome favorite-apps 1. æ·»åŠ Firefoxåˆ°Favoritesï¼ˆå–œçˆ±åº”ç”¨ï¼‰ # æ‰“å¼€ç»ˆç«¯ï¼ˆCtrl + Alt + Tï¼‰ã€‚ è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹å½“å‰çš„å–œçˆ±åº”ç”¨åˆ—è¡¨ï¼š gsettings get org.gnome.shell favorite-apps è¿™ä¼šè¾“å‡ºå½“å‰çš„å–œçˆ±åº”ç”¨åˆ—è¡¨ 3. å¦‚æœæ²¡æœ‰çœ‹åˆ° firefox.desktop åœ¨åˆ—è¡¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å®ƒæ·»åŠ è¿›å»,è¿™ä¸ªå‘½ä»¤ä¼šå°† firefox.desktop æ·»åŠ åˆ°å–œçˆ±åº”ç”¨åˆ—è¡¨çš„æœ«å°¾ã€‚ï¼š\ngsettings set org.gnome.shell favorite-apps \u0026#34;$(gsettings get org.gnome.shell favorite-apps | sed \u0026#34;s/]/, \u0026#39;firefox.desktop\u0026#39;]/\u0026#34;)\u0026#34; 2. æ£€æŸ¥.desktopæ–‡ä»¶æ˜¯å¦æ­£ç¡® # ç¡®ä¿ firefox.desktop æ–‡ä»¶å­˜åœ¨å¹¶ä¸”æ­£ç¡®é…ç½®ã€‚é€šå¸¸ï¼Œå®ƒåº”è¯¥ä½äº /usr/share/applications/ ç›®å½•æˆ–è€…åœ¨Snapå®‰è£…ä¸­å¯èƒ½ä½äº /var/lib/snapd/desktop/applications/ ç›®å½•ã€‚ä½ å¯ä»¥ä½¿ç”¨ ls å‘½ä»¤æ£€æŸ¥è¿™äº›ä½ç½®æ˜¯å¦æœ‰ç›¸å…³çš„ .desktop æ–‡ä»¶ï¼š\nls /usr/share/applications/firefox.desktop ls /var/lib/snapd/desktop/applications/firefox_firefox.desktop # å¦‚æœæ˜¯é€šè¿‡Snapå®‰è£…çš„Firefox` 3. æ›´æ–°ç¼“å­˜å’Œé‡å¯(å¯é€‰) - æˆ‘ç”¨çš„ [[#^bef1ba]] # å¦‚æœä»¥ä¸Šæ­¥éª¤æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œå°è¯•æ›´æ–°GNOMEçš„ç¼“å­˜å¹¶é‡æ–°å¯åŠ¨GNOME Shellï¼š\nsudo update-desktop-database ç„¶åæ³¨é”€å¹¶é‡æ–°ç™»å½•GNOME Shellï¼Œçœ‹çœ‹æ˜¯å¦èƒ½å¤Ÿæ˜¾ç¤ºFirefoxå›¾æ ‡ã€‚\n4. æ‰‹åŠ¨åˆ›å»º.desktopæ–‡ä»¶(å°†è½¯ä»¶æ·»åŠ åˆ°è½¯ä»¶åˆ—è¡¨) # ^bef1ba\nå¦‚æœ .desktop æ–‡ä»¶ç¡®å®å­˜åœ¨ä½†ä»ç„¶æ— æ³•æ­£å¸¸æ˜¾ç¤ºå›¾æ ‡ï¼Œå¯ä»¥å°è¯•æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ª .desktop æ–‡ä»¶ã€‚åˆ›å»ºä¸€ä¸ªåä¸º firefox.desktop çš„æ–‡ä»¶ï¼Œå¹¶å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶ç²˜è´´è¿›å»ï¼š\n[Desktop Entry] Version=1.0 Name=Firefox Comment=Browse the World Wide Web GenericName=Web Browser Keywords=Internet;WWW;Browser;Web;Explorer Exec=firefox %u Terminal=false X-MultipleArgs=false Type=Application Icon=firefox Categories=Network;WebBrowser; MimeType=text/html;text/xml;application/xhtml+xml;application/xml;application/vnd.mozilla.xul+xml;application/rss+xml;application/rdf+xml;image/gif;image/jpeg;image/png;x-scheme-handler/http;x-scheme-handler/https; StartupNotify=true Actions=new-window;new-private-window; [Desktop Action new-window] Name=New Window Exec=firefox --new-window %u [Desktop Action new-private-window] Name=New Private Window Exec=firefox --private-window %u ä¿å­˜æ–‡ä»¶åï¼Œå°†å…¶æ”¾ç½®åœ¨ /usr/share/applications/ ç›®å½•ä¸‹ï¼Œå¹¶ç¡®ä¿å…·æœ‰é€‚å½“çš„æ–‡ä»¶æƒé™ã€‚\n5. æ£€æŸ¥é»˜è®¤åº”ç”¨è®¾ç½® # æœ€åï¼Œç¡®ä¿Firefoxå·²ç»è¢«æ­£ç¡®è®¾ç½®ä¸ºé»˜è®¤çš„Webæµè§ˆå™¨ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ï¼š xdg-settings get default-web-browser å¦‚æœæ²¡æœ‰è®¾ç½®ä¸º firefox.desktopï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è®¾ç½®ï¼š xdg-settings set default-web-browser firefox.desktop å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œé‡æ–°å¯åŠ¨Firefoxå¹¶æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºäº†æ­£ç¡®çš„å›¾æ ‡å’Œè¡Œä¸ºã€‚å¸Œæœ›è¿™äº›æ­¥éª¤èƒ½å¸®åŠ©ä½ è§£å†³åœ¨GNOMEä¸­Firefoxå›¾æ ‡æœªæ˜¾ç¤ºçš„é—®é¢˜ï¼\nè®¾ç½®ç”¨æˆ·ä¸‹ä¸­æ–‡ç›®å½•ä¸ºè‹±æ–‡ # æ¯æ¬¡cdåˆ‡æ¢è¾“å…¥æ³•æœ‰äº›éš¾å—\nvim .config/user-dirs.dirs æ¡Œé¢ # å¦‚æœæ¡Œé¢ä¸æ˜¾ç¤ºæ–‡ä»¶å›¾æ ‡, 1æ˜¯æ£€æŸ¥ä¸Šè¿°é…ç½®è·¯å¾„æ˜¯å¦æ­£ç¡® 2æœ‰å¯èƒ½ç¼ºå°‘äº†desktop-icons-ngæ’ä»¶\nsudo apt install gnome-shell-extension-desktop-icons-ng sudo apt install gnome-shell-extension-prefs åŒç†, å¦‚æœä¸æƒ³åœ¨æ¡Œé¢ä¸Šæ˜¾ç¤ºæ–‡ä»¶, é‚£å°±æŠŠè¿™æ’ä»¶ç»™åˆ äº†\nå¦‚æœæ˜¯åŒç³»ç»Ÿå¯ä»¥è½¯é“¾ä¸€äº›é€šç”¨ç›®å½•èŠ‚çœç©ºé—´ # ln -s /mnt/Windows/Users/{ç”¨æˆ·å}/Downloads /home/{ç”¨æˆ·å}/Downloads æ–‡ä»¶ç®¡ç†å™¨ # nautilus\näºŒã€apt # Ubuntu ä¸­ï¼Œä½¿ç”¨Â apt-get installÂ æˆ–Â apt installÂ ä¸‹è½½å¹¶å®‰è£…è½¯ä»¶æ—¶ï¼Œç›¸å…³æ–‡ä»¶å­˜å‚¨åœ¨ä»¥ä¸‹ä½ç½®ï¼š\nè½¯ä»¶åŒ…ï¼š/var/cache/apt/archives å®‰è£…ä½ç½®ï¼š/usr/share å¿«æ·æ–¹å¼ï¼š/usr/share/applications å¯æ‰§è¡Œæ–‡ä»¶ï¼š/usr/bin åº“æ–‡ä»¶ï¼š/usr/lib é…ç½®æ–‡ä»¶ï¼š/etc 2.1 æŸ¥æ‰¾åŒ… # ä¾‹å¦‚æŸ¥æ‰¾çˆªå“‡:\napt-cache search openjdk 2. 2ä¾èµ–åŒ…ç¼ºå¤± # ä¸€ã€å®‰è£…å‘æ—¥è‘µç¼ºå¤±libgconf-2-4 # https://blog.csdn.net/lingzhou0909/article/details/139708197\nå»https://packages.ubuntu.com/search?keywords=libgconf-2-4æŸ¥çœ‹ç‰ˆæœ¬ å‘ç°æ²¡æœ‰24.04ç‰ˆçš„, å°†22.04ç‰ˆæœ¬çš„åŠ åˆ° source.list ä¸­ apt update sudo apt --fix-broken install dpkg -i SunloginClient_15.2.0.63062_amd64.deb å†æ¬¡å®‰è£… ä¸‰ã€.desktop ç¨‹åºå¼€å‘ # è‡ªåŠ¨å¯åŠ¨é…ç½®: ~/.config/autostart/ æ³¨å†Œåˆ°åº”ç”¨ä¸­: /usr/share/applications/\nç™»é™†è‡ªå¯ # ä¸è¿‡ç°åœ¨å¥½å¤šåº”ç”¨è²Œä¼¼éƒ½æ²¡æ”¾åœ¨è¿™é‡Œ, å°±è€ç‰Œçš„åº”ç”¨æœ‰æ”¾.\nä¸è¿‡è¿™é‡Œè²Œä¼¼æ˜¯å¾ˆæ­£è§„çš„åœ°æ–¹, æ¯•ç«Ÿåœ¨Ubuntu\u0026quot;å¯åŠ¨åº”ç”¨ç¨‹åº\u0026quot;é‡Œå¯ä»¥çœ‹åˆ°è¿™ä¸ªé…ç½®\nsudo cp ~/.config/autostart/desktop-tools.desktop /usr/share/applications/ é…ç½®è¯¦æƒ…: # é…ç½® è¯´æ˜ å…¶ä»– Path å·¥ä½œç›®å½• [Desktop Entry] Name=desktoptools Name[zh_CN]=æ¡Œé¢å·¥å…· Comment=Desktop Tools Comment[zh_CN]=æ¡Œé¢å·¥å…· GenericName=Desktop Tools Keywords=tools Exec=/home/ian/env/ui/bin/python test.py %u Path=/home/ian/Apps/DesktopTools Icon=/home/ian/Apps/DesktopTools/DesktopTools/harry_potter.png Terminal=false Type=Application X-GNOME-Autostart-Delay=10 Categories=GNOME;Utility; Hidden=false å››ã€è¾“å…¥æ³•é—®é¢˜ # ibus restart \u0026gt; æ— æ³•è¿æ¥ IBusã€‚ ibus-daemon -r -d -x # å¯è§£å†³ äº”ã€ä¿®æ”¹å¼€æœºå¹¿å‘Š # cd /usr/share/plymouth/themes/ubuntu-text cd /usr/share/plymouth/themes/ubuntu-logo å…­ã€å›¾ç‰‡æŸ¥çœ‹å™¨ # [!note] eog å¤ªçƒ‚äº† loupe å¥½ç”¨ æ‰“å¼€matplotlibç”»çš„å›¾èƒ½å¡æ­» loupe å’Œå®ƒç•Œé¢å·®ä¸å¤š éƒ½å¬å¥½çœ‹æ€§èƒ½è¿˜å¥½äº› ä¸è¿‡loupe å†…å­˜å ç”¨ä¾ç„¶å¥½é«˜.. éš¾é“æ˜¯æˆ‘300dpiå¤ªé«˜äº†?\n# å¸è½½æ‰é»˜è®¤çš„å›¾ç‰‡æŸ¥çœ‹ 24.04è¿˜æ˜¯è¿™ä¸ª sudo apt remove eog # å®‰è£…æ–°çš„rustå†™çš„å›¾ç‰‡æŸ¥çœ‹å™¨ sudo apt install loupe ä½¿ç”¨æºç ç¼–è¯‘çš„è¯éœ€è¦\nsudo apt-get install fontconfig libfontconfig1-dev sudo apt-get install libcairo2 libcairo2-dev sudo apt-get install libpango-1.0-0 libpango1.0-dev sudo apt-get install libgdk-pixbuf2.0-0 libgdk-pixbuf2.0-dev sudo apt-get install libgtk-4-dev sudo apt-get install libgraphene-1.0-0 libgraphene-1.0-dev ç¼–è¯‘ä»‹ç» # åºå· åº“åç§° æè¿° 1 Cairo ä¸€ä¸ª 2D å›¾å½¢åº“ï¼Œç”¨äºæä¾›é«˜è´¨é‡çš„ç»˜å›¾æ“ä½œ 2 Fontconfig ä¸€ä¸ªç”¨äºå­—ä½“é…ç½®å’Œç®¡ç†çš„åº“ï¼Œå¸®åŠ©åº”ç”¨ç¨‹åºæ‰¾åˆ°å’Œä½¿ç”¨ç³»ç»Ÿä¸Šçš„å­—ä½“ 3 Pango ä¸€ä¸ªç”¨äºæ–‡æœ¬å¸ƒå±€å’Œå›½é™…åŒ–çš„åº“ï¼Œé€šå¸¸ç”¨äºä¸ Cairo ä¸€èµ·å¤„ç†æ–‡æœ¬æ¸²æŸ“ 4 GDK - Pixbuf ä¸€ä¸ªç”¨äºå›¾åƒåŠ è½½å’Œå¤„ç†çš„åº“ï¼Œå¸¸ç”¨äº GTK+ åº”ç”¨ç¨‹åºä¸­ 5 GTK4 GTK+ çš„æœ€æ–°ç‰ˆæœ¬ï¼Œç”¨äºåˆ›å»ºå›¾å½¢ç”¨æˆ·ç•Œé¢ 6 Graphene ä¸€ä¸ªæ•°å­¦åº“ï¼Œæä¾›ç”¨äºå›¾å½¢è®¡ç®—çš„å„ç§åŠŸèƒ½ï¼Œå¦‚å‘é‡å’ŒçŸ©é˜µæ“ä½œ 7 LibAdwaita ä¸€ä¸ªç”¨äºæ„å»º GNOME åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢åº“ï¼Œæä¾›ä¸€äº›ç°ä»£åŒ–çš„ UI ç»„ä»¶å’Œæ ·å¼ 8 GWeather ??? ä¸€ä¸ªç”¨äºè·å–å’Œæ˜¾ç¤ºå¤©æ°”ä¿¡æ¯çš„åº“ï¼Œé€šå¸¸ä¸ GNOME æ¡Œé¢ç¯å¢ƒé›†æˆ å¡ä½æƒ…å†µè¯´æ˜ # pkg-config --modversion libadwaita-1 1.5.0 è¦æ±‚: \u0026gt; PKG_CONFIG_PATH=/usr/local/lib/pkgconfig PKG_CONFIG_ALLOW_SYSTEM_CFLAGS=1 pkg-config --libs --cflags libadwaita-1 libadwaita-1 \u0026gt;= 1.6 Terminalç»ˆç«¯å›¾ç‰‡æŸ¥çœ‹å™¨ # apt install chafa chafa demo.png ä¸ƒã€Bye Snap # å…³é—­è‡ªåŠ¨æ›´æ–° # sudo snap set system refresh.hold=\u0026#34;$(date -u +%Y-%m-%dT%H:%M:%SZ)\u0026#34; # è§£é™¤ # sudo snap unset system refresh.hold å…«ã€æ–‡æ¡£pdfæŸ¥çœ‹å™¨ # [!note] Evince å¤ªçƒ‚äº† Okular è¿˜è¡Œ ä¸çŸ¥é“ä»å•¥æ—¶å€™å¼€å§‹ç”¨Ubuntu-Gnomeè‡ªå¸¦Evinceæ‰“å¼€pdfå°±ç›´æ¥å¡æ­»æ¡Œé¢äº†\u0026hellip; ä¸å¾—å·²åªèƒ½æ¢äº† Evince ç”¨ Qkular\n"},{"id":41,"href":"/docs/programmer/cloudnative/redis/python-redis-%E5%AE%A2%E6%88%B7%E7%AB%AF/","title":"Python Redis å®¢æˆ·ç«¯","section":"ä¸­é—´ä»¶","content":" å¼‚æ­¥è°ƒç”¨æ—¶è‡ªåŠ¨å…³é—­ # å½“äº‹ä»¶å¾ªç¯æ­£åœ¨è¿è¡Œæ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªä»»åŠ¡æ¥å…³é—­ redis è¿æ¥ï¼Œè€Œä¸ä¼šé˜»å¡äº‹ä»¶å¾ªç¯ã€‚å¦‚æœäº‹ä»¶å¾ªç¯æ²¡æœ‰è¿è¡Œï¼Œå°±å¯ä»¥åƒä¹‹å‰ä¸€æ ·è°ƒç”¨ run_until_completeã€‚\nasync def close_redis(self): if self.redis: await self.redis.close() def __del__(self): loop = asyncio.get_event_loop() if loop.is_running(): asyncio.create_task(self.close_redis()) else: loop.run_until_complete(self.close_redis()) æ•°æ®è¿ç§»(hashæ•°æ®) # è„šæœ¬ # import os import json import redis import argparse from loguru import logger home_path = os.environ.get(\u0026#39;HOME\u0026#39;) parser = argparse.ArgumentParser(description=\u0026#39;Copy Reten Config\u0026#39;) parser.add_argument(\u0026#39;--mode\u0026#39;, help=\u0026#39;Pull or Push data from Redis\u0026#39;) parser.add_argument(\u0026#39;-ds\u0026#39;, \u0026#39;--datasource\u0026#39;, help=\u0026#39;retens or events config data from Redis\u0026#39;) args = parser.parse_args() source_redis = redis.StrictRedis(host=\u0026#39;redis-product.com\u0026#39;, port=6379, db=0) def scan_keys_with_pattern(pattern): # åˆå§‹æ¸¸æ ‡ cursor = \u0026#39;0\u0026#39; count_group = 0 while True: # ä½¿ç”¨ SCAN å‘½ä»¤è¿›è¡Œè¿­ä»£ cursor, keys = source_redis.scan(cursor=cursor, match=pattern) # æ¸¸æ ‡ä¸º \u0026#39;0\u0026#39; è¡¨ç¤ºè¿­ä»£ç»“æŸ if cursor == b\u0026#39;0\u0026#39; or cursor == 0 or cursor == \u0026#39;0\u0026#39;: break # å°†æ‰¾åˆ°çš„é”®æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­ count_group += 1 logger.info(f\u0026#34;{count_group} - {len(keys)} = {cursor}\u0026#34;) yield [key.decode(\u0026#39;utf-8\u0026#39;) for key in keys] def append_2_file(data): # å°†æ•°æ®è½¬æ¢ä¸ºå­—å…¸ decoded_data = {} for key, value in data.items(): decoded_data[key.decode(\u0026#39;utf-8\u0026#39;)] = value.decode(\u0026#39;utf-8\u0026#39;) # å°†æ•°æ®å†™å…¥æ–‡ä»¶ with open(f\u0026#39;data_{args.datasource}.json\u0026#39;, \u0026#39;a\u0026#39;) as file: file.write(json.dumps(decoded_data) + \u0026#39;\\n\u0026#39;) def pull(): # è¿æ¥åˆ°æº Redis å®ä¾‹ # ä» Redis ä¸­è¯»å–æ•°æ® all_keys = set() if args.datasource == \u0026#39;retens\u0026#39;: for keys in scan_keys_with_pattern(\u0026#39;mmp:cfgs:*:retens\u0026#39;): for key in keys: if key not in all_keys: all_keys.add(key) else: logger.warning(f\u0026#34;é‡å¤ä¸€æ¬¡: {key}\u0026#34;) continue data = source_redis.hgetall(key) append_2_file(data=data) elif args.datasource == \u0026#39;events\u0026#39;: for keys in scan_keys_with_pattern(\u0026#39;mmp:cfgs:*:events\u0026#39;): for key in keys: if key not in all_keys: all_keys.add(key) else: logger.warning(f\u0026#34;é‡å¤ä¸€æ¬¡: {key}\u0026#34;) continue data = source_redis.hgetall(key) append_2_file(data=data) else: logger.error(f\u0026#34;Invalid datasource: {args.datasource}\u0026#34;) return def push(): # è¿æ¥åˆ°ç›®æ ‡ Redis å®ä¾‹ target_redis = redis.StrictRedis(host=\u0026#39;localhost\u0026#39;, port=6379, db=1) # è¯»å–æ–‡ä»¶å†…å®¹å¹¶å†™å…¥ç›®æ ‡ Redis if not args.datasource in [\u0026#39;retens\u0026#39;, \u0026#39;events\u0026#39;]: logger.error(f\u0026#34;Invalid datasource: {args.datasource}\u0026#34;) return with open(os.path.join(home_path, f\u0026#39;data_{args.datasource}.json\u0026#39;), \u0026#39;r\u0026#39;) as file: for l in file: l = json.loads(l) for key, value in l.items(): value_obj = json.loads(value) pkg_name = value_obj[\u0026#34;pkg_name\u0026#34;] if args.datasource == \u0026#39;retens\u0026#39;: ok = target_redis.hset(f\u0026#39;mmp:cfgs:{pkg_name}:retens\u0026#39;, key, value) elif args.datasource == \u0026#39;events\u0026#39;: ok = target_redis.hset(f\u0026#39;mmp:cfgs:{pkg_name}:events\u0026#39;, key, value) else: print(f\u0026#34;Invalid datasource: {args.datasource}\u0026#34;) logger.info(f\u0026#39;Writing {key} {value} to Redis -\u0026gt; {ok}\u0026#39;) if __name__ == \u0026#34;__main__\u0026#34;: if args.mode == \u0026#39;pull\u0026#39;: pull() elif args.mode == \u0026#39;push\u0026#39;: push() ä½¿ç”¨ # python {thisscript}.py --mode=pull -ds=events python {thisscript}.py --mode=push -ds=events hash # import redis # åˆ›å»º Redis è¿æ¥ r = redis.Redis(host=\u0026#39;localhost\u0026#39;, port=6379, db=0) # å†™å…¥æ•°æ®åˆ°å“ˆå¸Œ r.hset(\u0026#39;my_hash\u0026#39;, \u0026#39;field1\u0026#39;, \u0026#39;value1\u0026#39;) r.hset(\u0026#39;my_hash\u0026#39;, mapping={\u0026#39;field2\u0026#39;: \u0026#39;value2\u0026#39;, \u0026#39;field3\u0026#39;: \u0026#39;value3\u0026#39;}) # è·å–å•ä¸ªå­—æ®µçš„å€¼ value = r.hget(\u0026#39;my_hash\u0026#39;, \u0026#39;field1\u0026#39;) print(f\u0026#39;field1: {value.decode(\u0026#34;utf-8\u0026#34;)}\u0026#39;) # è·å–æ‰€æœ‰å­—æ®µå’Œå€¼ all_fields = r.hgetall(\u0026#39;my_hash\u0026#39;) print(\u0026#39;All fields:\u0026#39;) for field, value in all_fields.items(): print(f\u0026#39;{field.decode(\u0026#34;utf-8\u0026#34;)}: {value.decode(\u0026#34;utf-8\u0026#34;)}\u0026#39;) # æŸ¥çœ‹å“ˆå¸Œä¸­å­—æ®µçš„æ•°é‡ field_count = r.hlen(\u0026#39;my_hash\u0026#39;) print(f\u0026#39;Number of fields in my_hash: {field_count}\u0026#39;) äº‹åŠ¡ # import asyncio import aioredis async def run_transaction(redis: aioredis.Redis): async with redis.pipeline() as pipe: # å¼€å§‹äº‹åŠ¡ await pipe.multi() # åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œå¤šä¸ªå‘½ä»¤ await pipe.set(\u0026#39;key1\u0026#39;, \u0026#39;value1\u0026#39;) await pipe.set(\u0026#39;key2\u0026#39;, \u0026#39;value2\u0026#39;) # æäº¤äº‹åŠ¡ results = await pipe.execute() print(\u0026#39;Transaction results:\u0026#39;, results) async def main(): # åˆ›å»º Redis è¿æ¥ redis = await aioredis.from_url(\u0026#34;redis://localhost:6379\u0026#34;, encoding=\u0026#34;utf-8\u0026#34;, decode_responses=True) # è¿è¡Œäº‹åŠ¡ await run_transaction(redis) # å…³é—­è¿æ¥ await redis.close() # è¿è¡Œå¼‚æ­¥ä¸»å‡½æ•° if __name__ == \u0026#34;__main__\u0026#34;: asyncio.run(main()) ä¹è§‚é” # è¯¦ç»†è§£é‡Š\nasync with redis.pipeline() as pipe: ä½¿ç”¨ pipeline ä¸Šä¸‹æ–‡ç®¡ç†å™¨åˆ›å»ºä¸€ä¸ªäº‹åŠ¡æˆ–ç®¡é“ã€‚è¿™ä¼šåˆ›å»ºä¸€ä¸ªäº‹åŠ¡é˜Ÿåˆ—æˆ–ç®¡é“ã€‚ await pipe.multi(): å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ã€‚å¦‚æœåœ¨ç®¡é“ä¸­ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œåˆ™è¡¨ç¤ºå¼€å§‹ä¸€ä¸ªäº‹åŠ¡ã€‚å¦‚æœä¸ä½¿ç”¨ï¼Œåˆ™è¡¨ç¤ºæ™®é€šçš„ç®¡é“æ“ä½œã€‚ await pipe.execute(): æäº¤äº‹åŠ¡æˆ–ç®¡é“æ“ä½œï¼Œå¹¶è·å–æ‰€æœ‰å‘½ä»¤çš„ç»“æœã€‚ await pipe.watch('key'): ç›‘è§†æŒ‡å®šçš„é”®ï¼Œä»¥ä¾¿åœ¨äº‹åŠ¡æäº¤ä¹‹å‰ç¡®ä¿è¿™äº›é”®æ²¡æœ‰è¢«å…¶ä»–å®¢æˆ·ç«¯ä¿®æ”¹ã€‚å¦‚æœåœ¨äº‹åŠ¡æäº¤å‰é”®å‘ç”Ÿå˜åŒ–ï¼Œäº‹åŠ¡ä¼šå¤±è´¥ã€‚ aioredis.WatchError: æ•è·ç”±äºé”®è¢«ä¿®æ”¹è€Œå¯¼è‡´çš„äº‹åŠ¡å¤±è´¥å¼‚å¸¸ã€‚ async def run_watch(redis: aioredis.Redis): async with redis.pipeline() as pipe: # ç›‘è§†é”® await pipe.watch(\u0026#39;key1\u0026#39;) # å¼€å§‹äº‹åŠ¡ await pipe.multi() # æ‰§è¡Œäº‹åŠ¡ä¸­çš„å‘½ä»¤ await pipe.set(\u0026#39;key1\u0026#39;, \u0026#39;value1\u0026#39;) await pipe.set(\u0026#39;key2\u0026#39;, \u0026#39;value2\u0026#39;) # æäº¤äº‹åŠ¡ try: results = await pipe.execute() print(\u0026#39;Watch transaction results:\u0026#39;, results) except aioredis.WatchError: print(\u0026#39;Transaction failed due to concurrent modification\u0026#39;) async def main(): # åˆ›å»º Redis è¿æ¥ redis = await aioredis.from_url(\u0026#34;redis://localhost:6379\u0026#34;, encoding=\u0026#34;utf-8\u0026#34;, decode_responses=True) # è¿è¡Œ WATCH äº‹åŠ¡ await run_watch(redis) # å…³é—­è¿æ¥ await redis.close() # è¿è¡Œå¼‚æ­¥ä¸»å‡½æ•° if __name__ == \u0026#34;__main__\u0026#34;: asyncio.run(main()) åˆ†å¸ƒå¼é” # async def release_counter_lock(account_id: int, package_name: str, identifier: str): lock_key = f\u0026#34;lock_{account_id}_{package_name}\u0026#34; # Lua è„šæœ¬ï¼šå¦‚æœé”çš„å€¼ä¸æ ‡è¯†ç¬¦åŒ¹é…ï¼Œåˆ™åˆ é™¤é” lua_script = \u0026#34;\u0026#34;\u0026#34; if redis.call(\u0026#34;get\u0026#34;, KEYS[1]) == ARGV[1] then return redis.call(\u0026#34;del\u0026#34;, KEYS[1]) else return 0 end \u0026#34;\u0026#34;\u0026#34; # æ‰§è¡Œ Lua è„šæœ¬ result = await rds.eval(lua_script, 1, lock_key, identifier) # å¦‚æœè¿”å›å€¼ä¸º 1ï¼Œè¯´æ˜é”è¢«åˆ é™¤ if result == 1: return True return False async def acquire_counter_lock(account_id: int, package_name: str) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34; True ä¸ºè¢«é”å®š,æš‚æ—¶ä¸å¯ç”¨ \u0026#34;\u0026#34;\u0026#34; acquire_time = 2 identifier = str(uuid.uuid4()) # ä½¿ç”¨UUIDç”Ÿæˆå”¯ä¸€æ ‡è¯† lock_key = f\u0026#34;lock_{account_id}_{package_name}\u0026#34; end = time.time() + acquire_time while time.time() \u0026lt; end: if await rds.setnx(lock_key, identifier): # å¦‚æœé”ä¸å­˜åœ¨ï¼Œè®¾ç½®å¹¶è¿”å›True await rds.expire(lock_key, 10) return identifier # æˆåŠŸè·å–é”ï¼Œè¿”å›æ ‡è¯†ç¬¦ elif not await rds.ttl(lock_key): await rds.expire(lock_key, 10) time.sleep(0.01) # è¶…æ—¶æœªèƒ½è·å–é” return \u0026#39;\u0026#39; "},{"id":42,"href":"/docs/programmer/platforms/%E9%98%BF%E9%87%8C%E4%BA%91%E4%BD%BF%E7%94%A8/","title":"é˜¿é‡Œäº‘ä½¿ç”¨","section":"å¹³å°","content":" oss å¯¹è±¡å­˜å‚¨ # Python SDK # pip install oss2 export OSS_ACCESS_KEY_ID=SIHDoisdhuasuiUGDS export OSS_ACCESS_KEY_SECRET=asdih213asHSIDH2e1 ä¸€ã€Auth # import oss2 from oss2.credentials import EnvironmentVariableCredentialsProvider from itertools import islice auth = oss2.ProviderAuth(EnvironmentVariableCredentialsProvider()) äºŒã€Bucket # bucket_info å­—æ®µè¯´æ˜ # å­—æ®µ type æ³¨é‡Š {bucket_info.name} Bucketçš„åç§° {bucket_info.storage_class} Bucketçš„å­˜å‚¨ç±»å‹ {bucket_info.creation_date} Bucketçš„åˆ›å»ºæ—¶é—´ {bucket_info.intranet_endpoint} Bucketçš„å†…ç½‘Endpoint {bucket_info.extranet_endpoint} Bucketçš„å¤–ç½‘Endpoint {bucket_info.owner.id} Bucketçš„æ‹¥æœ‰è€…ID {bucket_info.acl.grant} Bucketçš„ACLæˆæƒ {bucket_info.data_redundancy_type} Bucketçš„æ•°æ®å†—ä½™ç±»å‹ {bucket_info.access_monitor} Bucketçš„è®¿é—®è·Ÿè¸ªçŠ¶æ€ ä»£ç ç¤ºä¾‹ # # æŸ¥çœ‹Bucket service = oss2.Service(auth, \u0026#39;oss-ap-xiaomengmai-1.aliyuncs.com\u0026#39;) for b in oss2.BucketIterator(service): print(b.name) # bucketä¿¡æ¯ bucket = oss2.Bucket(auth, \u0026#39;oss-ap-xiaomengmai-1.aliyuncs.com\u0026#39;, \u0026#39;{bucket_name}\u0026#39;) bucket_info = bucket.get_bucket_info() æ–‡ä»¶æ“ä½œ # # å†™å…¥å­—ç¬¦ä¸² result = bucket.put_object(\u0026#39;exampleobject.txt\u0026#39;, \u0026#39;Hello OSS\u0026#39;) bucket.object_exists(\u0026#39;exampleobject.txt\u0026#39;) ##\u0026gt; True # æŸ¥çœ‹objectåˆ—è¡¨ [i.key for i in bucket.list_objects(\u0026#34;\u0026#34;).object_list] é€’å½’æŸ¥çœ‹ - æœ‰æ— /çš„åŒºåˆ« # for obj in oss2.ObjectIterator(bucket, prefix = \u0026#39;ods/\u0026#39;, delimiter = \u0026#39;/\u0026#39;): # é€šè¿‡is_prefixæ–¹æ³•åˆ¤æ–­objæ˜¯å¦ä¸ºæ–‡ä»¶å¤¹ã€‚ if obj.is_prefix(): # åˆ¤æ–­objä¸ºæ–‡ä»¶å¤¹ã€‚ print(\u0026#39;directory: \u0026#39; + obj.key) else: # åˆ¤æ–­objä¸ºæ–‡ä»¶ã€‚ print(\u0026#39;file: \u0026#39; + obj.key) ## \u0026gt; file: ods/ ## \u0026gt; directory: ods/clicker/ ## \u0026gt; directory: ods/snapshot/ for obj in oss2.ObjectIterator(bucket, prefix = \u0026#39;.\u0026#39;, delimiter = \u0026#39;/\u0026#39;): # é€šè¿‡is_prefixæ–¹æ³•åˆ¤æ–­objæ˜¯å¦ä¸ºæ–‡ä»¶å¤¹ã€‚ if obj.is_prefix(): # åˆ¤æ–­objä¸ºæ–‡ä»¶å¤¹ã€‚ print(\u0026#39;directory: \u0026#39; + obj.key) else: # åˆ¤æ–­objä¸ºæ–‡ä»¶ã€‚ print(\u0026#39;file: \u0026#39; + obj.key) ##\u0026gt; directory: .dlsdata/ aaa = bucket.put_object(\u0026#39;ods/haha-emu/\u0026#39;, \u0026#39;\u0026#39;) for obj in oss2.ObjectIterator(bucket, prefix = \u0026#39;ods/\u0026#39;, delimiter = \u0026#39;/\u0026#39;): # é€šè¿‡is_prefixæ–¹æ³•åˆ¤æ–­objæ˜¯å¦ä¸ºæ–‡ä»¶å¤¹ã€‚ if obj.is_prefix(): # åˆ¤æ–­objä¸ºæ–‡ä»¶å¤¹ã€‚ print(\u0026#39;directory: \u0026#39; + obj.key) else: # åˆ¤æ–­objä¸ºæ–‡ä»¶ã€‚ print(\u0026#39;file: \u0026#39; + obj.key) ##\u0026gt; file: ods/ ##\u0026gt; directory: ods/clicker/ ##\u0026gt; directory: ods/haha-emu/ ##\u0026gt; directory: ods/snapshot/ "},{"id":43,"href":"/docs/programmer/cloudnative/redis/bigkey-and-hotkey/","title":"å¤§keyã€çƒ­keyé—®é¢˜","section":"ä¸­é—´ä»¶","content":" å¦‚ä½•æ‰¾å‡ºä¼˜åŒ–å¤§Keyä¸çƒ­Key,äº§ç”Ÿçš„åŸå› å’Œé—®é¢˜_äº‘æ•°æ®åº“ Redis ç‰ˆ(Redis)-é˜¿é‡Œäº‘å¸®åŠ©ä¸­å¿ƒ # åœ¨ä½¿ç”¨Redisçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæœªèƒ½åŠæ—¶å‘ç°å¹¶å¤„ç†Big keysï¼ˆä¸‹æ–‡ç§°ä¸ºâ€œå¤§Keyâ€ï¼‰ä¸Hotkeysï¼ˆä¸‹æ–‡ç§°ä¸ºâ€œçƒ­Keyâ€ï¼‰ï¼Œå¯èƒ½ä¼šå¯¼è‡´æœåŠ¡æ€§èƒ½ä¸‹é™ã€ç”¨æˆ·ä½“éªŒå˜å·®ï¼Œç”šè‡³å¼•å‘å¤§é¢ç§¯æ•…éšœã€‚æœ¬æ–‡å°†ä»‹ç»å¤§Keyä¸çƒ­Keyäº§ç”Ÿçš„åŸå› ã€å…¶å¯èƒ½å¼•å‘çš„é—®é¢˜åŠå¦‚ä½•å¿«é€Ÿæ‰¾å‡ºå¤§Keyä¸çƒ­Keyå¹¶å°†å…¶ä¼˜åŒ–çš„æ–¹æ¡ˆã€‚\nåè¯ è§£é‡Š å¤§Key é€šå¸¸ä»¥Keyçš„å¤§å°å’ŒKeyä¸­æˆå‘˜çš„æ•°é‡æ¥ç»¼åˆåˆ¤å®šï¼Œä¾‹å¦‚ï¼š- Keyæœ¬èº«çš„æ•°æ®é‡è¿‡å¤§ï¼šä¸€ä¸ªStringç±»å‹çš„Keyï¼Œå®ƒçš„å€¼ä¸º5 MBã€‚- Keyä¸­çš„æˆå‘˜æ•°è¿‡å¤šï¼šä¸€ä¸ªZSETç±»å‹çš„Keyï¼Œå®ƒçš„æˆå‘˜æ•°é‡ä¸º10,000ä¸ªã€‚- Keyä¸­æˆå‘˜çš„æ•°æ®é‡è¿‡å¤§ï¼šä¸€ä¸ªHashç±»å‹çš„Keyï¼Œå®ƒçš„æˆå‘˜æ•°é‡è™½ç„¶åªæœ‰1,000ä¸ªä½†è¿™äº›æˆå‘˜çš„Valueï¼ˆå€¼ï¼‰æ€»å¤§å°ä¸º100 MBã€‚ çƒ­Key é€šå¸¸ä»¥å…¶æ¥æ”¶åˆ°çš„Keyè¢«è¯·æ±‚é¢‘ç‡æ¥åˆ¤å®šï¼Œä¾‹å¦‚ï¼š- QPSé›†ä¸­åœ¨ç‰¹å®šçš„Keyï¼šRediså®ä¾‹çš„æ€»QPSï¼ˆæ¯ç§’æŸ¥è¯¢ç‡ï¼‰ä¸º10,000ï¼Œè€Œå…¶ä¸­ä¸€ä¸ªKeyçš„æ¯ç§’è®¿é—®é‡è¾¾åˆ°äº†7,000ã€‚- å¸¦å®½ä½¿ç”¨ç‡é›†ä¸­åœ¨ç‰¹å®šçš„Keyï¼šå¯¹ä¸€ä¸ªæ‹¥æœ‰ä¸Šåƒä¸ªæˆå‘˜ä¸”æ€»å¤§å°ä¸º1 MBçš„HASH Keyæ¯ç§’å‘é€å¤§é‡çš„HGETALLæ“ä½œè¯·æ±‚ã€‚- CPUä½¿ç”¨æ—¶é—´å æ¯”é›†ä¸­åœ¨ç‰¹å®šçš„Keyï¼šå¯¹ä¸€ä¸ªæ‹¥æœ‰æ•°ä¸‡ä¸ªæˆå‘˜çš„Keyï¼ˆZSETç±»å‹ï¼‰æ¯ç§’å‘é€å¤§é‡çš„ZRANGEæ“ä½œè¯·æ±‚ã€‚ è¯´æ˜\nä¸Šè¿°ä¾‹å­ä¸­çš„å…·ä½“æ•°å€¼ä»…ä¾›å‚è€ƒï¼Œåœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œæ‚¨éœ€è¦æ ¹æ®Redisçš„å®é™…ä¸šåŠ¡åœºæ™¯è¿›è¡Œç»¼åˆåˆ¤æ–­ã€‚\nå¤§Keyå’Œçƒ­Keyå¼•å‘çš„é—®é¢˜ # ç±»åˆ« è¯´æ˜ å¤§Key - å®¢æˆ·ç«¯æ‰§è¡Œå‘½ä»¤çš„æ—¶é•¿å˜æ…¢ã€‚- Rediså†…å­˜è¾¾åˆ°maxmemoryå‚æ•°å®šä¹‰çš„ä¸Šé™å¼•å‘æ“ä½œé˜»å¡æˆ–é‡è¦çš„Keyè¢«é€å‡ºï¼Œç”šè‡³å¼•å‘å†…å­˜æº¢å‡ºï¼ˆOut Of Memoryï¼‰ã€‚- é›†ç¾¤æ¶æ„ä¸‹ï¼ŒæŸä¸ªæ•°æ®åˆ†ç‰‡çš„å†…å­˜ä½¿ç”¨ç‡è¿œè¶…å…¶ä»–æ•°æ®åˆ†ç‰‡ï¼Œæ— æ³•ä½¿æ•°æ®åˆ†ç‰‡çš„å†…å­˜èµ„æºè¾¾åˆ°å‡è¡¡ã€‚- å¯¹å¤§Keyæ‰§è¡Œè¯»è¯·æ±‚ï¼Œä¼šä½¿Rediså®ä¾‹çš„å¸¦å®½ä½¿ç”¨ç‡è¢«å æ»¡ï¼Œå¯¼è‡´è‡ªèº«æœåŠ¡å˜æ…¢ï¼ŒåŒæ—¶æ˜“æ³¢åŠç›¸å…³çš„æœåŠ¡ã€‚- å¯¹å¤§Keyæ‰§è¡Œåˆ é™¤æ“ä½œï¼Œæ˜“é€ æˆä¸»åº“è¾ƒé•¿æ—¶é—´çš„é˜»å¡ï¼Œè¿›è€Œå¯èƒ½å¼•å‘åŒæ­¥ä¸­æ–­æˆ–ä¸»ä»åˆ‡æ¢ã€‚ çƒ­Key - å ç”¨å¤§é‡çš„CPUèµ„æºï¼Œå½±å“å…¶ä»–è¯·æ±‚å¹¶å¯¼è‡´æ•´ä½“æ€§èƒ½é™ä½ã€‚- é›†ç¾¤æ¶æ„ä¸‹ï¼Œäº§ç”Ÿè®¿é—®å€¾æ–œï¼Œå³æŸä¸ªæ•°æ®åˆ†ç‰‡è¢«å¤§é‡è®¿é—®ï¼Œè€Œå…¶ä»–æ•°æ®åˆ†ç‰‡å¤„äºç©ºé—²çŠ¶æ€ï¼Œå¯èƒ½å¼•èµ·è¯¥æ•°æ®åˆ†ç‰‡çš„è¿æ¥æ•°è¢«è€—å°½ï¼Œæ–°çš„è¿æ¥å»ºç«‹è¯·æ±‚è¢«æ‹’ç»ç­‰é—®é¢˜ã€‚- åœ¨æŠ¢è´­æˆ–ç§’æ€åœºæ™¯ä¸‹ï¼Œå¯èƒ½å› å•†å“å¯¹åº”åº“å­˜Keyçš„è¯·æ±‚é‡è¿‡å¤§ï¼Œè¶…å‡ºRediså¤„ç†èƒ½åŠ›é€ æˆè¶…å–ã€‚- çƒ­Keyçš„è¯·æ±‚å‹åŠ›æ•°é‡è¶…å‡ºRedisçš„æ‰¿å—èƒ½åŠ›æ˜“é€ æˆç¼“å­˜å‡»ç©¿ï¼Œå³å¤§é‡è¯·æ±‚å°†è¢«ç›´æ¥æŒ‡å‘åç«¯çš„å­˜å‚¨å±‚ï¼Œå¯¼è‡´å­˜å‚¨è®¿é—®é‡æ¿€å¢ç”šè‡³å®•æœºï¼Œä»è€Œå½±å“å…¶ä»–ä¸šåŠ¡ã€‚ å¤§Keyå’Œçƒ­Keyäº§ç”Ÿçš„åŸå›  # æœªæ­£ç¡®ä½¿ç”¨Redisã€ä¸šåŠ¡è§„åˆ’ä¸è¶³ã€æ— æ•ˆæ•°æ®çš„å †ç§¯ã€è®¿é—®é‡çªå¢ç­‰éƒ½ä¼šäº§ç”Ÿå¤§Keyä¸çƒ­Keyï¼Œå¦‚ï¼š\nå¤§key åœ¨ä¸é€‚ç”¨çš„åœºæ™¯ä¸‹ä½¿ç”¨Redisï¼Œæ˜“é€ æˆKeyçš„valueè¿‡å¤§ï¼Œå¦‚ä½¿ç”¨Stringç±»å‹çš„Keyå­˜æ”¾å¤§ä½“ç§¯äºŒè¿›åˆ¶æ–‡ä»¶å‹æ•°æ®ï¼› ä¸šåŠ¡ä¸Šçº¿å‰è§„åˆ’è®¾è®¡ä¸è¶³ï¼Œæ²¡æœ‰å¯¹Keyä¸­çš„æˆå‘˜è¿›è¡Œåˆç†çš„æ‹†åˆ†ï¼Œé€ æˆä¸ªåˆ«Keyä¸­çš„æˆå‘˜æ•°é‡è¿‡å¤šï¼› æœªå®šæœŸæ¸…ç†æ— æ•ˆæ•°æ®ï¼Œé€ æˆå¦‚HASHç±»å‹Keyä¸­çš„æˆå‘˜æŒç»­ä¸æ–­åœ°å¢åŠ ï¼› ä½¿ç”¨LISTç±»å‹Keyçš„ä¸šåŠ¡æ¶ˆè´¹ä¾§å‘ç”Ÿä»£ç æ•…éšœï¼Œé€ æˆå¯¹åº”Keyçš„æˆå‘˜åªå¢ä¸å‡ã€‚ çƒ­key é¢„æœŸå¤–çš„è®¿é—®é‡é™¡å¢ï¼Œå¦‚çªç„¶å‡ºç°çš„çˆ†æ¬¾å•†å“ã€è®¿é—®é‡æš´æ¶¨çš„çƒ­ç‚¹æ–°é—»ã€ç›´æ’­é—´æŸä¸»æ’­ææ´»åŠ¨å¸¦æ¥çš„å¤§é‡åˆ·å±ç‚¹èµã€æ¸¸æˆä¸­æŸåŒºåŸŸå‘ç”Ÿå¤šä¸ªå·¥ä¼šä¹‹é—´çš„æˆ˜æ–—æ¶‰åŠå¤§é‡ç©å®¶ç­‰ã€‚ å¿«é€Ÿæ‰¾å‡ºå¤§Keyå’Œçƒ­Key # Redisæä¾›å¤šç§æ–¹æ¡ˆå¸®åŠ©æ‚¨è½»æ¾æ‰¾å‡ºå¤§Keyä¸çƒ­Keyã€‚\næ–¹æ³• ä¼˜ç¼ºç‚¹ è¯´æ˜ å®æ—¶Top Keyç»Ÿè®¡ï¼ˆæ¨èï¼‰ - ä¼˜ç‚¹ï¼šå‡†ç¡®æ€§é«˜ã€å¯¹æ€§èƒ½å‡ ä¹æ— å½±å“ã€‚- ç¼ºç‚¹ï¼šå±•ç¤ºçš„Keyæ•°é‡æœ‰ä¸€å®šé™åˆ¶ï¼Œä½†èƒ½æ»¡è¶³å¸¸è§„åœºæ™¯ä¸‹çš„éœ€æ±‚ã€‚ å¯å®æ—¶å±•ç¤ºå®ä¾‹ä¸­çš„å¤§Keyå’Œçƒ­Keyä¿¡æ¯ï¼ŒåŒæ—¶æ”¯æŒæŸ¥çœ‹4å¤©å†…å¤§Keyå’Œçƒ­Keyçš„å†å²ä¿¡æ¯ã€‚è¯¥åŠŸèƒ½å¯å¸®åŠ©æ‚¨æŒæ¡Keyåœ¨å†…å­˜ä¸­çš„å ç”¨ã€Keyçš„è®¿é—®é¢‘æ¬¡ç­‰ä¿¡æ¯ï¼Œæº¯æºåˆ†æé—®é¢˜ï¼Œä¸ºæ‚¨çš„ä¼˜åŒ–æ“ä½œæä¾›æ•°æ®æ”¯æŒã€‚ ç¦»çº¿å…¨é‡Keyåˆ†æ - ä¼˜ç‚¹ï¼šå¯å¯¹å†å²å¤‡ä»½æ•°æ®è¿›è¡Œåˆ†æï¼Œå¯¹çº¿ä¸ŠæœåŠ¡æ— å½±å“ã€‚- ç¼ºç‚¹ï¼šæ—¶æ•ˆæ€§å·®ï¼ŒRDBæ–‡ä»¶è¾ƒå¤§æ—¶è€—æ—¶è¾ƒé•¿ã€‚ å¯¹Redisçš„RDBå¤‡ä»½æ–‡ä»¶è¿›è¡Œå®šåˆ¶åŒ–çš„åˆ†æï¼Œå¸®åŠ©æ‚¨å‘ç°å®ä¾‹ä¸­çš„å¤§Keyï¼ŒæŒæ¡Keyåœ¨å†…å­˜ä¸­çš„å ç”¨å’Œåˆ†å¸ƒã€Keyè¿‡æœŸæ—¶é—´ç­‰ä¿¡æ¯ï¼Œä¸ºæ‚¨çš„ä¼˜åŒ–æ“ä½œæä¾›æ•°æ®æ”¯æŒï¼Œå¸®åŠ©æ‚¨é¿å…å› Keyå€¾æ–œå¼•å‘çš„å†…å­˜ä¸è¶³ã€æ€§èƒ½ä¸‹é™ç­‰é—®é¢˜ã€‚ é€šè¿‡redis-cliçš„bigkeyså’Œhotkeyså‚æ•°æŸ¥æ‰¾å¤§Keyå’Œçƒ­Key - ä¼˜ç‚¹ï¼šæ–¹ä¾¿ã€å¿«é€Ÿã€å®‰å…¨ã€‚- ç¼ºç‚¹ï¼šåˆ†æç»“æœä¸å¯å®šåˆ¶åŒ–ï¼Œå‡†ç¡®æ€§ä¸æ—¶æ•ˆæ€§å·®ã€‚ Redisæä¾›äº†bigkeyså‚æ•°èƒ½å¤Ÿä½¿redis-cliä»¥éå†çš„æ–¹å¼åˆ†æRediså®ä¾‹ä¸­çš„æ‰€æœ‰Keyï¼Œå¹¶è¿”å›Keyçš„æ•´ä½“ç»Ÿè®¡ä¿¡æ¯ä¸æ¯ä¸ªæ•°æ®ç±»å‹ä¸­Top1çš„å¤§Keyï¼Œbigkeysä»…èƒ½åˆ†æå¹¶è¾“å…¥å…­ç§æ•°æ®ç±»å‹ï¼ˆSTRINGã€LISTã€HASHã€SETã€ZSETã€STREAMï¼‰ï¼Œå‘½ä»¤ç¤ºä¾‹ä¸ºredis-cli -h r-***************.redis.rds.aliyuncs.com -a \u0026lt;password\u0026gt; --bigkeysã€‚è¯´æ˜è‹¥æ‚¨åªéœ€è¦åˆ†æSTRINGç±»å‹çš„å¤§keyæˆ–æ˜¯æ‰¾å‡ºæˆå‘˜æ•°é‡è¶…è¿‡10ä¸ªçš„HASH Keyï¼Œåˆ™bigkeyså‚æ•°æ— æ³•ç›´æ¥å®ç°è¯¥ç±»éœ€æ±‚ã€‚åŒæ—¶ï¼Œè‡ªRedis 4.0ç‰ˆæœ¬èµ·æä¾›äº†hotkeyså‚æ•°ï¼Œå¯ä»¥å¿«é€Ÿå¸®æ‚¨æ‰¾å‡ºä¸šåŠ¡ä¸­çš„çƒ­Keyï¼Œå…·ä½“æ“ä½œï¼Œè¯·å‚è§é€šè¿‡redis-cliçš„hotkeyså‚æ•°æŸ¥æ‰¾çƒ­Keyã€‚ é€šè¿‡Rediså†…ç½®å‘½ä»¤å¯¹ç›®æ ‡Keyè¿›è¡Œåˆ†æ - ä¼˜ç‚¹ï¼šæ–¹ä¾¿ã€å¯¹çº¿ä¸ŠæœåŠ¡å½±å“å°ã€‚- ç¼ºç‚¹ï¼šè¿”å›çš„Keyåºåˆ—åŒ–é•¿åº¦å¹¶ä¸ç­‰åŒäºå®ƒåœ¨å†…å­˜ç©ºé—´ä¸­çš„çœŸå®é•¿åº¦ï¼Œå› æ­¤ä¸å¤Ÿå‡†ç¡®ï¼Œä»…å¯ä½œä¸ºå‚è€ƒã€‚ å¯¹ä¸åŒæ•°æ®ç±»å‹çš„ç›®æ ‡Keyï¼Œåˆ†åˆ«é€šè¿‡å¦‚ä¸‹é£é™©è¾ƒä½çš„å‘½ä»¤è¿›è¡Œåˆ†æï¼Œæ¥åˆ¤æ–­ç›®æ ‡Keyæ˜¯å¦ç¬¦åˆå¤§Keyåˆ¤å®šæ ‡å‡†ã€‚- STRINGç±»å‹ï¼šæ‰§è¡ŒSTRLENå‘½ä»¤ï¼Œè¿”å›å¯¹åº”Keyçš„valueçš„å­—èŠ‚æ•°ã€‚- LISTç±»å‹ï¼šæ‰§è¡ŒLLENå‘½ä»¤ï¼Œè¿”å›å¯¹åº”Keyçš„åˆ—è¡¨é•¿åº¦ã€‚- HASHç±»å‹ï¼šæ‰§è¡ŒHLENå‘½ä»¤ï¼Œè¿”å›å¯¹åº”Keyçš„æˆå‘˜æ•°é‡ã€‚- SETç±»å‹ï¼šæ‰§è¡ŒSCARDå‘½ä»¤ï¼Œè¿”å›å¯¹åº”Keyçš„æˆå‘˜æ•°é‡ã€‚- ZSETç±»å‹ï¼šæ‰§è¡ŒZCARDå‘½ä»¤ï¼Œè¿”å›å¯¹åº”Keyçš„æˆå‘˜æ•°é‡ã€‚- STREAMç±»å‹ï¼šæ‰§è¡ŒXLENå‘½ä»¤ï¼Œè¿”å›å¯¹åº”Keyçš„æˆå‘˜æ•°é‡ã€‚è¯´æ˜DEBUG OBJECTä¸MEMORY USAGEå‘½ä»¤åœ¨æ‰§è¡Œæ—¶éœ€å ç”¨è¾ƒå¤šèµ„æºï¼Œä¸”æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼Œæœ‰é˜»å¡Rediså®ä¾‹çš„é£é™©ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚ é€šè¿‡ä¸šåŠ¡å±‚å®šä½çƒ­Key - ä¼˜ç‚¹ï¼šå¯å‡†ç¡®å¹¶åŠæ—¶åœ°å®šä½çƒ­Keyã€‚- ç¼ºç‚¹ï¼šä¸šåŠ¡ä»£ç å¤æ‚åº¦çš„å¢åŠ ï¼ŒåŒæ—¶å¯èƒ½ä¼šé™ä½ä¸€äº›æ€§èƒ½ã€‚ é€šè¿‡åœ¨ä¸šåŠ¡å±‚å¢åŠ ç›¸åº”çš„ä»£ç å¯¹Redisçš„è®¿é—®è¿›è¡Œè®°å½•å¹¶å¼‚æ­¥æ±‡æ€»åˆ†æã€‚ é€šè¿‡redis-rdb-toolså·¥å…·ä»¥å®šåˆ¶åŒ–æ–¹å¼æ‰¾å‡ºå¤§Key - ä¼˜ç‚¹ï¼šæ”¯æŒå®šåˆ¶åŒ–åˆ†æï¼Œå¯¹çº¿ä¸ŠæœåŠ¡æ— å½±å“ã€‚- ç¼ºç‚¹ï¼šæ—¶æ•ˆæ€§å·®ï¼ŒRDBæ–‡ä»¶è¾ƒå¤§æ—¶è€—æ—¶è¾ƒé•¿ã€‚ Redis-rdb-toolsæ˜¯é€šè¿‡Pythonç¼–å†™ï¼Œæ”¯æŒå®šåˆ¶åŒ–åˆ†æRedis RDBå¿«ç…§æ–‡ä»¶çš„å¼€æºå·¥å…·ã€‚æ‚¨å¯ä»¥æ ¹æ®æ‚¨çš„ç²¾ç»†åŒ–éœ€æ±‚ï¼Œå…¨é¢åœ°åˆ†æRediså®ä¾‹ä¸­æ‰€æœ‰Keyçš„å†…å­˜å ç”¨æƒ…å†µï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒçµæ´»åœ°åˆ†ææŸ¥è¯¢ã€‚ é€šè¿‡MONITORå‘½ä»¤æ‰¾å‡ºçƒ­Key - ä¼˜ç‚¹ï¼šæ–¹ä¾¿ã€å®‰å…¨ã€‚- ç¼ºç‚¹ï¼šä¼šå ç”¨CPUã€å†…å­˜ã€ç½‘ç»œèµ„æºï¼Œæ—¶æ•ˆæ€§ä¸å‡†ç¡®æ€§è¾ƒå·®ã€‚ Redisçš„MONITORå‘½ä»¤èƒ½å¤Ÿå¿ å®åœ°æ‰“å°Redisä¸­çš„æ‰€æœ‰è¯·æ±‚ï¼ŒåŒ…æ‹¬æ—¶é—´ä¿¡æ¯ã€Clientä¿¡æ¯ã€å‘½ä»¤ä»¥åŠKeyä¿¡æ¯ã€‚åœ¨å‘ç”Ÿç´§æ€¥æƒ…å†µæ—¶ï¼Œå¯ä»¥é€šè¿‡çŸ­æš‚æ‰§è¡ŒMONITORå‘½ä»¤å¹¶å°†è¿”å›ä¿¡æ¯è¾“å…¥è‡³æ–‡ä»¶ï¼Œåœ¨å…³é—­MONITORå‘½ä»¤åï¼Œå¯¹æ–‡ä»¶ä¸­è¯·æ±‚è¿›è¡Œå½’ç±»åˆ†æï¼Œæ‰¾å‡ºè¿™æ®µæ—¶é—´ä¸­çš„çƒ­Keyã€‚è¯´æ˜ç”±äºMONITORå‘½ä»¤å¯¹Rediså®ä¾‹æ€§èƒ½æ¶ˆè€—è¾ƒå¤§ï¼Œéç‰¹æ®Šæƒ…å†µä¸æ¨èä½¿ç”¨MONITORå‘½ä»¤ã€‚ ä¼˜åŒ–å¤§Keyä¸çƒ­Key # ç±»åˆ« å¤„ç†æ–¹æ³• å¤§Key - å¯¹å¤§Keyè¿›è¡Œæ‹†åˆ† ä¾‹å¦‚å°†å«æœ‰æ•°ä¸‡æˆå‘˜çš„ä¸€ä¸ªHASH Keyæ‹†åˆ†ä¸ºå¤šä¸ªHASH Keyï¼Œå¹¶ç¡®ä¿æ¯ä¸ªKeyçš„æˆå‘˜æ•°é‡åœ¨åˆç†èŒƒå›´ã€‚åœ¨Redisé›†ç¾¤æ¶æ„ä¸­ï¼Œæ‹†åˆ†å¤§Keyèƒ½å¯¹æ•°æ®åˆ†ç‰‡é—´çš„å†…å­˜å¹³è¡¡èµ·åˆ°æ˜¾è‘—ä½œç”¨ã€‚ - å¯¹å¤§Keyè¿›è¡Œæ¸…ç† å°†ä¸é€‚ç”¨Redisèƒ½åŠ›çš„æ•°æ®å­˜è‡³å…¶å®ƒå­˜å‚¨ï¼Œå¹¶åœ¨Redisä¸­åˆ é™¤æ­¤ç±»æ•°æ®ã€‚ è¯´æ˜ - Redis 4.0åŠä¹‹åç‰ˆæœ¬ï¼šæ‚¨å¯ä»¥é€šè¿‡UNLINKå‘½ä»¤å®‰å…¨åœ°åˆ é™¤å¤§Keyç”šè‡³ç‰¹å¤§Keyï¼Œè¯¥å‘½ä»¤èƒ½å¤Ÿä»¥éé˜»å¡çš„æ–¹å¼ï¼Œé€æ­¥åœ°æ¸…ç†ä¼ å…¥çš„Keyã€‚ - Redis 4.0ä¹‹å‰çš„ç‰ˆæœ¬ï¼šå»ºè®®å…ˆé€šè¿‡SCANå‘½ä»¤è¯»å–éƒ¨åˆ†æ•°æ®ï¼Œç„¶åè¿›è¡Œåˆ é™¤ï¼Œé¿å…ä¸€æ¬¡æ€§åˆ é™¤å¤§é‡keyå¯¼è‡´Redisé˜»å¡ã€‚ - ç›‘æ§Redisçš„å†…å­˜æ°´ä½ æ‚¨å¯ä»¥é€šè¿‡ç›‘æ§ç³»ç»Ÿè®¾ç½®åˆç†çš„Rediså†…å­˜æŠ¥è­¦é˜ˆå€¼è¿›è¡Œæé†’ï¼Œä¾‹å¦‚Rediså†…å­˜ä½¿ç”¨ç‡è¶…è¿‡70%ã€Redisçš„å†…å­˜åœ¨1å°æ—¶å†…å¢é•¿ç‡è¶…è¿‡20%ç­‰ã€‚é€šè¿‡æ­¤ç±»ç›‘æ§æ‰‹æ®µï¼Œå¯ä»¥æå‰è§„é¿è®¸å¤šé—®é¢˜ï¼Œä¾‹å¦‚LISTæ•°æ®ç±»å‹çš„æ¶ˆè´¹ç¨‹åºæ•…éšœé€ æˆå¯¹åº”Keyçš„åˆ—è¡¨æ•°é‡æŒç»­å¢é•¿ï¼Œå°†å‘Šè­¦è½¬å˜ä¸ºé¢„è­¦ä»è€Œé¿å…æ•…éšœçš„å‘ç”Ÿï¼Œæ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§æŠ¥è­¦è®¾ç½®ã€‚ - å¯¹è¿‡æœŸæ•°æ®è¿›è¡Œå®šæœŸæ¸…ç† å †ç§¯å¤§é‡è¿‡æœŸæ•°æ®ä¼šé€ æˆå¤§Keyçš„äº§ç”Ÿï¼Œä¾‹å¦‚åœ¨HASHæ•°æ®ç±»å‹ä¸­ä»¥å¢é‡çš„å½¢å¼ä¸æ–­å†™å…¥å¤§é‡æ•°æ®è€Œå¿½ç•¥äº†æ•°æ®çš„æ—¶æ•ˆæ€§ã€‚å¯ä»¥é€šè¿‡å®šæ—¶ä»»åŠ¡çš„æ–¹å¼å¯¹å¤±æ•ˆæ•°æ®è¿›è¡Œæ¸…ç†ã€‚ è¯´æ˜ åœ¨æ¸…ç†HASHæ•°æ®æ—¶ï¼Œå»ºè®®é€šè¿‡HSCANå‘½ä»¤é…åˆHDELå‘½ä»¤å¯¹å¤±æ•ˆæ•°æ®è¿›è¡Œæ¸…ç†ï¼Œé¿å…æ¸…ç†å¤§é‡æ•°æ®é€ æˆRedisé˜»å¡ã€‚ - ä½¿ç”¨é˜¿é‡Œäº‘çš„TairæœåŠ¡ï¼ˆRedisä¼ä¸šç‰ˆï¼‰é¿å¼€å¤±æ•ˆæ•°æ®çš„æ¸…ç†å·¥ä½œ è‹¥HASH Keyè¿‡å¤šï¼Œå­˜åœ¨å¤§é‡çš„æˆå‘˜å¤±æ•ˆéœ€è¦è¢«æ¸…ç†çš„é—®é¢˜ï¼Œåˆç”±äºå¤§é‡Keyä¸å¤§é‡å¤±æ•ˆæ•°æ®å åŠ ï¼Œæ— æ³•é€šè¿‡å®šæ—¶ä»»åŠ¡å¯¹æ— æ•ˆæ•°æ®è¿›è¡ŒåŠæ—¶åœ°æ¸…ç†ï¼Œæ‚¨å¯ä»¥é€šè¿‡é˜¿é‡Œäº‘TairæœåŠ¡é«˜æ•ˆåœ°è§£å†³æ­¤ç±»é—®é¢˜ã€‚ Tairæ˜¯äº‘æ•°æ®åº“Redisçš„ä¼ä¸šç‰ˆï¼Œå®ƒå…·å¤‡Redisæ‰€æœ‰ç‰¹æ€§ï¼ˆåŒ…æ‹¬Redisçš„é«˜æ€§èƒ½ç‰¹ç‚¹ï¼‰ï¼ŒåŒæ—¶æä¾›äº†å¤§é‡é¢å¤–çš„é«˜çº§åŠŸèƒ½ã€‚ TairHashæ˜¯ä¸€ç§å¯ä¸ºfieldè®¾ç½®è¿‡æœŸæ—¶é—´å’Œç‰ˆæœ¬çš„Hashæ•°æ®ç±»å‹ï¼Œå®ƒä¸ä½†å’ŒRedis Hashä¸€æ ·æ”¯æŒä¸°å¯Œçš„æ•°æ®æ¥å£å’Œé«˜å¤„ç†æ€§èƒ½ï¼Œè¿˜æ”¹å˜äº†Hashåªèƒ½ä¸ºKeyè®¾ç½®è¿‡æœŸæ—¶é—´çš„é™åˆ¶ï¼Œå¯ä»¥ä¸ºfieldè®¾ç½®è¿‡æœŸæ—¶é—´å’Œç‰ˆæœ¬ã€‚è¿™æå¤§åœ°æé«˜äº†HASHæ•°æ®ç±»å‹çš„çµæ´»æ€§ï¼Œç®€åŒ–äº†å¾ˆå¤šåœºæ™¯ä¸‹çš„ä¸šåŠ¡å¼€å‘å·¥ä½œã€‚åŒæ—¶ï¼ŒTairHashä½¿ç”¨é«˜æ•ˆçš„Active Expireç®—æ³•ï¼Œå®ç°äº†åœ¨å¯¹å“åº”æ—¶é—´å‡ ä¹æ— å½±å“çš„å‰æä¸‹ï¼Œé«˜æ•ˆå®Œæˆå¯¹fieldè¿‡æœŸåˆ¤æ–­å’Œåˆ é™¤çš„åŠŸèƒ½ã€‚ æ­¤ç±»é«˜çº§åŠŸèƒ½çš„åˆç†ä½¿ç”¨èƒ½å¤Ÿè§£æ”¾å¤§é‡Redisçš„è¿ç»´ã€æ•…éšœå¤„ç†å·¥ä½œå¹¶é™ä½ä¸šåŠ¡çš„ä»£ç å¤æ‚åº¦ï¼Œæ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§exHashã€‚ çƒ­Key - åœ¨Redisé›†ç¾¤æ¶æ„ä¸­å¯¹çƒ­Keyè¿›è¡Œå¤åˆ¶ åœ¨Redisé›†ç¾¤æ¶æ„ä¸­ï¼Œç”±äºçƒ­Keyçš„è¿ç§»ç²’åº¦é—®é¢˜ï¼Œæ— æ³•å°†è¯·æ±‚åˆ†æ•£è‡³å…¶ä»–æ•°æ®åˆ†ç‰‡ï¼Œå¯¼è‡´å•ä¸ªæ•°æ®åˆ†ç‰‡çš„å‹åŠ›æ— æ³•ä¸‹é™ã€‚æ­¤æ—¶ï¼Œå¯ä»¥å°†å¯¹åº”çƒ­Keyè¿›è¡Œå¤åˆ¶å¹¶è¿ç§»è‡³å…¶ä»–æ•°æ®åˆ†ç‰‡ï¼Œä¾‹å¦‚å°†çƒ­Key fooå¤åˆ¶å‡º3ä¸ªå†…å®¹å®Œå…¨ä¸€æ ·çš„Keyå¹¶åä¸ºfoo2ã€foo3ã€foo4ï¼Œå°†è¿™ä¸‰ä¸ªKeyè¿ç§»åˆ°å…¶ä»–æ•°æ®åˆ†ç‰‡æ¥è§£å†³å•ä¸ªæ•°æ®åˆ†ç‰‡çš„çƒ­Keyå‹åŠ›ã€‚ è¯´æ˜ è¯¥æ–¹æ¡ˆçš„ç¼ºç‚¹åœ¨äºéœ€è¦è”åŠ¨ä¿®æ”¹ä»£ç ï¼ŒåŒæ—¶å¸¦æ¥äº†æ•°æ®ä¸€è‡´æ€§çš„æŒ‘æˆ˜ï¼ˆç”±åŸæ¥æ›´æ–°ä¸€ä¸ªKeyæ¼”å˜ä¸ºéœ€è¦æ›´æ–°å¤šä¸ªKeyï¼‰ï¼Œä»…å»ºè®®è¯¥æ–¹æ¡ˆç”¨æ¥è§£å†³ä¸´æ—¶æ£˜æ‰‹çš„é—®é¢˜ã€‚ - ä½¿ç”¨è¯»å†™åˆ†ç¦»æ¶æ„ å¦‚æœçƒ­Keyçš„äº§ç”Ÿæ¥è‡ªäºè¯»è¯·æ±‚ï¼Œæ‚¨å¯ä»¥å°†å®ä¾‹æ”¹é€ æˆè¯»å†™åˆ†ç¦»æ¶æ„æ¥é™ä½æ¯ä¸ªæ•°æ®åˆ†ç‰‡çš„è¯»è¯·æ±‚å‹åŠ›ï¼Œç”šè‡³å¯ä»¥ä¸æ–­åœ°å¢åŠ ä»èŠ‚ç‚¹ã€‚ä½†æ˜¯è¯»å†™åˆ†ç¦»æ¶æ„åœ¨å¢åŠ ä¸šåŠ¡ä»£ç å¤æ‚åº¦çš„åŒæ—¶ï¼Œä¹Ÿä¼šå¢åŠ Redisé›†ç¾¤æ¶æ„å¤æ‚åº¦ã€‚ä¸ä»…è¦ä¸ºå¤šä¸ªä»èŠ‚ç‚¹æä¾›è½¬å‘å±‚ï¼ˆå¦‚Proxyï¼ŒLVSç­‰ï¼‰æ¥å®ç°è´Ÿè½½å‡è¡¡ï¼Œè¿˜è¦è€ƒè™‘ä»èŠ‚ç‚¹æ•°é‡æ˜¾è‘—å¢åŠ åå¸¦æ¥æ•…éšœç‡å¢åŠ çš„é—®é¢˜ã€‚Redisé›†ç¾¤æ¶æ„å˜æ›´ä¼šä¸ºç›‘æ§ã€è¿ç»´ã€æ•…éšœå¤„ç†å¸¦æ¥äº†æ›´å¤§çš„æŒ‘æˆ˜ã€‚ ç„¶è€Œï¼Œé˜¿é‡Œäº‘RedisæœåŠ¡ä»¥å¼€ç®±å³ç”¨çš„æ–¹å¼æä¾›æœåŠ¡ã€‚åœ¨ä¸šåŠ¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‚¨ä»…éœ€é€šè¿‡å˜é…çš„æ–¹å¼è°ƒæ•´å®ä¾‹æ¶æ„æ¥è½»æ¾åº”å¯¹ï¼Œä¾‹å¦‚å°†ä¸»ä»æ¶æ„è½¬å˜ä¸ºè¯»å†™åˆ†ç¦»æ¶æ„ã€å°†è¯»å†™åˆ†æ„æ¶æ„è½¬å˜ä¸ºé›†ç¾¤æ¶æ„ï¼Œä»¥åŠå°†ç¤¾åŒºç‰ˆè½¬å˜ä¸ºæ”¯æŒå¤§é‡é«˜çº§ç‰¹æ€§çš„Tairç‰ˆï¼ˆRedisä¼ä¸šç‰ˆï¼‰ç­‰ï¼Œæ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§å˜æ›´å®ä¾‹é…ç½®ã€‚ è¯´æ˜ è¯»å†™åˆ†ç¦»æ¶æ„åŒæ ·å­˜åœ¨ç¼ºç‚¹ï¼Œåœ¨è¯·æ±‚é‡æå¤§çš„åœºæ™¯ä¸‹ï¼Œè¯»å†™åˆ†ç¦»æ¶æ„ä¼šäº§ç”Ÿä¸å¯é¿å…çš„å»¶è¿Ÿï¼Œæ­¤æ—¶ä¼šæœ‰è¯»å–åˆ°è„æ•°æ®çš„é—®é¢˜ã€‚å› æ­¤ï¼Œåœ¨è¯»ã€å†™å‹åŠ›éƒ½è¾ƒå¤§ä¸”å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚å¾ˆé«˜çš„åœºæ™¯ä¸‹ï¼Œè¯»å†™åˆ†ç¦»æ¶æ„å¹¶ä¸æ˜¯æœ€ä¼˜æ–¹æ¡ˆã€‚ - ä½¿ç”¨é˜¿é‡Œäº‘Tairçš„QueryCacheç‰¹æ€§ äº‘æ•°æ®åº“Redisä¼šæ ¹æ®é«˜æ•ˆçš„æ’åºå’Œç»Ÿè®¡ç®—æ³•è¯†åˆ«å‡ºå®ä¾‹ä¸­å­˜åœ¨çš„çƒ­ç‚¹Keyï¼ˆé€šå¸¸çƒ­ç‚¹Keyçš„QPSå¤§äº3,000ï¼‰ï¼Œå¼€å¯è¯¥åŠŸèƒ½åï¼Œä»£ç†èŠ‚ç‚¹Proxyä¼šæ ¹æ®è®¾å®šçš„è§„åˆ™ç¼“å­˜çƒ­ç‚¹Keyçš„è¯·æ±‚å’ŒæŸ¥è¯¢ç»“æœï¼ˆä»…ç¼“å­˜çƒ­ç‚¹Keyçš„æŸ¥è¯¢ç»“æœï¼Œæ— éœ€ç¼“å­˜æ•´ä¸ªKeyï¼‰ã€‚å½“åœ¨ç¼“å­˜æœ‰æ•ˆæ—¶é—´å†…æ”¶åˆ°ç›¸åŒçš„è¯·æ±‚æ—¶ï¼ŒProxyä¼šç›´æ¥è¿”å›ç»“æœè‡³å®¢æˆ·ç«¯ï¼Œæ— éœ€å’Œåç«¯çš„æ•°æ®åˆ†ç‰‡æ‰§è¡Œäº¤äº’ã€‚åœ¨æå‡è¯»å–é€Ÿåº¦çš„åŒæ—¶ï¼Œé™ä½äº†çƒ­ç‚¹Keyå¯¹æ•°æ®åˆ†ç‰‡çš„æ€§èƒ½å½±å“ï¼Œé¿å…è®¿é—®å€¾æ–œã€‚ å¼€é€šè¯¥åŠŸèƒ½åï¼Œæ¥è‡ªå®¢æˆ·ç«¯çš„åŒæ ·è¯·æ±‚æ— éœ€å†ä¸Proxyåç«¯çš„Redisè¿›è¡Œäº¤äº’è€Œæ˜¯ç”±Proxyç›´æ¥è¿”å›æ•°æ®ï¼ŒæŒ‡å‘çƒ­Keyçš„è¯·æ±‚ç”±ä¸€ä¸ªRedisèŠ‚ç‚¹æ‰¿æ‹…è½¬ä¸ºå¤šä¸ªProxyå…±åŒæ‰¿æ‹…ï¼Œèƒ½å¤Ÿå¤§å¹…åº¦é™ä½RedisèŠ‚ç‚¹çš„çƒ­Keyå‹åŠ›ã€‚åŒæ—¶Tairçš„QueryCacheåŠŸèƒ½è¿˜æä¾›äº†å¤§é‡çš„å‘½ä»¤æ¥æ–¹ä¾¿æ‚¨æŸ¥çœ‹ã€ç®¡ç†ä»£ç†æŸ¥è¯¢ç¼“å­˜çš„æƒ…å†µï¼Œä¾‹å¦‚é€šè¿‡querycache keyså‘½ä»¤æŸ¥çœ‹æ‰€æœ‰è¢«ç¼“å­˜çƒ­Keyï¼Œé€šè¿‡querycache listallå‘½ä»¤è·å–æ‰€æœ‰å·²ç¼“å­˜çš„æ‰€æœ‰å‘½ä»¤ç­‰ã€‚æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§é€šè¿‡Proxy Query Cacheä¼˜åŒ–çƒ­ç‚¹Keyé—®é¢˜ã€‚ "},{"id":44,"href":"/docs/programmer/platforms/wps-for-linux/","title":"WPS for Linux","section":"å¹³å°","content":" wps åœ¨linuxä¸Šæ‰“å¼€æç¤ºå­—ä½“ç¼ºå¤± # wps åœ¨linuxä¸Šæ‰“å¼€æç¤ºå­—ä½“ç¼ºå¤± # git clone https://github.com/dv-anomaly/ttf-wps-fonts cd ttf-wps-fonts \u0026amp;\u0026amp; sudo ./install.sh "},{"id":45,"href":"/docs/programmer/langs/python/sqlalchemy/","title":"SqlAlchemy - æ•°æ®åº“Orm","section":"Python","content":" Sqlalchemyå¼‚æ­¥æ“ä½œä¸å®Œå…¨æŒ‡åŒ— # ä¸å®Œå…¨æŠ„è¢­è‡ª: ç±³æ´›ä¸¶ - åšå®¢å›­ cnblogs.com\nå¼‚æ­¥SQLAlchemy # SQLAlchemyä½œä¸ºä¸€æ¬¾é€šç”¨çš„Python Ormå·¥å…·ï¼Œåœ¨æœ€è¿‘çš„ç‰ˆæœ¬ä¹Ÿæ”¯æŒäº†å¼‚æ­¥æ“ä½œã€‚ä½†ç½‘ä¸Šå¾ˆå¤šèµ„æ–™éƒ½ä¸æ˜¯å¾ˆé½å…¨ï¼ŒAPIä¹Ÿä¸æ˜¯å¾ˆå¥½æŸ¥è¯¢çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä¾¿æœ‰äº†æ•´ç†ä¸€ä»½åŸºç¡€æ–‡æ¡£çš„æƒ³æ³•ã€‚æ–‡ç« ä¸»è¦ä¼šä»¥CRUDä¸ºå…¥å£ï¼Œè§£å†³å¤§å®¶æœ€åŸºæœ¬çš„éœ€æ±‚ã€‚\nengineçš„åŒºåˆ« # åœ¨æ™®é€šçš„SQLAlchemyä¸­ï¼Œå»ºç«‹engineå¯¹è±¡ï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨ä¸‹é¢çš„æ–¹å¼:\nfrom sqlalchemy import create_engine engine = create_engine(SQLALCHEMY_DATABASE_URI, pool_recycle=1500) è€Œå¼‚æ­¥çš„æ–¹å¼å¦‚ä¸‹:\nfrom sqlalchemy.ext.asyncio import create_async_engine async_engine = create_async_engine(ASYNC_SQLALCHEMY_URI, pool_recycle=1500) é“¾æ¥å‚æ•° # from sqlalchemy.ext.asyncio import create_async_engine async_engine = create_async_engine( SQLALCHEMY_DATABASE_URL, pool_size=10, # è®¾ç½®æœ€å¤§è¿æ¥æ± å¤§å° max_overflow=20, # è®¾ç½®æœ€å¤§æº¢å‡ºè¿æ¥æ•° pool_timeout=30, # è®¾ç½®è·å–è¿æ¥çš„è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ pool_recycle=1500, # è®¾ç½®è¿æ¥å›æ”¶æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ echo=True # è®¾ç½®ä¸ºTrueä»¥ä¾¿äºè°ƒè¯•ï¼Œæ˜¾ç¤ºSQLæ—¥å¿— ) sessionçš„åŒºåˆ« # æˆ‘ä»¬ä¸€èˆ¬ç”¨sessionmakeræ¥å»ºç«‹sessionï¼Œä¸è¿‡å¼‚æ­¥çš„æœ‰ç‚¹åŒºåˆ«:\nfrom sqlalchemy.ext.asyncio import AsyncSession from sqlalchemy.orm import sessionmaker # åŒæ­¥session Session = sessionmaker(engine) # å¼‚æ­¥session åŒºåˆ«åœ¨äºéœ€è¦æŒ‡å®šå¯¹åº”çš„class_ async_session = sessionmaker(async_engine, class_=AsyncSession) å»ºç«‹ä¼šè¯ # æˆ‘ä»¬è¿˜æ˜¯ä»¥ä»£ç çš„å½¢å¼å±•ç¤º:\n# åŒæ­¥ with Session() as session: # é‡Œé¢æ˜¯å…·ä½“çš„sqlæ“ä½œ pass # å¼‚æ­¥ async with Session() as session: # é‡Œé¢æ˜¯å¼‚æ­¥çš„æ“ä½œï¼ŒåŒºåˆ«å°±æ˜¯ä»withå˜æˆäº†async with ä¹Ÿå°±æ„å‘³ç€æ–¹æ³•å¿…é¡»æ˜¯asyncä¿®é¥°çš„ pass ä»¥ä¸Šæ˜¯å…³äºå»ºç«‹è¿æ¥ï¼Œå¤„ç†ä¼šè¯çš„ä¸€äº›åŒºåˆ«ï¼Œæ¥ç€æˆ‘ä»¬è®²å¯¹åº”çš„CRUDæ“ä½œã€‚\næŸ¥è¯¢ # ç»“æœå¤„ç†: https://docs.sqlalchemy.org/en/21/core/connections.html#sqlalchemy.engine.Result.scalars\nè¿™é‡Œä¾æ—§ä¼šç»™å‡ºæ–°è€ç‰ˆæœ¬çš„å¯¹æ¯”:\n# æ³¨æ„Sessionä¸ºåŒæ­¥Sessionï¼Œä¸ºäº†åŒºåˆ†ï¼Œå¼‚æ­¥sessionä¸ºasync_session # modelåˆ™ä¸ºå…·ä½“çš„Modelç±» # å¼‚æ­¥æŸ¥è¯¢æ–¹å¼ from sqlalchemy import select async def query(): async with async_session() as session: sql = select(model).where(model.id == 1) print(sql) # è¿™é‡Œå¯ä»¥æ‰“å°å‡ºsql result = await session.execute(sql) # ç¬¬ä¸€æ¡æ•°æ® data = result.scalars().first() # result.scalars().one_or_none() ä¸æŠ¥é”™çš„è·å–æ–¹å¼ # æ‰€æœ‰æ•°æ® # data = result.scalars().all() # åŒæ­¥æŸ¥è¯¢æ–¹å¼ä¸€ def query(): with Session() as session: # æŸ¥è¯¢id=1çš„ç¬¬ä¸€æ¡æ•°æ® resultå¯¹åº”çš„å°±æ˜¯modelçš„å®ä¾‹ å¦‚æœæ²¡æœ‰åˆ™æ˜¯None result = session.query(model).filter_by(id=1).first() # æŸ¥è¯¢æ‰€æœ‰æ•°æ® resultå¯¹åº”çš„æ•°æ®ä¸ºList[model]ï¼Œå³modelæ•°ç»„ # result = session.query(model).filter_by(name=\u0026#34;zhangsan\u0026#34;).all() # åŒæ­¥æŸ¥è¯¢æ–¹å¼äºŒ def query(): with Session() as session: # æŸ¥è¯¢id=1çš„ç¬¬ä¸€æ¡æ•°æ® resultå¯¹åº”çš„å°±æ˜¯modelçš„å®ä¾‹ å¦‚æœæ²¡æœ‰åˆ™æ˜¯None result = session.query(model).filter(model.id == 1).first() # æŸ¥è¯¢æ‰€æœ‰æ•°æ® resultå¯¹åº”çš„æ•°æ®ä¸ºList[model]ï¼Œå³modelæ•°ç»„ # result = session.query(model).filter(model.name == \u0026#34;zhangsan\u0026#34;).all() æ–°å¢ # è¿™é‡Œå¼€å§‹å°±åªè®²å¼‚æ­¥çš„æ“ä½œäº†ã€‚\nasyncçš„æ–°å¢ä¸è¡Œå•Š, å¥½å¥‡æ€ª\ndata = DataModel(name=\u0026#39;\u0026#39;, phone=\u0026#39;\u0026#39;) async def insert(data): async with async_session() as session: async with session.begin(): session.add(data) # åˆ·æ–°è‡ªå¸¦çš„ä¸»é”® await session.flush() # é‡Šæ”¾è¿™ä¸ªdataæ•°æ® session.expunge(data) return data å…ˆè¯´ä¸€ä¸‹session.beginï¼Œè¿™ä¸ªä½ å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªäº‹åŠ¡æ“ä½œï¼Œå½“é‡‡ç”¨sessionçš„beginæ–¹æ³•åï¼Œä½ å¯ä»¥å‘ç°æˆ‘ä»¬ä¸éœ€è¦è°ƒç”¨commitæ–¹æ³•ä¹Ÿèƒ½æŠŠä¿®æ”¹å­˜å…¥æ•°æ®åº“ã€‚\nexpungeæ–¹æ³•ï¼Œæ˜¯ç”¨ä¾‹é‡Šæ”¾è¿™ä¸ªå®ä¾‹ï¼ŒSQLAlchemyæœ‰ä¸ªç‰¹ç‚¹ï¼Œå½“ä½ çš„sessionä¼šè¯ç»“æŸä»¥åï¼Œå®ƒä¼šé”€æ¯ä½ æ’å…¥çš„è¿™ç§ä¸´æ—¶æ•°æ®ï¼Œä½ å†æƒ³è®¿é—®è¿™ä¸ªdataå°±è®¿é—®ä¸äº†äº†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡Šæ”¾è¿™ä¸ªæ•°æ®ã€‚ï¼ˆexpungeçš„ä½œç”¨ï¼‰\nåŒæ­¥æ–¹æ³• # session.add(_data) session.commit() è¿™æ ·å°±è¡Œ, å¼‚æ­¥çš„ä¸è¡Œ\u0026hellip; IDéƒ½æ‹¿åˆ°äº†, ä½†æ˜¯æ•°æ®åº“é‡ŒæŸ¥ä¸åˆ°. å¼‚æ­¥ç”¨ä¸Šé¢çš„æ–¹æ³•ä¹Ÿä¸å¾—è¡Œ.\nç¼–è¾‘ # ä¸€èˆ¬ç¼–è¾‘æœ‰2ç§æ–¹å¼:\næŸ¥è¯¢å‡ºå¯¹åº”çš„æ•°æ®ï¼Œåœ¨æ•°æ®ä¸Šä¿®æ”¹ æ ¹æ®key-valueçš„å½¢å¼ï¼Œä¿®æ”¹å¯¹åº”æ•°æ®çš„å­—æ®µ from sqlalchemy import select, update # æ–¹å¼ä¸€ async def update_record(model): async with async_session() as session: async with session.begin(): result = await session.execute(select(model).where(id=1)) now = result.scalars().first() if now is None: raise Exception(\u0026#34;è®°å½•ä¸å­˜åœ¨\u0026#34;) now.name = \u0026#34;æå››\u0026#34; now.age = 23 # è¿™é‡Œæµ‹è¯•è¿‡ï¼Œå¦‚æœå»æ‰flushä¼šå¯¼è‡´æ•°æ®ä¸æ›´æ–° await session.flush() session.expunge(now) return now # æ–¹å¼äºŒ async def update_by_map(): async with async_session() as session: async with session.begin(): # æ›´æ–°idä¸º1çš„æ•°æ®ï¼Œå¹¶æŠŠnameæ”¹ä¸ºæå›› ageæ”¹ä¸º23 sql = update(model).where(model.id == 1).values(name=\u0026#34;æå››\u0026#34;, age=23) await session.execute(sql) åˆ é™¤ # åˆ é™¤çš„è¯ï¼Œè½¯åˆ é™¤å¤§å®¶éƒ½æ˜¯updateï¼Œæ‰€ä»¥ä¸éœ€è¦å¤šè¯´ï¼Œç‰©ç†åˆ é™¤çš„è¯ï¼Œä¹Ÿæœ‰ä¸¤ç§æ–¹å¼:\næŸ¥åˆ°ä»¥ååˆ é™¤ä¹‹ ç›´æ¥æ ¹æ®æ¡ä»¶åˆ é™¤ï¼ˆè¿™ç§æˆ‘æ²¡æœ‰ä»”ç»†ç ”ç©¶ï¼Œæˆ‘é€‰çš„æ˜¯ç¬¬ä¸€ç§æ–¹å¼ï¼Œå®¹é”™ç‡é«˜ç‚¹ï¼‰ async def delete_by_id(): async with async_session() as session: async with session.begin(): result = await session.execute(select(model).where(model.id == 2)) original = result.scalars().first() if original is None: raise Exception(\u0026#34;è®°å½•ä¸å­˜åœ¨\u0026#34;) # å¦‚æœæ˜¯å¤šæ¡ # session.delete(original) # for item in result: # session.delete(item) å‹ç¼© # å¹¶ä¸æ”¯æŒ mysql --compress è¿æ¥å‚æ•°ï¼Œä»¥ä¸‹æ˜¯ä¸ªä¼ªå®ç°\nfrom sqlalchemy.orm import validates class MyClass(Base): # ... data = Column(BLOB) @validates(\u0026#34;data\u0026#34;) def _set_data(self, key, value): return func.compress(value) æŸ¥è¯¢ # é€»è¾‘æ“ä½œç¬¦ # 1. and or # from sqlalchemy import and_, or_ print( select(Address.email_address).where( and_( or_(User.name == \u0026#34;squidward\u0026#34;, User.name == \u0026#34;sandy\u0026#34;), Address.user_id == User.id, ) ) ) 2. null # sql = select(DeviceData).where(DeviceData.device_json_new.is_not(None)) sql = select(DeviceData).where(DeviceData.device_json_new.is_(None)) è‡ªé€‚åº”æŸ¥è¯¢ # async with async_session_install() as session: # ä½¿ç”¨ DeviceData æ¨¡å‹ç›´æ¥æ„å»ºæŸ¥è¯¢ sql = select(DeviceData).where(DeviceData.device_json_new.is_not(None)) sql_max_min = select(func.max(DeviceData.id).label(\u0026#34;max_id\u0026#34;),func.min(DeviceData.id).label(\u0026#34;min_id\u0026#34;)).where(DeviceData.device_json_new.is_not(None),DeviceData.brand_name == ) for key, value in filters.items(): if not hasattr(DeviceData, key): continue sql = sql.where(getattr(DeviceData, key) == value) if limit != 0: sql = sql.limit(limit) if offset: sql = sql.offset(offset) logger.debug(f\u0026#34;fetch sql is: {sql}\u0026#34;) exec = await session.execute(sql) results = exec.scalars().all() å¼‚æ­¥å…³ç³» # class AppPackage(Base): __tablename__ = \u0026#39;app_packages\u0026#39; id = Column(Integer, primary_key=True, autoincrement=True) app_id = Column(String(64), unique=True, nullable=False) description = Column(Text) icon = Column(String(128)) categories = Column(JSON) tags = Column(JSON) created_at = Column(TIMESTAMP, nullable=True, server_default=text(\u0026#39;CURRENT_TIMESTAMP\u0026#39;)) updated_at = Column(TIMESTAMP, nullable=True, onupdate=text(\u0026#39;CURRENT_TIMESTAMP\u0026#39;)) # Relationship to AppPlatform platforms = relationship(\u0026#39;AppPlatform\u0026#39;, back_populates=\u0026#39;app_package\u0026#39;, cascade=\u0026#39;all, delete\u0026#39;) class AppPlatform(Base): __tablename__ = \u0026#39;app_platforms\u0026#39; id = Column(Integer, primary_key=True, autoincrement=True) app_id = Column(String(64), ForeignKey(\u0026#39;app_packages.app_id\u0026#39;, ondelete=\u0026#39;CASCADE\u0026#39;), nullable=False) platform = Column(String(16), nullable=False) # Relationship to AppPackage app_package = relationship(\u0026#39;AppPackage\u0026#39;, back_populates=\u0026#39;platforms\u0026#39;) # Read async def get_package_by(app_id, platform) -\u0026gt; AppInfo: async with async_session_install() as session: appinfo = AppInfo(pkg_name=app_id) sql = select(AppPackage).options(joinedload(AppPackage.platforms)).where(AppPackage.app_id == app_id, AppPlatform.platform == platform) rst = await session.execute(sql) import ipdb; ipdb.set_trace() info = rst.scalars().first() if info: appinfo.description = info.description appinfo.tags = info.tags appinfo.categories = info.categories logger.info(f\u0026#34;app_id: {app_id}, len platforms: {len(info.platforms)}\u0026#34;) return appinfo else: return None åŒæ­¥ç”¨å°±å¯\nsql = select(AppPackage).join(AppPackage).where(AppPackage.app_id == app_id, AppPlatform.platform == platform) like # sql_total = sql_total.where(or_(AppPackage.app_id.like(f\u0026#39;%{package}%\u0026#39;) for package in params.data.package)) æ–¹æ³•(åŠ¨æ€è¡¨) # åˆ›å»ºè¡¨ # async def create_table_if_not_exists(package_name: str) -\u0026gt; bool: \u0026#34;\u0026#34;\u0026#34; åˆ›å»ºåŒ…-è´¦å·-ä½¿ç”¨æ¬¡æ•°å¯¹ç…§è¡¨ \u0026#34;\u0026#34;\u0026#34; try: table_name = TableNamePrefix.format(package_name=package_name) if table_name not in await get_installer_table_names(): await SavingsPool._add_support_package(package_name) async with async_engine.begin() as conn: # åˆ›å»ºè¡¨ table = Table( table_name, metadata, Column(\u0026#39;id\u0026#39;, Integer, primary_key=True), Column(\u0026#39;account_id\u0026#39;, Integer, comment=\u0026#34;è´¦å·ID, è´¦å·è¡¨ä¸­çš„ä¸»é”®id\u0026#34;), Column(\u0026#39;count\u0026#39;, SmallInteger, comment=\u0026#34;è¯¥è´¦å·è¢«ä½¿ç”¨çš„æ¬¡æ•°\u0026#34;), Column(\u0026#39;created_at\u0026#39;, DateTime, server_default=func.now(), nullable=False, comment=\u0026#34;UTC time\u0026#34;), Column(\u0026#39;updated_at\u0026#39;, DateTime, server_default=func.now(), onupdate=func.now(), nullable=False, comment=\u0026#34;UTC time\u0026#34;) ) await conn.run_sync(metadata.create_all, tables=[table]) logger.info(f\u0026#34;Table \u0026#39;{table_name}\u0026#39; created successfully.\u0026#34;) return True except Exception as e: logger.error(f\u0026#34;Failed to create table \u0026#39;{table_name}\u0026#39;: {e}, details: {traceback.format_exc()}\u0026#34;) return False 1. æœ‰å¤–é”®\u0026amp;æœ‰unsignedçš„æ—¶å€™(åªä¸€ä¸ª) # ä»”ç»†å¯¹æ¯”ä¸ 2 ä¸­å·®å¼‚\nasync def create_table_if_not_exists(table_name: str) -\u0026gt; bool: \u0026#34;\u0026#34;\u0026#34; åˆ›å»ºåŒ…-è´¦å·-ä½¿ç”¨æ¬¡æ•°å¯¹ç…§è¡¨ \u0026#34;\u0026#34;\u0026#34; try: if table_name not in await get_installer_table_names(): async with async_engine.begin() as conn: # åŠ è½½è¿›å·²ç»å­˜åœ¨çš„è¡¨ await conn.run_sync(lambda conn: metadata.reflect(bind=conn, only=[\u0026#39;google_accounts\u0026#39;])) logger.info(\u0026#34;Existing tables loaded into metadata.\u0026#34;) # åˆ›å»ºè¡¨ table = Table( table_name, metadata, Column(\u0026#39;id\u0026#39;, Integer, primary_key=True), Column(\u0026#39;account_id\u0026#39;, INTEGER(unsigned=True), unique=True, nullable=False, comment=\u0026#34;è´¦å·ID, è´¦å·è¡¨ä¸­çš„ä¸»é”®id\u0026#34;), Column(\u0026#39;count\u0026#39;, SmallInteger, comment=\u0026#34;è¯¥è´¦å·è¢«ä½¿ç”¨çš„æ¬¡æ•°\u0026#34;), Column(\u0026#39;created_at\u0026#39;, DateTime, server_default=func.now(), nullable=False, comment=\u0026#34;UTC time\u0026#34;), Column(\u0026#39;updated_at\u0026#39;, DateTime, server_default=func.now(), onupdate=func.now(), nullable=False, comment=\u0026#34;UTC time\u0026#34;), ForeignKeyConstraint([\u0026#39;account_id\u0026#39;], [\u0026#39;google_accounts.id\u0026#39;], name=\u0026#39;fk_account_id\u0026#39;), mysql_engine=\u0026#39;InnoDB\u0026#39;, extend_existing=True ) await conn.run_sync(lambda conn: metadata.create_all(bind=conn, tables=[table])) logger.info(f\u0026#34;Table \u0026#39;{table_name}\u0026#39; created successfully.\u0026#34;) else: logger.info(f\u0026#34;Table \u0026#39;{table_name}\u0026#39; already exists.\u0026#34;) return True except Exception as e: logger.error(f\u0026#34;Failed to create table \u0026#39;{table_name}\u0026#39;: {e}, details: {traceback.format_exc()}\u0026#34;) return False 2. æœ‰å¤–é”®\u0026amp;æœ‰unsignedçš„æ—¶å€™(å¯å¤šä¸ª) # async with async_engine.begin() as conn: # åŠ è½½è¿›å·²ç»å­˜åœ¨çš„è¡¨ metadata.clear() # æ²¡æœ‰è¿™è¡Œ(unique(`account_id`)ä¼šéšç€è°ƒç”¨æ¬¡æ•°å˜å¤šåœ¨å»ºè¡¨è¯­å¥ä¸­è¶Šæ¥è¶Šå¤š) await conn.run_sync(lambda conn: metadata.reflect(bind=conn, only=[\u0026#39;google_accounts\u0026#39;])) logger.info(\u0026#34;Existing tables loaded into metadata.\u0026#34;) # åˆ›å»ºè¡¨ fk_name = package_name.replace(\u0026#39;.\u0026#39;, \u0026#39;_\u0026#39;) table = Table( table_name, metadata, Column(\u0026#39;id\u0026#39;, Integer, primary_key=True), Column(\u0026#39;account_id\u0026#39;, INTEGER(unsigned=True), unique=True, nullable=False, comment=\u0026#34;è´¦å·ID, è´¦å·è¡¨ä¸­çš„ä¸»é”®id\u0026#34;), Column(\u0026#39;count\u0026#39;, SmallInteger, comment=\u0026#34;è¯¥è´¦å·è¢«ä½¿ç”¨çš„æ¬¡æ•°\u0026#34;), Column(\u0026#39;created_at\u0026#39;, DateTime, server_default=func.now(), nullable=False, comment=\u0026#34;UTC time\u0026#34;), Column(\u0026#39;updated_at\u0026#39;, DateTime, server_default=func.now(), onupdate=func.now(), nullable=False, comment=\u0026#34;UTC time\u0026#34;), ForeignKeyConstraint([\u0026#39;account_id\u0026#39;], [\u0026#39;google_accounts.id\u0026#39;], name=f\u0026#39;{fk_name}_account_id\u0026#39;), # å¤–é”®ä¸èƒ½ä¸€æ · mysql_engine=\u0026#39;InnoDB\u0026#39;, # extend_existing=True # ä¼šä¿®æ”¹-metadata ä¸­ç¼“å­˜çš„å»ºè¡¨è¯­å¥ ) await conn.run_sync(lambda conn: metadata.create_all(bind=conn, tables=[table])) å¼‚æ­¥è·å–è¡¨å # from sqlalchemy.ext.asyncio import create_async_engine from sqlalchemy import inspect from sqlalchemy.ext.asyncio import AsyncConnection import asyncio # Configure your async engine DATABASE_URL = \u0026#34;mysql+aiomysql://user:password@host/dbname\u0026#34; async_engine = create_async_engine(DATABASE_URL, echo=True) # Define a synchronous function to get table names def get_table_names_sync(sync_conn): inspector = inspect(sync_conn) return inspector.get_table_names() # Define an async function to use the synchronous function async def get_installer_table_names(): async with async_engine.begin() as conn: # Use `run_sync` to call the synchronous function table_names = await conn.run_sync(get_table_names_sync) return table_names # Example usage async def main(): table_names = await get_installer_table_names() print(table_names) asyncio.run(main()) å¼‚æ­¥åŠ è½½è¡¨æŸ¥è¯¢æ•°æ® # from sqlalchemy import Table, MetaData from sqlalchemy.ext.asyncio import create_async_engine from sqlalchemy.ext.asyncio import AsyncSession from sqlalchemy.orm import sessionmaker from sqlalchemy.future import select import asyncio # é…ç½®å¼‚æ­¥å¼•æ“ DATABASE_URL = \u0026#34;mysql+aiomysql://user:password@host/dbname\u0026#34; async_engine = create_async_engine(DATABASE_URL, echo=True) # åˆ›å»ºåŒæ­¥å‡½æ•°æ¥åŠ è½½è¡¨ def load_table_sync(table_name, engine): metadata = MetaData() table = Table(table_name, metadata, autoload_with=engine) return table # å¼‚æ­¥å‡½æ•°ä½¿ç”¨ `run_sync` è°ƒç”¨åŒæ­¥å‡½æ•° async def query_data_and_add_counter(table_name, account_id): async with async_engine.connect() as conn: # ä½¿ç”¨ `run_sync` æ‰§è¡ŒåŒæ­¥æ“ä½œ table = await conn.run_sync(lambda sync_conn: load_table_sync(table_name, sync_conn)) # æ„å»ºæŸ¥è¯¢å¹¶æ‰§è¡Œ query = table.select().where(table.c.account_id == account_id) result = await conn.execute(query) row = result.scalars().one_or_none() return row # å¼‚æ­¥å‡½æ•°æ¥æ’å…¥æ•°æ® async def insert_data_counter(table_name, account_id, count) -\u0026gt; bool: async with async_engine.connect() as conn: async with conn.begin(): # ä½¿ç”¨ `run_sync` è°ƒç”¨åŒæ­¥å‡½æ•° table = await conn.run_sync(lambda sync_conn: load_table_sync(table_name, sync_conn)) # æ„å»ºæ’å…¥è¯­å¥ new_user = table.insert().values(account_id=account_id, count=count) await conn.execute(new_user) # æäº¤äº‹åŠ¡ await conn.commit() logger.debug(f\u0026#34;Data inserted into table \u0026#39;{table_name}\u0026#39; for account_id {account_id}.\u0026#34;) return True # å¼‚æ­¥å‡½æ•°æ¥æŸ¥è¯¢å’Œæ›´æ–°æ•°æ®-äº‹åŠ¡ async def _query_data_and_add_counter(table_name, account_id: int) -\u0026gt; bool: async with async_engine.connect() as conn: async with conn.begin(): # å¼€å§‹äº‹åŠ¡ # ä½¿ç”¨ `run_sync` è°ƒç”¨åŒæ­¥å‡½æ•° table = await conn.run_sync(lambda sync_conn: __load_table_sync(table_name, sync_conn)) # æ„å»ºæŸ¥è¯¢ query = select(table.c.account_id, table.c.count, table.c.created_at).where(table.c.account_id == account_id) result = await conn.execute(query) account_id, count, create_at = result.fetchone() or (None, None, None) if account_id: logger.info(f\u0026#34;Update account_id {account_id} in table \u0026#39;{table_name}\u0026#39;: count+1 {count+1}\u0026#34;) count += 1 # æ„å»ºæ›´æ–°è¯­å¥ update_stmt = table.update().where(table.c.account_id == account_id).values(count=count) await conn.execute(update_stmt) # æäº¤äº‹åŠ¡ await conn.commit() return True else: # äº‹åŠ¡å°†åœ¨ `conn.begin()` çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨é€€å‡ºæ—¶è‡ªåŠ¨å›æ»š return False # ç¤ºä¾‹ä½¿ç”¨ async def main(): result = await query_data_and_add_counter(\u0026#34;your_table_name\u0026#34;, 12345) print(result) # è¿è¡Œç¤ºä¾‹ asyncio.run(main()) æ··ç”¨é”™è¯¯ # class GoogleAccounts(Base): pass table_account = await conn.run_sync(lambda sync_conn: __load_table_sync(\u0026#34;google_accounts\u0026#34;, sync_conn)) query = ( select(GoogleAccounts).select_from( table.join(table_account, table.c.account_id == table_account.c.id) ).where( and_( table.c.count \u0026gt;= 10, table_account.c.login_status == LoginStatus.Login.value ) ) ) # æŠ¥é”™ Not unique table/alias: \u0026#39;google_accounts\u0026#39; ## åŸå›  è¿™ä¸ªé”™è¯¯ `(pymysql.err.OperationalError) (1066, \u0026#34;Not unique table/alias: \u0026#39;google_accounts\u0026#39;\u0026#34;)` è¡¨ç¤º SQL æŸ¥è¯¢ä¸­çš„è¡¨åˆ«å `google_accounts` ä¸æ˜¯å”¯ä¸€çš„ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨ä½ å°è¯•åœ¨åŒä¸€ä¸ªæŸ¥è¯¢ä¸­å¤šæ¬¡å¼•ç”¨åŒä¸€ä¸ªè¡¨ï¼Œå¹¶ä¸”æ²¡æœ‰ä¸ºæ¯æ¬¡å¼•ç”¨æä¾›å”¯ä¸€çš„åˆ«åã€‚ # éƒ½ä½¿ç”¨table_account å°±å¥½å•¦ select(table_account).select_from( table.join(table_account, table.c.account_id == table_account.c.id) ).where( and_( table.c.count \u0026gt;= 10, table_account.c.login_status == LoginStatus.Login.value ) ) # æˆ–è€…éƒ½ç”¨GoogleAccounts query = (select(GoogleAccounts).select_from(table.join(GoogleAccounts, table.c.account_id==GoogleAccounts.id)).where(and_(table.c.count \u0026gt;= 10,GoogleAccounts.login_status == LoginStatus.Login.value))) "},{"id":46,"href":"/docs/programmer/platforms/appsflyer/","title":"AppsFlyer-å¤–ç½‘ç§»åŠ¨å½’å› è¥é”€åˆ†æå¹³å°","section":"å¹³å°","content":" AppsFlyer # SDKé›†æˆ # Gradleã€dependency æ·»åŠ Android Install Referrer åˆ°App é€šè¿‡appæƒé™å‡†ç¡®åŒ–å½’å›  åº”ç”¨å†…äº‹ä»¶ # æ³¨å†Œ è´­ä¹° å¹¿å‘Šç‚¹å‡» åˆ†äº« é‚€è¯· å”¤é†’ è·³è½¬ # OpenLinkå¹³å°å½’å›  è·³è½¬ æ·±åº¦é“¾æ¥ "},{"id":47,"href":"/docs/programmer/basetc/obsidian%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%E6%8F%92%E4%BB%B6/","title":"Obsidianæ€ç»´å¯¼å›¾æ’ä»¶","section":"åŸºç¡€å·¥å…·å’Œé…ç½®","content":" Enhancing Mind map # Links # https://github.com/MarkMindLtd/obsidian-enhancing-mindmap GitHub Related # coc-markmap gatsby-remark-markmap Features # links inline text styles multiline text inline code Katex - $x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}$ æ³¨æ„è¿™é‡Œ # è¯¥æ’ä»¶æ”¯æŒå¦‚ä¸Šä»¥åŠæ— åºåˆ—è¡¨ç­‰æœ‰é™çš„markdownæ ¼å¼ï¼Œæ— æ³•æ”¯æŒå…¶ä»–æ ¼å¼ï¼Œä¸€å®šè¦æ³¨æ„è¿™ç‚¹ï¼Œå¦åˆ™å¯èƒ½ä¼šä¸¢å¤±æ•°æ®ï¼Œåˆ‡è®°ã€‚\nShort cuts # æ–°å»ºè„‘å›¾ Ctrl/Cmd+P æ–°å¢å­èŠ‚ç‚¹ Tab æ–°å¢å…„å¼ŸèŠ‚ç‚¹ enter åˆ é™¤èŠ‚ç‚¹ Delete ç¼–è¾‘èŠ‚ç‚¹ Space/dblclick node åé€€ Ctrl/Cmd+Z å‰è¿› Ctrl/Cmd+Y å–æ¶ˆç¼–è¾‘èŠ‚ç‚¹ Tab å±•å¼€èŠ‚ç‚¹ Ctrl/Cmd + / æ”¶ç¼©èŠ‚ç‚¹ Ctrl/Cmd + / æ‹–åŠ¨èŠ‚ç‚¹ Drag and drop node åˆ‡æ¢èŠ‚ç‚¹ Up/down/left/right æ”¾å¤§ã€ç¼©å° Ctrl/Cmd + æ»šè½® å±…ä¸­ Ctrl/Cmd + E åŠŸèƒ½ # ç¼–è¾‘èŠ‚ç‚¹ æ‹–åŠ¨èŠ‚ç‚¹è‡³æŸèŠ‚ç‚¹ å‰è¿›/åé€€ åœ¨markdownå’Œæ€ç»´å¯¼å›¾è§†å›¾ä¹‹é—´åˆ‡æ¢ æ•°æ®åŒæ­¥ "},{"id":48,"href":"/docs/programmer/net/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/","title":"ç½‘ç»œç¼–ç¨‹","section":"Net","content":" ç½‘ç»œåˆ†å±‚å›¾ # ![[net_layer.png]]\nTCPæ˜¯ä¼ è¾“å±‚çš„åè®®ï¼Œè€ŒåŸºäºTCPé€ å‡ºæ¥çš„HTTPå’Œå„ç±»RPCåè®®ï¼Œå®ƒä»¬éƒ½åªæ˜¯å®šä¹‰äº†ä¸åŒæ¶ˆæ¯æ ¼å¼çš„åº”ç”¨å±‚åè®®è€Œå·²ã€‚ HTTPåè®®ï¼ˆHyper Text Transfer Protocolï¼‰ï¼Œåˆå«åšè¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚æˆ‘ä»¬ç”¨çš„æ¯”è¾ƒå¤šï¼Œå¹³æ—¶ä¸Šç½‘åœ¨æµè§ˆå™¨ä¸Šæ•²ä¸ªç½‘å€å°±èƒ½è®¿é—®ç½‘é¡µï¼Œè¿™é‡Œç”¨åˆ°çš„å°±æ˜¯HTTPåè®®ã€‚ RPCï¼ˆRemote Procedure Callï¼‰ï¼Œåˆå«åšè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚å®ƒæœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„åè®®ï¼Œè€Œæ˜¯ä¸€ç§è°ƒç”¨æ–¹å¼ã€‚è™½ç„¶å¤§éƒ¨åˆ†RPCåè®®åº•å±‚ä½¿ç”¨TCPï¼Œä½†å®é™…ä¸Šå®ƒä»¬ä¸ä¸€å®šéå¾—ä½¿ç”¨TCPï¼Œæ”¹ç”¨UDPæˆ–è€…HTTPï¼Œå…¶å®ä¹Ÿå¯ä»¥åšåˆ°ç±»ä¼¼çš„åŠŸèƒ½ã€‚ RPC # vs HTTP # HTTP: ![[http.png]] RPC: ![[rpc.png]]\næœåŠ¡å‘ç° [x] # é¦–å…ˆè¦å‘æŸä¸ªæœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œä½ å¾—å…ˆå»ºç«‹è¿æ¥ï¼Œè€Œå»ºç«‹è¿æ¥çš„å‰ææ˜¯ï¼Œä½ å¾—çŸ¥é“IPåœ°å€å’Œç«¯å£ã€‚è¿™ä¸ªæ‰¾åˆ°æœåŠ¡å¯¹åº”çš„IPç«¯å£çš„è¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯æœåŠ¡å‘ç°ã€‚\nåœ¨HTTPä¸­ï¼Œä½ çŸ¥é“æœåŠ¡çš„åŸŸåï¼Œå°±å¯ä»¥é€šè¿‡DNSæœåŠ¡å»è§£æå¾—åˆ°å®ƒèƒŒåçš„IPåœ°å€ï¼Œé»˜è®¤80ç«¯å£ã€‚\nè€ŒRPCçš„è¯ï¼Œå°±æœ‰äº›åŒºåˆ«ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸“é—¨çš„ä¸­é—´æœåŠ¡å»ä¿å­˜æœåŠ¡åå’ŒIPä¿¡æ¯ï¼Œæ¯”å¦‚consulæˆ–è€…etcdï¼Œç”šè‡³æ˜¯redisã€‚æƒ³è¦è®¿é—®æŸä¸ªæœåŠ¡ï¼Œå°±å»è¿™äº›ä¸­é—´æœåŠ¡å»è·å¾—IPå’Œç«¯å£ä¿¡æ¯ã€‚ç”±äºdnsä¹Ÿæ˜¯æœåŠ¡å‘ç°çš„ä¸€ç§ï¼Œæ‰€ä»¥ä¹Ÿæœ‰åŸºäºdnså»åšæœåŠ¡å‘ç°çš„ç»„ä»¶ï¼Œæ¯”å¦‚CoreDNSã€‚\nåº•å±‚è¿æ¥å½¢å¼ [x] # ä»¥ä¸»æµçš„HTTP1.1åè®®ä¸ºä¾‹ï¼Œå…¶é»˜è®¤åœ¨å»ºç«‹åº•å±‚TCPè¿æ¥ä¹‹åä¼šä¸€ç›´ä¿æŒè¿™ä¸ªè¿æ¥ï¼ˆkeep aliveï¼‰ï¼Œä¹‹åçš„è¯·æ±‚å’Œå“åº”éƒ½ä¼šå¤ç”¨è¿™æ¡è¿æ¥ã€‚\nè€ŒRPCåè®®ï¼Œä¹Ÿè·ŸHTTPç±»ä¼¼ï¼Œä¹Ÿæ˜¯é€šè¿‡å»ºç«‹TCPé•¿é“¾æ¥è¿›è¡Œæ•°æ®äº¤äº’ï¼Œä½†ä¸åŒçš„åœ°æ–¹åœ¨äºï¼ŒRPCåè®®ä¸€èˆ¬è¿˜ä¼šå†å»ºä¸ªè¿æ¥æ± ï¼Œåœ¨è¯·æ±‚é‡å¤§çš„æ—¶å€™ï¼Œå»ºç«‹å¤šæ¡è¿æ¥æ”¾åœ¨æ± å†…ï¼Œè¦å‘æ•°æ®çš„æ—¶å€™å°±ä»æ± é‡Œå–ä¸€æ¡è¿æ¥å‡ºæ¥ï¼Œç”¨å®Œæ”¾å›å»ï¼Œä¸‹æ¬¡å†å¤ç”¨ï¼Œå¯ä»¥è¯´éå¸¸ç¯ä¿ã€‚\nç”±äºè¿æ¥æ± æœ‰åˆ©äºæå‡ç½‘ç»œè¯·æ±‚æ€§èƒ½ï¼Œæ‰€ä»¥ä¸å°‘ç¼–ç¨‹è¯­è¨€çš„ç½‘ç»œåº“é‡Œéƒ½ä¼šç»™HTTPåŠ ä¸ªè¿æ¥æ± ï¼Œæ¯”å¦‚goå°±æ˜¯è¿™ä¹ˆå¹²çš„ã€‚\nå¯ä»¥çœ‹å‡ºè¿™ä¸€å—ä¸¤è€…ä¹Ÿæ²¡å¤ªå¤§åŒºåˆ«ï¼Œæ‰€ä»¥ä¹Ÿä¸æ˜¯å…³é”®ã€‚\nä¼ è¾“çš„å†…å®¹ # åŸºäºTCPä¼ è¾“çš„æ¶ˆæ¯ï¼Œè¯´åˆ°åº•ï¼Œæ— ééƒ½æ˜¯æ¶ˆæ¯å¤´headerå’Œæ¶ˆæ¯ä½“bodyã€‚\nheaderæ˜¯ç”¨äºæ ‡è®°ä¸€äº›ç‰¹æ®Šä¿¡æ¯ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯æ¶ˆæ¯ä½“é•¿åº¦ã€‚\nbodyåˆ™æ˜¯æ”¾æˆ‘ä»¬çœŸæ­£éœ€è¦ä¼ è¾“çš„å†…å®¹ï¼Œè€Œè¿™äº›å†…å®¹åªèƒ½æ˜¯äºŒè¿›åˆ¶01ä¸²ï¼Œæ¯•ç«Ÿè®¡ç®—æœºåªè®¤è¯†è¿™ç©æ„ã€‚æ‰€ä»¥TCPä¼ å­—ç¬¦ä¸²å’Œæ•°å­—éƒ½é—®é¢˜ä¸å¤§ï¼Œå› ä¸ºå­—ç¬¦ä¸²å¯ä»¥è½¬æˆç¼–ç å†å˜æˆ01ä¸²ï¼Œè€Œæ•°å­—æœ¬èº«ä¹Ÿèƒ½ç›´æ¥è½¬ä¸ºäºŒè¿›åˆ¶ã€‚ä½†ç»“æ„ä½“å‘¢ï¼Œæˆ‘ä»¬å¾—æƒ³ä¸ªåŠæ³•å°†å®ƒä¹Ÿè½¬ä¸ºäºŒè¿›åˆ¶01ä¸²ï¼Œè¿™æ ·çš„æ–¹æ¡ˆç°åœ¨ä¹Ÿæœ‰å¾ˆå¤šç°æˆçš„ï¼Œæ¯”å¦‚jsonï¼Œprotobufã€‚\nè¿™ä¸ªå°†ç»“æ„ä½“è½¬ä¸ºäºŒè¿›åˆ¶æ•°ç»„çš„è¿‡ç¨‹å°±å«åºåˆ—åŒ–ï¼Œåè¿‡æ¥å°†äºŒè¿›åˆ¶æ•°ç»„å¤åŸæˆç»“æ„ä½“çš„è¿‡ç¨‹å«ååºåˆ—åŒ–ã€‚ ![[tobytes.png]]\nåºåˆ—åŒ–å’Œååºåˆ—åŒ–\nå¯¹äºä¸»æµçš„HTTP1.1ï¼Œè™½ç„¶å®ƒç°åœ¨å«è¶…æ–‡æœ¬åè®®ï¼Œæ”¯æŒéŸ³é¢‘è§†é¢‘ï¼Œä½†HTTPè®¾è®¡åˆæ˜¯ç”¨äºåšç½‘é¡µæ–‡æœ¬å±•ç¤ºçš„ï¼Œæ‰€ä»¥å®ƒä¼ çš„å†…å®¹ä»¥å­—ç¬¦ä¸²ä¸ºä¸»ã€‚headerå’Œbodyéƒ½æ˜¯å¦‚æ­¤ã€‚åœ¨bodyè¿™å—ï¼Œå®ƒä½¿ç”¨jsonæ¥åºåˆ—åŒ–ç»“æ„ä½“æ•°æ®ã€‚\næˆ‘ä»¬å¯ä»¥éšä¾¿æˆªä¸ªå›¾ç›´è§‚çœ‹ä¸‹ã€‚ ![[tobetes_details.png]] HTTPæŠ¥æ–‡\nå¯ä»¥çœ‹åˆ°è¿™é‡Œé¢çš„å†…å®¹éå¸¸å¤šçš„å†—ä½™ï¼Œæ˜¾å¾—éå¸¸å•°å—¦ã€‚æœ€æ˜æ˜¾çš„ï¼Œåƒheaderé‡Œçš„é‚£äº›ä¿¡æ¯ï¼Œå…¶å®å¦‚æœæˆ‘ä»¬çº¦å®šå¥½å¤´éƒ¨çš„ç¬¬å‡ ä½æ˜¯content-typeï¼Œå°±ä¸éœ€è¦æ¯æ¬¡éƒ½çœŸçš„æŠŠ\u0026quot;content-type\u0026quot;è¿™ä¸ªå­—æ®µéƒ½ä¼ è¿‡æ¥ï¼Œç±»ä¼¼çš„æƒ…å†µå…¶å®åœ¨bodyçš„jsonç»“æ„é‡Œä¹Ÿç‰¹åˆ«æ˜æ˜¾ã€‚\nè€ŒRPCï¼Œå› ä¸ºå®ƒå®šåˆ¶åŒ–ç¨‹åº¦æ›´é«˜ï¼Œå¯ä»¥é‡‡ç”¨ä½“ç§¯æ›´å°çš„protobufæˆ–å…¶ä»–åºåˆ—åŒ–åè®®å»ä¿å­˜ç»“æ„ä½“æ•°æ®ï¼ŒåŒæ—¶ä¹Ÿä¸éœ€è¦åƒHTTPé‚£æ ·è€ƒè™‘å„ç§æµè§ˆå™¨è¡Œä¸ºï¼Œæ¯”å¦‚302é‡å®šå‘è·³è½¬å•¥çš„ã€‚å› æ­¤æ€§èƒ½ä¹Ÿä¼šæ›´å¥½ä¸€äº›ï¼Œè¿™ä¹Ÿæ˜¯åœ¨å…¬å¸å†…éƒ¨å¾®æœåŠ¡ä¸­æŠ›å¼ƒHTTPï¼Œé€‰æ‹©ä½¿ç”¨RPCçš„æœ€ä¸»è¦åŸå› ã€‚\nå½“ç„¶ä¸Šé¢è¯´çš„HTTPï¼Œå…¶å®ç‰¹æŒ‡çš„æ˜¯ç°åœ¨ä¸»æµä½¿ç”¨çš„HTTP1.1ï¼ŒHTTP2åœ¨å‰è€…çš„åŸºç¡€ä¸Šåšäº†å¾ˆå¤šæ”¹è¿›ï¼Œæ‰€ä»¥æ€§èƒ½å¯èƒ½æ¯”å¾ˆå¤šRPCåè®®è¿˜è¦å¥½ï¼Œç”šè‡³è¿gRPCåº•å±‚éƒ½ç›´æ¥ç”¨çš„HTTP2ã€‚\nç»“è®º # çº¯è£¸TCPæ˜¯èƒ½æ”¶å‘æ•°æ®ï¼Œä½†å®ƒæ˜¯ä¸ªæ— è¾¹ç•Œçš„æ•°æ®æµï¼Œä¸Šå±‚éœ€è¦å®šä¹‰æ¶ˆæ¯æ ¼å¼ç”¨äºå®šä¹‰æ¶ˆæ¯è¾¹ç•Œã€‚äºæ˜¯å°±æœ‰äº†å„ç§åè®®ï¼ŒHTTPå’Œå„ç±»RPCåè®®å°±æ˜¯åœ¨TCPä¹‹ä¸Šå®šä¹‰çš„åº”ç”¨å±‚åè®®ã€‚ RPCæœ¬è´¨ä¸Šä¸ç®—æ˜¯åè®®ï¼Œè€Œæ˜¯ä¸€ç§è°ƒç”¨æ–¹å¼ï¼Œè€ŒåƒgRPCå’Œthriftè¿™æ ·çš„å…·ä½“å®ç°ï¼Œæ‰æ˜¯åè®®ï¼Œå®ƒä»¬æ˜¯å®ç°äº†RPCè°ƒç”¨çš„åè®®ã€‚ç›®çš„æ˜¯å¸Œæœ›ç¨‹åºå‘˜èƒ½åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•é‚£æ ·å»è°ƒç”¨è¿œç«¯çš„æœåŠ¡æ–¹æ³•ã€‚åŒæ—¶RPCæœ‰å¾ˆå¤šç§å®ç°æ–¹å¼ï¼Œä¸ä¸€å®šéå¾—åŸºäºTCPåè®®ã€‚ ä»å‘å±•å†å²æ¥è¯´ï¼Œ**HTTPä¸»è¦ç”¨äºb/sæ¶æ„ï¼Œè€ŒRPCæ›´å¤šç”¨äºc/sæ¶æ„ã€‚ä½†ç°åœ¨å…¶å®å·²ç»æ²¡åˆ†é‚£ä¹ˆæ¸…äº†ï¼Œb/så’Œc/såœ¨æ…¢æ…¢èåˆã€‚**å¾ˆå¤šè½¯ä»¶åŒæ—¶æ”¯æŒå¤šç«¯ï¼Œæ‰€ä»¥å¯¹å¤–ä¸€èˆ¬ç”¨HTTPåè®®ï¼Œè€Œå†…éƒ¨é›†ç¾¤çš„å¾®æœåŠ¡ä¹‹é—´åˆ™é‡‡ç”¨RPCåè®®è¿›è¡Œé€šè®¯ã€‚ RPCå…¶å®æ¯”HTTPå‡ºç°çš„è¦æ—©ï¼Œä¸”æ¯”ç›®å‰ä¸»æµçš„HTTP1.1æ€§èƒ½è¦æ›´å¥½ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†å…¬å¸å†…éƒ¨éƒ½è¿˜åœ¨ä½¿ç”¨RPCã€‚ HTTP2.0åœ¨HTTP1.1çš„åŸºç¡€ä¸Šåšäº†ä¼˜åŒ–ï¼Œæ€§èƒ½å¯èƒ½æ¯”å¾ˆå¤šRPCåè®®éƒ½è¦å¥½ï¼Œä½†ç”±äºæ˜¯è¿™å‡ å¹´æ‰å‡ºæ¥çš„ï¼Œæ‰€ä»¥ä¹Ÿä¸å¤ªå¯èƒ½å–ä»£æ‰RPCã€‚ TCP # å…«è‚¡æ–‡å¸¸èƒŒï¼ŒTCPæ˜¯æœ‰ä¸‰ä¸ªç‰¹ç‚¹ï¼Œé¢å‘è¿æ¥ã€å¯é ã€åŸºäºå­—èŠ‚æµã€‚\nç²˜åŒ…é—®é¢˜ # å› ä¸ºï¼š ![[tcp_is_dataflow.png]] æ‰€ä»¥ï¼š ![[nianbaowenti.png]] æ— æ³•åŒºåˆ†ä¸Šè¿°ä¸¤ç§æƒ…å†µã€‚ å¾—å‡ºï¼š çº¯è£¸TCPæ˜¯ä¸èƒ½ç›´æ¥æ‹¿æ¥ç”¨çš„ï¼Œä½ éœ€è¦åœ¨è¿™ä¸ªåŸºç¡€ä¸ŠåŠ å…¥ä¸€äº›è‡ªå®šä¹‰çš„è§„åˆ™ï¼Œç”¨äºåŒºåˆ†æ¶ˆæ¯è¾¹ç•Œã€‚\näºæ˜¯æˆ‘ä»¬ä¼šæŠŠæ¯æ¡è¦å‘é€çš„æ•°æ®éƒ½åŒ…è£…ä¸€ä¸‹ï¼Œæ¯”å¦‚åŠ å…¥æ¶ˆæ¯å¤´ï¼Œæ¶ˆæ¯å¤´é‡Œå†™æ¸…æ¥šä¸€ä¸ªå®Œæ•´çš„åŒ…é•¿åº¦æ˜¯å¤šå°‘ï¼Œæ ¹æ®è¿™ä¸ªé•¿åº¦å¯ä»¥ç»§ç»­æ¥æ”¶æ•°æ®ï¼Œæˆªå–å‡ºæ¥åå®ƒä»¬å°±æ˜¯æˆ‘ä»¬çœŸæ­£è¦ä¼ è¾“çš„æ¶ˆæ¯ä½“ã€‚\nå»ºç«‹è¿æ¥ç¤ºä¾‹ # ![[socket_connect.gif]]\nä¸‰æ¬¡æ¡æ‰‹ï¼š # å®¢æˆ·ç«¯é€šè¿‡å‘æœåŠ¡å™¨ç«¯å‘é€ä¸€ä¸ªSYNæ¥åˆ›å»ºä¸€ä¸ªä¸»åŠ¨æ‰“å¼€ï¼Œä½œä¸ºä¸‰æ¬¡æ¡æ‰‹çš„ä¸€éƒ¨åˆ†ã€‚å®¢æˆ·ç«¯æŠŠè¿™æ®µè¿æ¥çš„åºå·è®¾å®šä¸ºéšæœºæ•° Aã€‚ æœåŠ¡å™¨ç«¯åº”å½“ä¸ºä¸€ä¸ªåˆæ³•çš„SYNå›é€ä¸€ä¸ªSYN/ACKã€‚ACK çš„ç¡®è®¤ç åº”ä¸º A+1ï¼ŒSYN/ACK åŒ…æœ¬èº«åˆæœ‰ä¸€ä¸ªéšæœºåºå· Bã€‚ æœ€åï¼Œå®¢æˆ·ç«¯å†å‘é€ä¸€ä¸ªACKã€‚å½“æœåŠ¡ç«¯å—åˆ°è¿™ä¸ªACKçš„æ—¶å€™ï¼Œå°±å®Œæˆäº†ä¸‰è·¯æ¡æ‰‹ï¼Œå¹¶è¿›å…¥äº†è¿æ¥åˆ›å»ºçŠ¶æ€ã€‚æ­¤æ—¶åŒ…åºå·è¢«è®¾å®šä¸ºæ”¶åˆ°çš„ç¡®è®¤å· A+1ï¼Œè€Œå“åº”åˆ™ä¸º B+1ã€‚ å¦‚å›¾ï¼š![[3w4h.png]] # å››æ¬¡æŒ¥æ‰‹ï¼š # æ³¨æ„: ä¸­æ–­è¿æ¥ç«¯å¯ä»¥æ˜¯å®¢æˆ·ç«¯ï¼Œä¹Ÿå¯ä»¥æ˜¯æœåŠ¡å™¨ç«¯ã€‚ä¸‹é¢ä»…ä»¥å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ä¸¾ä¾‹ï¼Œåä¹‹äº¦ç„¶ï¼š\nå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæ•°æ®åˆ†æ®µ, å…¶ä¸­çš„ FIN æ ‡è®°è®¾ç½®ä¸º1. å®¢æˆ·ç«¯è¿›å…¥ FIN-WAIT çŠ¶æ€. è¯¥çŠ¶æ€ä¸‹å®¢æˆ·ç«¯åªæ¥æ”¶æ•°æ®, ä¸å†å‘é€æ•°æ®. æœåŠ¡å™¨æ¥æ”¶åˆ°å¸¦æœ‰ FIN = 1 çš„æ•°æ®åˆ†æ®µ, å‘é€å¸¦æœ‰ ACK = 1 çš„å‰©ä½™æ•°æ®åˆ†æ®µ, ç¡®è®¤æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„ FIN ä¿¡æ¯. æœåŠ¡å™¨ç­‰åˆ°æ‰€æœ‰æ•°æ®ä¼ è¾“ç»“æŸ, å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªå¸¦æœ‰ FIN = 1 çš„æ•°æ®åˆ†æ®µ, å¹¶è¿›å…¥ CLOSE-WAIT çŠ¶æ€, ç­‰å¾…å®¢æˆ·ç«¯å‘æ¥å¸¦æœ‰ ACK = 1 çš„ç¡®è®¤æŠ¥æ–‡. å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨å‘æ¥å¸¦æœ‰ FIN = 1 çš„æŠ¥æ–‡, è¿”å› ACK = 1 çš„æŠ¥æ–‡ç¡®è®¤, ä¸ºäº†é˜²æ­¢æœåŠ¡å™¨ç«¯æœªæ”¶åˆ°éœ€è¦é‡å‘, è¿›å…¥ TIME-WAIT çŠ¶æ€. æœåŠ¡å™¨æ¥æ”¶åˆ°æŠ¥æ–‡åå…³é—­è¿æ¥. å®¢æˆ·ç«¯ç­‰å¾… 2MSL åæœªæ”¶åˆ°å›å¤, åˆ™è®¤ä¸ºæœåŠ¡å™¨æˆåŠŸå…³é—­, å®¢æˆ·ç«¯å…³é—­è¿æ¥. Webé—®é¢˜ # GET vs POST # æœ‰äººæƒ³è¦çš„ç­”æ¡ˆ # ä½†æ˜¯è¿™ä¸ªä¸æ­£ç¡®\nGETä½¿ç”¨URLæˆ–Cookieä¼ å‚ã€‚è€ŒPOSTå°†æ•°æ®æ”¾åœ¨BODYä¸­ã€‚ GETçš„URLä¼šæœ‰é•¿åº¦ä¸Šçš„é™åˆ¶ï¼Œåˆ™POSTçš„æ•°æ®åˆ™å¯ä»¥éå¸¸å¤§ã€‚ POSTæ¯”GETå®‰å…¨ï¼Œå› ä¸ºæ•°æ®åœ¨åœ°å€æ ä¸Šä¸å¯è§ã€‚ HTTPåè®®å¯¹GETå’ŒPOSTéƒ½æ²¡æœ‰å¯¹é•¿åº¦çš„é™åˆ¶ # HTTPåè®®æ˜ç¡®åœ°æŒ‡å‡ºäº†ï¼ŒHTTPå¤´å’ŒBodyéƒ½æ²¡æœ‰é•¿åº¦çš„è¦æ±‚ã€‚è€Œå¯¹äºURLé•¿åº¦ä¸Šçš„é™åˆ¶ï¼Œæœ‰ä¸¤æ–¹é¢çš„åŸå› é€ æˆï¼š\næµè§ˆå™¨ã€‚æ®è¯´æ—©æœŸçš„æµè§ˆå™¨ä¼šå¯¹URLé•¿åº¦åšé™åˆ¶ã€‚æ®è¯´IEå¯¹URLé•¿åº¦ä¼šé™åˆ¶åœ¨2048ä¸ªå­—ç¬¦å†…ï¼ˆæµä¼ å¾ˆå¹¿ï¼Œè€Œä¸”æ— æ•°åŒäº‹éƒ½è¡¨ç¤ºè®¤åŒï¼‰ã€‚ä½†æˆ‘è‡ªå·±è¯•äº†ä¸€ä¸‹ï¼Œæˆ‘æ„é€ äº†90Kçš„URLé€šè¿‡IE9è®¿é—®live.comï¼Œæ˜¯æ­£å¸¸çš„ã€‚ç½‘ä¸Šçš„ä¸œè¥¿ï¼Œå“ªæ€•æ˜¯Wikipediaä¸Šçš„ï¼Œä¹Ÿä¸èƒ½ä¿¡ã€‚ æœåŠ¡å™¨ã€‚URLé•¿äº†ï¼Œå¯¹æœåŠ¡å™¨å¤„ç†ä¹Ÿæ˜¯ä¸€ç§è´Ÿæ‹…ã€‚åŸæœ¬ä¸€ä¸ªä¼šè¯å°±æ²¡æœ‰å¤šå°‘æ•°æ®ï¼Œç°åœ¨å¦‚æœæœ‰äººæ¶æ„åœ°æ„é€ å‡ ä¸ªå‡ Må¤§å°çš„URLï¼Œå¹¶ä¸åœåœ°è®¿é—®ä½ çš„æœåŠ¡å™¨ã€‚æœåŠ¡å™¨çš„æœ€å¤§å¹¶å‘æ•°æ˜¾ç„¶ä¼šä¸‹é™ã€‚å¦ä¸€ç§æ”»å‡»æ–¹å¼æ˜¯ï¼ŒæŠŠå‘Šè¯‰æœåŠ¡å™¨Content-Lengthæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ•°ï¼Œç„¶ååªç»™æœåŠ¡å™¨å‘ä¸€ç‚¹å„¿æ•°æ®ï¼Œå˜¿å˜¿ï¼ŒæœåŠ¡å™¨ä½ å°±å‚»ç­‰ç€å»å§ã€‚å“ªæ€•ä½ æœ‰è¶…æ—¶è®¾ç½®ï¼Œè¿™ç§æ•…æ„çš„æ¬¡æ¬¡è®¿é—®è¶…æ—¶ä¹Ÿèƒ½è®©æœåŠ¡å™¨åƒä¸äº†å…œç€èµ°ã€‚æœ‰é‰´äºæ­¤ï¼Œå¤šæ•°æœåŠ¡å™¨å‡ºäºå®‰å…¨å•¦ã€ç¨³å®šå•¦æ–¹é¢çš„è€ƒè™‘ï¼Œä¼šç»™URLé•¿åº¦åŠ é™åˆ¶ã€‚ä½†æ˜¯è¿™ä¸ªé™åˆ¶æ˜¯é’ˆå¯¹æ‰€æœ‰HTTPè¯·æ±‚çš„ï¼Œä¸GETã€POSTæ²¡æœ‰å…³ç³»ã€‚ å®‰å…¨ä¸å®‰å…¨å’ŒGETã€POSTæ²¡æœ‰å…³ç³» # Cookieå’ŒSession # Cookie Session å‚¨å­˜ä½ç½® å®¢æˆ·ç«¯ æœåŠ¡å™¨ç«¯ ç›®çš„ è·Ÿè¸ªä¼šè¯ï¼Œä¹Ÿå¯ä»¥ä¿å­˜ç”¨æˆ·åå¥½è®¾ç½®æˆ–è€…ä¿å­˜ç”¨æˆ·åå¯†ç ç­‰ è·Ÿè¸ªä¼šè¯ å®‰å…¨æ€§ ä¸å®‰å…¨ å®‰å…¨ sessionæŠ€æœ¯æ˜¯è¦ä½¿ç”¨åˆ°cookieçš„ï¼Œä¹‹æ‰€ä»¥å‡ºç°sessionæŠ€æœ¯ï¼Œä¸»è¦æ˜¯ä¸ºäº†å®‰å…¨ã€‚ HTTPå’ŒHTTPS # çŠ¶æ€ç  å®šä¹‰ 1xx æŠ¥å‘Š æ¥æ”¶åˆ°è¯·æ±‚ï¼Œç»§ç»­è¿›ç¨‹ 2xx æˆåŠŸ æ­¥éª¤æˆåŠŸæ¥æ”¶ï¼Œè¢«ç†è§£ï¼Œå¹¶è¢«æ¥å— 3xx é‡å®šå‘ ä¸ºäº†å®Œæˆè¯·æ±‚,å¿…é¡»é‡‡å–è¿›ä¸€æ­¥æªæ–½ 4xx å®¢æˆ·ç«¯å‡ºé”™ è¯·æ±‚åŒ…æ‹¬é”™çš„é¡ºåºæˆ–ä¸èƒ½å®Œæˆ 5xx æœåŠ¡å™¨å‡ºé”™ æœåŠ¡å™¨æ— æ³•å®Œæˆæ˜¾ç„¶æœ‰æ•ˆçš„è¯·æ±‚ 403: Forbidden 404: Not Found HTTPSæ¡æ‰‹,å¯¹ç§°åŠ å¯†,éå¯¹ç§°åŠ å¯†,TLS/SSL,RSA CSRFå’ŒXSS # CSRF(Cross-site request forgery)è·¨ç«™è¯·æ±‚ä¼ªé€  XSS(Cross Site Scripting)è·¨ç«™è„šæœ¬æ”»å‡» CSRF é‡ç‚¹åœ¨è¯·æ±‚ï¼ŒXSS é‡ç‚¹åœ¨è„šæœ¬ã€‚ CGIå’ŒWSGI # CGIæ˜¯é€šç”¨ç½‘å…³æ¥å£ï¼Œæ˜¯è¿æ¥webæœåŠ¡å™¨å’Œåº”ç”¨ç¨‹åºçš„æ¥å£ï¼Œç”¨æˆ·é€šè¿‡CGIæ¥è·å–åŠ¨æ€æ•°æ®æˆ–æ–‡ä»¶ç­‰ã€‚ CGIç¨‹åºæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºï¼Œå®ƒå¯ä»¥ç”¨å‡ ä¹æ‰€æœ‰è¯­è¨€æ¥å†™ï¼ŒåŒ…æ‹¬perlï¼Œcï¼Œluaï¼Œpythonç­‰ç­‰ã€‚\nWSGI, Web Server Gateway Interfaceï¼Œæ˜¯Pythonåº”ç”¨ç¨‹åºæˆ–æ¡†æ¶å’ŒWebæœåŠ¡å™¨ä¹‹é—´çš„ä¸€ç§æ¥å£ï¼ŒWSGIçš„å…¶ä¸­ä¸€ä¸ªç›®çš„å°±æ˜¯è®©ç”¨æˆ·å¯ä»¥ç”¨ç»Ÿä¸€çš„è¯­è¨€(Python)ç¼–å†™å‰åç«¯ã€‚\n"},{"id":49,"href":"/docs/programmer/cloudnative/redis/the-basics-of-redis/","title":"RedisåŸºç¡€","section":"ä¸­é—´ä»¶","content":" åŸºç¡€ç†è®º # æ¦‚å†µ # Redis (Remote Dictionary Server) æ˜¯ä¸€ä¸ªå¼€æºçš„ã€æ”¯æŒç½‘ç»œã€åŸºäºå†…å­˜ã€å¯é€‰æŒä¹…æ€§çš„é”®å€¼å¯¹æ•°æ®åº“ã€‚å®ƒæ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œå¦‚å­—ç¬¦ä¸²ï¼ˆstringsï¼‰ã€åˆ—è¡¨ï¼ˆlistsï¼‰ã€é›†åˆï¼ˆsetsï¼‰ã€æœ‰åºé›†åˆï¼ˆsorted setsï¼‰ä»¥åŠæ•£åˆ—ï¼ˆhashesï¼‰ã€ä½å›¾ï¼ˆbitmapsï¼‰ã€è¶…æ—¥å¿—ï¼ˆhyperloglogsï¼‰å’Œåœ°ç†ç©ºé—´ï¼ˆgeospatialï¼‰ç´¢å¼•åŠå¾„æŸ¥è¯¢ã€‚\nç‰¹ç‚¹åŒ…æ‹¬ï¼š\né«˜æ€§èƒ½ï¼šå› ä¸ºæ•°æ®ä¸»è¦åœ¨å†…å­˜ä¸­è¿›è¡Œæ“ä½œï¼Œè¯»å†™é€Ÿåº¦éå¸¸å¿«ã€‚ ä¸°å¯Œçš„æ•°æ®ç±»å‹ï¼šæä¾›å¤šç§æ•°æ®ç»“æ„æ¥æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„éœ€æ±‚ã€‚ åŸå­æ€§ï¼šæ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œæ”¯æŒäº‹åŠ¡ï¼ˆé€šè¿‡MULTI/EXECå‘½ä»¤ï¼‰ã€‚ ä¸°å¯Œçš„åŠŸèƒ½ï¼šæ”¯æŒå‘å¸ƒè®¢é˜…ã€Luaè„šæœ¬ã€äº‹åŠ¡ç­‰ã€‚ æ•°æ®ç»“æ„ # Redisæä¾›çš„æ•°æ®ç»“æ„åŒ…æ‹¬ï¼š Redis æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„æ•°æ®ç±»å‹ä»¥åŠå®ƒä»¬çš„ç®€è¦æè¿°å’Œä½¿ç”¨åœºæ™¯ï¼š\næ•°æ®ç±»å‹ æè¿° ä½¿ç”¨åœºæ™¯ String äºŒè¿›åˆ¶å®‰å…¨å­—ç¬¦ä¸²ï¼Œæœ€å¤§å¯ä»¥å­˜å‚¨ 512MB å­˜å‚¨æ–‡æœ¬æˆ–äºŒè¿›åˆ¶æ•°æ®ï¼Œå¦‚ç¼“å­˜ç”¨æˆ·ä¸ªäººä¿¡æ¯ç­‰ List æœ‰åºé›†åˆï¼ŒæŒ‰æ’å…¥é¡ºåºæ’åº æ¶ˆæ¯é˜Ÿåˆ—ã€æ—¶é—´çº¿ã€æœ€æ–°æ¶ˆæ¯åˆ—è¡¨ Set æ— åºé›†åˆï¼Œå…ƒç´ ä¸é‡å¤ æ ‡ç­¾ã€ç¤¾äº¤ç½‘ç»œä¸­çš„æœ‹å‹å…³ç³»ç­‰ Sorted Set æœ‰åºé›†åˆï¼Œå…ƒç´ ä¸é‡å¤ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªæµ®ç‚¹æ•°åˆ†æ•° æ’è¡Œæ¦œã€å¸¦æƒé‡çš„é›†åˆ Hash é”®å€¼å¯¹é›†åˆï¼Œé€‚ç”¨äºå­˜å‚¨å¯¹è±¡ å­˜å‚¨ã€è®¿é—®å’Œä¿®æ”¹å¯¹è±¡å±æ€§ Bitmaps é€šè¿‡ä½æ¥è¡¨ç¤ºæ•°æ®çš„æ•°æ®ç±»å‹ï¼Œé€‚åˆåšè®¡æ•°ç»Ÿè®¡ åœ¨çº¿çŠ¶æ€ã€ç‰¹æ€§æ ‡å¿—ã€ç»Ÿè®¡ç­‰ HyperLogLog è¿‘ä¼¼å»é‡è®¡æ•°çš„æ•°æ®ç»“æ„ å¤§æ•°æ®é‡çš„è®¡æ•°ï¼Œå¦‚ç»Ÿè®¡ç‹¬ç«‹ IP è®¿é—®æ•°é‡ Geospatial å­˜å‚¨åœ°ç†ä½ç½®ä¿¡æ¯ï¼Œå¹¶è¿›è¡Œç›¸å…³åœ°ç†æ“ä½œ å‚¨å­˜ç»çº¬åº¦ï¼ŒæŸ¥è¯¢é™„è¿‘çš„åœ°ç‚¹ Streams Redis 5.0 æ–°å¢çš„æ•°æ®ç±»å‹ï¼Œæ˜¯ä¸€ä¸ªå¯æŒä¹…åŒ–çš„æ—¥å¿—æ•°æ®ç»“æ„ å®ç°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå‘å¸ƒ/è®¢é˜…æ¨¡å¼ï¼Œæ—¥å¿—è®°å½• Redis ä¹‹æ‰€ä»¥å¿«é€Ÿï¼Œä¸»è¦åŸå› æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š # å†…å­˜å­˜å‚¨ï¼šRedis å°†æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå†…å­˜çš„è¯»å†™é€Ÿåº¦è¿œé«˜äºç¡¬ç›˜ã€‚ æ•°æ®ç»“æ„ç®€å•ï¼šRedis çš„æ•°æ®ç»“æ„è®¾è®¡ç®€å•ç›´è§‚ï¼Œæ˜“äºé«˜æ•ˆæ“ä½œã€‚ éé˜»å¡ IOï¼šRedis ä½¿ç”¨éé˜»å¡ IO å’Œå¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œå¯ä»¥å¤„ç†å¤šä¸ªå¹¶å‘è¿æ¥ã€‚ å•çº¿ç¨‹æ¨¡å‹ï¼šRedis å¤§éƒ¨åˆ†æ“ä½œæ˜¯å•çº¿ç¨‹æ‰§è¡Œï¼Œé¿å…äº†å¤šçº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚ Redisé«˜æ€§èƒ½IOæ¨¡å‹ # Redisçš„IOæ¨¡å‹ä½¿ç”¨çš„æ˜¯éé˜»å¡IOå¤ç”¨æŠ€æœ¯ï¼Œä¸»è¦æ˜¯epollä½œä¸ºIOå¤šè·¯å¤ç”¨æŠ€æœ¯çš„å®ç°æ–¹å¼ã€‚å®ƒé€šè¿‡å•çº¿ç¨‹äº‹ä»¶å¾ªç¯æ¥å¤„ç†æ‰€æœ‰å®¢æˆ·ç«¯è¯·æ±‚ï¼Œç¡®ä¿ç»å¤§éƒ¨åˆ†è¯·æ±‚éƒ½æ˜¯éé˜»å¡çš„ï¼Œå¹¶ä¸”ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼æ¥æé«˜æ€§èƒ½ã€‚\nå¼•ç”¨ä¸€äº›æ•°æ®çš„è¯ï¼Œå¯ä»¥æåŠä»¥ä¸‹å‡ ç‚¹ï¼š\nå†…å­˜è¯»å†™é€Ÿåº¦ï¼šNVMe SSD çš„ IOPS å¯ä»¥è¾¾åˆ°æ•°åä¸‡åˆ°æ•°ç™¾ä¸‡ï¼Œè€Œå†…å­˜çš„ IOPS å¯ä»¥è¾¾åˆ°åƒä¸‡çº§åˆ«ï¼Œå»¶è¿Ÿé€šå¸¸å°äº100å¾®ç§’ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå†…å­˜çš„é€Ÿåº¦é€šå¸¸æ˜¯ç¡¬ç›˜çš„æ•°åƒå€ç”šè‡³æ›´é«˜ã€‚ æ€§èƒ½è¡¨ç°ï¼šæ ¹æ® Redis å®˜æ–¹ç»™å‡ºçš„æ•°æ®ï¼Œåœ¨ä¸€ä¸ªæ ‡å‡† Linux ç³»ç»Ÿä¸Šï¼ŒRedis å¯ä»¥è¾¾åˆ°æ¯ç§’10ä¸‡çº§åˆ«çš„è¯»å†™æ“ä½œï¼ˆè¿™ä¸ªæ•°å­—å¯èƒ½å› é…ç½®ã€æ•°æ®ç±»å‹å’Œå…·ä½“æ“ä½œè€Œå¼‚ï¼‰ã€‚ ä»¥ä¸Šæ•°æ®åªæ˜¯ä¸ºäº†è¯´æ˜ Redis ä¸ºä»€ä¹ˆå¿«é€Ÿï¼Œå…·ä½“çš„æ€§èƒ½æŒ‡æ ‡ä¼šæ ¹æ®ä½¿ç”¨ç¯å¢ƒã€ç¡¬ä»¶é…ç½®ä»¥åŠå…·ä½“çš„å·¥ä½œè´Ÿè½½è€Œæœ‰æ‰€å˜åŒ–ã€‚\næŒä¹…åŒ–æœºåˆ¶ # Redisæä¾›ä¸¤ç§æŒä¹…åŒ–æœºåˆ¶ï¼šRDBï¼ˆSnapshottingï¼‰å’ŒAOFï¼ˆAppend-only fileï¼‰ã€‚\nRDBï¼šåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…ç”Ÿæˆæ•°æ®é›†çš„æ—¶é—´ç‚¹å¿«ç…§ã€‚ AOFï¼šè®°å½•æœåŠ¡å™¨æ¥æ”¶åˆ°çš„æ¯ä¸ªå†™æ“ä½œæŒ‡ä»¤ï¼Œå¹¶åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶é‡æ–°æ‰§è¡Œè¿™äº›å‘½ä»¤æ¥æ¢å¤æ•°æ®ã€‚ ç¼“å­˜æ·˜æ±°/åˆ  # å½“å†…å­˜ä¸è¶³æ—¶ï¼ŒRedisä¼šæ ¹æ®é…ç½®çš„ç­–ç•¥æ¥ç§»é™¤ä¸€äº›é”®ï¼Œä»¥é‡Šæ”¾ç©ºé—´ã€‚å¸¸è§çš„æ·˜æ±°ç­–ç•¥åŒ…æ‹¬ï¼š\nnoevictionï¼šä¸è¿›è¡Œæ·˜æ±°ï¼Œè¿”å›é”™è¯¯ã€‚ allkeys-lruï¼šä»æ‰€æœ‰é”®ä¸­æ·˜æ±°æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é”®ã€‚ volatile-lruï¼šä»è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ä¸­æ·˜æ±°æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é”®ã€‚ å…¶ä»– Redis ç¼“å­˜æ·˜æ±°ç­–ç•¥æ˜¯æŒ‡å½“å†…å­˜ä½¿ç”¨è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶ï¼ŒRedis ä¼šæŒ‰ç…§ç‰¹å®šçš„ç­–ç•¥è‡ªåŠ¨ç§»é™¤ä¸€äº›é”®å€¼å¯¹ï¼Œä»¥é‡Šæ”¾ç©ºé—´ä¾›æ–°çš„å†™å…¥æ“ä½œä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯ Redis æ”¯æŒçš„å‡ ç§ç¼“å­˜æ·˜æ±°ç­–ç•¥ï¼š\nç­–ç•¥ æè¿° noeviction ä¸è¿›è¡Œä»»ä½•æ·˜æ±°ï¼Œå°è¯•å†™å…¥å¯¼è‡´è¶…å‡ºå†…å­˜é™åˆ¶æ—¶è¿”å›é”™è¯¯ä¿¡æ¯ allkeys-lru æ ¹æ®æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ï¼ˆLeast Recently Usedï¼‰ï¼Œæ·˜æ±°é•¿æ—¶é—´æœªè¢«æŸ¥è¯¢æˆ–ä¿®æ”¹çš„é”® volatile-lru åªæ ¹æ® LRU ç®—æ³•æ·˜æ±°è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”® allkeys-random éšæœºç§»é™¤é”® volatile-random éšæœºç§»é™¤å·²ç»è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”® volatile-ttl ç§»é™¤å³å°†è¿‡æœŸçš„é”® volatile-lfu (\u0026gt;=4.0) æ ¹æ®æœ€ä¸ç»å¸¸ä½¿ç”¨ç®—æ³•ï¼ˆLeast Frequently Usedï¼‰ï¼Œæ·˜æ±°æ•°æ®è®¿é—®é¢‘ç‡ä½çš„é”® allkeys-lfu (\u0026gt;=4.0) åŒä¸Šï¼Œä½†æ˜¯é’ˆå¯¹æ‰€æœ‰é”®ï¼Œä¸ä»…ä»…æ˜¯é‚£äº›è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”® åœ¨è¿™äº›ç­–ç•¥ä¸­ï¼ŒLFU å’Œ LRU æ˜¯åŸºäºæ•°æ®çš„è®¿é—®æ¨¡å¼æ¥å†³å®šå“ªä¸ªé”®æœ€æœ‰å¯èƒ½è¢«æ·˜æ±°ï¼š\nLRUï¼ˆLeast Recently Usedï¼‰ï¼šè¿™ç§ç­–ç•¥å‡è®¾å¦‚æœæ•°æ®æœ€è¿‘å¾ˆå°‘ç”¨åˆ°ï¼Œé‚£ä¹ˆåœ¨å°†æ¥ä¹Ÿä¸å¤ªå¯èƒ½è¢«ç”¨åˆ°ã€‚å› æ­¤ï¼Œå½“éœ€è¦æ·˜æ±°æ•°æ®æ¥è…¾å‡ºç©ºé—´æ—¶ï¼Œå®ƒä¼šé€‰å–æœ€é•¿æ—¶é—´æœªè¢«è®¿é—®çš„æ•°æ®ã€‚\nLFUï¼ˆLeast Frequently Usedï¼‰ï¼šè¿™ä¸ªç­–ç•¥åˆ™æ˜¯åŸºäºæ•°æ®è¢«è®¿é—®çš„é¢‘ç‡ï¼Œåˆ é™¤é‚£äº›è®¿é—®æ¬¡æ•°æœ€å°‘çš„æ•°æ®ã€‚ç›¸æ¯”äº LRUï¼ŒLFU åœ¨å¤„ç†â€œçƒ­ç‚¹æ•°æ®â€ä¸Šè¡¨ç°æ›´åŠ å‡ºè‰²ã€‚\nä¸Šè¿°æ·˜æ±°ç­–ç•¥å¯ä»¥é€šè¿‡åœ¨ redis.conf æ–‡ä»¶ä¸­è®¾ç½® maxmemory-policy æ¥é€‰æ‹©ï¼Œä¾‹å¦‚ï¼š\nmaxmemory-policy allkeys-lru Redis å¸¸ç”¨çš„æ˜¾å¼åˆ é™¤æ“ä½œï¼Œå¦‚ï¼š\nDEL å‘½ä»¤ç›´æ¥åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªé”®ã€‚ EXPIRE å‘½ä»¤è®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ï¼Œåˆ°æœŸåé”®è‡ªåŠ¨è¢«åˆ é™¤ã€‚ SET å‘½ä»¤åœ¨è®¾ç½®æ–°å€¼çš„åŒæ—¶å¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚ é˜»å¡ç‚¹ä¸å¼‚æ­¥æœºåˆ¶ # Redis æ˜¯ä¸€ä¸ªåŸºäºäº‹ä»¶é©±åŠ¨çš„æœåŠ¡å™¨ï¼Œå®ƒä½¿ç”¨éé˜»å¡ I/O å’Œäº‹ä»¶é€šçŸ¥æœºåˆ¶æ¥å¤„ç†å¹¶å‘è¿æ¥ã€‚è¿™æ„å‘³ç€ Redis åœ¨æ‰§è¡ŒæŸäº›æ“ä½œæ—¶ä¸ä¼šè¢«é˜»å¡ç­‰å¾… I/O æ“ä½œçš„å®Œæˆï¼Œä»è€Œå¯ä»¥åœ¨ç­‰å¾…ç£ç›˜æˆ–ç½‘ç»œ I/O æ—¶ç»§ç»­å¤„ç†å…¶ä»–ä»»åŠ¡ã€‚\né˜»å¡ç‚¹ï¼š\nå°½ç®¡ Redis å¤§éƒ¨åˆ†æ“ä½œæ˜¯éé˜»å¡çš„ï¼Œä½†ä»æœ‰ä¸€äº›æƒ…å†µä¼šå¼•èµ·é˜»å¡ï¼š\nå‘½ä»¤ BLPOPã€BRPOPã€BRPOPLPUSH ç”¨äºåˆ—è¡¨æ“ä½œæ—¶ï¼Œå¦‚æœåˆ—è¡¨ä¸ºç©ºï¼Œä¼šå¯¼è‡´å®¢æˆ·ç«¯é˜»å¡ç›´åˆ°æœ‰æ–°å…ƒç´ æ’å…¥ã€‚ å‘å¸ƒè®¢é˜… (PUBLISH/SUBSCRIBE å‘½ä»¤) ä¸­ï¼Œå®¢æˆ·ç«¯å¯èƒ½ä¼šç­‰å¾…æ–°æ¶ˆæ¯çš„åˆ°æ¥ã€‚ å¯¹äºæ…¢æŸ¥è¯¢å’Œå¤§æ•°æ®é‡æ“ä½œï¼ˆå¦‚ KEYS * æˆ– SMEMBERSï¼‰ï¼Œå¯èƒ½ä¼šé€ æˆä¸´æ—¶é˜»å¡ã€‚ å¼‚æ­¥æœºåˆ¶ï¼š\nä¸ºäº†å‡å°‘é˜»å¡æ—¶é—´ï¼ŒRedis æä¾›äº†å¼‚æ­¥å¤„ç†èƒ½åŠ›ï¼š\nä½¿ç”¨ AOFï¼ˆAppend Only Fileï¼‰æ—¥å¿—æ—¶ï¼ŒRedis æ”¯æŒåå°å¼‚æ­¥è¿›è¡Œç£ç›˜å†™å…¥ã€‚ ä¸»ä»åŒæ­¥å’Œ RDB å¿«ç…§ç”Ÿæˆä¹Ÿå¯ä»¥å¼‚æ­¥æ‰§è¡Œï¼Œä»¥é¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚ å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ç®¡é“ï¼ˆpipeliningï¼‰æŠ€æœ¯åŒæ—¶å‘é€å¤šä¸ªå‘½ä»¤ï¼Œç„¶åä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰å“åº”ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç½‘ç»œå»¶è¿Ÿå¸¦æ¥çš„å½±å“ã€‚ åŸå­æ“ä½œã€ç®¡é“ã€äº‹åŠ¡ # åŸå­æ“ä½œï¼š\nåœ¨ Redis ä¸­ï¼Œå•ä¸ªå‘½ä»¤æ€»æ˜¯åŸå­æ€§æ‰§è¡Œçš„ã€‚è¿™æ„å‘³ç€å½“ä¸€ä¸ªå‘½ä»¤åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸ä¼šè¢«å…¶ä»–å‘½ä»¤æ‰“æ–­ã€‚ä¾‹å¦‚ï¼ŒINCR å‘½ä»¤å¢åŠ ä¸€ä¸ªæ•´æ•°å€¼ï¼Œå¹¶è¿”å›æ–°å€¼ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯åŸå­çš„ã€‚\nç®¡é“ï¼ˆPipeliningï¼‰ï¼š\nç®¡é“æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œå¯ä»¥å°†å¤šä¸ªå‘½ä»¤æ‰“åŒ…åä¸€æ¬¡æ€§å‘é€ç»™æœåŠ¡å™¨ï¼Œè€Œæ— éœ€ç­‰å¾…æ¯ä¸ªå‘½ä»¤çš„å“åº”ã€‚è¿™å¯ä»¥æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜å»¶è¿Ÿç½‘ç»œç¯å¢ƒä¸­ã€‚ç®¡é“å‡å°‘äº†ç½‘ç»œå¾€è¿”æ¬¡æ•°ï¼Œä½¿å¾—æ‰¹é‡æ“ä½œæ›´åŠ é«˜æ•ˆã€‚\näº‹åŠ¡ï¼š\nRedis çš„äº‹åŠ¡åŠŸèƒ½é€šè¿‡ MULTIã€EXECã€DISCARD å’Œ WATCH å‘½ä»¤å®ç°ã€‚ä¸€ä¸ªäº‹åŠ¡ç”±ä¸€ç³»åˆ—å‘½ä»¤ç»„æˆï¼Œè¿™äº›å‘½ä»¤ä¼šè¢«åºåˆ—åŒ–å¹¶æŒ‰é¡ºåºæ‰§è¡Œã€‚ä»¥ä¸‹æ˜¯äº‹åŠ¡çš„å…³é”®ç‚¹ï¼š\nMULTI å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ã€‚ è¿ç»­è¾“å…¥å¤šä¸ªå‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯è¢«æ”¾å…¥é˜Ÿåˆ—ä¸­ã€‚ EXEC æ‰§è¡Œæ‰€æœ‰é˜Ÿåˆ—ä¸­çš„å‘½ä»¤ã€‚ å¦‚æœåœ¨æ‰§è¡Œ EXEC ä¹‹å‰è°ƒç”¨ DISCARDï¼Œåˆ™å¯ä»¥å–æ¶ˆäº‹åŠ¡ã€‚ WATCH å¯ä»¥ç›‘è§†ä¸€ä¸ªæˆ–ï¿½ï¿½ï¿½ä¸ªé”®ï¼Œå¦‚æœåœ¨äº‹åŠ¡å¼€å§‹ä¹‹åä»»ä½•ç›‘è§†çš„é”®è¢«ä¿®æ”¹ï¼Œåˆ™äº‹åŠ¡å°†è¢«ä¸­æ–­ã€‚ å†…å­˜ç¢ç‰‡ # å†…å­˜ç¢ç‰‡æ˜¯æŒ‡ç”±äºå¤šæ¬¡ç”³è¯·å’Œé‡Šæ”¾å†…å­˜å¯¼è‡´å¯ç”¨å†…å­˜ç¢ç‰‡åŒ–ï¼Œä»è€Œé™ä½å†…å­˜ä½¿ç”¨æ•ˆç‡ã€‚åœ¨ Redis ä¸­ï¼Œå†…å­˜ç¢ç‰‡åŒ–å¯ä»¥å› ä»¥ä¸‹åŸå› äº§ç”Ÿï¼š\né¢‘ç¹åœ°åˆ›å»ºå’Œåˆ é™¤å¤§é‡çš„å°å¯¹è±¡ã€‚ åˆ†é…ç»™å­—ç¬¦ä¸²æˆ–è€…åˆ—è¡¨ç­‰æ•°æ®ç±»å‹çš„å†…å­˜å¤§å°åŠ¨æ€å˜åŒ–ã€‚ å†…å­˜ç¢ç‰‡é—®é¢˜å¯èƒ½å¯¼è‡´ Redis å ç”¨æ›´å¤šçš„ç‰©ç†å†…å­˜ï¼Œè¶…å‡ºå®é™…æ•°æ®éœ€è¦çš„å¤§å°ã€‚å¯ä»¥é€šè¿‡ info memory å‘½ä»¤æ£€æŸ¥å†…å­˜ç›¸å…³çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬å†…å­˜ç¢ç‰‡ç‡ï¼ˆmemory fragmentation ratioï¼‰ï¼Œå½“è¿™ä¸ªæ¯”ç‡è¶…è¿‡ 1.5 æ—¶ï¼Œå°±è¯´æ˜å­˜åœ¨ä¸€å®šçš„å†…å­˜ç¢ç‰‡é—®é¢˜ã€‚\nä¸ºäº†è§£å†³å†…å­˜ç¢ç‰‡é—®é¢˜ï¼Œå¯ä»¥é‡‡å–ä»¥ä¸‹æªæ–½ï¼š\nå®šæœŸé‡å¯ Redis æœåŠ¡ã€‚ ä½¿ç”¨ jemalloc ç­‰å…ˆè¿›çš„å†…å­˜åˆ†é…å™¨ã€‚ é€‚å½“è°ƒæ•´ Redis ä¸­å…³äºå¯¹è±¡é‡ç”¨çš„ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡è°ƒæ•´ maxmemory ç­–ç•¥æ¥æ§åˆ¶å†…å­˜ä½¿ç”¨ï¼Œæˆ–è€…ä½¿ç”¨ lazyfree-lazy-eviction ç­‰å‚æ•°ä»¥æ›´ä¼˜åŒ–çš„æ–¹å¼é‡Šæ”¾å†…å­˜ã€‚ ä¼˜åŒ–æ•°æ®ç»“æ„å’Œè®¿é—®æ¨¡å¼ã€‚æ¯”å¦‚ï¼Œå°½é‡é¿å…å­˜å‚¨è¿‡å¤šçš„å°å¯¹è±¡ï¼›ä½¿ç”¨å“ˆå¸Œè¡¨ï¼ˆhashesï¼‰æ¥å­˜å‚¨å¯¹è±¡é›†åˆè€Œéå•ç‹¬çš„å­—ç¬¦ä¸²é”®ï¼›å¯¹å¤§å‹åˆ—è¡¨è¿›è¡Œåˆ†é¡µå¤„ç†ç­‰ã€‚ ç›‘æ§å¹¶å‰”é™¤é•¿æ—¶é—´æœªä½¿ç”¨çš„é”®ï¼Œè¿™å¯ä»¥é€šè¿‡è®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ï¼ˆTTLï¼‰æ¥å®ç°ã€‚ å¦å¤–ï¼ŒRedis 4.0 åŠä»¥ä¸Šç‰ˆæœ¬å¼•å…¥äº† active defragmentation åŠŸèƒ½ï¼Œå®ƒå…è®¸ Redis åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°å‡å°‘å†…å­˜ç¢ç‰‡ï¼Œè€Œæ— éœ€é‡å¯æœåŠ¡ã€‚è¿™ä¸ªç‰¹æ€§å¯ä»¥åœ¨ redis.conf é…ç½®æ–‡ä»¶ä¸­å¼€å¯ï¼Œå¹¶å…è®¸ä½ é…ç½®ä¸åŒçš„å‚æ•°æ¥æ§åˆ¶ç¢ç‰‡æ•´ç†çš„è¡Œä¸ºã€‚\n"},{"id":50,"href":"/docs/programmer/cloudnative/redis/advanced-knowledge-of-redis/","title":"Redisè¿›é˜¶","section":"ä¸­é—´ä»¶","content":" ä¸»ä»æ¶æ„-ä¸»ä»åŒæ­¥ # åœ¨Redisä¸­ï¼Œä¸»ä»åŒæ­¥æ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®å¤åˆ¶æ–¹å¼ï¼Œå®ƒå…è®¸ä¸€ä¸ªæˆ–å¤šä¸ªä»æœåŠ¡å™¨ï¼ˆslaveï¼‰è·å¾—ä¸ä¸»æœåŠ¡å™¨ï¼ˆmasterï¼‰ç›¸åŒçš„æ•°æ®å‰¯æœ¬ã€‚è¿™ç§æ¶æ„æä¾›äº†æ•°æ®çš„å†—ä½™å’Œè¯»å–æ‰©å±•æ€§ã€‚\nå…¨é‡å¤åˆ¶ï¼šå½“ä¸€ä¸ªä»æœåŠ¡å™¨ç¬¬ä¸€æ¬¡è¿æ¥åˆ°ä¸»æœåŠ¡å™¨æ—¶ï¼Œæˆ–æ˜¯ç”±äºæŸäº›åŸå› éœ€è¦é‡æ–°åŒæ­¥æ—¶ï¼Œä¼šè¿›è¡Œå…¨é‡å¤åˆ¶ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»æœåŠ¡å™¨ä¼šç”Ÿæˆä¸€ä¸ªå½“å‰æ‰€æœ‰æ•°æ®çš„å¿«ç…§ï¼Œå¹¶å°†è¿™ä¸ªå¿«ç…§å‘é€è‡³è¯·æ±‚åŒæ­¥çš„ä»æœåŠ¡å™¨ã€‚ä»æœåŠ¡å™¨æ¥æ”¶åˆ°æ•°æ®åï¼ŒåŠ è½½åˆ°è‡ªå·±çš„æ•°æ®ç©ºé—´å†…ã€‚\néƒ¨åˆ†å¤åˆ¶ï¼šä¸€æ—¦å®Œæˆäº†å…¨é‡å¤åˆ¶ï¼Œå¦‚æœä»æœåŠ¡å™¨æ–­å¼€è¿æ¥åˆé‡æ–°è¿æ¥ï¼Œä¸”ä¸­æ–­æ—¶é—´ä¸é•¿ï¼Œä¸»æœåŠ¡å™¨å¯ä»¥åªå‘é€è¿™æ®µæ—¶é—´å†…å‘ç”Ÿå˜åŒ–çš„æ•°æ®ç»™ä»æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯å†æ¬¡è¿›è¡Œå…¨é‡å¤åˆ¶ã€‚è¿™ä¾èµ–äºä¸»æœåŠ¡å™¨çš„å¤åˆ¶ç§¯å‹ç¼“å†²åŒºæ¥å­˜å‚¨æœ€è¿‘çš„å†™å‘½ä»¤ã€‚\nåŒæ­¥ç­–ç•¥ï¼šä¸ºäº†ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œä»æœåŠ¡å™¨åœ¨åˆå§‹åŒæ­¥å®Œæˆä¹‹å‰ä¸ä¼šå¯¹å¤–æä¾›æœåŠ¡ã€‚åœ¨æ—¥å¸¸è¿è¡Œæ—¶ï¼Œä¸»æœåŠ¡å™¨ä¼šå°†å†™å‘½ä»¤åŒæ—¶å‘é€ç»™æ‰€æœ‰çš„ä»æœåŠ¡å™¨ï¼Œä»¥æ­¤æ¥ä¿è¯æ•°æ®çš„å®æ—¶ä¸€è‡´æ€§ã€‚\nä¸»ä»åŒæ­¥ä½¿å¾—ä»æœåŠ¡å™¨å¯ä»¥æ‰¿æ‹…è¯»æ“ä½œï¼Œå‡è½»ä¸»æœåŠ¡å™¨çš„è´Ÿè½½ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥åœ¨ä¸»æœåŠ¡å™¨é‡åˆ°æ•…éšœæ—¶ï¼Œè¿›è¡Œæ•…éšœè½¬ç§»ã€‚\nä¸»ä»å“¨å…µæ¶æ„ # Rediså“¨å…µï¼ˆSentinelï¼‰ç³»ç»Ÿæ˜¯ç”¨äºç®¡ç†å¤šä¸ªRedisæœåŠ¡å™¨çš„ç³»ç»Ÿã€‚è¯¥ä½“ç³»ç»“æ„å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\nç›‘æ§ï¼šå“¨å…µä¼šç›‘æ§ä¸»ä»æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿ä½œã€‚ è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼šå¦‚æœä¸»æœåŠ¡å™¨å‡ºç°æ•…éšœï¼Œå“¨å…µå¯ä»¥è‡ªåŠ¨é€‰ä¸¾æ–°çš„ä¸»æœåŠ¡å™¨ï¼Œå¹¶è®©åŸæ¥çš„ä»æœåŠ¡å™¨æŒ‡å‘æ–°çš„ä¸»æœåŠ¡å™¨ã€‚ é…ç½®æä¾›è€…ï¼šå“¨å…µè¿˜ä¼šå°†å½“å‰çš„ä¸»æœåŠ¡å™¨åœ°å€æä¾›ç»™å®¢æˆ·ç«¯ï¼Œç¡®ä¿å®¢æˆ·ç«¯æ€»æ˜¯è¿æ¥åˆ°æ­£ç¡®çš„ä¸»æœåŠ¡å™¨ã€‚ å“¨å…µæœºåˆ¶é€šè¿‡è¿™äº›åŠŸèƒ½å¢åŠ äº†Redisç¯å¢ƒçš„é«˜å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚\nåˆ‡ç‰‡é›†ç¾¤-Redis Cluster # Redis Clusteræ˜¯Redisçš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆã€‚å®ƒæ”¯æŒæ•°æ®çš„æ°´å¹³åˆ†ç‰‡ï¼Œä»¥ä¸‹æ˜¯å…¶å…³é”®ç‰¹æ€§ï¼š\nè‡ªåŠ¨åˆ†ç‰‡ï¼šï¿½ï¿½åŠ¨å°†æ•°æ®åˆ†å¸ƒåœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªèŠ‚ç‚¹åªä¿å­˜æ•´ä¸ªæ•°æ®é›†çš„ä¸€éƒ¨åˆ†ã€‚ é«˜å¯ç”¨æ€§ï¼šé‡‡ç”¨ä¸»ä»å¤åˆ¶æ¨¡å‹ï¼Œå³ä½¿åœ¨å¤šä¸ªèŠ‚ç‚¹å¤±è´¥çš„æƒ…å†µä¸‹ä¹Ÿèƒ½ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚ æ— ä¸­å¿ƒè®¾è®¡ï¼šæ²¡æœ‰ä¸­å¿ƒèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¿å­˜ç€æ•´ä¸ªé›†ç¾¤çŠ¶æ€çš„ä¸€éƒ¨åˆ†ï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡Gossipåè®®äº¤æ¢ä¿¡æ¯ã€‚ Redis Clusteré€šè¿‡å¯¹é”®è¿›è¡ŒCRC16è®¡ç®—å¹¶å¯¹16384å–ä½™æ•°æ¥å†³å®šå°†é”®åˆ†é…åˆ°å“ªä¸ªæ§½ä½ï¼Œæ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ä¸€éƒ¨åˆ†æ§½ä½ï¼Œä»è€Œå®ç°è´Ÿè½½å‡è¡¡ã€‚\nRedis Cluster é€šä¿¡å¼€é”€ # ç”±äºRedis ClusterèŠ‚ç‚¹é—´éœ€è¦é¢‘ç¹åœ°äº¤æ¢æ¶ˆæ¯ä»¥ç»´æŠ¤é›†ç¾¤çŠ¶æ€ï¼Œå› æ­¤ä¼šäº§ç”Ÿé¢å¤–çš„é€šä¿¡å¼€é”€ï¼š\nGossipé€šä¿¡ï¼šèŠ‚ç‚¹é—´é€šè¿‡Gossipåè®®å®šæœŸäº¤æ¢ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ•°æ®è¿ç§»ã€æ•…éšœæ£€æµ‹ç­‰ã€‚ é‡å®šå‘æ“ä½œï¼šå®¢æˆ·ç«¯å¯èƒ½ä¼šå°è¯•å‘ä¸åŒ…å«æ•°æ®æ‰€åœ¨æ§½çš„èŠ‚ç‚¹å‘èµ·è¯·æ±‚ï¼Œè¿™æ—¶èŠ‚ç‚¹ä¼šè¿”å›ä¸€ä¸ªé‡å®šå‘ä¿¡æ¯ åˆ‡ç‰‡é›†ç¾¤-Codis\nRedis åˆ†å¸ƒå¼é”æ˜¯ä¸€ç§ç”¨äºå¤šä¸ªè®¡ç®—èŠ‚ç‚¹ä¹‹é—´åŒæ­¥è®¿é—®å…±äº«èµ„æºçš„æœºåˆ¶ã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå½“å¤šä¸ªè¿›ç¨‹éœ€è¦åŒæ—¶è®¿é—®æŸäº›æ•°æ®æˆ–æ‰§è¡ŒæŸäº›ä»»åŠ¡æ—¶ï¼Œä¸ºäº†é¿å…ç«æ€æ¡ä»¶ï¼ˆrace conditionsï¼‰å’Œæ•°æ®ä¸ä¸€è‡´ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼é”æ¥ä¿è¯åœ¨åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªè¿›ç¨‹èƒ½å¤Ÿæ‰§è¡Œç‰¹å®šçš„æ“ä½œã€‚\nRedis åˆ†å¸ƒå¼é”å®ç° # ä¸€ä¸ªå¸¸è§çš„Redisåˆ†å¸ƒå¼é”å®ç°æ˜¯ä½¿ç”¨ Redis çš„ SETNX å‘½ä»¤ï¼ˆSet if not existsï¼‰ã€‚è¿™ä¸ªå‘½ä»¤åªåœ¨é”®ä¸å­˜åœ¨çš„æƒ…å†µä¸‹è®¾ç½®é”®çš„å€¼ï¼Œå¹¶ä¸”è¿”å›æ˜¯å¦æˆåŠŸè®¾ç½®ã€‚ç”±äº SETNX æ˜¯åŸå­æ“ä½œï¼Œå› æ­¤å¯ä»¥ç”¨æ¥å®ç°é”çš„åŠŸèƒ½ã€‚\nå¦ä¸€ä¸ªæ›´åŠ æ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨ Redis 2.6.12 ç‰ˆæœ¬å¼•å…¥çš„ SET å‘½ä»¤ç»“åˆé€‰é¡¹ NXï¼ˆè¡¨ç¤ºåªæœ‰é”®ä¸å­˜åœ¨æ—¶æ‰è¿›è¡Œè®¾ç½®ï¼‰å’Œ PXï¼ˆç»™é”®è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼‰ï¼Œè¿™å¯ä»¥ä¿è¯å³ä½¿åœ¨å®¢æˆ·ç«¯å´©æºƒçš„æƒ…å†µä¸‹ï¼Œé”ä¹Ÿä¼šåœ¨ä¸€å®šæ—¶é—´åè‡ªåŠ¨é‡Šæ”¾ï¼Œé˜²æ­¢æ­»é”ã€‚\nä½¿ç”¨ Redis åˆ†å¸ƒå¼é”çš„æ­¥éª¤ï¼š # å°è¯•è·å–é”\nä½¿ç”¨ SET key value NX PX milliseconds è¿›è¡Œè®¾ç½®ã€‚ å¦‚æœè¿”å› OKï¼Œåˆ™è·å–é”æˆåŠŸã€‚ å¦‚æœè¿”å› nilï¼Œåˆ™è·å–é”å¤±è´¥ã€‚ æ‰§è¡Œä¸šåŠ¡é€»è¾‘\nåœ¨æŒæœ‰é”çš„æ—¶é—´å†…æ‰§è¡Œå¿…è¦çš„æ“ä½œã€‚ é‡Šæ”¾é”\nå®Œæˆæ“ä½œåï¼Œä½¿ç”¨ DEL å‘½ä»¤åˆ é™¤é”®æ¥é‡Šæ”¾é”ã€‚ [!note] æ³¨æ„äº‹é¡¹\nå®‰å…¨æ€§ï¼šä¸ºäº†ç¡®ä¿åªæœ‰è·å¾—é”çš„å®¢æˆ·ç«¯èƒ½å¤Ÿé‡Šæ”¾é”ï¼Œåº”è¯¥å°†é”å’Œä¸€ä¸ªéšæœºç”Ÿæˆçš„å€¼å…³è”èµ·æ¥ï¼Œå¹¶åœ¨è§£é”æ—¶éªŒè¯è¿™ä¸ªå€¼ã€‚ æ­»é”ï¼šé”åº”è¯¥æœ‰ä¸€ä¸ªåˆç†çš„è¿‡æœŸæ—¶é—´ï¼Œä»¥é¿å…å®¢æˆ·ç«¯åœ¨æŒæœ‰é”æ—¶å´©æºƒå¯¼è‡´å…¶ä»–å®¢æˆ·ç«¯æ°¸è¿œæ— æ³•è·å–é”ã€‚ é‡å…¥æ€§ï¼šåœ¨æŸäº›åœºæ™¯ä¸‹ï¼ŒåŒä¸€ä¸ªå®¢æˆ·ç«¯å¯èƒ½éœ€è¦å†æ¬¡è·å–å·²ç»æŒæœ‰çš„é”ï¼Œéœ€è¦è€ƒè™‘é”çš„é‡å…¥æ€§è®¾è®¡ã€‚ 1. Python å®ç°ç¤ºä¾‹-è‡ªä¿¡ç‰ˆ # ä»¥ä¸‹æ˜¯ä½¿ç”¨ Python å’Œ redis-py åº“å®ç° Redis åˆ†å¸ƒå¼é”çš„ç®€å•ç¤ºä¾‹ï¼š\nimport redis import uuid import time class RedisLock: def __init__(self, redis_client, lock_key): self.redis_client = redis_client self.lock_key = lock_key self.lock_value = None def acquire_lock(self, timeout_ms=5000): \u0026#34;\u0026#34;\u0026#34;å°è¯•è·å–é”\u0026#34;\u0026#34;\u0026#34; self.lock_value = str(uuid.uuid4()) # ç”Ÿæˆå”¯ä¸€æ ‡è¯†ç¬¦ä½œä¸ºé”çš„å€¼ return self.redis_client.set(self.lock_key, self.lock_value, nx=True, px=timeout_ms) def release_lock(self): \u0026#34;\u0026#34;\u0026#34;é‡Šæ”¾é”\u0026#34;\u0026#34;\u0026#34; # Lua è„šæœ¬ï¼Œç”¨äºæ£€æŸ¥å’Œåˆ é™¤é”®ï¼Œä¿è¯æ“ä½œçš„åŸå­æ€§ script = \u0026#34;\u0026#34;\u0026#34; if redis.call(\u0026#34;get\u0026#34;, KEYS[1]) == ARGV[1] then return redis.call(\u0026#34;del\u0026#34;, KEYS[1]) else return 0 end \u0026#34;\u0026#34;\u0026#34; result = self.redis_client.eval(script, 1, self.lock_key, self.lock_value) return result == 1 # å¦‚æœåˆ é™¤æˆåŠŸï¼Œåˆ™è¿”å› True # åˆ›å»º Redis å®¢æˆ·ç«¯ client = redis.Redis(host=\u0026#39;localhost\u0026#39;, port=6379, db=0) # ä½¿ç”¨ RedisLock lock = RedisLock(client, \u0026#34;my_distributed_lock\u0026#34;) if lock.acquire_lock(timeout_ms=10000): # å°è¯•è·å–é”ï¼Œè®¾ç½®10ç§’è¿‡æœŸ try: # æ‰§è¡Œä½ çš„ä¸šåŠ¡é€»è¾‘ print(\u0026#34;Lock acquired. Doing some work...\u0026#34;) time.sleep(2) 2. Python å®ç°ç¤ºä¾‹-å¢åŠ äº†ä¸€ä¸ªé˜²æ­¢æ­»é”å¤„ç† # async def release_pop_lock(package_name: str, identifier: str): lock_key = f\u0026#34;lock_pop_{package_name}\u0026#34; # Lua è„šæœ¬ï¼šå¦‚æœé”çš„å€¼ä¸æ ‡è¯†ç¬¦åŒ¹é…ï¼Œåˆ™åˆ é™¤é” lua_script = \u0026#34;\u0026#34;\u0026#34; if redis.call(\u0026#34;get\u0026#34;, KEYS[1]) == ARGV[1] then return redis.call(\u0026#34;del\u0026#34;, KEYS[1]) else return 0 end \u0026#34;\u0026#34;\u0026#34; # æ‰§è¡Œ Lua è„šæœ¬ result = await rds.eval(lua_script, 1, lock_key, identifier) # å¦‚æœè¿”å›å€¼ä¸º 1ï¼Œè¯´æ˜é”è¢«åˆ é™¤ if result == 1: return True return False async def acquire_pop_lock(package_name: str, acquire_time=2) -\u0026gt; str: \u0026#34;\u0026#34;\u0026#34; è·å–ä¸åˆ°è¡¨ç¤ºæš‚æ—¶ä¸å¯ç”¨ \u0026#34;\u0026#34;\u0026#34; identifier = str(uuid.uuid4()) # ä½¿ç”¨UUIDç”Ÿæˆå”¯ä¸€æ ‡è¯† lock_key = f\u0026#34;lock_pop_{package_name}\u0026#34; end = time.time() + acquire_time while time.time() \u0026lt; end: if await rds.setnx(lock_key, identifier): # å¦‚æœé”ä¸å­˜åœ¨ï¼Œè®¾ç½®å¹¶è¿”å›True await rds.expire(lock_key, 10) return identifier # æˆåŠŸè·å–é”ï¼Œè¿”å›æ ‡è¯†ç¬¦ elif await rds.ttl(lock_key) \u0026lt; 0: await rds.expire(lock_key, 10) await asyncio.sleep(0.01) # è¶…æ—¶æœªèƒ½è·å–é” return \u0026#39;\u0026#39; "},{"id":51,"href":"/docs/programmer/cloudnative/redis/%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4/","title":"Rediså¸¸ç”¨å‘½ä»¤","section":"ä¸­é—´ä»¶","content":" scan æ›¿ä»£ keys # SCAN 0 MATCH key* COUNT 100 æŸ¥çœ‹ç±»å‹type # type # ä½¿ç”¨äº† GET å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤é€šå¸¸ç”¨äºè·å–å­—ç¬¦ä¸²ç±»å‹çš„å€¼ã€‚å¦‚æœkey_hi è¿™ä¸ªé”®åœ¨ Redis ä¸­å­˜å‚¨çš„ä¸æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„å€¼ï¼Œè€Œæ˜¯å…¶ä»–ç±»å‹ï¼ˆå¦‚åˆ—è¡¨ã€é›†åˆã€å“ˆå¸Œç­‰ï¼‰ï¼Œé‚£ä¹ˆæ‰§è¡Œ GET å‘½ä»¤å°±ä¼šè¿”å›é”™è¯¯:\n(error) WRONGTYPE Operation against a key holding the wrong kind of value\nè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆéœ€è¦ç¡®å®š key_hi é”®å­˜å‚¨çš„å€¼çš„ç±»å‹ã€‚ä½ å¯ä»¥ä½¿ç”¨ TYPE å‘½ä»¤æ¥æ£€æŸ¥é”®çš„ç±»å‹ï¼š\nTYPE mmp:cfgs:com.easypeso:retens æŸ¥çœ‹list # æŸ¥çœ‹ List é•¿åº¦ï¼š LLEN mylist 0 -1 æŸ¥çœ‹ List æ•°æ®å†…å®¹ï¼š LRANGE mylist 0 -1 "},{"id":52,"href":"/posts/%E5%B0%8F%E5%91%BD%E4%BB%A4/","title":"å°å‘½ä»¤","section":"Blog","content":"å‰ä¼ : [[Make things easy and enjoyable]]\n1.Â é€’å½’åˆ é™¤æŸäº›æ–‡ä»¶ # å¦‚ä»¥.py.bakÂ ä¸ºç»“å°¾çš„æ–‡ä»¶:Â findÂ .Â -nameÂ \u0026quot;*.py.bak\u0026quot;Â -execÂ rmÂ {}Â \\;\n2.Â æ‰¹é‡æ€æ­»è¿›ç¨‹ # pkillÂ -fÂ uwsgi ps -axu | grep å…³é”®å­— | awk \u0026#39;{print $2}\u0026#39; | xargs kill æ‰¹é‡åˆ é™¤pod - xargs çš„ä½¿ç”¨ # kubectl get pod -n argo | grep workflow-template | awk \u0026#39;{print $1}\u0026#39; | xargs kubectl -n argo delete pod 3.Â MySQLÂ NOW # æŒ‡å®šä¸œå…«ï¼šupdateÂ scanner_deviceÂ setÂ update_timeÂ =Â CONVERT_TZ(NOW(),Â @@session.time_zone,Â \u0026quot;+08:00\u0026quot;);\n4.Â celeryÂ workerçŠ¶æ€ # celeryÂ -AÂ nceleryÂ status\n-\u0026gt;Â celery@scan-celery.rcmrestat.00:Â OK\n-\u0026gt;Â celery@scan-celery.vulcombine.00:Â OK\n-\u0026gt;Â celery@scan-celery.rcmstat.00:Â OK\n5.Â base64è§£ç  # echoÂ YWRtaW46bnNmMGN1cy5AazhzÂ |Â base64Â -d ä½¿ç”¨åœºæ™¯:Â å¦‚åœ¨USER/.docker/configå¯»æ‰¾åˆ°dockerç™»é™†å‡­è¯å¯ä»¥ç”¨æ­¤è§£ç åloginç™»å½•\n6.Â k8sÂ å¤åˆ¶æ–‡ä»¶ # kubectlÂ cpÂ -nÂ websafeÂ -cÂ master-fizz-daemonÂ master-fizz-daemon-66c89f7c9c-nlgd4:rcm_vul_info.jsonÂ rcm_vul_info.json\n7. æŸ¥çœ‹k8s DNSè§£æ # kubectl get configmap -n kube-system coredns -o yaml\n8. å…³é—­WSL2 # #åœæ­¢LxssManageræœåŠ¡: net stop LxssManager #å¯åŠ¨LxssManageræœåŠ¡: net start LxssManager 9. nginx ä»£ç† mongodb # FROM nginx RUN echo \u0026#34;stream {\\n upstream stream_mongo {\\n server mongo:27017;\\n }\\n\\n server {\\n listen 9876;\\n proxy_pass stream_mongo;\\n }\\n}\u0026#34; \u0026gt;\u0026gt; /etc/nginx/nginx.conf docker build -t nginx-proxy:v0 . docker run -p 12345:9876 --network websafe-network --name nginx-proxy nginx-proxy:v0 # è¿æ¥ 12345 å³å¯ 10. MySQLåˆ é™¤é”ä¿®æ”¹è¡¨ # SHOW PROCESSLIST; KILL 6261330; -- æ ¹æ®è¡¨æ‰€åœ¨çš„åº“åæ‰¾è§IDï¼Œç„¶ååˆ é™¤é” LOCK TABLES task WRITE; ALTER TABLE task ADD COLUMN module_id INT not null DEFAULT 1005 COMMENT \u0026#39;è¿™é‡Œæ˜¯SQLå­—æ®µæ³¨é‡Š\u0026#39;; UNLOCK TABLES; 11. rz sz ä¸Šä¼ ä¸‹è½½æœåŠ¡å™¨å°æ–‡ä»¶ # å®‰è£…å‘½ä»¤: apt install lrzsz ä¸‹è½½ sz xxx ä¸Šä¼  rz 12. å¹¶è¡Œä¸‹å‘å‘½ä»¤ # timeÂ parallelÂ -N0Â -j10Â \u0026#34;argoÂ submitÂ success.yamlÂ -nÂ argo\u0026#34;Â :::Â {1..100} ä½¿ç”¨ -N é™åˆ¶æ¯è¡Œå‚æ•°çš„ä¸ªæ•°ï¼Œå…¶ä¸­-N0è¡¨ç¤ºä¸€æ¬¡åªè¯»å–ä¸€ä¸ªå‚æ•°ï¼Œä¸”ä¸è¾“å…¥è¿™ä¸ªå‚æ•°ï¼ˆä½œä¸ºè®¡æ•°å™¨æ¥ä½¿ç”¨ï¼‰ã€‚\nparallel -N4 echo 1={1} 2={2} 3={3} ::: A B C D E F G H 1=A 2=B 3=C // Dä¼ å…¥äº†ï¼Œä½†æ²¡æ¥æ”¶æ‰€ä»¥ä¸‹ä¸€è¡Œä¸¢å¤± 1=E 2=F 3=G parallel -N0 echo foo ::: 1 2 3 foo foo foo å¦‚æœè¦æ‰“å°è®¡æ•°ï¼Œå¯ä»¥ä½¿ç”¨time parallel -N1 -j10 \u0026quot;echo '[$(date)] ç¬¬ {}ï¼šæ¬¡æäº¤ä¸­...' \u0026amp; ls\u0026quot; ::: {1..10}æˆ–è€…ä¸æŒ‡å®šN1é»˜è®¤å°±æ˜¯N1\n13. ffmpeg æå–è§†é¢‘ä¸­éŸ³é¢‘ # ffmpeg -i englishdemo.mp4 -vn -c:a copy english.aac æå–å¹¶è½¬æ¢ä¸ºmp3æ ¼å¼ # ffmpeg -i englishdemo.mp4 -vn -b:a 128k -c:a mp3 english.mp3 14. Windows ä¼‘çœ  # cmd ç®¡ç†å‘˜æ¨¡å¼è¿è¡Œ\npowercfg.exe -h off powercfg.exe -h on 15. Windowsåˆ·æ–°DNSç¼“å­˜ - ä¿®æ”¹hostsä¹‹åä¸ç”Ÿæ•ˆä½¿ç”¨ # ipconfig /flushdns 16. è§£å‹å½“å‰ç›®å½•æ‰€æœ‰å‹ç¼©æ–‡ä»¶ # for f in *.zip; do unzip \u0026#34;$f\u0026#34;; done 17. é€šè¿‡IPè·å–ä¸»æœºå # ä¸è¿‡çœ‹æƒ…å†µï¼Œå¦‚æœæ²¡æœ‰å¯åŠ¨NetBIOSå°±æŸ¥ä¸åˆ°\n# åŸºæ–¼TCP/IPä¸Šçš„NetBIOSå®¢æˆ¶ç”¨æ–¼æŸ¥è©¢NetBIOSåå­—çš„ç¨‹åº nmblookup -A {IP} 18. awkç®—æ•° # grep 400586 sched.log.2024-05-28 | grep æ¡ | awk \u0026#39;{print $8}\u0026#39; | awk -F\u0026#39;æ¡,\u0026#39; \u0026#39;{sum += $1} END {print sum}\u0026#39; awk -F'æ¡,' '{sum += $1} END {print sum}' ç”¨æ¡è¿›è¡Œåˆ†å‰²å–$1ç¬¬ä¸€ä¸ªè¿›è¡Œsumæ±‚å’Œè®¡ç®— awk '{print $8}' è¿™é‡Œæ³¨æ„ä½¿ç”¨å•å¼•å· 250\nåŸæ—¥å¿—æ•°æ®ä¸º:\n2024-05-28 18:15:51 sched WARNING [1178]: await self.redis.enqueue_update_db(*update_tasks) 1æ¡, 0 is: 400586 + 2024-05-28 05:24:52 + MY 2024-05-28 18:49:20 sched WARNING [1178]: await self.redis.enqueue_update_db(*update_tasks) 3æ¡, 0 is: 400586 + 2024-05-28 03:02:38 + MY 2024-05-28 18:59:50 sched WARNING [1178]: await self.redis.enqueue_update_db(*update_tasks) 4æ¡, 0 is: 400586 + 2024-05-28 04:12:04 + MY 19. ä½¿ç”¨git commitä¿¡æ¯æ¥å‘½å # # æ—¶é—´ echo \u0026#34;{name}-$(git log -1 --format=%cd --date=format:\u0026#39;%Y%m%d-%H%M%S\u0026#39;).tar.gz\u0026#34; # commit_id+æ—¶é—´ echo \u0026#34;name-$(git log -1 --format=%h)-$(date +\u0026#39;%Y%m%d-%H%M%S\u0026#39;).tar.gz\u0026#34; 20. æŸ¥çœ‹è®¾å¤‡æ¸©åº¦ # sudo apt install lm-sensors sensors 21. å‹ç¼©è§†é¢‘ # ffmpeg -i åŸè§†é¢‘.mp4 -c:v libx264 -b:v 2000k -c:a aac -b:a 128k -pix_fmt yuv420p -movflags faststart è¾“å‡ºè§†é¢‘.mp4 22. è¿æ¥å‘½ä»¤ # sl \u0026amp;\u0026amp; ls sl; ls 1ä¸­slå¤±è´¥åä¸ä¼šæ‰§è¡Œåç»­çš„ls, 2ä¸­slå¤±è´¥åä¹Ÿä¼šæ‰§è¡Œls\n23. æŸ¥çœ‹æ–‡ä»¶å ç”¨ # fuser -v {file path}\n24. æŸ¥çœ‹æ–‡ä»¶å¤§å°åŠæ’åº # du -sh ~/go/pkg/mod/github.com/* | sort -rh | head 25. æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹éšè—ç›®å½•ç£ç›˜å ç”¨å¤§å° # find . -maxdepth 1 -type d -name \u0026#39;.[^.]*\u0026#39; -exec sudo du -sh {} \\; 26. æŸ¥çœ‹å ç”¨cpu \u0026amp; å†…å­˜æœ€é«˜çš„è¿›ç¨‹ # ps -aux | sort -k3nr | head 1 # æŸ¥çœ‹cpu ps -aux --sort=-%cpu | head -n 2 ps -aux --sort=-%mem | head -n 2 "},{"id":53,"href":"/docs/programmer/cloudnative/k8s/elk%E5%9C%A8k8s%E4%B8%8A%E7%9A%84%E9%83%A8%E7%BD%B2%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B/","title":"elkåœ¨k8sä¸Šçš„éƒ¨ç½²ä½¿ç”¨ç¤ºä¾‹","section":"k8s","content":" ç¤ºä¾‹Yaml # --- apiVersion: v1 kind: ConfigMap metadata: name: filebeat-config namespace: ops labels: k8s-app: filebeat data: filebeat.yml: |- filebeat.config: inputs: # Mounted `filebeat-inputs` configmap: path: ${path.config}/inputs.d/*.yml # Reload inputs configs as they change: reload.enabled: false modules: path: ${path.config}/modules.d/*.yml # Reload module configs as they change: reload.enabled: false output.elasticsearch: hosts: [\u0026#39;49.65.125.91:9200\u0026#39;] --- apiVersion: v1 kind: ConfigMap metadata: name: filebeat-inputs namespace: ops labels: k8s-app: filebeat data: kubernetes.yml: |- - type: docker containers.ids: - \u0026#34;*\u0026#34; processors: - add_kubernetes_metadata: in_cluster: true --- apiVersion: apps/v1 kind: DaemonSet metadata: name: filebeat namespace: ops labels: k8s-app: filebeat spec: selector: matchLabels: k8s-app: filebeat template: metadata: labels: k8s-app: filebeat spec: serviceAccountName: filebeat terminationGracePeriodSeconds: 30 containers: - name: filebeat image: elastic/filebeat:7.9.2 args: [ \u0026#34;-c\u0026#34;, \u0026#34;/etc/filebeat.yml\u0026#34;, \u0026#34;-e\u0026#34;, ] securityContext: runAsUser: 0 # If using Red Hat OpenShift uncomment this: #privileged: true resources: limits: memory: 200Mi requests: cpu: 100m memory: 100Mi volumeMounts: - name: config mountPath: /etc/filebeat.yml readOnly: true subPath: filebeat.yml - name: inputs mountPath: /usr/share/filebeat/inputs.d readOnly: true - name: data mountPath: /usr/share/filebeat/data - name: varlibdockercontainers mountPath: /var/lib/docker/containers readOnly: true volumes: - name: config configMap: defaultMode: 0600 name: filebeat-config - name: varlibdockercontainers hostPath: path: /var/lib/docker/containers - name: inputs configMap: defaultMode: 0600 name: filebeat-inputs # data folder stores a registry of read status for all files, so we don\u0026#39;t send everything again on a Filebeat pod restart - name: data hostPath: path: /var/lib/filebeat-data type: DirectoryOrCreate --- apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: name: filebeat subjects: - kind: ServiceAccount name: filebeat namespace: ops roleRef: kind: ClusterRole name: filebeat apiGroup: rbac.authorization.k8s.io --- apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRole metadata: name: filebeat labels: k8s-app: filebeat rules: - apiGroups: [\u0026#34;\u0026#34;] # \u0026#34;\u0026#34; indicates the core API group resources: - namespaces - pods verbs: - get - watch - list --- apiVersion: v1 kind: ServiceAccount metadata: name: filebeat namespace: ops labels: k8s-app: filebeat å°†ä»¥ä¸Šå†…å®¹å­˜å‚¨åˆ° elk.yaml\nkubectl create namespace ops kubectl apply -f elk.yaml kubectl get pods -n ops "},{"id":54,"href":"/docs/programmer/cloudnative/nginx%E5%AE%9E%E7%94%A8%E9%85%8D%E7%BD%AE/","title":"Nginxå®ç”¨é…ç½®","section":"äº‘åŸç”Ÿ","content":"from: è¿™é‡Œ\nlocation / { # First attempt to serve request as file, then # as directory, then fall back to displaying a 404. try_files $uri $uri/ =404; } location /test_vul_id_1000003 { alias /home/test_vul_id_1000003; autoindex on; } location /test_vul_id_1000003 { root /home; autoindex on; } éä»¥ä¸Šé…ç½®è®¿é—®404åŸå›  # location /test_vul_id_1000003 { root /home/test_vul_id_1000003; autoindex on; } å¦‚ä»¥ä¸Šé…ç½®, nginx é…ç½®æ–‡ä»¶ä¼šå°† root åŠ ä¸Š ä»¥ä¸Šçš„ localtion , å¯¼è‡´è®¿é—®æ—¶å®é™…å®šä½æ˜¯ /home/test_vul_id_1000003/test_vul_id_1000003 æ‰€ä»¥å°± 404 äº†\nç”Ÿæ•ˆå‘½ä»¤ # nginx -t nginx -s reload service nginx restart "},{"id":55,"href":"/docs/programmer/net/nginx%E5%AE%9E%E7%94%A8%E9%85%8D%E7%BD%AE/","title":"Nginxå®ç”¨é…ç½®","section":"Net","content":"from: è¿™é‡Œ\nlocation / { # First attempt to serve request as file, then # as directory, then fall back to displaying a 404. try_files $uri $uri/ =404; } location /test_vul_id_1000003 { alias /home/test_vul_id_1000003; autoindex on; } location /test_vul_id_1000003 { root /home; autoindex on; } éä»¥ä¸Šé…ç½®è®¿é—®404åŸå›  # location /test_vul_id_1000003 { root /home/test_vul_id_1000003; autoindex on; } å¦‚ä»¥ä¸Šé…ç½®, nginx é…ç½®æ–‡ä»¶ä¼šå°† root åŠ ä¸Š ä»¥ä¸Šçš„ localtion , å¯¼è‡´è®¿é—®æ—¶å®é™…å®šä½æ˜¯ /home/test_vul_id_1000003/test_vul_id_1000003 æ‰€ä»¥å°± 404 äº†\nç”Ÿæ•ˆå‘½ä»¤ # nginx -t nginx -s reload service nginx restart "},{"id":56,"href":"/docs/programmer/cloudnative/k8s/k8s-%E9%85%8D%E5%A5%97%E8%AF%B4%E6%98%8E/","title":"k8s é…å¥—è¯´æ˜","section":"k8s","content":" ctr # å¦‚æœå®šä¹‰äº† -n åº”è¯¥æ˜¯namesplace é‚£ä¹ˆæ¯ä¸ªå‘½ä»¤éƒ½å¾—è·Ÿä¸Š\nloadé•œåƒ # sudo ctr -n=k8s.ioÂ images import ${imageTarFile}\nä¿å­˜æ–‡ä»¶ # sudo ctr -n k8s.io images export \u0026ndash;platform=linux/amd64 hi.tar 101.32.1.4:30002/web-docker/worker:2121\nåˆ‡æ¢tag # sudo ctr -nÂ k8s.ioÂ images tag \u0026ndash;forceÂ repos.x.com/web-docker/worker:2121Â 101.32.1.4:30002/web-docker/worker:2121\næ¨é€é•œåƒ # sudo ctr -nÂ k8s.ioÂ images push -k -u admin:fat213asfdFS2W \u0026ndash;plain-http 101.32.1.4:30002/web-docker/worker:2121\næ‹‰å– # sudo ctr -n k8s.io images pull -k -u admin:fat1239ASD124W \u0026ndash;plain-http 101.32.1.4:30002/web-docker/worker:2121\nDocker # [[Note of Docker]] å¥½åƒå¹¶æ²¡æœ‰æ•´ç†dockerå‘½ä»¤\u0026hellip; åç»­è¡¥å§\nåŠ è½½é•œåƒ # docker load -i .\\hi.tar\nä¿å­˜ä¸ºæœ¬åœ°æ–‡ä»¶ # docker save repos.x.com/web-docker/worker:2121 -o hi.tar\nä½¿ç”¨ REST API # # æŒ‡å‘å†…éƒ¨ API æœåŠ¡å™¨çš„ä¸»æœºå APISERVER=https://kubernetes.default.svc # æœåŠ¡è´¦å·ä»¤ç‰Œçš„è·¯å¾„ SERVICEACCOUNT=/var/run/secrets/kubernetes.io/serviceaccount # è¯»å– Pod çš„åå­—ç©ºé—´ NAMESPACE=$(cat ${SERVICEACCOUNT}/namespace) # è¯»å–æœåŠ¡è´¦å·çš„æŒæœ‰è€…ä»¤ç‰Œ TOKEN=$(cat ${SERVICEACCOUNT}/token) # å¼•ç”¨å†…éƒ¨è¯ä¹¦æœºæ„ï¼ˆCAï¼‰ CACERT=${SERVICEACCOUNT}/ca.crt # ä½¿ç”¨ä»¤ç‰Œè®¿é—® API curl --cacert ${CACERT} --header \u0026#34;Authorization: Bearer ${TOKEN}\u0026#34; -X GET ${APISERVER}/api "},{"id":57,"href":"/docs/programmer/cloudnative/k8s/k8s-%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/","title":"k8sæŠ€æœ¯åˆ†äº«","section":"k8s","content":" k8sæŠ€æœ¯åˆ†äº« # å·¥ä½œè´Ÿè½½èµ„æº # ä¸€ã€pod # 1. æ¦‚è¦ # å¯åˆ›å»ºç®¡ç†ã€æœ€å°çš„å¯éƒ¨ç½²è®¡ç®—å•å…ƒï¼Œæ˜¯å¯ä»¥åœ¨ä¸»æœºä¸Šè¿è¡Œçš„å®¹å™¨çš„é›†åˆ æˆ‘ä»¬çš„æœåŠ¡éƒ½åœ¨å…¶ä¸­è¿è¡Œã€‚å¦‚æˆ‘ä»¬çš„æœåŠ¡æ˜¯nginxï¼Œåˆ™æœ€å†…å±‚æ˜¯æˆ‘ä»¬çš„æœåŠ¡ nginxï¼Œè¿è¡Œåœ¨ container å®¹å™¨å½“ä¸­ã€‚container (å®¹å™¨) çš„æœ¬è´¨æ˜¯è¿›ç¨‹ï¼Œè€Œ pod æ˜¯ç®¡ç†è¿™ä¸€ç»„è¿›ç¨‹çš„èµ„æº æ‰€ä»¥podå¯è§†ä¸ºä¸€ä¸ªæä¸ºè½»é‡åŒ–ã€æ²¡æ’ç½‘çº¿çš„ç”µè„‘ï¼Œå¦‚æœæ‰€éœ€ä»»åŠ¡æ— éœ€äº¤äº’ï¼Œé‚£ä¹ˆç”¨podå°±å¾ˆåˆé€‚ã€‚ä¾‹å¦‚ç»™å®ƒæŒ‚è½½ä¸€ä¸ªæ–‡ä»¶æ¥è®­ç»ƒæ¨¡å‹ã€ç”ŸæˆæŠ¥è¡¨ï¼Œå¯ä»¥æ ¹æ®åœºæ™¯ä½¿ç”¨ Job æˆ–è€… CronJob æˆ–è€…å…¶å®ƒ å›¾ç¤ºå…³ç³»å¦‚ä¸‹ # ![[k8s-pod-insert.png]]\n2. podç½‘ç»œ # å½“ç„¶ï¼Œpod å¯ä»¥ç®¡ç†å¤šä¸ª containerï¼Œåˆå› ä¸ºcontainer (å®¹å™¨) çš„æœ¬è´¨æ˜¯è¿›ç¨‹ï¼Œå¦‚æœæœ‰æœ¬åœ°ç½‘ç»œé€šä¿¡éœ€æ±‚(ä½¿ç”¨ localhost æˆ–è€… Socket æ–‡ä»¶è¿›è¡Œæœ¬åœ°é€šä¿¡)ï¼Œåœ¨è¿™äº›åœºæ™¯ä¸­ä½¿ç”¨ pod ç®¡ç†å¤šä¸ª container å°±éå¸¸çš„æ¨èã€‚\nå¦‚ä¸‹å›¾å±•ç¤ºäº†Podç½‘ç»œæ‰€ä¾èµ–çš„3ä¸ªç½‘ç»œè®¾å¤‡\n1. eth0æ˜¯èŠ‚ç‚¹ä¸»æœºä¸Šçš„ç½‘å¡ï¼Œæ”¯æŒè¯¥èŠ‚ç‚¹æµé‡å‡ºå…¥çš„è®¾å¤‡ã€ä¹Ÿæ˜¯æ”¯æŒé›†ç¾¤èŠ‚ç‚¹é—´IPå¯»å€å’Œäº’é€šçš„è®¾å¤‡ï¼›\n2. docker0æ˜¯ä¸€ä¸ªè™šæ‹Ÿç½‘æ¡¥ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªè™šæ‹Ÿäº¤æ¢æœºï¼Œæ”¯æŒè¯¥èŠ‚ç‚¹ä¸Šçš„Podä¹‹é—´è¿›è¡ŒIPå¯»å€å’Œäº’é€šçš„è®¾å¤‡ï¼›\n3. veth0åˆ™æ˜¯Pod1çš„è™šæ‹Ÿç½‘å¡ï¼Œæ”¯æŒè¯¥Podå†…å®¹å™¨äº’é€šå’Œå¯¹å¤–è®¿é—®çš„è™šæ‹Ÿè®¾å¤‡ï¼›\n4. docker0ç½‘æ¡¥å’Œveth0ç½‘å¡ï¼Œéƒ½æ˜¯linuxæ”¯æŒå’Œåˆ›å»ºçš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼›\n5. pauseå±äºç‰¹æ®Šå®¹å™¨ï¼Œå…¶è¿è¡Œçš„å”¯ä¸€ç›®çš„æ˜¯ä¸ºPodå»ºç«‹å…±äº«çš„veth0ç½‘ç»œæ¥å£\n![[k8s-nginx-pod.png]]\näºŒã€deploymentã€StatefulSet # 1. æ¦‚è¦ # Deployment ä½¿å¾— Pod å’Œ ReplicaSet èƒ½å¤Ÿè¿›è¡Œå£°æ˜å¼æ›´æ–°\nStatefulSet è¡¨ç¤ºä¸€ç»„å…·æœ‰ä¸€è‡´èº«ä»½çš„ Podï¼š\n1. èº«ä»½å®šä¹‰ä¸ºï¼š\n- ç½‘ç»œï¼šä¸€ä¸ªç¨³å®šçš„ DNS å’Œä¸»æœºåã€‚\n- å­˜å‚¨ï¼šæ ¹æ®è¦æ±‚æä¾›å°½å¯èƒ½å¤šçš„ VolumeClaimã€‚\nStatefulSet ä¿è¯ç»™å®šçš„ç½‘ç»œèº«ä»½å°†å§‹ç»ˆæ˜ å°„åˆ°ç›¸åŒçš„å­˜å‚¨èº«ä»½ã€‚\nè™½ç„¶podå®Œå…¨å…·å¤‡åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²ç‹¬ç«‹çš„å•ä½“æœåŠ¡çš„èƒ½åŠ›ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šä¸ä¼šç›´æ¥ç®¡ç† podï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨deployment ä»£ä¸ºæ§ç®¡ã€‚å»¶ç»­ä¸Šé¢çš„æ¯”å–»å°±æ˜¯å°† deployment è§†ä¸ºä¸€ä¸ªå¥½ç”¨çš„æœºæˆ¿ç®¡ç†å‘˜ï¼šå¸®åŠ©æˆ‘ä»¬è¿›è´§ï¼Œå¯¹podè¿›è¡Œå¼€å…³æœºï¼Œå¯¹podåšç³»ç»Ÿå‡çº§å’Œé‡è£…ç³»ç»Ÿä»¥å®ç°åŠŸèƒ½å‡çº§å’Œå›æ»šã€‚ StatefulSet ä¹Ÿç›¸åŒï¼Œåªä¸è¿‡æ¯æ¬¡å®ƒä¼šä¿è¯ä¸€è‡´æ€§ï¼Œè€Œä¸åƒdeployment æ¯æ¬¡é‡å¯éƒ½æ˜¯éšæœºåˆ†é…\n2. æ»šåŠ¨å‡çº§ # è‡³äºä¸ºä»€ä¹ˆéœ€è¦ deployment ååŠ©æˆ‘ä»¬ç®¡ç†ï¼Œå¯ä»¥å‚è€ƒä¸‹å›¾äº†è§£ä¸€ä¸‹æ»šåŠ¨å‡çº§çš„æµç¨‹ï¼Œå¹¶æƒ³è±¡ä¸€ä¸‹è‡ªå·±æ‰‹åŠ¨æ“ä½œpodçš„å¤æ‚åº¦ï¼ˆä½¿ç”¨ kubectl get pods --watch å¯åœ¨ç»ˆç«¯ä¸­æŸ¥çœ‹podå˜åŒ–ï¼‰ï¼š ![[k8s-pod-rollupdate.png]]\n3. åˆ†ç•Œçº¿ # äº†è§£å®Œä»¥ä¸Šä¿¡æ¯å°±å·²ç»è¶³å¤Ÿè¦†ç›–å¤§å¤šæ•°å¼€å‘éœ€æ±‚ï¼Œå°±å¦‚å»ç½‘å§ç©æ¸¸æˆã€æ¥å…¬å¸ä¸Šç­ï¼Œæˆ‘ä»¬éƒ½ä¸ä¼šå»å…³æ³¨ç½‘ç»œï¼Œè€Œåªå…³å¿ƒæ¸¸æˆæ˜¯å¦æµç•…è¾“èµ¢ï¼Œå·¥ä½œè¿›åº¦æ˜¯å¦é¡ºç•…ã€‚å› ä¸ºå„ä¸ªæœåŠ¡é—´çš„ç½‘ç»œä¾èµ–å°±åº”è¯¥é•¿ä¹…ä¿æŒç¨³å®šï¼Œä¸å®œåšé«˜é¢‘è°ƒæ•´ã€‚é™¤éå‡ºç°é—®é¢˜ï¼Œæˆ–è€…æ°å¥½æˆ‘ä»¬éœ€è¦é‡å¤´æ­å»ºè¿™éƒ¨åˆ†ï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆéœ€è¦è€ƒè™‘çš„å°±æ˜¯ç½‘ç»œå…³ç³»ã€‚\nServiceèµ„æº # Serviceã€Ingress # 1. æ¦‚è¦ # Service æ˜¯è½¯ä»¶æœåŠ¡ï¼ˆä¾‹å¦‚ mysqlï¼‰çš„å‘½åæŠ½è±¡ï¼ŒåŒ…å«ä»£ç†è¦ä¾¦å¬çš„æœ¬åœ°ç«¯å£ï¼ˆä¾‹å¦‚ 3306ï¼‰å’Œä¸€ä¸ªé€‰æ‹©ç®—ç¬¦ï¼Œé€‰æ‹©ç®—ç¬¦ç”¨æ¥ç¡®å®šå“ªäº› Pod å°†å“åº”é€šè¿‡ä»£ç†å‘é€çš„è¯·æ±‚ã€‚ Ingress æ˜¯å…è®¸å…¥ç«™è¿æ¥åˆ°è¾¾åç«¯å®šä¹‰çš„ç«¯ç‚¹çš„è§„åˆ™é›†åˆã€‚Ingress æ˜¯å…è®¸å…¥ç«™è¿æ¥åˆ°è¾¾åç«¯å®šä¹‰çš„ç«¯ç‚¹çš„è§„åˆ™é›†åˆã€‚ Service å°±ç›¸å½“äºç»™ä¸Šè¿°podç»„æˆçš„æœåŠ¡æ’ä¸Šäº†ä¸€æ¡ç¨³å®šçš„ç½‘çº¿ï¼ˆå½“ç„¶ä¸ä»…å¦‚æ­¤ï¼‰ï¼Œä½¿ä¹‹å¯ä»¥é€šè¿‡ç½‘ç»œé€šä¿¡ï¼Œè€Œ Ingress åˆ™è´Ÿè´£å¯¹å¤–ï¼Œç›¸å½“äºä¹‹å‰çš„webéƒ¨ç½²æ–¹æ¡ˆä¸­ nginx æ‰®æ¼”çš„è§’è‰²ï¼Œå°†å¤–éƒ¨è°ƒç”¨é€šè¿‡è§„åˆ™ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°ç›¸åº”çš„ Service ä¸Šã€‚\n2. Serviceç½‘ç»œåŸç† # é¦–å…ˆæˆ‘ä»¬ç†Ÿæ‚‰DNSï¼Œå†è€…æˆ‘ä»¬çŸ¥é“é€šè¿‡ deployment ç®¡ç†çš„podæ¯æ¬¡é‡å¯éƒ½æ˜¯é‡æ–°ç”Ÿæˆã€é‡æ–°åˆ†é…ç½‘ç»œçš„ï¼Œæœ€åæˆ‘ä»¬çŸ¥é“k8sæ˜¯æœ‰ä¸€ä¸ª\né…ç½®å’Œå­˜å‚¨èµ„æº # ConfigMapã€Secretã€Volume\nèº«ä»½è®¤è¯èµ„æº # ServiceAccount\né‰´æƒèµ„æº # ClusterRoleã€ClusterRoleBinding\nå…¶ä»– # LimitRangeã€NetworkPolicy\nNodeã€Namespace\nç½‘ç»œ # æ·±å…¥ç†è§£k8s ç½‘ç»œï¼šhttps://www.jianshu.com/p/80eb2e9e32db\nç¤ºæ„å›¾ # æ¥æºhttps://github.com/guangzhengli/k8s-tutorials\nkubectl get pods # NAME READY STATUS RESTARTS AGE # hellok8s-deployment-5d5545b69c-24lw5 1/1 Running 0 27m # hellok8s-deployment-5d5545b69c-9g94t 1/1 Running 0 27m # hellok8s-deployment-5d5545b69c-9gm8r 1/1 Running 0 27m # nginx 1/1 Running 0 41m kubectl get service # NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE # service-hellok8s-clusterip ClusterIP 10.104.96.153 \u0026lt;none\u0026gt; 3000/TCP 10s kubectl exec -it nginx-pod /bin/bash # root@nginx-pod:/# curl 10.104.96.153:3000 # [v3] Hello, Kubernetes!, From host: hellok8s-deployment-5d5545b69c-9gm8r # root@nginx-pod:/# curl 10.104.96.153:3000 #[v3] Hello, Kubernetes!, From host: hellok8s-deployment-5d5545b69c-9g94t å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¤šæ¬¡ curl 10.104.96.153:3000 è®¿é—® hellok8s Service IP åœ°å€ï¼Œè¿”å›çš„ hellok8s:v3 hostname ä¸ä¸€æ ·ï¼Œè¯´æ˜ Service å¯ä»¥æ¥æ”¶è¯·æ±‚å¹¶å°†å®ƒä»¬ä¼ é€’ç»™å®ƒåé¢çš„æ‰€æœ‰ podï¼Œè¿˜å¯ä»¥è‡ªåŠ¨è´Ÿè½½å‡è¡¡ã€‚ä½ ä¹Ÿå¯ä»¥è¯•è¯•å¢åŠ æˆ–è€…å‡å°‘ hellok8s:v3 pod å‰¯æœ¬æ•°é‡ï¼Œè§‚å¯Ÿ Service çš„è¯·æ±‚æ˜¯å¦ä¼šåŠ¨æ€å˜æ›´ã€‚è°ƒç”¨è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nNodePort (è´Ÿè½½å‡è¡¡(ç•¥)) # æˆ‘ä»¬çŸ¥é“kubernetes é›†ç¾¤å¹¶ä¸æ˜¯å•æœºè¿è¡Œï¼Œå®ƒç®¡ç†ç€å¤šå°èŠ‚ç‚¹å³ Nodeï¼Œå¯ä»¥é€šè¿‡æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ IP å’Œé™æ€ç«¯å£ï¼ˆNodePortï¼‰æš´éœ²æœåŠ¡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœé›†ç¾¤å†…æœ‰ä¸¤å° Node è¿è¡Œç€ hellok8s:v3ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª NodePort ç±»å‹çš„ Serviceï¼Œå°† hellok8s:v3 çš„ 3000 ç«¯å£æ˜ å°„åˆ° Node æœºå™¨çš„ 30000 ç«¯å£ (åœ¨ 30000-32767 èŒƒå›´å†…)ï¼Œå°±å¯ä»¥é€šè¿‡è®¿é—® http://node1-ip:30000 æˆ–è€… http://node2-ip:30000 è®¿é—®åˆ°æœåŠ¡ã€‚ ![[k8s-svc-nodeport.png]]\nIngress ![[k8s-ingress.png]]\n"},{"id":58,"href":"/docs/programmer/cloudnative/uwsgi-%E5%A4%84%E7%90%86%E8%AE%B0%E5%BD%95/","title":"uwsgi å¤„ç†è®°å½•","section":"äº‘åŸç”Ÿ","content":" æ—¥å¿—è¾“å‡ºåˆ°ç»ˆç«¯ # uwsgi.iniæ–‡ä»¶ä¸­é…ç½®\nlog-master = true ; logto=/var/log/uwsgi.log åŒæ—¶è¿™è¡Œä¸èƒ½æœ‰ å¯åŠ¨å‘½ä»¤: uwsgi /opt/disk2/var/www/scancenter/3rd/conf/uwsgi-docker/uwsgi.ini --log-master\néš”ä¸€æ®µæ—¶é—´å¡æ­»,é‡å¯ä¸èƒ½ # å½“ä½œä¸ºçº¯åç«¯APIä½¿ç”¨æ—¶, ä½¿ç”¨ http-socket ä¸ä½¿ç”¨ http\nä½¿ç”¨supervisorç®¡ç†uwsgi # #daemonize=/var/log/uwsgi8011.log # å®ˆæŠ¤è¿›ç¨‹ä¸€å®šè¦æ³¨é‡Šæ‰(å…³é”®)\næŸ¥çœ‹æ€§èƒ½æ•°æ® # å®‰è£… uwsgitop æŸ¥çœ‹ uwsgi statså†™å…¥ä½ç½® æŸ¥çœ‹ pip install uwsgitop cat /opt/trunk/textcheck/3rd/uwsgi/config.ini | grep stats # \u0026gt; stats=/var/run/uwsgi/uwsgi.status uwsgitop /var/run/uwsgi/uwsgi.status # \u0026gt; uwsgi-2.0.19.1 - Wed Oct 18 18:13:48 2023 - req: 113 - RPS: 0 - lq: 0 - tx: 75.1K node: app-58d8477f4-26fzb - cwd: /app - uid: 0 - gid: 0 - masterpid: 8 WID % PID REQ RPS EXC SIG STATUS AVG RSS VSZ TX ReSpwn HC RunT LastSpwn 1 28.3 132942 32 0 0 0 idle 19161ms 0 0 15.2K 1 0 155394.03 17:34:42 2 28.3 132950 32 0 0 0 idle 1781ms 0 0 20.1K 1 0 126123.093 17:34:42 3 22.1 132958 25 0 0 0 idle 5982ms 0 0 16.9K 1 0 127199.778 17:34:42 4 21.2 132963 24 0 0 0 idle 15274ms 0 0 22.8K 1 0 144018.093 17:34:42\n"},{"id":59,"href":"/docs/programmer/cloudnative/k8s/k8s%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%92%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90/","title":"k8så­¦ä¹ -å¸¸ç”¨å‘½ä»¤å’Œé…ç½®æ–‡ä»¶","section":"k8s","content":"\nk8så­¦ä¹  # å¸¸ç”¨å‘½ä»¤ # kubectl apply -f rcm_log_monut_k8s_pod.yaml kubectl get pod -A kubectl get pod -all-namespaces kubectl get node kubectl get deploy æŒä¹…å· - PersistentVolume kubectl get persistentvolume kubectl describe persistentvolume example-pv kubectl **delete** persistentvolume example-pv ä»kubectl cp -n \u0026lt;å‘½åç©ºé—´\u0026gt; -c :xxx.json xxx.json configmap / secret å­˜å‚¨æ–‡ä»¶å†…å®¹ # sftpkey ä¸ºåç§°\næ–°å»º # kubectl create secret generic sftpkey --from-file=/etc/id_rsa # kubectl create -n {NAMESPACE} secret generic sftpkey --from-file=/etc/id_rsa åˆ é™¤ # kubectl delete secret sftpkey\nå¸¸ç”¨å­—æ®µ # ä¸‹é¢æ˜¯ä¸€äº› Kubernetes ä¸­å¸¸ç”¨çš„é…ç½®å­—æ®µï¼š\napiVersionï¼š Kubernetes API çš„ç‰ˆæœ¬ï¼Œç”¨äºå®šä¹‰èµ„æºçš„ API ç‰ˆæœ¬å·ã€‚ kindï¼š èµ„æºçš„ç±»å‹ï¼Œæ¯”å¦‚ Podã€Deploymentã€Service ç­‰ã€‚ metadataï¼š å…ƒæ•°æ®å­—æ®µï¼Œç”¨äºå­˜å‚¨ Kubernetes å¯¹è±¡çš„åç§°ã€å‘½åç©ºé—´ã€æ ‡ç­¾ç­‰ä¿¡æ¯ã€‚ specï¼š å¯¹è±¡çš„è§„æ ¼ï¼Œç”¨äºå®šä¹‰å¯¹è±¡çš„æœŸæœ›çŠ¶æ€ï¼Œå¦‚ Pod çš„å®¹å™¨ã€Service çš„ç«¯å£ç­‰ã€‚ statusï¼š å¯¹è±¡çš„çŠ¶æ€ï¼Œç”¨äºè®°å½•å¯¹è±¡çš„å®é™…çŠ¶æ€ï¼Œå¦‚ Pod çš„è¿è¡ŒçŠ¶æ€ã€Service çš„è®¿é—®åœ°å€ç­‰ã€‚ å¦å¤–è¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„å­å­—æ®µï¼Œå¦‚ï¼š\ncontainersï¼š Pod ä¸­çš„å®¹å™¨å®šä¹‰ï¼ŒåŒ…æ‹¬å®¹å™¨åç§°ã€é•œåƒã€å‘½ä»¤ã€å‚æ•°ç­‰ã€‚ portsï¼š Service ä¸­çš„ç«¯å£å®šä¹‰ï¼ŒåŒ…æ‹¬ç«¯å£åç§°ã€åè®®ã€ç«¯å£å·ã€ç›®æ ‡ç«¯å£å·ç­‰ã€‚ selectorï¼š Service ä¸­ç”¨äºé€‰æ‹©åç«¯ Pod çš„æ ‡ç­¾é€‰æ‹©å™¨ã€‚ replicasï¼š Deployment ä¸­æœŸæœ›çš„å‰¯æœ¬æ•°ã€‚ templateï¼š Deployment ä¸­ç”¨äºåˆ›å»º Pod çš„ PodTemplateSpec å®šä¹‰ã€‚ å…¶ä»– # åœ¨ Kubernetes ä¸­ï¼Œannotations å­—æ®µæ˜¯èµ„æºå¯¹è±¡ä¸­çš„ä¸€ä¸ªå…ƒæ•°æ®å­—æ®µï¼Œç”¨äºå­˜å‚¨ä¸€äº›éæ ‡å‡†åŒ–çš„å…ƒæ•°æ®ä¿¡æ¯ã€‚ä¸ metadata å­—æ®µä¸­çš„æ ‡å‡†åŒ–ä¿¡æ¯ä¸åŒï¼Œannotations å­—æ®µä¸­å­˜å‚¨çš„ä¿¡æ¯å¾€å¾€æ˜¯è‡ªå®šä¹‰çš„ã€ä¸æ˜“å½’ç±»çš„æ•°æ®ï¼Œæ¯”å¦‚ä»£ç åº“çš„æäº¤ IDã€é…ç½®æ–‡ä»¶çš„ MD5 æ ¡éªŒå€¼ã€å¤–éƒ¨ç³»ç»Ÿçš„å…³è”ä¿¡æ¯ç­‰ç­‰ã€‚\nannotations # å­—æ®µçš„æ ¼å¼ä¸ºä¸€ä¸ª key-value å¯¹çš„åˆ—è¡¨ï¼Œå…¶ä¸­ key è¡¨ç¤ºæ³¨è§£çš„åç§°ï¼Œvalue è¡¨ç¤ºæ³¨è§£çš„å€¼ã€‚ä¾‹å¦‚ï¼š\napiVersion: v1 kind: Pod metadata: name: my-pod annotations: commit-id: abc123 spec: containers: - name: my-container image: my-image åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ Pod çš„ metadata ä¸­æ·»åŠ äº†ä¸€ä¸ªè‡ªå®šä¹‰æ³¨è§£ commit-idï¼Œå¹¶å°†å…¶å€¼è®¾ç½®ä¸º abc123ã€‚è¿™ä¸ªæ³¨è§£è¡¨ç¤ºå½“å‰ Pod å¯¹åº”çš„ä»£ç åº“çš„æäº¤ IDã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äº annotations å­—æ®µæ˜¯ç”¨äºå­˜å‚¨è‡ªå®šä¹‰å…ƒæ•°æ®ä¿¡æ¯çš„ï¼Œå› æ­¤åœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„é¿å…ä¸å…¶ä»–æ ‡å‡†åŒ–çš„å­—æ®µå‘ç”Ÿå†²çªï¼Œä»¥å…äº§ç”Ÿæ„å¤–çš„åæœã€‚åŒæ—¶ï¼Œç”±äºæ³¨è§£çš„å€¼å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼Œå› æ­¤éœ€è¦å¯¹æ³¨è§£çš„å†…å®¹è¿›è¡Œé€‚å½“çš„éªŒè¯å’Œè½¬ä¹‰ï¼Œä»¥é¿å…å®‰å…¨é£é™©\nownerReferences å­—æ®µ # åœ¨ Kubernetes ä¸­ï¼ŒownerReferences å­—æ®µæ˜¯èµ„æºå¯¹è±¡ä¸­çš„ä¸€ä¸ªå…ƒæ•°æ®å­—æ®µï¼Œç”¨äºæŒ‡å®šå½“å‰å¯¹è±¡çš„æ‰€æœ‰è€…ï¼ˆownerï¼‰ã€‚è¿™ä¸ªå­—æ®µå¯ä»¥ç”¨æ¥å»ºç«‹èµ„æºå¯¹è±¡ä¹‹é—´çš„çˆ¶å­å…³ç³»ï¼Œä¾¿äºç®¡ç†å’Œåƒåœ¾å›æ”¶ã€‚åœ¨ä¸€ä¸ªèµ„æºå¯¹è±¡ä¸­ï¼Œå¯ä»¥åŒæ—¶æŒ‡å®šå¤šä¸ªçˆ¶å¯¹è±¡ï¼ˆownerï¼‰ã€‚\nownerReferences å­—æ®µçš„æ ¼å¼ä¸ºä¸€ä¸ªåŒ…å«å¤šä¸ª ownerReference å¯¹è±¡çš„åˆ—è¡¨ã€‚æ¯ä¸ª ownerReference å¯¹è±¡è¡¨ç¤ºä¸€ä¸ªçˆ¶å¯¹è±¡çš„å¼•ç”¨ï¼Œå…¶ä¸­åŒ…å«äº†çˆ¶å¯¹è±¡çš„ API ç‰ˆæœ¬ã€èµ„æºç±»å‹ã€åç§°å’Œ UIDã€‚ä¾‹å¦‚ï¼š\napiVersion: v1 kind: Pod metadata: name: my-pod ownerReferences: - apiVersion: apps/v1 kind: Deployment name: my-deployment uid: abc123 - apiVersion: apps/v1 kind: ReplicaSet name: my-replicaset uid: def456 spec: containers: - name: my-container image: my-image è¿™æ®µ YAML æ–‡ä»¶æè¿°äº†ä¸€ä¸ªåä¸º my-pod çš„ Pod å¯¹è±¡ï¼Œå®ƒæœ‰ä¸¤ä¸ªçˆ¶å¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯ä¸€ä¸ª Deployment å’Œä¸€ä¸ª ReplicaSetã€‚å…¶ä¸­ï¼ŒDeployment çš„åç§°ä¸º my-deploymentï¼ŒUID ä¸º abc123ï¼ŒReplicaSet çš„åç§°ä¸º my-replicasetï¼ŒUID ä¸º def456ã€‚ è¯¥ Pod ä¸­åªåŒ…å«ä¸€ä¸ªå®¹å™¨ï¼Œåç§°ä¸º my-containerï¼Œä½¿ç”¨é•œåƒä¸º my-imageã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ª Pod å¯¹è±¡çš„ ownerReferences å­—æ®µè¡¨ç¤ºå®ƒæ˜¯ Deployment å’Œ ReplicaSet çš„å­å¯¹è±¡ï¼Œå½“è¿™ä¸¤ä¸ªçˆ¶å¯¹è±¡è¢«åˆ é™¤æ—¶ï¼Œè¯¥ Pod å¯¹è±¡ä¹Ÿä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚å¦å¤–ï¼Œè¿™ä¸ª Pod å¯¹è±¡å’Œå…¶çˆ¶å¯¹è±¡éƒ½å±äºåŒä¸€ä¸ªå‘½åç©ºé—´ï¼Œå› ä¸ºæ²¡æœ‰åœ¨ metadata ä¸­æŒ‡å®š namespace å­—æ®µ åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ Pod çš„ metadata ä¸­æ·»åŠ äº†ä¸¤ä¸ªçˆ¶å¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯ä¸€ä¸ª Deployment å’Œä¸€ä¸ª ReplicaSetã€‚è¿™äº›ä¿¡æ¯å¯ä»¥å¸®åŠ© Kubernetes æ›´å¥½åœ°ç®¡ç†è¿™äº›å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä¾¿äºè¿›è¡Œåƒåœ¾å›æ”¶å’Œç‰ˆæœ¬æ§åˆ¶ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒownerReferences å­—æ®µä¸­çš„å¯¹è±¡å¿…é¡»æ˜¯åŒä¸€ä¸ªå‘½åç©ºé—´ä¸­çš„èµ„æºå¯¹è±¡ï¼Œå¦åˆ™ä¼šå¼•å‘é”™è¯¯ã€‚å¦å¤–ï¼Œåœ¨ä½¿ç”¨ ownerReferences å­—æ®µæ—¶éœ€è¦æ³¨æ„é¿å…å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œä»¥å…äº§ç”Ÿæ„å¤–çš„åæœã€‚\nownerReferences ä¸­çš„nameå’Œè¯¥pod nameç›¸åŒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ # åœ¨ Kubernetes ä¸­ï¼Œå¦‚æœä¸€ä¸ªèµ„æºå¯¹è±¡çš„ ownerReferences ä¸­çš„ name å­—æ®µä¸å½“å‰å¯¹è±¡çš„ metadata ä¸­çš„ name å­—æ®µç›¸åŒï¼Œè¡¨ç¤ºå½“å‰å¯¹è±¡æ˜¯çˆ¶å¯¹è±¡ï¼ˆownerï¼‰è‡ªå·±åˆ›å»ºçš„ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œçˆ¶å¯¹è±¡çš„æ§åˆ¶å™¨ä¸ä¼šå¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå› ä¸ºè¿™ä¸ªå¯¹è±¡æœ¬èº«å°±æ˜¯çˆ¶å¯¹è±¡çš„ä¸€éƒ¨åˆ†ã€‚\nä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ª Deployment ä¸­åˆ›å»ºäº†ä¸€ä¸ª Podï¼Œå¹¶ä¸”å°† Pod çš„ ownerReferences ä¸­çš„ name å­—æ®µè®¾ç½®ä¸º Pod çš„åç§°ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“ Deployment è¢«åˆ é™¤æ—¶ï¼Œç”±äº Pod ä¾èµ–äº Deploymentï¼ŒKubernetes ä¼šå…ˆåˆ é™¤ Deploymentï¼Œç„¶åå†åˆ é™¤ Podã€‚åœ¨åˆ é™¤ Pod æ—¶ï¼Œç”±äº Pod çš„ ownerReferences ä¸­çš„ name å­—æ®µä¸ Pod çš„ metadata ä¸­çš„ name å­—æ®µç›¸åŒï¼Œæ‰€ä»¥æ§åˆ¶å™¨ä¸ä¼šå¯¹ Pod è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œè€Œæ˜¯ä¿ç•™ä¸‹æ¥ä½œä¸º Deployment çš„ä¸€éƒ¨åˆ†ã€‚\né€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Kubernetes ä¸­å»ºç«‹èµ„æºå¯¹è±¡ä¹‹é—´æ›´åŠ å¤æ‚çš„å…³ç³»ï¼Œå®ç°æ›´é«˜çº§åˆ«çš„æ§åˆ¶å’Œç®¡ç†ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® ownerReferences å­—æ®µæ¥å»ºç«‹ Deployment å’Œ Service çš„å…³ç³»ï¼Œä»è€Œå®ç°è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘ç°ã€‚\nenv ç¯å¢ƒå˜é‡ # spec: containers: - env: - name: POD_IP_ADDRESS valueFrom: fieldRef: apiVersion: v1 fieldPath: status.podIP - name: POD_OWN_NAME valueFrom: fieldRef: apiVersion: v1 fieldPath: metadata.name - name: POD_OWN_NAMESPACE valueFrom: fieldRef: apiVersion: v1 fieldPath: metadata.namespace è¿™æ®µ YAML æ–‡ä»¶æè¿°äº†ä¸€ä¸ª Pod ä¸­çš„ä¸‰ä¸ªç¯å¢ƒå˜é‡ã€‚è¿™äº›ç¯å¢ƒå˜é‡çš„å€¼æ˜¯ä» Kubernetes ä¸­è·å–çš„ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨ Pod ä¸­æŒ‡å®šçš„ã€‚\nå…¶ä¸­ï¼ŒPOD_IP_ADDRESS ç¯å¢ƒå˜é‡çš„å€¼ä½¿ç”¨äº† valueFrom å­—æ®µï¼Œå¹¶æŒ‡å®šäº†ä¸€ä¸ª fieldRefï¼Œç”¨äºä»å½“å‰ Pod çš„çŠ¶æ€ä¸­è·å– podIP å­—æ®µçš„å€¼ã€‚POD_IP_ADDRESS ç¯å¢ƒå˜é‡çš„å€¼å°±æ˜¯å½“å‰ Pod çš„ IP åœ°å€ã€‚\nPOD_OWN_NAME å’Œ POD_OWN_NAMESPACE ç¯å¢ƒå˜é‡çš„å€¼ä¹Ÿä½¿ç”¨äº† valueFrom å­—æ®µï¼Œå¹¶æŒ‡å®šäº†ä¸€ä¸ª fieldRefï¼Œç”¨äºä»å½“å‰ Pod çš„å…ƒæ•°æ®ä¸­è·å– name å’Œ namespace å­—æ®µçš„å€¼ã€‚POD_OWN_NAME ç¯å¢ƒå˜é‡çš„å€¼å°±æ˜¯å½“å‰ Pod çš„åç§°ï¼ŒPOD_OWN_NAMESPACE ç¯å¢ƒå˜é‡çš„å€¼å°±æ˜¯å½“å‰ Pod æ‰€å±çš„å‘½åç©ºé—´ã€‚\nè¿™ç§æ–¹å¼å¯ä»¥è®©æˆ‘ä»¬åœ¨å®šä¹‰ Pod æ—¶ï¼ŒåŠ¨æ€åœ°è·å– Pod è‡ªèº«çš„å…ƒæ•°æ®å’ŒçŠ¶æ€ä¿¡æ¯ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯ä½œä¸ºç¯å¢ƒå˜é‡ä¼ é€’ç»™ Pod ä¸­çš„å®¹å™¨ã€‚åœ¨å®¹å™¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯»å–è¿™äº›ç¯å¢ƒå˜é‡çš„å€¼ï¼Œæ¥è·å–å½“å‰ Pod çš„ä¸€äº›é‡è¦ä¿¡æ¯\ninitContainers # dnsPolicy: ClusterFirst enableServiceLinks: true initContainers: - command: - sh - -c - until nc -zvw3 hello-redis-svc.hello-prod.svc.cluster.local 6379; do echo Waiting hello-redis; sleep 5; done; image: xxxx.docker.io/hello-docker/busybox:1.28.1 imagePullPolicy: IfNotPresent name: init-redis resources: {} terminationMessagePath: /dev/termination-log terminationMessagePolicy: File volumeMounts: - mountPath: /var/run/secrets/kubernetes.io/serviceaccount name: kube-api-access-pp4tg readOnly: true - command: - sh - -c - until nc -zvw3 hello-mongodb-svc.hello.svc.cluster.local 27017; do echo Waiting hello-mongodb; sleep 5; done; image: xxxx.docker.io/hello-docker/busybox:1.28.1 imagePullPolicy: IfNotPresent name: init-mongodb resources: {} terminationMessagePath: /dev/termination-log terminationMessagePolicy: File volumeMounts: - mountPath: /var/run/secrets/kubernetes.io/serviceaccount name: kube-api-access-pp4tg readOnly: true è¿™æ®µ YAML é…ç½®æ˜¯å…³äº Kubernetes ä¸­çš„åˆå§‹åŒ–å®¹å™¨ï¼ˆinitContainersï¼‰çš„ã€‚ åˆå§‹åŒ–å®¹å™¨æ˜¯åœ¨ Pod ä¸­æ‰€æœ‰å®¹å™¨å¯åŠ¨ä¹‹å‰è¿è¡Œçš„å®¹å™¨ï¼Œç”¨äºé¢„å¤„ç†æˆ–å‡†å¤‡å®¹å™¨çš„æŸäº›æ–¹é¢ã€‚ åœ¨è¿™ä¸ª YAML é…ç½®ä¸­ï¼Œå®šä¹‰äº†ä¸¤ä¸ªåˆå§‹åŒ–å®¹å™¨ init-redis å’Œ init-mongodbï¼Œåˆ†åˆ«æ£€æŸ¥ hello-redis å’Œ hello-mongodb æ˜¯å¦å‡†å¤‡å°±ç»ªã€‚å…·ä½“åœ°ï¼Œè¿™ä¸¤ä¸ªåˆå§‹åŒ–å®¹å™¨åœ¨å®¹å™¨å†…è¿è¡Œäº†ä¸€ä¸ª until å¾ªç¯ï¼Œæ¯ 5 ç§’å°è¯•è¿æ¥ hello-redis æˆ– hello-mongodb æœåŠ¡ï¼Œå¹¶æ‰“å° Waiting hello-redis æˆ– Waiting hello-mongodb çš„æ—¥å¿—ä¿¡æ¯ã€‚å¦‚æœè¿æ¥æˆåŠŸï¼Œåˆ™é€€å‡ºå¾ªç¯ï¼Œå®¹å™¨åˆå§‹åŒ–æˆåŠŸã€‚åˆå§‹åŒ–å®¹å™¨çš„é•œåƒæ˜¯ xxxx.docker.io/hello-docker/busybox:1.28.1ï¼Œä½¿ç”¨ IfNotPresent ç­–ç•¥æ‹‰å–é•œåƒã€‚å…¶ä¸­ resources å­—æ®µå®šä¹‰äº†è¯¥å®¹å™¨çš„èµ„æºé™åˆ¶å’Œè¯·æ±‚ï¼ŒvolumeMounts å­—æ®µå®šä¹‰äº†å°†å“ªäº›å­˜å‚¨å·æŒ‚è½½åˆ°è¯¥å®¹å™¨çš„å“ªäº›è·¯å¾„ã€‚ ä¸€äº›æ‚é¡¹ # nodeName: Podæ‰€è¦è°ƒåº¦çš„èŠ‚ç‚¹åç§°ã€‚ nodeSelector: ç”¨äºæŒ‡å®šPodæ‰€éœ€çš„æ ‡ç­¾ï¼Œä½¿Podåªèƒ½è¢«å…·æœ‰ç‰¹å®šæ ‡ç­¾çš„èŠ‚ç‚¹è°ƒåº¦ã€‚ preemptionPolicy: Podä¼˜å…ˆçº§æŠ¢å ç­–ç•¥ã€‚å¦‚æœå½“å‰èŠ‚ç‚¹èµ„æºä¸è¶³ï¼Œå¯ä»¥æŠ¢å ä¼˜å…ˆçº§ä½çš„Podæ¥ä¸ºä¼˜å…ˆçº§é«˜çš„Podè…¾å‡ºèµ„æºã€‚PreemptLowerPriorityè¡¨ç¤ºä½ä¼˜å…ˆçº§çš„Podå¯ä»¥è¢«æŠ¢å ã€‚ priority: Podçš„ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šé«˜è¡¨ç¤ºä¼˜å…ˆçº§è¶Šé«˜ã€‚ restartPolicy: Podçš„é‡å¯ç­–ç•¥ï¼Œå¯ä»¥æ˜¯Alwaysã€OnFailureæˆ–Neverã€‚Alwaysè¡¨ç¤ºPodä¸€æ—¦ç»ˆæ­¢å°±ä¼šè‡ªåŠ¨é‡å¯ï¼ŒOnFailureè¡¨ç¤ºåªæœ‰åœ¨é0é€€å‡ºç æ—¶æ‰ä¼šé‡å¯ï¼ŒNeverè¡¨ç¤ºä¸ä¼šè‡ªåŠ¨é‡å¯ã€‚ schedulerName: æŒ‡å®šPodä½¿ç”¨çš„è°ƒåº¦å™¨ã€‚ securityContext: Podçš„å®‰å…¨ä¸Šä¸‹æ–‡ã€‚ serviceAccount: é»˜è®¤ä½¿ç”¨çš„æœåŠ¡è´¦æˆ·ã€‚ serviceAccountName: æŒ‡å®šä½¿ç”¨çš„æœåŠ¡è´¦æˆ·åç§°ã€‚ terminationGracePeriodSeconds: Podç»ˆæ­¢çš„ä¼˜é›…æœŸï¼Œå³Podç»ˆæ­¢æ—¶ç­‰å¾…å¤šé•¿æ—¶é—´åå¼ºåˆ¶ç»ˆæ­¢ã€‚é»˜è®¤ä¸º30ç§’ å…¶ä½™ä¸€äº›çŠ¶æ€ä¿¡æ¯ status : podIPs phase: Running phase initContainerStatuses containerStatuses containerStatuses conditions æŒä¹…å· - PersistentVolume # éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒPersistentVolume æ˜¯ä¸€ä¸ªé›†ç¾¤çº§åˆ«çš„èµ„æºï¼Œä¸å±äºä»»ä½•ä¸€ä¸ªå‘½åç©ºé—´ï¼Œä½†å¯ä»¥é€šè¿‡åœ¨ metadata å­—æ®µä¸­æŒ‡å®š namespace å­—æ®µæ¥å°†å…¶å…³è”åˆ°æŸä¸ªå‘½åç©ºé—´ä¸­ã€‚è¿™ä¸ªå…³è”åªæ˜¯ç”¨æ¥æ–¹ä¾¿æŸ¥æ‰¾å’Œç®¡ç†èµ„æºï¼Œä¸ä¼šå¯¹ PersistentVolume å¯¹è±¡æœ¬èº«äº§ç”Ÿå½±å“ã€‚\nçŸ¥è¯†é—®ç­” # 1. nodeSelector å’Œ nodeSelectorTerms æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ # ChatGPT:\nåœ¨ Kubernetes ä¸­ï¼ŒnodeSelector å’Œ nodeSelectorTerms éƒ½æ˜¯ç”¨æ¥é€‰æ‹©å“ªäº›èŠ‚ç‚¹å¯ä»¥è¿è¡Œ Pod çš„ã€‚ nodeSelector æ˜¯ PodSpec ä¸­çš„ä¸€ä¸ªå­—æ®µï¼Œå®ƒç”¨äºæŒ‡å®šä¸€ä¸ªé”®å€¼å¯¹ï¼Œåªæœ‰è¿è¡Œåœ¨å…·æœ‰æŒ‡å®šæ ‡ç­¾çš„èŠ‚ç‚¹ä¸Šçš„ Pod æ‰ä¼šè¢«è°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹ä¸Šã€‚ä¾‹å¦‚ï¼š apiVersion: v1 kind: Pod metadata: name: my-pod spec: nodeSelector: kubernetes.io/hostname: node-1 containers: - name: my-container image: my-image åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒnodeSelector å­—æ®µæŒ‡å®šäº† Pod åªèƒ½è°ƒåº¦åˆ°å…·æœ‰æ ‡ç­¾ kubernetes.io/hostname=node-1 çš„èŠ‚ç‚¹ä¸Šã€‚ è€Œ nodeSelectorTerms æ˜¯ä¸€ä¸ªæ›´é«˜çº§åˆ«çš„æœºåˆ¶ï¼Œå®ƒå…è®¸åœ¨ä¸€ä¸ª Pod ä¸­æŒ‡å®šå¤šä¸ªé€‰æ‹©æ¡ä»¶ã€‚ä¾‹å¦‚ï¼š\napiVersion: v1 kind: Pod metadata: name: my-pod spec: nodeSelector: matchExpressions: - {key: zone, operator: In, values: [east, west]} - {key: region, operator: NotIn, values: [us-east-1]} matchLabels: environment: production containers: - name: my-container image: my-image åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒnodeSelector å­—æ®µæŒ‡å®šäº†å¤šä¸ªé€‰æ‹©æ¡ä»¶ã€‚å…¶ä¸­ matchExpressions æŒ‡å®šäº†ä¸¤ä¸ªè¡¨è¾¾å¼ï¼Œä¸€ä¸ªæ˜¯ zone æ ‡ç­¾çš„å€¼å¿…é¡»æ˜¯ east æˆ– westï¼Œå¦ä¸€ä¸ªæ˜¯ region æ ‡ç­¾çš„å€¼ä¸èƒ½æ˜¯ us-east-1ã€‚è€Œ matchLabels æŒ‡å®šäº† environment æ ‡ç­¾çš„å€¼å¿…é¡»æ˜¯ productionã€‚\nå› æ­¤ï¼ŒnodeSelector åªèƒ½æŒ‡å®šä¸€ä¸ªé€‰æ‹©æ¡ä»¶ï¼Œè€Œ nodeSelectorTerms å¯ä»¥æŒ‡å®šå¤šä¸ªé€‰æ‹©æ¡ä»¶ã€‚\\\nå¸¸ç”¨å‘½ä»¤ # kubectl apply -f rcm_log_monut_k8s_pod.yaml æŒä¹…å· - PersistentVolume kubectl get persistentvolume kubectl describe persistentvolume example-pv kubectl **delete** persistentvolume example-pv å¸¸ç”¨å­—æ®µ # ä¸‹é¢æ˜¯ä¸€äº› Kubernetes ä¸­å¸¸ç”¨çš„é…ç½®å­—æ®µï¼š\napiVersionï¼š Kubernetes API çš„ç‰ˆæœ¬ï¼Œç”¨äºå®šä¹‰èµ„æºçš„ API ç‰ˆæœ¬å·ã€‚ kindï¼š èµ„æºçš„ç±»å‹ï¼Œæ¯”å¦‚ Podã€Deploymentã€Service ç­‰ã€‚ metadataï¼š å…ƒæ•°æ®å­—æ®µï¼Œç”¨äºå­˜å‚¨ Kubernetes å¯¹è±¡çš„åç§°ã€å‘½åç©ºé—´ã€æ ‡ç­¾ç­‰ä¿¡æ¯ã€‚ specï¼š å¯¹è±¡çš„è§„æ ¼ï¼Œç”¨äºå®šä¹‰å¯¹è±¡çš„æœŸæœ›çŠ¶æ€ï¼Œå¦‚ Pod çš„å®¹å™¨ã€Service çš„ç«¯å£ç­‰ã€‚ statusï¼š å¯¹è±¡çš„çŠ¶æ€ï¼Œç”¨äºè®°å½•å¯¹è±¡çš„å®é™…çŠ¶æ€ï¼Œå¦‚ Pod çš„è¿è¡ŒçŠ¶æ€ã€Service çš„è®¿é—®åœ°å€ç­‰ã€‚ å¦å¤–è¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„å­å­—æ®µï¼Œå¦‚ï¼š\ncontainersï¼š Pod ä¸­çš„å®¹å™¨å®šä¹‰ï¼ŒåŒ…æ‹¬å®¹å™¨åç§°ã€é•œåƒã€å‘½ä»¤ã€å‚æ•°ç­‰ã€‚ portsï¼š Service ä¸­çš„ç«¯å£å®šä¹‰ï¼ŒåŒ…æ‹¬ç«¯å£åç§°ã€åè®®ã€ç«¯å£å·ã€ç›®æ ‡ç«¯å£å·ç­‰ã€‚ selectorï¼š Service ä¸­ç”¨äºé€‰æ‹©åç«¯ Pod çš„æ ‡ç­¾é€‰æ‹©å™¨ã€‚ replicasï¼š Deployment ä¸­æœŸæœ›çš„å‰¯æœ¬æ•°ã€‚ templateï¼š Deployment ä¸­ç”¨äºåˆ›å»º Pod çš„ PodTemplateSpec å®šä¹‰ã€‚ å…¶ä»– # åœ¨ Kubernetes ä¸­ï¼Œannotations å­—æ®µæ˜¯èµ„æºå¯¹è±¡ä¸­çš„ä¸€ä¸ªå…ƒæ•°æ®å­—æ®µï¼Œç”¨äºå­˜å‚¨ä¸€äº›éæ ‡å‡†åŒ–çš„å…ƒæ•°æ®ä¿¡æ¯ã€‚ä¸ metadata å­—æ®µä¸­çš„æ ‡å‡†åŒ–ä¿¡æ¯ä¸åŒï¼Œannotations å­—æ®µä¸­å­˜å‚¨çš„ä¿¡æ¯å¾€å¾€æ˜¯è‡ªå®šä¹‰çš„ã€ä¸æ˜“å½’ç±»çš„æ•°æ®ï¼Œæ¯”å¦‚ä»£ç åº“çš„æäº¤ IDã€é…ç½®æ–‡ä»¶çš„ MD5 æ ¡éªŒå€¼ã€å¤–éƒ¨ç³»ç»Ÿçš„å…³è”ä¿¡æ¯ç­‰ç­‰ã€‚\nannotations # å­—æ®µçš„æ ¼å¼ä¸ºä¸€ä¸ª key-value å¯¹çš„åˆ—è¡¨ï¼Œå…¶ä¸­ key è¡¨ç¤ºæ³¨è§£çš„åç§°ï¼Œvalue è¡¨ç¤ºæ³¨è§£çš„å€¼ã€‚ä¾‹å¦‚ï¼š\napiVersion: v1 kind: Pod metadata: name: my-pod annotations: commit-id: abc123 spec: containers: - name: my-container image: my-image åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ Pod çš„ metadata ä¸­æ·»åŠ äº†ä¸€ä¸ªè‡ªå®šä¹‰æ³¨è§£ commit-idï¼Œå¹¶å°†å…¶å€¼è®¾ç½®ä¸º abc123ã€‚è¿™ä¸ªæ³¨è§£è¡¨ç¤ºå½“å‰ Pod å¯¹åº”çš„ä»£ç åº“çš„æäº¤ IDã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äº annotations å­—æ®µæ˜¯ç”¨äºå­˜å‚¨è‡ªå®šä¹‰å…ƒæ•°æ®ä¿¡æ¯çš„ï¼Œå› æ­¤åœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„é¿å…ä¸å…¶ä»–æ ‡å‡†åŒ–çš„å­—æ®µå‘ç”Ÿå†²çªï¼Œä»¥å…äº§ç”Ÿæ„å¤–çš„åæœã€‚åŒæ—¶ï¼Œç”±äºæ³¨è§£çš„å€¼å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼Œå› æ­¤éœ€è¦å¯¹æ³¨è§£çš„å†…å®¹è¿›è¡Œé€‚å½“çš„éªŒè¯å’Œè½¬ä¹‰ï¼Œä»¥é¿å…å®‰å…¨é£é™©\nownerReferences å­—æ®µ # åœ¨ Kubernetes ä¸­ï¼ŒownerReferences å­—æ®µæ˜¯èµ„æºå¯¹è±¡ä¸­çš„ä¸€ä¸ªå…ƒæ•°æ®å­—æ®µï¼Œç”¨äºæŒ‡å®šå½“å‰å¯¹è±¡çš„æ‰€æœ‰è€…ï¼ˆownerï¼‰ã€‚è¿™ä¸ªå­—æ®µå¯ä»¥ç”¨æ¥å»ºç«‹èµ„æºå¯¹è±¡ä¹‹é—´çš„çˆ¶å­å…³ç³»ï¼Œä¾¿äºç®¡ç†å’Œåƒåœ¾å›æ”¶ã€‚åœ¨ä¸€ä¸ªèµ„æºå¯¹è±¡ä¸­ï¼Œå¯ä»¥åŒæ—¶æŒ‡å®šå¤šä¸ªçˆ¶å¯¹è±¡ï¼ˆownerï¼‰ã€‚\nownerReferences å­—æ®µçš„æ ¼å¼ä¸ºä¸€ä¸ªåŒ…å«å¤šä¸ª ownerReference å¯¹è±¡çš„åˆ—è¡¨ã€‚æ¯ä¸ª ownerReference å¯¹è±¡è¡¨ç¤ºä¸€ä¸ªçˆ¶å¯¹è±¡çš„å¼•ç”¨ï¼Œå…¶ä¸­åŒ…å«äº†çˆ¶å¯¹è±¡çš„ API ç‰ˆæœ¬ã€èµ„æºç±»å‹ã€åç§°å’Œ UIDã€‚ä¾‹å¦‚ï¼š\napiVersion: v1 kind: Pod metadata: name: my-pod ownerReferences: - apiVersion: apps/v1 kind: Deployment name: my-deployment uid: abc123 - apiVersion: apps/v1 kind: ReplicaSet name: my-replicaset uid: def456 spec: containers: - name: my-container image: my-image è¿™æ®µ YAML æ–‡ä»¶æè¿°äº†ä¸€ä¸ªåä¸º my-pod çš„ Pod å¯¹è±¡ï¼Œå®ƒæœ‰ä¸¤ä¸ªçˆ¶å¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯ä¸€ä¸ª Deployment å’Œä¸€ä¸ª ReplicaSetã€‚å…¶ä¸­ï¼ŒDeployment çš„åç§°ä¸º my-deploymentï¼ŒUID ä¸º abc123ï¼ŒReplicaSet çš„åç§°ä¸º my-replicasetï¼ŒUID ä¸º def456ã€‚ è¯¥ Pod ä¸­åªåŒ…å«ä¸€ä¸ªå®¹å™¨ï¼Œåç§°ä¸º my-containerï¼Œä½¿ç”¨é•œåƒä¸º my-imageã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ª Pod å¯¹è±¡çš„ ownerReferences å­—æ®µè¡¨ç¤ºå®ƒæ˜¯ Deployment å’Œ ReplicaSet çš„å­å¯¹è±¡ï¼Œå½“è¿™ä¸¤ä¸ªçˆ¶å¯¹è±¡è¢«åˆ é™¤æ—¶ï¼Œè¯¥ Pod å¯¹è±¡ä¹Ÿä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚å¦å¤–ï¼Œè¿™ä¸ª Pod å¯¹è±¡å’Œå…¶çˆ¶å¯¹è±¡éƒ½å±äºåŒä¸€ä¸ªå‘½åç©ºé—´ï¼Œå› ä¸ºæ²¡æœ‰åœ¨ metadata ä¸­æŒ‡å®š namespace å­—æ®µ åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ Pod çš„ metadata ä¸­æ·»åŠ äº†ä¸¤ä¸ªçˆ¶å¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯ä¸€ä¸ª Deployment å’Œä¸€ä¸ª ReplicaSetã€‚è¿™äº›ä¿¡æ¯å¯ä»¥å¸®åŠ© Kubernetes æ›´å¥½åœ°ç®¡ç†è¿™äº›å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä¾¿äºè¿›è¡Œåƒåœ¾å›æ”¶å’Œç‰ˆæœ¬æ§åˆ¶ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒownerReferences å­—æ®µä¸­çš„å¯¹è±¡å¿…é¡»æ˜¯åŒä¸€ä¸ªå‘½åç©ºé—´ä¸­çš„èµ„æºå¯¹è±¡ï¼Œå¦åˆ™ä¼šå¼•å‘é”™è¯¯ã€‚å¦å¤–ï¼Œåœ¨ä½¿ç”¨ ownerReferences å­—æ®µæ—¶éœ€è¦æ³¨æ„é¿å…å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œä»¥å…äº§ç”Ÿæ„å¤–çš„åæœã€‚\nownerReferences ä¸­çš„nameå’Œè¯¥pod nameç›¸åŒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ # åœ¨ Kubernetes ä¸­ï¼Œå¦‚æœä¸€ä¸ªèµ„æºå¯¹è±¡çš„ ownerReferences ä¸­çš„ name å­—æ®µä¸å½“å‰å¯¹è±¡çš„ metadata ä¸­çš„ name å­—æ®µç›¸åŒï¼Œè¡¨ç¤ºå½“å‰å¯¹è±¡æ˜¯çˆ¶å¯¹è±¡ï¼ˆownerï¼‰è‡ªå·±åˆ›å»ºçš„ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œçˆ¶å¯¹è±¡çš„æ§åˆ¶å™¨ä¸ä¼šå¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œå› ä¸ºè¿™ä¸ªå¯¹è±¡æœ¬èº«å°±æ˜¯çˆ¶å¯¹è±¡çš„ä¸€éƒ¨åˆ†ã€‚\nä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ª Deployment ä¸­åˆ›å»ºäº†ä¸€ä¸ª Podï¼Œå¹¶ä¸”å°† Pod çš„ ownerReferences ä¸­çš„ name å­—æ®µè®¾ç½®ä¸º Pod çš„åç§°ã€‚è¿™æ ·ä¸€æ¥ï¼Œå½“ Deployment è¢«åˆ é™¤æ—¶ï¼Œç”±äº Pod ä¾èµ–äº Deploymentï¼ŒKubernetes ä¼šå…ˆåˆ é™¤ Deploymentï¼Œç„¶åå†åˆ é™¤ Podã€‚åœ¨åˆ é™¤ Pod æ—¶ï¼Œç”±äº Pod çš„ ownerReferences ä¸­çš„ name å­—æ®µä¸ Pod çš„ metadata ä¸­çš„ name å­—æ®µç›¸åŒï¼Œæ‰€ä»¥æ§åˆ¶å™¨ä¸ä¼šå¯¹ Pod è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œè€Œæ˜¯ä¿ç•™ä¸‹æ¥ä½œä¸º Deployment çš„ä¸€éƒ¨åˆ†ã€‚\né€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Kubernetes ä¸­å»ºç«‹èµ„æºå¯¹è±¡ä¹‹é—´æ›´åŠ å¤æ‚çš„å…³ç³»ï¼Œå®ç°æ›´é«˜çº§åˆ«çš„æ§åˆ¶å’Œç®¡ç†ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® ownerReferences å­—æ®µæ¥å»ºç«‹ Deployment å’Œ Service çš„å…³ç³»ï¼Œä»è€Œå®ç°è´Ÿè½½å‡è¡¡å’ŒæœåŠ¡å‘ç°ã€‚\nenv ç¯å¢ƒå˜é‡ # spec: containers: - env: - name: POD_IP_ADDRESS valueFrom: fieldRef: apiVersion: v1 fieldPath: status.podIP - name: POD_OWN_NAME valueFrom: fieldRef: apiVersion: v1 fieldPath: metadata.name - name: POD_OWN_NAMESPACE valueFrom: fieldRef: apiVersion: v1 fieldPath: metadata.namespace è¿™æ®µ YAML æ–‡ä»¶æè¿°äº†ä¸€ä¸ª Pod ä¸­çš„ä¸‰ä¸ªç¯å¢ƒå˜é‡ã€‚è¿™äº›ç¯å¢ƒå˜é‡çš„å€¼æ˜¯ä» Kubernetes ä¸­è·å–çš„ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨ Pod ä¸­æŒ‡å®šçš„ã€‚\nå…¶ä¸­ï¼ŒPOD_IP_ADDRESS ç¯å¢ƒå˜é‡çš„å€¼ä½¿ç”¨äº† valueFrom å­—æ®µï¼Œå¹¶æŒ‡å®šäº†ä¸€ä¸ª fieldRefï¼Œç”¨äºä»å½“å‰ Pod çš„çŠ¶æ€ä¸­è·å– podIP å­—æ®µçš„å€¼ã€‚POD_IP_ADDRESS ç¯å¢ƒå˜é‡çš„å€¼å°±æ˜¯å½“å‰ Pod çš„ IP åœ°å€ã€‚\nPOD_OWN_NAME å’Œ POD_OWN_NAMESPACE ç¯å¢ƒå˜é‡çš„å€¼ä¹Ÿä½¿ç”¨äº† valueFrom å­—æ®µï¼Œå¹¶æŒ‡å®šäº†ä¸€ä¸ª fieldRefï¼Œç”¨äºä»å½“å‰ Pod çš„å…ƒæ•°æ®ä¸­è·å– name å’Œ namespace å­—æ®µçš„å€¼ã€‚POD_OWN_NAME ç¯å¢ƒå˜é‡çš„å€¼å°±æ˜¯å½“å‰ Pod çš„åç§°ï¼ŒPOD_OWN_NAMESPACE ç¯å¢ƒå˜é‡çš„å€¼å°±æ˜¯å½“å‰ Pod æ‰€å±çš„å‘½åç©ºé—´ã€‚\nè¿™ç§æ–¹å¼å¯ä»¥è®©æˆ‘ä»¬åœ¨å®šä¹‰ Pod æ—¶ï¼ŒåŠ¨æ€åœ°è·å– Pod è‡ªèº«çš„å…ƒæ•°æ®å’ŒçŠ¶æ€ä¿¡æ¯ï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯ä½œä¸ºç¯å¢ƒå˜é‡ä¼ é€’ç»™ Pod ä¸­çš„å®¹å™¨ã€‚åœ¨å®¹å™¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯»å–è¿™äº›ç¯å¢ƒå˜é‡çš„å€¼ï¼Œæ¥è·å–å½“å‰ Pod çš„ä¸€äº›é‡è¦ä¿¡æ¯\ninitContainers # dnsPolicy: ClusterFirst enableServiceLinks: true initContainers: - command: - sh - -c - until nc -zvw3 bsa-redis-svc.bsa-prod.svc.cluster.local 6379; do echo Waiting BSA-redis; sleep 5; done; image: repos-wh.inone.nsfocus.com/bsa-3rd-docker/busybox:1.28.1 imagePullPolicy: IfNotPresent name: init-redis resources: {} terminationMessagePath: /dev/termination-log terminationMessagePolicy: File volumeMounts: - mountPath: /var/run/secrets/kubernetes.io/serviceaccount name: kube-api-access-pp4tg readOnly: true - command: - sh - -c - until nc -zvw3 bsa-mongodb-svc.bsa-paas.svc.cluster.local 27017; do echo Waiting BSA-mongodb; sleep 5; done; image: repos-wh.inone.nsfocus.com/bsa-3rd-docker/busybox:1.28.1 imagePullPolicy: IfNotPresent name: init-mongodb resources: {} terminationMessagePath: /dev/termination-log terminationMessagePolicy: File volumeMounts: - mountPath: /var/run/secrets/kubernetes.io/serviceaccount name: kube-api-access-pp4tg readOnly: true è¿™æ®µ YAML é…ç½®æ˜¯å…³äº Kubernetes ä¸­çš„åˆå§‹åŒ–å®¹å™¨ï¼ˆinitContainersï¼‰çš„ã€‚ åˆå§‹åŒ–å®¹å™¨æ˜¯åœ¨ Pod ä¸­æ‰€æœ‰å®¹å™¨å¯åŠ¨ä¹‹å‰è¿è¡Œçš„å®¹å™¨ï¼Œç”¨äºé¢„å¤„ç†æˆ–å‡†å¤‡å®¹å™¨çš„æŸäº›æ–¹é¢ã€‚ åœ¨è¿™ä¸ª YAML é…ç½®ä¸­ï¼Œå®šä¹‰äº†ä¸¤ä¸ªåˆå§‹åŒ–å®¹å™¨ init-redis å’Œ init-mongodbï¼Œåˆ†åˆ«æ£€æŸ¥ BSA-redis å’Œ BSA-mongodb æ˜¯å¦å‡†å¤‡å°±ç»ªã€‚å…·ä½“åœ°ï¼Œè¿™ä¸¤ä¸ªåˆå§‹åŒ–å®¹å™¨åœ¨å®¹å™¨å†…è¿è¡Œäº†ä¸€ä¸ª until å¾ªç¯ï¼Œæ¯ 5 ç§’å°è¯•è¿æ¥ BSA-redis æˆ– BSA-mongodb æœåŠ¡ï¼Œå¹¶æ‰“å° Waiting BSA-redis æˆ– Waiting BSA-mongodb çš„æ—¥å¿—ä¿¡æ¯ã€‚å¦‚æœè¿æ¥æˆåŠŸï¼Œåˆ™é€€å‡ºå¾ªç¯ï¼Œå®¹å™¨åˆå§‹åŒ–æˆåŠŸã€‚åˆå§‹åŒ–å®¹å™¨çš„é•œåƒæ˜¯ repos-wh.inone.nsfocus.com/bsa-3rd-docker/busybox:1.28.1ï¼Œä½¿ç”¨ IfNotPresent ç­–ç•¥æ‹‰å–é•œåƒã€‚å…¶ä¸­ resources å­—æ®µå®šä¹‰äº†è¯¥å®¹å™¨çš„èµ„æºé™åˆ¶å’Œè¯·æ±‚ï¼ŒvolumeMounts å­—æ®µå®šä¹‰äº†å°†å“ªäº›å­˜å‚¨å·æŒ‚è½½åˆ°è¯¥å®¹å™¨çš„å“ªäº›è·¯å¾„ã€‚ scancenter - inité¡¹ç›®\nä¸€äº›æ‚é¡¹ # nodeName: Podæ‰€è¦è°ƒåº¦çš„èŠ‚ç‚¹åç§°ã€‚ nodeSelector: ç”¨äºæŒ‡å®šPodæ‰€éœ€çš„æ ‡ç­¾ï¼Œä½¿Podåªèƒ½è¢«å…·æœ‰ç‰¹å®šæ ‡ç­¾çš„èŠ‚ç‚¹è°ƒåº¦ã€‚ preemptionPolicy: Podä¼˜å…ˆçº§æŠ¢å ç­–ç•¥ã€‚å¦‚æœå½“å‰èŠ‚ç‚¹èµ„æºä¸è¶³ï¼Œå¯ä»¥æŠ¢å ä¼˜å…ˆçº§ä½çš„Podæ¥ä¸ºä¼˜å…ˆçº§é«˜çš„Podè…¾å‡ºèµ„æºã€‚PreemptLowerPriorityè¡¨ç¤ºä½ä¼˜å…ˆçº§çš„Podå¯ä»¥è¢«æŠ¢å ã€‚ priority: Podçš„ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šé«˜è¡¨ç¤ºä¼˜å…ˆçº§è¶Šé«˜ã€‚ restartPolicy: Podçš„é‡å¯ç­–ç•¥ï¼Œå¯ä»¥æ˜¯Alwaysã€OnFailureæˆ–Neverã€‚Alwaysè¡¨ç¤ºPodä¸€æ—¦ç»ˆæ­¢å°±ä¼šè‡ªåŠ¨é‡å¯ï¼ŒOnFailureè¡¨ç¤ºåªæœ‰åœ¨é0é€€å‡ºç æ—¶æ‰ä¼šé‡å¯ï¼ŒNeverè¡¨ç¤ºä¸ä¼šè‡ªåŠ¨é‡å¯ã€‚ schedulerName: æŒ‡å®šPodä½¿ç”¨çš„è°ƒåº¦å™¨ã€‚ securityContext: Podçš„å®‰å…¨ä¸Šä¸‹æ–‡ã€‚ serviceAccount: é»˜è®¤ä½¿ç”¨çš„æœåŠ¡è´¦æˆ·ã€‚ serviceAccountName: æŒ‡å®šä½¿ç”¨çš„æœåŠ¡è´¦æˆ·åç§°ã€‚ terminationGracePeriodSeconds: Podç»ˆæ­¢çš„ä¼˜é›…æœŸï¼Œå³Podç»ˆæ­¢æ—¶ç­‰å¾…å¤šé•¿æ—¶é—´åå¼ºåˆ¶ç»ˆæ­¢ã€‚é»˜è®¤ä¸º30ç§’ å…¶ä½™ä¸€äº›çŠ¶æ€ä¿¡æ¯ status : podIPs phase: Running phase initContainerStatuses containerStatuses containerStatuses conditions æŒä¹…å· - PersistentVolume # éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒPersistentVolume æ˜¯ä¸€ä¸ªé›†ç¾¤çº§åˆ«çš„èµ„æºï¼Œä¸å±äºä»»ä½•ä¸€ä¸ªå‘½åç©ºé—´ï¼Œä½†å¯ä»¥é€šè¿‡åœ¨Â metadata å­—æ®µä¸­æŒ‡å®šÂ namespace å­—æ®µæ¥å°†å…¶å…³è”åˆ°æŸä¸ªå‘½åç©ºé—´ä¸­ã€‚è¿™ä¸ªå…³è”åªæ˜¯ç”¨æ¥æ–¹ä¾¿æŸ¥æ‰¾å’Œç®¡ç†èµ„æºï¼Œä¸ä¼šå¯¹Â PersistentVolume å¯¹è±¡æœ¬èº«äº§ç”Ÿå½±å“ã€‚\nservice # k8s è·¯ç”±è§£æ # \u0026ldquo;host\u0026rdquo;: \u0026ldquo;choi-wan-rabbitmq.nscloud.svc.cluster.local\u0026rdquo; è§£é‡Šè¿™æ®µk8sé…ç½®\n4/24/2023, 5:36:06 PM\nè¿™æ®µ Kubernetesï¼ˆk8sï¼‰é…ç½®ä¸­çš„ \u0026ldquo;host\u0026rdquo;: \u0026ldquo;choi-wan-rabbitmq.nscloud.svc.cluster.local\u0026rdquo; æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºè¿æ¥åˆ° RabbitMQ æ¶ˆæ¯ä»£ç†æœåŠ¡çš„ä¸»æœºåœ°å€ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ª Kubernetes é›†ç¾¤å†…éƒ¨çš„æœåŠ¡åœ°å€ï¼Œè¯¥æœåŠ¡è¢«å‘½åä¸º choi-wan-rabbitmqï¼Œå¹¶ä½äº nscloud å‘½åç©ºé—´çš„ svcï¼ˆServiceï¼‰èµ„æºä¸­ã€‚\nå¦‚æœåº”ç”¨ç¨‹åºéœ€è¦è¿æ¥åˆ° scan.rabbitmq.ros.nsfocus.com ä¸Šè¿è¡Œçš„ RabbitMQ æœåŠ¡ï¼Œåˆ™éœ€è¦åœ¨ Kubernetes ä¸­åˆ›å»ºä¸€ä¸ªå¤–éƒ¨æœåŠ¡æˆ–ä½¿ç”¨ Kubernetes çš„ DNS è§£æåŠŸèƒ½å°†è¯¥ä¸»æœºåæ˜ å°„åˆ° RabbitMQ æœåŠ¡çš„ IP åœ°å€ã€‚\n4/24/2023, 5:54:22 PM\nsvc.cluster.local åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆï¼Ÿ\n4/24/2023, 5:54:40 PM\nåœ¨ Kubernetes ä¸­ï¼Œsvc.cluster.local æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„åŸŸååç¼€ï¼Œç”¨äºå°†æœåŠ¡åç§°è§£æä¸ºé›†ç¾¤å†…éƒ¨çš„ IP åœ°å€ã€‚å…·ä½“æ¥è¯´ï¼Œsvc ä»£è¡¨ Kubernetes ä¸­çš„ Service èµ„æºç±»å‹ï¼Œcluster.local æ˜¯ Kubernetes é›†ç¾¤çš„é»˜è®¤åŸŸååç¼€ã€‚å› æ­¤ï¼Œå½“åº”ç”¨ç¨‹åºéœ€è¦è¿æ¥åˆ° Kubernetes é›†ç¾¤ä¸­çš„æœåŠ¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¯¥æœåŠ¡çš„åç§°ä½œä¸ºä¸»æœºåï¼Œå¹¶åœ¨æœ«å°¾æ·»åŠ  svc.cluster.local åç¼€æ¥è·å¾—æœåŠ¡çš„ IP åœ°å€ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œchoi-wan-rabbitmq.nscloud.svc.cluster.local æ˜¯ choi-wan-rabbitmq æœåŠ¡çš„å®Œæ•´åŸŸåï¼Œå®ƒå°†è¢«è§£æä¸º RabbitMQ æ¶ˆæ¯ä»£ç†æœåŠ¡çš„ IP åœ°å€ï¼Œä»è€Œä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿä¸è¯¥æœåŠ¡è¿›è¡Œé€šä¿¡ã€‚\nè®¿é—®åˆ«çš„å‘½åç©ºé—´ä¸‹çš„Service # curl http://{{service_name}}.{{namespace_name}}:{{serverport}}/{{serverpath}} é…ç½®ä¸€ä¸ªrabbitmqç»™å¤§å®¶ç”¨ # åœ¨k8s æ–°å»ºä¸€ä¸ªå…¬å…±rabbitmqä¾›æ‰€æœ‰podä½¿ç”¨åº”è¯¥å¦‚ä½•æ“ä½œï¼Ÿ\n4/24/2023, 5:34:27 PM\nåœ¨ Kubernetes ä¸­åˆ›å»ºä¸€ä¸ªå…±äº«çš„ RabbitMQ æœåŠ¡ä¾›æ‰€æœ‰ Pod ä½¿ç”¨ï¼Œéœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š\nåˆ›å»º RabbitMQ é•œåƒï¼šå¯ä»¥ä½¿ç”¨ Dockerfile æˆ–è€…ä» Docker Hub ä¸‹è½½ç°æˆçš„ RabbitMQ é•œåƒã€‚ é…ç½® RabbitMQï¼šä¿®æ”¹ RabbitMQ çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬é»˜è®¤ç”¨æˆ·åå’Œå¯†ç ã€ç«¯å£å·ã€è™šæ‹Ÿä¸»æœºç­‰ã€‚ åˆ›å»º Kubernetes Serviceï¼šä½¿ç”¨ Kubernetes çš„ Service èµ„æºç±»å‹æ¥åˆ›å»ºä¸€ä¸ª RabbitMQ æœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡ä¼šä¸º RabbitMQ æä¾›ä¸€ä¸ªç¨³å®šçš„ IP åœ°å€å’Œç«¯å£ã€‚å¯ä»¥é€‰æ‹© ClusterIPã€LoadBalancer æˆ–è€… NodePort ç±»å‹çš„æœåŠ¡ã€‚ åˆ›å»º Kubernetes Deploymentï¼šåˆ›å»ºä¸€ä¸ª RabbitMQ çš„ Deployment èµ„æºï¼Œç”¨äºå®ä¾‹åŒ– RabbitMQ çš„å®¹å™¨ï¼Œå¹¶ä¸”å°†è¿™ä¸ªèµ„æºå½’å±åˆ°åˆšæ‰åˆ›å»ºçš„ Service ä¸Šï¼Œç¡®ä¿æ‰€æœ‰çš„ Pod éƒ½å¯ä»¥è®¿é—®åˆ° RabbitMQ æœåŠ¡ã€‚ éªŒè¯ RabbitMQ æ˜¯å¦å¯ç”¨ï¼šä½¿ç”¨ Kubernetes Dashboard æˆ–è€… kubectl å‘½ä»¤è¡Œå·¥å…·ï¼Œè¿æ¥åˆ° RabbitMQ æœåŠ¡è¿›è¡ŒéªŒè¯ï¼Œç¡®ä¿å®ƒèƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚ åœ¨å…¶ä»–çš„ Kubernetes Pod ä¸­ä½¿ç”¨ RabbitMQï¼šåœ¨å…¶ä»–çš„ Pod ä¸­å®‰è£… RabbitMQ å®¢æˆ·ç«¯ï¼Œå¹¶ä½¿ç”¨ Service çš„ IP å’Œç«¯å£è®¿é—® RabbitMQ æœåŠ¡ï¼Œå®ç° Pod ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ã€‚ æ€»ä½“æ¥è¯´ï¼Œåˆ›å»ºå…±äº«çš„ RabbitMQ æœåŠ¡éœ€è¦åœ¨ Kubernetes ä¸­åˆ›å»ºä¸€ä¸ªå¸¦æœ‰è‡ªåŠ¨ä¼¸ç¼©åŠŸèƒ½çš„ Deploymentï¼Œå¹¶å°†å®ƒç»‘å®šåˆ°ä¸€ä¸ªç¨³å®šçš„ Service ä¸Šï¼Œç„¶ååœ¨å…¶ä»–çš„ Pod ä¸­ä½¿ç”¨ RabbitMQ å®¢æˆ·ç«¯æ¥è¿æ¥è¯¥æœåŠ¡ã€‚\n4/24/2023, 5:34:49 PM\nè¯·æä¾›ä¸€ä¸‹ä¸Šè¿°æ‰€éœ€çš„ç¤ºä¾‹yamlæ–‡ä»¶å†…å®¹\n4/24/2023, 5:35:52 PM\nä»¥ä¸‹æ˜¯åˆ›å»ºå…±äº«çš„ RabbitMQ æœåŠ¡æ‰€éœ€çš„ç¤ºä¾‹ YAML æ–‡ä»¶å†…å®¹ï¼š\nRabbitMQ é•œåƒçš„ YAML æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š å¤åˆ¶ä»£ç  apiVersion: v1 kind: Pod metadata: name: rabbitmq-pod spec: containers: - name: rabbitmq image: rabbitmq ports: - containerPort: 5672 name: amqp - containerPort: 15672 name: http æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ Docker Hub ä¸Šçš„é»˜è®¤ RabbitMQ é•œåƒï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰ Dockerfile æ¥æ„å»ºã€‚\nRabbitMQ é…ç½®æ–‡ä»¶çš„ YAML æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š å¤åˆ¶ä»£ç  apiVersion: v1 kind: ConfigMap metadata: name: rabbitmq-config data: rabbitmq.conf: | loopback_users.guest = false listeners.tcp.default = 5672 management.listener.port = 15672 enabled_plugins: | [rabbitmq_management]. è¿™é‡Œä½¿ç”¨ ConfigMap æ¥å­˜å‚¨ RabbitMQ çš„é…ç½®ä¿¡æ¯ã€‚é…ç½®æ–‡ä»¶ä¸­ç¦ç”¨äº†é»˜è®¤ç”¨æˆ· guestï¼Œå¼€å¯äº† TCP ç›‘å¬ç«¯å£å’Œç®¡ç†ç•Œé¢ç«¯å£ï¼Œå¹¶ä¸”å¯ç”¨äº† RabbitMQ ç®¡ç†æ’ä»¶ã€‚\nRabbitMQ Service çš„ YAML æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š å¤åˆ¶ä»£ç  apiVersion: v1 kind: Service metadata: name: rabbitmq-service spec: selector: app: rabbitmq ports: - name: amqp port: 5672 targetPort: amqp - name: http port: 15672 targetPort: http type: ClusterIP è¿™é‡Œåˆ›å»ºçš„æ˜¯ ClusterIP ç±»å‹çš„ Serviceï¼Œå®ƒä¼šä¸º RabbitMQ æä¾›ä¸€ä¸ªç¨³å®šçš„ IP åœ°å€å’Œç«¯å£ã€‚\nRabbitMQ Deployment çš„ YAML æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š å¤åˆ¶ä»£ç  apiVersion: apps/v1 kind: Deployment metadata: name: rabbitmq-deployment spec: selector: matchLabels: app: rabbitmq replicas: 1 template: metadata: labels: app: rabbitmq spec: volumes: - name: rabbitmq-config-volume configMap: name: rabbitmq-config containers: - name: rabbitmq image: rabbitmq ports: - containerPort: 5672 name: amqp - containerPort: 15672 name: http volumeMounts: - name: rabbitmq-config-volume mountPath: /etc/rabbitmq/ è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªå¸¦æœ‰è‡ªåŠ¨ä¼¸ç¼©åŠŸèƒ½çš„ Deploymentï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°åˆšæ‰åˆ›å»ºçš„ Service ä¸Šã€‚Deployment ä¸­æŒ‡å®šäº† Pod çš„æ ‡ç­¾ï¼Œé€šè¿‡ ConfigMap æŒ‚è½½äº† RabbitMQ çš„é…ç½®æ–‡ä»¶ï¼Œç¡®ä¿æ‰€æœ‰çš„ Pod éƒ½å¯ä»¥è®¿é—®åˆ° RabbitMQ æœåŠ¡ã€‚\néªŒè¯ RabbitMQ æ˜¯å¦å¯ç”¨çš„ YAML æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š å¤åˆ¶ä»£ç  apiVersion: v1 kind: Pod metadata: name: rabbitmq-client-pod spec: containers: 4/24/2023, 5:36:17 PM\nç»§ç»­\n4/24/2023, 5:37:21 PM\nä»¥ä¸‹æ˜¯åˆ›å»ºå…±äº«çš„ RabbitMQ æœåŠ¡æ‰€éœ€çš„ç¤ºä¾‹ YAML æ–‡ä»¶å†…å®¹ï¼š\nRabbitMQ é•œåƒçš„ YAML æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š å¤åˆ¶ä»£ç  apiVersion: v1 kind: Pod metadata: name: rabbitmq-pod spec: containers: - name: rabbitmq image: rabbitmq ports: - containerPort: 5672 name: amqp - containerPort: 15672 name: http æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ Docker Hub ä¸Šçš„é»˜è®¤ RabbitMQ é•œåƒï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰ Dockerfile æ¥æ„å»ºã€‚\nRabbitMQ é…ç½®æ–‡ä»¶çš„ YAML æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š å¤åˆ¶ä»£ç  apiVersion: v1 kind: ConfigMap metadata: name: rabbitmq-config data: rabbitmq.conf: | loopback_users.guest = false listeners.tcp.default = 5672 management.listener.port = 15672 enabled_plugins: | [rabbitmq_management]. è¿™é‡Œä½¿ç”¨ ConfigMap æ¥å­˜å‚¨ RabbitMQ çš„é…ç½®ä¿¡æ¯ã€‚é…ç½®æ–‡ä»¶ä¸­ç¦ç”¨äº†é»˜è®¤ç”¨æˆ· guestï¼Œå¼€å¯äº† TCP ç›‘å¬ç«¯å£å’Œç®¡ç†ç•Œé¢ç«¯å£ï¼Œå¹¶ä¸”å¯ç”¨äº† RabbitMQ ç®¡ç†æ’ä»¶ã€‚\nRabbitMQ Service çš„ YAML æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š å¤åˆ¶ä»£ç  apiVersion: v1 kind: Service metadata: name: rabbitmq-service spec: selector: app: rabbitmq ports: - name: amqp port: 5672 targetPort: amqp - name: http port: 15672 targetPort: http type: ClusterIP è¿™é‡Œåˆ›å»ºçš„æ˜¯ ClusterIP ç±»å‹çš„ Serviceï¼Œå®ƒä¼šä¸º RabbitMQ æä¾›ä¸€ä¸ªç¨³å®šçš„ IP åœ°å€å’Œç«¯å£ã€‚\nRabbitMQ Deployment çš„ YAML æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š å¤åˆ¶ä»£ç  apiVersion: apps/v1 kind: Deployment metadata: name: rabbitmq-deployment spec: selector: matchLabels: app: rabbitmq replicas: 1 template: metadata: labels: app: rabbitmq spec: volumes: - name: rabbitmq-config-volume configMap: name: rabbitmq-config containers: - name: rabbitmq image: rabbitmq ports: - containerPort: 5672 name: amqp - containerPort: 15672 name: http volumeMounts: - name: rabbitmq-config-volume mountPath: /etc/rabbitmq/ è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªå¸¦æœ‰è‡ªåŠ¨ä¼¸ç¼©åŠŸèƒ½çš„ Deploymentï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°åˆšæ‰åˆ›å»ºçš„ Service ä¸Šã€‚Deployment ä¸­æŒ‡å®šäº† Pod çš„æ ‡ç­¾ï¼Œé€šè¿‡ ConfigMap æŒ‚è½½äº† RabbitMQ çš„é…ç½®æ–‡ä»¶ï¼Œç¡®ä¿æ‰€æœ‰çš„ Pod éƒ½å¯ä»¥è®¿é—®åˆ° RabbitMQ æœåŠ¡ã€‚\néªŒè¯ RabbitMQ æ˜¯å¦å¯ç”¨çš„ YAML æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š å¤åˆ¶ä»£ç  apiVersion: v1 kind: Pod metadata: name: rabbitmq-client-pod spec: containers: - name: rabbitmq-client image: rabbitmq command: [\u0026#34;rabbitmqctl\u0026#34;, \u0026#34;list_users\u0026#34;] è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ª Pod æ¥éªŒè¯ RabbitMQ æ˜¯å¦å¯ç”¨ï¼Œä½¿ç”¨ rabbitmqctl å‘½ä»¤åˆ—å‡ºç”¨æˆ·åˆ—è¡¨æ¥æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚\ningress # é…ç½® # k8s kind ingress æ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆç”¨é€”ï¼Ÿ K8s Ingress æ˜¯ Kubernetes é›†ç¾¤ä¸­çš„ä¸€ä¸ªèµ„æºå¯¹è±¡ï¼Œå®šä¹‰äº†ä¸€ç³»åˆ—è·¯ç”±è½¬å‘è§„åˆ™ï¼ˆæˆ–åå‘ä»£ç†è§„åˆ™ï¼‰ï¼Œè§„å®šäº†å¤–éƒ¨è¿›æ¥çš„ HTTP/HTTPS è¯·æ±‚åº”è¯¥è¢«è½¬å‘åˆ°å“ªä¸ª Service ä¸Šã€‚Ingress Controller ç›¸å½“äºæ˜¯ä¸€ä¸ªåå‘ä»£ç†ç¨‹åºï¼Œè´Ÿè´£è§£æ Ingress çš„åå‘ä»£ç†è§„åˆ™ï¼Œå¹¶å®æ—¶æ„ŸçŸ¥ Ingress è½¬å‘è§„åˆ™çš„å˜åŒ–ã€‚ä¸€æ—¦ Ingress è§„åˆ™æœ‰å˜åŒ–ï¼ŒIngress Controller ä¼šåŠæ—¶æ›´æ–°è‡ªå·±ç›¸åº”çš„è½¬å‘è§„åˆ™ï¼Œå¹¶æ ¹æ®è¿™äº›è§„åˆ™ï¼Œå°†æ¥æ”¶åˆ°çš„è¯·æ±‚è½¬å‘åˆ°å¯¹åº”çš„ Serviceã€‚12\nIngress å¯ä»¥æä¾›è´Ÿè½½å‡è¡¡ã€SSL ç»ˆç»“å’ŒåŸºäºåç§°çš„è™šæ‹Ÿæ‰˜ç®¡ç­‰åŠŸèƒ½ã€‚\nä¸¾ä¾‹è¯´æ˜ã€‚å‡è®¾k8sä¸­æœ‰ä¸€ä¸ªæœåŠ¡Aéœ€è¦è®¿é—®k8sä¸­å¦ä¸€ä¸ªæœåŠ¡Båº”è¯¥å¦‚ä½•é€šè¿‡ingress æ¥å®ç° å‡è®¾ä½ çš„ Kubernetes é›†ç¾¤ä¸­æœ‰ä¸€ä¸ªæœåŠ¡ Aï¼Œéœ€è¦è®¿é—®å¦ä¸€ä¸ªæœåŠ¡ Bï¼Œå¯ä»¥é€šè¿‡ Ingress æ¥å®ç°ã€‚é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ª Ingress èµ„æºå¯¹è±¡ï¼Œå®šä¹‰å¤–éƒ¨å¯¹é›†ç¾¤å†…æœåŠ¡çš„è®¿é—®è·¯ç”±ã€‚ä¾‹å¦‚ï¼š\napiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: minimal-ingress annotations: nginx.ingress.kubernetes.io/rewrite-target: / spec: rules: - http: paths: - path: /testpath pathType: Prefix backend: service: name: test port: number: 80 è¿™ä¸ª Ingress å¯¹è±¡å°†ä¼šæŠŠ /testpath çš„è¯·æ±‚è½¬å‘åˆ°åä¸º test çš„ Service ä¸Šã€‚è¿™ä¸ª Service å¯ä»¥æ˜¯æœåŠ¡ Bã€‚1\nå¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¤Ÿå¸®åŠ©ä½ ç†è§£å¦‚ä½•é€šè¿‡ Ingress å®ç°æœåŠ¡ A è®¿é—®æœåŠ¡ Bã€‚å¦‚æœä½ è¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶é—®æˆ‘ã€‚\nç¯å¢ƒå˜é‡åœ¨k8s # k8sè®¾å®šç¯å¢ƒå˜é‡\næ ¹æ®æœç´¢ç»“æœï¼Œk8sè®¾å®šç¯å¢ƒå˜é‡çš„æ–¹æ³•æœ‰ä»¥ä¸‹å‡ ç§12ï¼š\nåœ¨Podçš„yamlæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨envå­—æ®µä¸ºå®¹å™¨æŒ‡å®šç¯å¢ƒå˜é‡ï¼Œä¾‹å¦‚ï¼š apiVersion: v1 kind: Pod metadata: name: envar-demo spec: containers: - name: envar-demo-container image: nginx env: - name: DEMO_GREETING value: \u0026#34;Hello from the environment\u0026#34; - name: DEMO_FAREWELL value: \u0026#34;Such a sweet sorrow\u0026#34; ä½¿ç”¨ConfigMapæˆ–Secretå¯¹è±¡æ¥å­˜å‚¨ç¯å¢ƒå˜é‡çš„å€¼ï¼Œç„¶ååœ¨Podçš„yamlæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨envFromå­—æ®µæˆ–valueFromå­—æ®µæ¥å¼•ç”¨è¿™äº›å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š apiVersion: v1 kind: Pod metadata: name: dapi-test-pod spec: containers: - name: test-container image: k8s.gcr.io/busybox command: [ \u0026#34;/bin/sh\u0026#34;, \u0026#34;-c\u0026#34;, \u0026#34;env\u0026#34; ] env: # Define the environment variable - name: SPECIAL_LEVEL_KEY valueFrom: configMapKeyRef: # The ConfigMap containing the value you want to assign to SPECIAL_LEVEL_KEY name: special-config # Specify the key associated with the value key: special.how ä½¿ç”¨envå­—æ®µä¸ºå®¹å™¨æŒ‡å®šç¯å¢ƒå˜é‡ å’Œ ä½¿ç”¨ConfigMapæˆ–Secretå¯¹è±¡æ¥å­˜å‚¨ç¯å¢ƒå˜é‡ æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\næ ¹æ®æœç´¢ç»“æœï¼Œä½¿ç”¨envå­—æ®µä¸ºå®¹å™¨æŒ‡å®šç¯å¢ƒå˜é‡å’Œä½¿ç”¨ConfigMapæˆ–Secretå¯¹è±¡æ¥å­˜å‚¨ç¯å¢ƒå˜é‡çš„åŒºåˆ«ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹123ï¼š\nä½¿ç”¨envå­—æ®µæ—¶ï¼Œéœ€è¦ä¸ºæ¯ä¸ªå®¹å™¨æŒ‡å®šæ¯ä¸ªç¯å¢ƒå˜é‡çš„å€¼ï¼Œè€Œä½¿ç”¨ConfigMapæˆ–Secretå¯¹è±¡æ—¶ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å¼•ç”¨æ‰€æœ‰çš„é”®å€¼å¯¹ä½œä¸ºç¯å¢ƒå˜é‡ ä½¿ç”¨envå­—æ®µæ—¶ï¼Œç¯å¢ƒå˜é‡çš„å€¼æ˜¯ç›´æ¥å†™åœ¨Podçš„yamlæ–‡ä»¶ä¸­çš„ï¼Œè€Œä½¿ç”¨ConfigMapæˆ–Secretå¯¹è±¡æ—¶ï¼Œç¯å¢ƒå˜é‡çš„å€¼æ˜¯å­˜å‚¨åœ¨Etcdä¸­çš„ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°ç®¡ç†å’Œä¿æŠ¤é…ç½®ä¿¡æ¯ ä½¿ç”¨envå­—æ®µæ—¶ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹ç¯å¢ƒå˜é‡çš„å€¼ï¼Œéœ€è¦é‡æ–°åˆ›å»ºPodï¼Œè€Œä½¿ç”¨ConfigMapæˆ–Secretå¯¹è±¡æ—¶ï¼Œå¯ä»¥åŠ¨æ€æ›´æ–°ç¯å¢ƒå˜é‡çš„å€¼ï¼Œä¸éœ€è¦é‡å¯Pod ConfigMap # ConfigMapå¯¹è±¡æ˜¯ä¸€ä¸ªå­˜å‚¨é…ç½®æ•°æ®çš„APIå¯¹è±¡\nvolumes: - configMap: defaultMode: 420 items: - key: env.json path: env.json name: env-config name: env-config åœ¨è¿™ä¸ªé…ç½®ä¸­ï¼Œk8sæŒ‚è½½çš„ä¸æ˜¯ç‰©ç†æœºçš„env.jsonæ–‡ä»¶ï¼Œè€Œæ˜¯ConfigMapå¯¹è±¡çš„env.jsoné”®çš„å€¼ã€‚ConfigMapå¯¹è±¡æ˜¯ä¸€ä¸ªå­˜å‚¨é…ç½®æ•°æ®çš„APIå¯¹è±¡ï¼Œå®ƒå¯ä»¥è¢«Podæˆ–å…¶ä»–å¯¹è±¡å¼•ç”¨ ã€‚ä½ å¯ä»¥ä½¿ç”¨kubectlå‘½ä»¤æ¥åˆ›å»ºæˆ–æŸ¥çœ‹ConfigMapå¯¹è±¡ã€‚ä¾‹å¦‚ï¼š\nkubectl create configmap env-config --from-file=env.json kubectl get configmap env-config -o yaml è¿™äº›å‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ªåä¸ºenv-configçš„ConfigMapå¯¹è±¡ï¼Œå®ƒåŒ…å«äº†ä¸€ä¸ªé”®ä¸ºenv.jsonï¼Œå€¼ä¸ºæ–‡ä»¶å†…å®¹çš„é”®å€¼å¯¹ã€‚ç„¶åä½ å¯ä»¥åœ¨volumeä¸­å¼•ç”¨è¿™ä¸ªConfigMapå¯¹è±¡ï¼Œå°±åƒä½ çš„é…ç½®é‚£æ ·ã€‚\nå‡çº§å•ä¸ªæœåŠ¡æµç¨‹(node namespace label) # æ‰“åŒ…build docker image ä¿å­˜æœåŠ¡dockeré•œåƒ: docker save -o fizz_worker-2123.tar repos-xa.inone.nsfocus.com/websafe-docker/fizz_worker:2123 æŸ¥çœ‹å½“å‰é›†ç¾¤ä¸­node: kubectl get node -o wide --show-labels å¹¶æ‰¾å‡ºæ§åˆ¶èŠ‚ç‚¹ å¦‚å«æœ‰: run-package-node,worker k8s-worker1 æ˜¯æ§åˆ¶èŠ‚ç‚¹åç§° é€šè¿‡nodeåæŸ¥çœ‹å…¶ä¸Šæ‰€éƒ¨ç½²çš„podæ˜¯å¦æ˜¯ç›®æ ‡æœåŠ¡: kubectl get pod -A -o wide | grep k8s-worker1 æŸ¥çœ‹å½“å‰æœåŠ¡è¿è¡Œæ‰€å¤„node: kubectl get pod -n websafe -o wide æŸ¥çœ‹æœåŠ¡node æ‹©é€‰å™¨: kubectl get deploy master-fizz-daemon -n websafe -o yaml | grep nodeSelector -9 ä¸€ä¸ª kv ç»™ç›®æ ‡èŠ‚ç‚¹åˆ›å»ºlabel kubectl label nodes k8s-worker1 app-select=websafe-rcmlog æŸ¥çœ‹æ˜¯å¦æˆåŠŸ kubectl get node -n websafe -o wide --show-labels | grep \u0026quot;k8s-worker1\\\\|rcmlogâ€ ä¸Šä¼ é•œåƒåˆ°harbor ä¿®æ”¹deploy yamlæ–‡ä»¶(é•œåƒç‰ˆæœ¬ã€æŒ‚è½½ç›®å½•ã€nodeSelector å…¶ä»–(è‹¥æœ‰))ï¼Œä¿å­˜é€€å‡ºç”Ÿæ•ˆ hostPath æŒ‚è½½\nvolumeMounts: - mountPath: /mnt/NPAI name: rcmlog-claim volumes: - hostPath: path: /opt/nsfocus/NPAI/data/sftp/bsa/rcm_log type: \u0026#34;\u0026#34; name: rcmlog-claim nodeSelector\nspec: nodeSelector: app-select: websafe-rcmlog ä¿®æ”¹ç‰ˆæœ¬å·ä¸ºç›®æ ‡ç‰ˆæœ¬ï¼š2123ï¼ˆimage: [repos-xa.inone.nsfocus.com/websafe-docker/fizz_daemon:](\u0026lt;http://repos-xa.inone.nsfocus.com/websafe-docker/fizz_daemon:1979\u0026gt;)2123)\nDocker Network # åˆ›å»ºç½‘ç»œ websafe-network ä½¿ç”¨ IPv4Address è¿›è¡Œè¿æ¥\ninit_mysql: docker run -p 3306:3306 \\\\ -e MYSQL_ROOT_PASSWORD=123456 \\\\ -e character-set-server=utf8mb4 \\\\ -e collation-server=utf8mb4_unicode_ci \\\\ --network websafe-network -v /x/Code/websafe_online_svn/mysql/conf:/etc/mysql/conf.d \\\\ -v /x/Code/websafe_online_svn/mysql/logs:/logs \\\\ -v /x/Code/websafe_online_svn/mysql/db:/var/lib/mysql \\\\ -v /c/Windows/System32/drivers/etc/HOSTS:/etc/hosts \\\\ --name mysql56 mysql:5.6 init_redis: docker run -p 6379:6379 \\\\ --network websafe-network \\\\ --name redislatest redis:latest --requirepass 3b21d032a7fd8eb51fa7bd8a2e812b78b7b3a36f join_network: docker network connect websafe-network mysql56 docker network connect websafe-network daemon-xxx init_network: docker network create websafe-network check_network: docker network inspect websafe-network docker network inspect websafe-network | findStr IPv4Address run: docker run --name $(CONTAINER_NAME) -p 8888:80 \\\\ -e POD_OWN_NAME=\u0026#34;master-xxxxxx\u0026#34; \\\\ --network websafe-network \\\\ -v /x/Code/websafe_online_svn/env.json:/etc/env.json \\\\ registry.nscloud:5000/kunkka/websafe/scancenter:latest Docker é™åˆ¶å†…å­˜/CPUå ç”¨ # è¿è¡Œdockeræ—¶å¦‚ä½•é™åˆ¶å…¶å†…å­˜å ç”¨ï¼Ÿ\nè¿è¡Œdockeræ—¶å¯ä»¥ä½¿ç”¨**â€“memoryæˆ–-m**é€‰é¡¹æ¥é™åˆ¶å…¶å†…å­˜å ç”¨123ã€‚ä¾‹å¦‚ï¼š\ndocker run -m 512m nginx è¿™ä¸ªå‘½ä»¤ä¼šé™åˆ¶nginxå®¹å™¨ä½¿ç”¨ä¸è¶…è¿‡512MBçš„å†…å­˜ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨**â€“memory-reservation**é€‰é¡¹æ¥è®¾ç½®ä¸€ä¸ªè½¯é™åˆ¶ï¼Œå½“ä¸»æœºå†…å­˜ä¸è¶³æ—¶ï¼Œdockerä¼šå°½é‡ä¿è¯å®¹å™¨çš„å†…å­˜éœ€æ±‚2ã€‚ä¾‹å¦‚ï¼š\ndocker run -m 512m --memory-reservation=256m nginx è¿™ä¸ªå‘½ä»¤ä¼šä¿è¯nginxå®¹å™¨è‡³å°‘æœ‰256MBçš„å†…å­˜ï¼Œä½†æœ€å¤šä¸è¶…è¿‡512MBã€‚\nå¦‚ä½•é™åˆ¶cpuå ç”¨å‘¢ï¼Ÿ\nè¿è¡Œdockeræ—¶å¯ä»¥ä½¿ç”¨**â€“cpusæˆ–â€“cpu-quota**é€‰é¡¹æ¥é™åˆ¶å…¶CPUå ç”¨123456ã€‚ä¾‹å¦‚ï¼š\ndocker run --cpus=2 nginx è¿™ä¸ªå‘½ä»¤ä¼šé™åˆ¶nginxå®¹å™¨ä½¿ç”¨ä¸è¶…è¿‡2ä¸ªCPUçš„èµ„æºã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨**â€“cpu-shares**é€‰é¡¹æ¥è®¾ç½®å®¹å™¨çš„CPUä¼˜å…ˆçº§45ã€‚ä¾‹å¦‚ï¼š\ndocker run --cpus=2 --cpu-shares=2000 nginx è¿™ä¸ªå‘½ä»¤ä¼šç»™nginxå®¹å™¨åˆ†é…æ›´é«˜çš„CPUä¼˜å…ˆçº§ï¼Œç›¸å¯¹äºé»˜è®¤å€¼1024ã€‚\nDocker åœ¨ k8s # ä½¿ç”¨k8s åŠ è½½ dockeré•œåƒæ—¶ï¼Œdockerfileä¸­çš„CMDä¸ºä»€ä¹ˆæ²¡æœ‰æ‰§è¡Œï¼Ÿ\næ ¹æ®æœç´¢ç»“æœ12ï¼Œk8sä¸­çš„commandå’Œargsä¼šè¦†ç›–dockerfileä¸­çš„entrypointå’Œcmdï¼Œæ‰€ä»¥å¦‚æœæ‚¨åœ¨k8sé…ç½®æ–‡ä»¶ä¸­è®¾ç½®äº†commandæˆ–argsï¼Œé‚£ä¹ˆdockerfileä¸­çš„cmdå¯èƒ½å°±ä¸ä¼šæ‰§è¡Œã€‚è¯·æ£€æŸ¥æ‚¨çš„k8sé…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¿™æ ·çš„è®¾ç½®ã€‚\nå¦å¤–ï¼Œdockerfileä¸­çš„cmdä¹Ÿå¯èƒ½è¢«å®¹å™¨å¯åŠ¨æ—¶é™„åŠ çš„æŒ‡ä»¤å¿½ç•¥3ï¼Œè¯·æ£€æŸ¥æ‚¨æ˜¯å¦åœ¨å¯åŠ¨å®¹å™¨æ—¶æŒ‡å®šäº†å…¶ä»–å‘½ä»¤ã€‚\nDocker CMD å’Œ K8s Command # å¦‚æœåœ¨k8sé…ç½®ä¸­æ²¡æœ‰æŒ‡å®šcommandï¼Œé‚£ä¹ˆå®¹å™¨å¯åŠ¨æ—¶ä¼šæ‰§è¡Œdockerfileä¸­æŒ‡å®šçš„CMDå‘½ä»¤ä½œä¸ºé»˜è®¤å‘½ä»¤ã€‚å¦‚æœdockerfileä¸­ä¹Ÿæ²¡æœ‰æŒ‡å®šCMDå‘½ä»¤ï¼Œåˆ™å®¹å™¨å¯åŠ¨æ—¶ä¸ä¼šæ‰§è¡Œä»»ä½•å‘½ä»¤ï¼Œåªæ˜¯å¯åŠ¨ä¸€ä¸ªç©ºçš„å®¹å™¨ã€‚å› æ­¤ï¼Œå¦‚æœæƒ³è¦åœ¨k8sä¸­ä¿ç•™dockerfileä¸­æŒ‡å®šçš„CMDå‘½ä»¤ï¼Œå¯ä»¥ä¸æŒ‡å®šcommandï¼Œæˆ–è€…åœ¨æŒ‡å®šcommandæ—¶å°†CMDå‘½ä»¤åŒ…å«åœ¨å†…ã€‚ å¯åŠ¨å‘½ä»¤åº”è¯¥å†™åœ¨k8sé…ç½®ä¸­çš„commandä¸­ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥çµæ´»åœ°æ§åˆ¶å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œè€Œä¸å—dockerfileä¸­çš„CMDå‘½ä»¤çš„é™åˆ¶ã€‚æ­¤å¤–ï¼Œå°†å¯åŠ¨å‘½ä»¤å†™åœ¨k8sé…ç½®ä¸­ä¹Ÿå¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œé…ç½®ç®¡ç†å’Œç‰ˆæœ¬æ§åˆ¶ï¼Œä¾¿äºç»´æŠ¤å’Œæ›´æ–°ã€‚å½“ç„¶ï¼Œå¦‚æœdockerfileä¸­çš„CMDå‘½ä»¤å·²ç»æ»¡è¶³éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨é»˜è®¤å‘½ä»¤ï¼Œä¸éœ€è¦åœ¨k8sé…ç½®ä¸­æŒ‡å®šcommandã€‚ "},{"id":60,"href":"/posts/my-first-post/","title":"My First Post","section":"Blog","content":" Hello World # Hello, World\n"},{"id":61,"href":"/docs/programmer/langs/cmake/","title":"CMake ä½¿ç”¨Tips","section":"ç¼–ç¨‹è¯­è¨€","content":" åœ¨ç¼–è¯‘æ—¶å°†ç¼–è¯‘äº§ç‰©æ”¾åœ¨build # æ®ç½‘å‹æ‰€çŸ¥ï¼Œcmakeæ–‡æ¡£ä¸­æ²¡æœ‰è®°å½•ï¼Œä»…å‡ºäºå…¼å®¹æ€§åŸå› æˆ–å†…éƒ¨ä½¿ç”¨è€Œä¿ç•™ï¼š\n-Bå’Œ-Hæ ‡å¿— # cmake -Hpath/to/source -Bpath/to/build ç”šè‡³ä»æºç›®å½• -B # é‡è¦ï¼š-Båæ²¡æœ‰ç©ºæ ¼\nè¯¥å‘½ä»¤ä¼šè‡ªåŠ¨åˆ›å»ºbuildç›®å½• ä¹‹åcdåˆ°buildä¸‹å»makeå³å¯ cmake . -Bbuild æ ·ä¾‹è®°å½• # OpenCV # CMakeLists.txt æ–‡ä»¶tree -L 1 |-- CMakeLists.txt |-- DisplayImage.cpp |-- DisplayImage.out |-- cmake_install.cmake |-- CMakeCache.txt |-- CMakeFiles |-- Makefile cmake_minimum_required(VERSION 2.8) project( DisplayImageExample ) find_package( OpenCV REQUIRED ) include_directories( ${OpenCV_INCLUDE_DIRS} ) add_executable( DisplayImage.out DisplayImage.cpp ) target_link_libraries( DisplayImage.out ${OpenCV_LIBS} ) Qt # "},{"id":62,"href":"/posts/gpt_share/","title":"GPTæŠ€æœ¯åˆ†äº«","section":"Blog","content":" GPTæŠ€æœ¯åˆ†äº« # å…ˆä»‹ç»å‡ ä¸ªåè¯ # GPT å’Œ ChatGPT # Generative Pre-Training Transformer æ˜¯ä¸€ç§åŸºäºTransformeræ¶æ„çš„é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹.\næˆ‘ä»¬æ‰€æ¥è§¦åˆ°çš„chatgptæ˜¯é’ˆå¯¹gpt3.5æ¨¡å‹çš„ä¸€ç§åº”ç”¨å®ä¾‹, å¦‚ä»Šchatgptå·²ç»ä¸ºä¼šå‘˜ç”¨æˆ·åˆ‡æ¢ä¸ºgpt4.0æ¨¡å‹. æœªæ¥çŸ­æœŸæ—¶é—´å†…åº”è¯¥ä¸ä¼šå¼€æ”¾ç»™å…è´¹ç”¨æˆ·ä½¿ç”¨.\nGPTæ¨¡å‹æœ¬è´¨æ˜¯ç»­å†™æ¨¡å‹, å®ƒæ ¹æ®è¾“å…¥çš„æ–‡æœ¬ç”Ÿæˆç›¸åº”çš„ç»­å†™æ–‡æœ¬, ä»è€Œå®ç°å¯¹è¯ã€æ–‡ç« ç­‰è‡ªç„¶è¯­è¨€æ–‡æœ¬çš„ç”Ÿæˆ. æ‰€ä»¥å…¶å¹¶ä¸å…·å¤‡å®é™…çš„åˆ›æ–°èƒ½åŠ›, åªèƒ½å¯¹ä»¥å¾€çš„â€œç»éªŒâ€åšå‡ºæ¢³ç†.\nLLMs # Large language models (LLMs)å¤§è¯­è¨€æ¨¡å‹, åŒ…æ‹¬GPTå’ŒGLMç­‰, æ˜¯ä¸€ä¸ªç»Ÿç§°. ä»¥ä¸‹æ˜¯è¿™ä¸ªç»Ÿç§°ä¸‹çš„ä¸åŒæ¨¡å‹æ¶æ„ï¼š\nä¸»æµé¢„è®­ç»ƒæ¨¡å‹æ¶æ„ # autoregressiveè‡ªå›å½’æ¨¡å‹ï¼ˆARæ¨¡å‹ï¼‰ï¼šä»£è¡¨ä½œGPT. æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªleft-to-rightçš„è¯­è¨€æ¨¡å‹. é€šå¸¸ç”¨äºç”Ÿæˆå¼ä»»åŠ¡, åœ¨é•¿æ–‡æœ¬ç”Ÿæˆæ–¹é¢å–å¾—äº†å·¨å¤§çš„æˆåŠŸ, æ¯”å¦‚è‡ªç„¶è¯­è¨€ç”Ÿæˆï¼ˆNLGï¼‰é¢†åŸŸçš„ä»»åŠ¡ï¼šæ‘˜è¦ã€ç¿»è¯‘æˆ–æŠ½è±¡é—®ç­”. å½“æ‰©å±•åˆ°åäº¿çº§åˆ«å‚æ•°æ—¶, è¡¨ç°å‡ºäº†å°‘æ ·æœ¬å­¦ä¹ èƒ½åŠ›. ç¼ºç‚¹æ˜¯å•å‘æ³¨æ„åŠ›æœºåˆ¶, åœ¨NLUä»»åŠ¡ä¸­, æ— æ³•å®Œå…¨æ•æ‰ä¸Šä¸‹æ–‡çš„ä¾èµ–å…³ç³».\nautoencodingè‡ªç¼–ç æ¨¡å‹ï¼ˆAEæ¨¡å‹ï¼‰ï¼šä»£è¡¨ä½œBERT. æ˜¯é€šè¿‡æŸä¸ªé™å™ªç›®æ ‡ï¼ˆæ¯”å¦‚MLMï¼‰è®­ç»ƒçš„åŒå‘æ–‡æœ¬ç¼–ç å™¨. ç¼–ç å™¨ä¼šäº§å‡ºé€‚ç”¨äºNLUä»»åŠ¡çš„ä¸Šä¸‹æ–‡è¡¨ç¤º, æ“…é•¿é¢†åŸŸä¸»è¦æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸ, ä¾‹å¦‚æ–‡æœ¬åˆ†ç±»ã€å‘½åå®ä½“è¯†åˆ«ã€æƒ…æ„Ÿåˆ†æã€é—®ç­”ç³»ç»Ÿç­‰. ä½†æ— æ³•ç›´æ¥ç”¨äºæ–‡æœ¬ç”Ÿæˆ.\nencoder-decoderï¼ˆSeq2seqæ¨¡å‹ï¼‰ï¼šä»£è¡¨ä½œT5. é‡‡ç”¨åŒå‘æ³¨æ„åŠ›æœºåˆ¶, é€šå¸¸ç”¨äºæ¡ä»¶ç”Ÿæˆä»»åŠ¡, æ¯”å¦‚æ–‡æœ¬æ‘˜è¦ã€æœºå™¨ç¿»è¯‘ç­‰.\nGLMæ¨¡å‹åŸºäºautoregressive blank infillingæ–¹æ³•, ç»“åˆäº†ä¸Šè¿°ä¸‰ç§é¢„è®­ç»ƒæ¨¡å‹çš„æ€æƒ³, ä»£è¡¨æœ‰æ¸…åå¤§å­¦çš„ChatGLM\nLoRAå’ŒPrompt # Prompt æç¤ºè¯, æ˜¯ä¸€ç§ç”¨äºæŒ‡å¯¼æ¨¡å‹ç”Ÿæˆè¾“å‡ºçš„æ–‡æœ¬ç‰‡æ®µ, Prompté€šå¸¸åŒ…å«ä¸€äº›å…³é”®è¯æˆ–çŸ­è¯­, ç”¨äºæç¤ºæ¨¡å‹ç”Ÿæˆç‰¹å®šç±»å‹çš„æ–‡æœ¬. Promptçš„ä½¿ç”¨å¯ä»¥æé«˜æ¨¡å‹çš„ç”Ÿæˆæ•ˆæœå’Œå‡†ç¡®æ€§, ç‰¹åˆ«æ˜¯åœ¨å¤„ç†ç‰¹å®šé¢†åŸŸçš„æ–‡æœ¬æ—¶. é€šè¿‡ä½¿ç”¨Prompt, æ¨¡å‹å¯ä»¥æ›´å¥½åœ°ç†è§£è¾“å…¥æ–‡æœ¬çš„å«ä¹‰å’Œä¸Šä¸‹æ–‡ä¿¡æ¯, ä»è€Œç”Ÿæˆæ›´åŠ ç¬¦åˆè¦æ±‚çš„è¾“å‡ºæ–‡æœ¬. LoRAè‹±æ–‡å…¨ç§°Low-Rank Adaptation of Large Language Models, ç›´è¯‘ä¸ºå¤§è¯­è¨€æ¨¡å‹çš„ä½é˜¶é€‚åº”, æ˜¯ä¸€ç§PEFTï¼ˆå‚æ•°é«˜æ•ˆæ€§å¾®è°ƒæ–¹æ³•ï¼‰, è¿™æ˜¯å¾®è½¯çš„ç ”ç©¶äººå‘˜ä¸ºäº†è§£å†³å¤§è¯­è¨€æ¨¡å‹å¾®è°ƒè€Œå¼€å‘çš„ä¸€é¡¹æŠ€æœ¯. å½“ç„¶å‚æ•°é«˜æ•ˆæ€§å¾®è°ƒæ–¹æ³•ä¸­å®ç°æœ€ç®€å•çš„æ–¹æ³•è¿˜æ˜¯Prompt tuning, å›ºå®šæ¨¡å‹å‰é¦ˆå±‚å‚æ•°, ä»…ä»…æ›´æ–°éƒ¨åˆ†embeddingå‚æ•°å³å¯å®ç°ä½æˆæœ¬å¾®è°ƒå¤§æ¨¡å‹ LLMså¦‚ä½•äº§ç”Ÿâ€œæ€ç»´â€ # è¿™æ˜¯åœ¨è®­ç»ƒæ•°æ®è¾¾åˆ°ä¸€å®šè§„æ¨¡å, LLMsæ¨¡å‹å¼€å§‹è¡¨ç°å‡ºä¸€ç§ç°è±¡. åº”è¯¥æœ‰è®ºæ–‡è®¨è®ºè¿™ä¸ª, æ²¡æœ‰ç»†çœ‹. ä¸è¿‡å¦‚ä»Šæ¨¡å‹æ‰€è¡¨ç°å‡ºçš„æ•ˆæœéƒ½æ˜¯ä½ä»¥å¤§é‡çš„æŒ‡ä»¤å¾®è°ƒ, æ‰å¾—ä»¥æœ€ç»ˆå‘ˆç°å‡ºæ¥.\næˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ # å› ä¸ºå¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨, å³ä½¿ç›´æ¥ä½¿ç”¨ChatGPTçš„APIä¹Ÿéœ€è¦å¯¹å…¶è¿›è¡Œä¸€å®šçš„èƒ½åŠ›é™åˆ¶å’Œæ ¼å¼åŒ–. ä¸»è¦é€šè¿‡Prompt(æç¤ºè¯)æ¥å®ç°. å¦‚æœä½¿ç”¨GPT-4æˆ–è€…GPT3.5æ¥å£çš„è¯, å¯ä»¥ä»…é€šè¿‡è°ƒæ•´å’Œå¼€å‘æç¤ºè¯æ¥å®ç°æ¯”è¾ƒå¥½çš„æ•ˆæœ.\nä½†å¦‚æœæƒ³è¦ä¿è¯æ•°æ®å®‰å…¨, é‚£å¿…é¡»ä½¿ç”¨å¯æœ¬åœ°åŒ–éƒ¨ç½²çš„å¤§è¯­è¨€æ¨¡å‹. å¦‚ä¸‹ã€Šç›®å‰ä¸€äº›æœ‰æœ‰å½±å“åŠ›çš„å¼€æºæ¨¡å‹ã€‹ä¸­éƒ½æ˜¯å¯æœ¬åœ°åŒ–éƒ¨ç½²çš„å¤§æ¨¡å‹. ä½†æ˜¯å°±ä½¿ç”¨ä½“éªŒæ¥è¯´, è·ç¦»ChatGPTéƒ½æœ‰æ¯”è¾ƒå¤§çš„å·®è·. æ‰€ä»¥ä½¿ç”¨çš„è¯éœ€è¦åšå‚ç±»çš„å¾®è°ƒ, å³ä½¿ç”¨LoRA.\nLoRA, æ˜¯å¾®è½¯çš„ç ”ç©¶äººå‘˜ä¸ºäº†è§£å†³å¤§è¯­è¨€æ¨¡å‹å¾®è°ƒè€Œå¼€å‘çš„ä¸€é¡¹æŠ€æœ¯. æ¯”å¦‚, GPT-3æœ‰1750äº¿å‚æ•°, ä¸ºäº†è®©å®ƒèƒ½å¹²ç‰¹å®šé¢†åŸŸçš„æ´»å„¿, éœ€è¦åšå¾®è°ƒ, ä½†æ˜¯å¦‚æœç›´æ¥å¯¹GPT-3åšå¾®è°ƒ, æˆæœ¬å¤ªé«˜å¤ªéº»çƒ¦äº†. LoRAçš„åšæ³•æ˜¯, å†»ç»“é¢„è®­ç»ƒå¥½çš„æ¨¡å‹æƒé‡å‚æ•°, ç„¶ååœ¨æ¯ä¸ªTransformerï¼ˆTransformeå°±æ˜¯GPTçš„é‚£ä¸ªTï¼‰å—é‡Œæ³¨å…¥å¯è®­ç»ƒçš„å±‚, ç”±äºä¸éœ€è¦å¯¹æ¨¡å‹çš„æƒé‡å‚æ•°é‡æ–°è®¡ç®—æ¢¯åº¦, æ‰€ä»¥, å¤§å¤§å‡å°‘äº†éœ€è¦è®­ç»ƒçš„è®¡ç®—é‡. ç ”ç©¶å‘ç°, LoRAçš„å¾®è°ƒè´¨é‡ä¸å…¨æ¨¡å‹å¾®è°ƒç›¸å½“. è¦åšä¸ªæ¯”å–»çš„è¯, å°±å¥½æ¯”æ˜¯å¤§æ¨¡å‹çš„ä¸€ä¸ªå°æ¨¡å‹, æˆ–è€…è¯´æ˜¯ä¸€ä¸ªæ’ä»¶.\nç›®å‰ä¸€äº›æœ‰æœ‰å½±å“åŠ›çš„å¼€æºæ¨¡å‹ # Vicuna: a chat assistant fine-tuned from LLaMA on user-shared conversations by LMSYS WizardLM: an instruction-following LLM using evol-instruct by Microsoft GPT4All-Snoozy: A finetuned LLaMA model on assistant style data by Nomic AI Guanaco: a model fine-tuned with QLoRA by UW Koala: a dialogue model for academic research by BAIR RWKV-4-Raven: an RNN with transformer-level LLM performance Alpaca: a model fine-tuned from LLaMA on instruction-following demonstrations by Stanford ChatGLM: an open bilingual dialogue language model by Tsinghua University OpenAssistant (oasst): an Open Assistant for everyone by LAION LLaMA: open and efficient foundation language models by Meta Dolly: an instruction-tuned open large language model by Databricks StableLM: Stability AI language models MPT-Chat: a chatbot fine-tuned from MPT-7B by MosaicML FastChat-T5: a chat assistant fine-tuned from FLAN-T5 by LMSYS ChatYuan: æ˜¯ç”±å…ƒè¯­æ™ºèƒ½å¼€å‘å›¢é˜Ÿå¼€å‘å’Œå‘å¸ƒçš„, è‡ªç§°ç¬¬ä¸€ä¸ªå›½å†…æœ€æ—©çš„ä¸€ä¸ªåŠŸèƒ½å‹å¯¹è¯å¤§æ¨¡å‹. ä»æŠ«éœ²çš„æŠ€æœ¯ç»†èŠ‚çœ‹, åº•å±‚é‡‡ç”¨7äº¿å‚æ•°è§„æ¨¡çš„T5æ¨¡å‹, å¹¶åŸºäºPromptClueè¿›è¡Œäº†ç›‘ç£å¾®è°ƒå½¢æˆäº†ChatYuan privateGPT å’Œ localGPT # å¦‚æœåœ¨æˆ‘ä»¬çš„ä½¿ç”¨åœºæ™¯ä¸­, éœ€è¦è¿›ä¸€æ­¥è§„èŒƒåŒ–å’Œå¯¹è¾“å‡ºç»“æœæœ‰æ›´å¯æ§çš„é¢„æœŸ. å¯ä»¥å‚è€ƒprivateGPTå’ŒlocalGPTçš„æ–¹æ¡ˆ. è¿™ä¸¤è€…éƒ½ä¸æ˜¯æ¨¡å‹, è€Œæ˜¯ä¸€ç§å¤§æ¨¡å‹çš„ä½¿ç”¨æ–¹å¼.\nå…¶ä¸­privateGPTä½¿ç”¨GPT4Allå¤§æ¨¡å‹, localGPTä½¿ç”¨ Vicunaå¤§æ¨¡å‹, å½“ç„¶, è¿™localGPTæœ¬çœŸå°±æ˜¯åŸºäºprivateGPTçš„æ¶æ„å’Œè®¾è®¡æ€è·¯æ´¾ç”Ÿçš„, æˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ChatGLMæ¨¡å‹ç”¨æ¥å¢å¼ºä¸­æ–‡èƒ½åŠ›â€”â€”è¿™ç§æ–¹å¼æ¯”ä½¿ç”¨GPT4ALLå¤§æ¨¡å‹å€Ÿç”¨Embeddings Modelå®ç°çš„ä¸­æ–‡æ”¯æŒæ•ˆæœè¦å¥½.\nå¦‚ä¸Šæ¶æ„å›¾æ‰€ç¤º, è¿™ä¸ªæ¶æ„åˆ†ä¸ºä¸¤æ­¥å¼, é¦–å…ˆå°†æˆ‘ä»¬æä¾›çš„æ–‡æ¡£å­˜å‚¨ä¸ºçŸ¥è¯†åº“. ä¹‹åæ”¶åˆ°é—®é¢˜, å†å°†é—®é¢˜è½¬æ¢, éšåå¯¹å­˜å‚¨æ–‡æ¡£è¿›è¡Œæœç´¢, å¹¶å¯¹æ£€ç´¢æ–‡æ¡£è¿›è¡Œè¿‡æ»¤, éšåè¿”å›æ–‡æ¡£æ‘˜è¦, æ­¤ç§æ¶æ„ååˆ†é€‚åˆçŸ¥è¯†ç±»é—®ç­”. ä½†å¯¹æœ‰é€»è¾‘ç±»é—®é¢˜å¤„ç†ä¸ä½³.\nç»“åˆå…¬å¸ä½¿ç”¨åœºæ™¯åˆ†æ # å†äº†è§£åˆ°ä»¥ä¸ŠçŸ¥è¯†ä¹‹å, å¯ä»¥å¾—å‡ºä»¥ä¸‹å‡ ç‚¹ï¼š\næ•°æ®å¤„ç†éœ€è¦å¤„ç†å“ªäº›å¦‚ä½•å¤„ç†è¿˜ä¸å¤ªäº†è§£ é€šè¿‡æ•°æ®åšæŠ¥å‘Šæ˜¯ChatGPTçš„å¼ºé¡¹, ä¸è¿‡å¯¹äºè¾“å‡ºæ ¼å¼æ¯æ¬¡è¾“å‡ºéƒ½å¯èƒ½é‡‡å–ä¸åŒçš„æ ¼å¼, æ¯æ¬¡å…³æ³¨çš„é‡ç‚¹å’Œæ’ç‰ˆéƒ½å¯èƒ½ä¼šæœ‰æ‰€å˜åŒ–. å¦‚æœä½¿ç”¨çš„è¯è¿˜æ˜¯éœ€è¦å¤šæ¬¡çš„Promptè°ƒè¯•, å¯»æ‰¾åˆ°è¾“å‡ºç»“æœç¨³å®š, ç¬¦åˆæˆ‘ä»¬é¢„æœŸçš„Prompt. åŒæ—¶æ¨¡å‹å¯èƒ½ä¼šå¯¹æ•°æ®æœ‰æ‰€é—æ¼, è¿™ä¸ªä¸å¤ªå¯æ§. ï¼ã€€å¯¹äºä»£ç å®‰å…¨ä¼˜åŒ–çš„ä½¿ç”¨, ä¸€æ˜¯æ¨¡å‹ç¡®å®å¯ä»¥æ£€æµ‹ä»£ç ä¸­çš„æ¼æ´, ä¹Ÿå¯ä»¥å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–. ï¼ã€€äºŒæ˜¯æ¨¡å‹å¯èƒ½ä¼šè¾“å‡ºæœ‰æ¼æ´çš„ä»£ç , è€Œæˆ‘ä»¬å†æ¬¡åé—®å®ƒç”Ÿæˆçš„ä»£ç æ˜¯å¦æœ‰æ¼æ´æ—¶, å®ƒä¹Ÿä¼šå¦ç„¶æ‰¿è®¤ æ•æ„Ÿæ•°æ®è¯†åˆ«ã€å¨èƒè¯­ä¹‰æ£€æµ‹ã€å¨èƒå®šæ€§åˆ†æã€å¼•å¯¼å¼è¿è¥åˆ†æã€æŠ¥å‘Šç”Ÿæˆã€ä»¥åŠå¤„ç½®å»ºè®®éƒ½å±äºå¤§æ¨¡å‹é€‚åˆå¤„ç†çš„å†…å®¹. åœ¨æ”»å‡»ç«¯çš„ä½¿ç”¨å¯èƒ½ä¼šæœ‰å¤§çš„é˜»åŠ›, å› ä¸ºç”Ÿæˆé’“é±¼é‚®ä»¶å’Œæ”»å‡»å†…å®¹, æ˜¯è¢«æ¨¡å‹è®­ç»ƒæ–¹ä¸æ–­å¼±åŒ–çš„å†…å®¹. æˆç†Ÿçš„å¤§æ¨¡å‹éƒ½ä¸ä¼šç»™å‡ºæ”»å‡»å»ºè®®. çŸ¥è¯†æä¾›ä¹Ÿæ˜¯é€‚åˆæ¨¡å‹å»å®Œæˆçš„å†…å®¹. ç»¼ä¸Š, åœ¨çŸ¥è¯†ç±»é—®ç­”ä¸­å¯ä»¥å‚è€ƒprivateGPTçš„å®ç°æ–¹å¼, æä¾›ç¨³å®šçš„çŸ¥è¯†é—®ç­”. è€Œåœ¨æ•°æ®åˆ†æä¸Šåˆ™ä¸å¯é‡‡ç”¨privateGPTçš„æ–¹æ³•. åº”è¯¥å¯»æ‰¾æ•ˆæœå¥½çš„æ¨¡å‹è¿›è¡ŒPrompt tuningæˆ–è€…LoRAè®­ç»ƒ. æ— è®ºé€šè¿‡ä»€ä¹ˆæ–¹æ³•å®ç°, æˆ‘ä»¬ä¹Ÿåº”è¯¥åŒæ—¶æ³¨é‡æ¨¡å‹åŸºå»º. è¿™ç±»åŸºå»ºä»»åŠ¡, æ— è®ºæ˜¯ä»å¤´å¼€å§‹è®­ç»ƒå¤§æ¨¡å‹è¿˜æ˜¯åœ¨Promptåº”ç”¨, ä»¥åŠLoRAè®­ç»ƒä¸Šéƒ½å æœ‰ä¸ä¸‹äºç™¾åˆ†ä¹‹ä¸ƒåçš„å·¥ä½œé‡.\n"},{"id":63,"href":"/posts/gpt%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/","title":"GPTæŠ€æœ¯åˆ†äº«","section":"Blog","content":" GPTæŠ€æœ¯åˆ†äº« # å…ˆä»‹ç»å‡ ä¸ªåè¯ # GPT å’Œ ChatGPT # Generative Pre-Training Transformer æ˜¯ä¸€ç§åŸºäºTransformeræ¶æ„çš„é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹.\næˆ‘ä»¬æ‰€æ¥è§¦åˆ°çš„chatgptæ˜¯é’ˆå¯¹gpt3.5æ¨¡å‹çš„ä¸€ç§åº”ç”¨å®ä¾‹, å¦‚ä»Šchatgptå·²ç»ä¸ºä¼šå‘˜ç”¨æˆ·åˆ‡æ¢ä¸ºgpt4.0æ¨¡å‹. æœªæ¥çŸ­æœŸæ—¶é—´å†…åº”è¯¥ä¸ä¼šå¼€æ”¾ç»™å…è´¹ç”¨æˆ·ä½¿ç”¨.\nGPTæ¨¡å‹æœ¬è´¨æ˜¯ç»­å†™æ¨¡å‹, å®ƒæ ¹æ®è¾“å…¥çš„æ–‡æœ¬ç”Ÿæˆç›¸åº”çš„ç»­å†™æ–‡æœ¬, ä»è€Œå®ç°å¯¹è¯ã€æ–‡ç« ç­‰è‡ªç„¶è¯­è¨€æ–‡æœ¬çš„ç”Ÿæˆ. æ‰€ä»¥å…¶å¹¶ä¸å…·å¤‡å®é™…çš„åˆ›æ–°èƒ½åŠ›, åªèƒ½å¯¹ä»¥å¾€çš„â€œç»éªŒâ€åšå‡ºæ¢³ç†.\nLLMs # Large language models (LLMs)å¤§è¯­è¨€æ¨¡å‹, åŒ…æ‹¬GPTå’ŒGLMç­‰, æ˜¯ä¸€ä¸ªç»Ÿç§°. ä»¥ä¸‹æ˜¯è¿™ä¸ªç»Ÿç§°ä¸‹çš„ä¸åŒæ¨¡å‹æ¶æ„ï¼š\nä¸»æµé¢„è®­ç»ƒæ¨¡å‹æ¶æ„ # autoregressiveè‡ªå›å½’æ¨¡å‹ï¼ˆARæ¨¡å‹ï¼‰ï¼šä»£è¡¨ä½œGPT. æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªleft-to-rightçš„è¯­è¨€æ¨¡å‹. é€šå¸¸ç”¨äºç”Ÿæˆå¼ä»»åŠ¡, åœ¨é•¿æ–‡æœ¬ç”Ÿæˆæ–¹é¢å–å¾—äº†å·¨å¤§çš„æˆåŠŸ, æ¯”å¦‚è‡ªç„¶è¯­è¨€ç”Ÿæˆï¼ˆNLGï¼‰é¢†åŸŸçš„ä»»åŠ¡ï¼šæ‘˜è¦ã€ç¿»è¯‘æˆ–æŠ½è±¡é—®ç­”. å½“æ‰©å±•åˆ°åäº¿çº§åˆ«å‚æ•°æ—¶, è¡¨ç°å‡ºäº†å°‘æ ·æœ¬å­¦ä¹ èƒ½åŠ›. ç¼ºç‚¹æ˜¯å•å‘æ³¨æ„åŠ›æœºåˆ¶, åœ¨NLUä»»åŠ¡ä¸­, æ— æ³•å®Œå…¨æ•æ‰ä¸Šä¸‹æ–‡çš„ä¾èµ–å…³ç³».\nautoencodingè‡ªç¼–ç æ¨¡å‹ï¼ˆAEæ¨¡å‹ï¼‰ï¼šä»£è¡¨ä½œBERT. æ˜¯é€šè¿‡æŸä¸ªé™å™ªç›®æ ‡ï¼ˆæ¯”å¦‚MLMï¼‰è®­ç»ƒçš„åŒå‘æ–‡æœ¬ç¼–ç å™¨. ç¼–ç å™¨ä¼šäº§å‡ºé€‚ç”¨äºNLUä»»åŠ¡çš„ä¸Šä¸‹æ–‡è¡¨ç¤º, æ“…é•¿é¢†åŸŸä¸»è¦æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸ, ä¾‹å¦‚æ–‡æœ¬åˆ†ç±»ã€å‘½åå®ä½“è¯†åˆ«ã€æƒ…æ„Ÿåˆ†æã€é—®ç­”ç³»ç»Ÿç­‰. ä½†æ— æ³•ç›´æ¥ç”¨äºæ–‡æœ¬ç”Ÿæˆ.\nencoder-decoderï¼ˆSeq2seqæ¨¡å‹ï¼‰ï¼šä»£è¡¨ä½œT5. é‡‡ç”¨åŒå‘æ³¨æ„åŠ›æœºåˆ¶, é€šå¸¸ç”¨äºæ¡ä»¶ç”Ÿæˆä»»åŠ¡, æ¯”å¦‚æ–‡æœ¬æ‘˜è¦ã€æœºå™¨ç¿»è¯‘ç­‰.\nGLMæ¨¡å‹åŸºäºautoregressive blank infillingæ–¹æ³•, ç»“åˆäº†ä¸Šè¿°ä¸‰ç§é¢„è®­ç»ƒæ¨¡å‹çš„æ€æƒ³, ä»£è¡¨æœ‰æ¸…åå¤§å­¦çš„ChatGLM\nLoRAå’ŒPrompt # Prompt æç¤ºè¯, æ˜¯ä¸€ç§ç”¨äºæŒ‡å¯¼æ¨¡å‹ç”Ÿæˆè¾“å‡ºçš„æ–‡æœ¬ç‰‡æ®µ, Prompté€šå¸¸åŒ…å«ä¸€äº›å…³é”®è¯æˆ–çŸ­è¯­, ç”¨äºæç¤ºæ¨¡å‹ç”Ÿæˆç‰¹å®šç±»å‹çš„æ–‡æœ¬. Promptçš„ä½¿ç”¨å¯ä»¥æé«˜æ¨¡å‹çš„ç”Ÿæˆæ•ˆæœå’Œå‡†ç¡®æ€§, ç‰¹åˆ«æ˜¯åœ¨å¤„ç†ç‰¹å®šé¢†åŸŸçš„æ–‡æœ¬æ—¶. é€šè¿‡ä½¿ç”¨Prompt, æ¨¡å‹å¯ä»¥æ›´å¥½åœ°ç†è§£è¾“å…¥æ–‡æœ¬çš„å«ä¹‰å’Œä¸Šä¸‹æ–‡ä¿¡æ¯, ä»è€Œç”Ÿæˆæ›´åŠ ç¬¦åˆè¦æ±‚çš„è¾“å‡ºæ–‡æœ¬. LoRAè‹±æ–‡å…¨ç§°Low-Rank Adaptation of Large Language Models, ç›´è¯‘ä¸ºå¤§è¯­è¨€æ¨¡å‹çš„ä½é˜¶é€‚åº”, æ˜¯ä¸€ç§PEFTï¼ˆå‚æ•°é«˜æ•ˆæ€§å¾®è°ƒæ–¹æ³•ï¼‰, è¿™æ˜¯å¾®è½¯çš„ç ”ç©¶äººå‘˜ä¸ºäº†è§£å†³å¤§è¯­è¨€æ¨¡å‹å¾®è°ƒè€Œå¼€å‘çš„ä¸€é¡¹æŠ€æœ¯. å½“ç„¶å‚æ•°é«˜æ•ˆæ€§å¾®è°ƒæ–¹æ³•ä¸­å®ç°æœ€ç®€å•çš„æ–¹æ³•è¿˜æ˜¯Prompt tuning, å›ºå®šæ¨¡å‹å‰é¦ˆå±‚å‚æ•°, ä»…ä»…æ›´æ–°éƒ¨åˆ†embeddingå‚æ•°å³å¯å®ç°ä½æˆæœ¬å¾®è°ƒå¤§æ¨¡å‹ LLMså¦‚ä½•äº§ç”Ÿâ€œæ€ç»´â€ # è¿™æ˜¯åœ¨è®­ç»ƒæ•°æ®è¾¾åˆ°ä¸€å®šè§„æ¨¡å, LLMsæ¨¡å‹å¼€å§‹è¡¨ç°å‡ºä¸€ç§ç°è±¡. åº”è¯¥æœ‰è®ºæ–‡è®¨è®ºè¿™ä¸ª, æ²¡æœ‰ç»†çœ‹. ä¸è¿‡å¦‚ä»Šæ¨¡å‹æ‰€è¡¨ç°å‡ºçš„æ•ˆæœéƒ½æ˜¯ä½ä»¥å¤§é‡çš„æŒ‡ä»¤å¾®è°ƒ, æ‰å¾—ä»¥æœ€ç»ˆå‘ˆç°å‡ºæ¥.\næˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ # å› ä¸ºå¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨, å³ä½¿ç›´æ¥ä½¿ç”¨ChatGPTçš„APIä¹Ÿéœ€è¦å¯¹å…¶è¿›è¡Œä¸€å®šçš„èƒ½åŠ›é™åˆ¶å’Œæ ¼å¼åŒ–. ä¸»è¦é€šè¿‡Prompt(æç¤ºè¯)æ¥å®ç°. å¦‚æœä½¿ç”¨GPT-4æˆ–è€…GPT3.5æ¥å£çš„è¯, å¯ä»¥ä»…é€šè¿‡è°ƒæ•´å’Œå¼€å‘æç¤ºè¯æ¥å®ç°æ¯”è¾ƒå¥½çš„æ•ˆæœ.\nä½†å¦‚æœæƒ³è¦ä¿è¯æ•°æ®å®‰å…¨, é‚£å¿…é¡»ä½¿ç”¨å¯æœ¬åœ°åŒ–éƒ¨ç½²çš„å¤§è¯­è¨€æ¨¡å‹. å¦‚ä¸‹ã€Šç›®å‰ä¸€äº›æœ‰æœ‰å½±å“åŠ›çš„å¼€æºæ¨¡å‹ã€‹ä¸­éƒ½æ˜¯å¯æœ¬åœ°åŒ–éƒ¨ç½²çš„å¤§æ¨¡å‹. ä½†æ˜¯å°±ä½¿ç”¨ä½“éªŒæ¥è¯´, è·ç¦»ChatGPTéƒ½æœ‰æ¯”è¾ƒå¤§çš„å·®è·. æ‰€ä»¥ä½¿ç”¨çš„è¯éœ€è¦åšå‚ç±»çš„å¾®è°ƒ, å³ä½¿ç”¨LoRA.\nLoRA, æ˜¯å¾®è½¯çš„ç ”ç©¶äººå‘˜ä¸ºäº†è§£å†³å¤§è¯­è¨€æ¨¡å‹å¾®è°ƒè€Œå¼€å‘çš„ä¸€é¡¹æŠ€æœ¯. æ¯”å¦‚, GPT-3æœ‰1750äº¿å‚æ•°, ä¸ºäº†è®©å®ƒèƒ½å¹²ç‰¹å®šé¢†åŸŸçš„æ´»å„¿, éœ€è¦åšå¾®è°ƒ, ä½†æ˜¯å¦‚æœç›´æ¥å¯¹GPT-3åšå¾®è°ƒ, æˆæœ¬å¤ªé«˜å¤ªéº»çƒ¦äº†. LoRAçš„åšæ³•æ˜¯, å†»ç»“é¢„è®­ç»ƒå¥½çš„æ¨¡å‹æƒé‡å‚æ•°, ç„¶ååœ¨æ¯ä¸ªTransformerï¼ˆTransformeå°±æ˜¯GPTçš„é‚£ä¸ªTï¼‰å—é‡Œæ³¨å…¥å¯è®­ç»ƒçš„å±‚, ç”±äºä¸éœ€è¦å¯¹æ¨¡å‹çš„æƒé‡å‚æ•°é‡æ–°è®¡ç®—æ¢¯åº¦, æ‰€ä»¥, å¤§å¤§å‡å°‘äº†éœ€è¦è®­ç»ƒçš„è®¡ç®—é‡. ç ”ç©¶å‘ç°, LoRAçš„å¾®è°ƒè´¨é‡ä¸å…¨æ¨¡å‹å¾®è°ƒç›¸å½“. è¦åšä¸ªæ¯”å–»çš„è¯, å°±å¥½æ¯”æ˜¯å¤§æ¨¡å‹çš„ä¸€ä¸ªå°æ¨¡å‹, æˆ–è€…è¯´æ˜¯ä¸€ä¸ªæ’ä»¶.\nç›®å‰ä¸€äº›æœ‰æœ‰å½±å“åŠ›çš„å¼€æºæ¨¡å‹ # Vicuna: a chat assistant fine-tuned from LLaMA on user-shared conversations by LMSYS WizardLM: an instruction-following LLM using evol-instruct by Microsoft GPT4All-Snoozy: A finetuned LLaMA model on assistant style data by Nomic AI Guanaco: a model fine-tuned with QLoRA by UW Koala: a dialogue model for academic research by BAIR RWKV-4-Raven: an RNN with transformer-level LLM performance Alpaca: a model fine-tuned from LLaMA on instruction-following demonstrations by Stanford ChatGLM: an open bilingual dialogue language model by Tsinghua University OpenAssistant (oasst): an Open Assistant for everyone by LAION LLaMA: open and efficient foundation language models by Meta Dolly: an instruction-tuned open large language model by Databricks StableLM: Stability AI language models MPT-Chat: a chatbot fine-tuned from MPT-7B by MosaicML FastChat-T5: a chat assistant fine-tuned from FLAN-T5 by LMSYS ChatYuan: æ˜¯ç”±å…ƒè¯­æ™ºèƒ½å¼€å‘å›¢é˜Ÿå¼€å‘å’Œå‘å¸ƒçš„, è‡ªç§°ç¬¬ä¸€ä¸ªå›½å†…æœ€æ—©çš„ä¸€ä¸ªåŠŸèƒ½å‹å¯¹è¯å¤§æ¨¡å‹. ä»æŠ«éœ²çš„æŠ€æœ¯ç»†èŠ‚çœ‹, åº•å±‚é‡‡ç”¨7äº¿å‚æ•°è§„æ¨¡çš„T5æ¨¡å‹, å¹¶åŸºäºPromptClueè¿›è¡Œäº†ç›‘ç£å¾®è°ƒå½¢æˆäº†ChatYuan privateGPT å’Œ localGPT # å¦‚æœåœ¨æˆ‘ä»¬çš„ä½¿ç”¨åœºæ™¯ä¸­, éœ€è¦è¿›ä¸€æ­¥è§„èŒƒåŒ–å’Œå¯¹è¾“å‡ºç»“æœæœ‰æ›´å¯æ§çš„é¢„æœŸ. å¯ä»¥å‚è€ƒprivateGPTå’ŒlocalGPTçš„æ–¹æ¡ˆ. è¿™ä¸¤è€…éƒ½ä¸æ˜¯æ¨¡å‹, è€Œæ˜¯ä¸€ç§å¤§æ¨¡å‹çš„ä½¿ç”¨æ–¹å¼.\nå…¶ä¸­privateGPTä½¿ç”¨GPT4Allå¤§æ¨¡å‹, localGPTä½¿ç”¨ Vicunaå¤§æ¨¡å‹, å½“ç„¶, è¿™localGPTæœ¬çœŸå°±æ˜¯åŸºäºprivateGPTçš„æ¶æ„å’Œè®¾è®¡æ€è·¯æ´¾ç”Ÿçš„, æˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨ChatGLMæ¨¡å‹ç”¨æ¥å¢å¼ºä¸­æ–‡èƒ½åŠ›â€”â€”è¿™ç§æ–¹å¼æ¯”ä½¿ç”¨GPT4ALLå¤§æ¨¡å‹å€Ÿç”¨Embeddings Modelå®ç°çš„ä¸­æ–‡æ”¯æŒæ•ˆæœè¦å¥½.\nå¦‚ä¸Šæ¶æ„å›¾æ‰€ç¤º, è¿™ä¸ªæ¶æ„åˆ†ä¸ºä¸¤æ­¥å¼, é¦–å…ˆå°†æˆ‘ä»¬æä¾›çš„æ–‡æ¡£å­˜å‚¨ä¸ºçŸ¥è¯†åº“. ä¹‹åæ”¶åˆ°é—®é¢˜, å†å°†é—®é¢˜è½¬æ¢, éšåå¯¹å­˜å‚¨æ–‡æ¡£è¿›è¡Œæœç´¢, å¹¶å¯¹æ£€ç´¢æ–‡æ¡£è¿›è¡Œè¿‡æ»¤, éšåè¿”å›æ–‡æ¡£æ‘˜è¦, æ­¤ç§æ¶æ„ååˆ†é€‚åˆçŸ¥è¯†ç±»é—®ç­”. ä½†å¯¹æœ‰é€»è¾‘ç±»é—®é¢˜å¤„ç†ä¸ä½³.\nç»“åˆå…¬å¸ä½¿ç”¨åœºæ™¯åˆ†æ # å†äº†è§£åˆ°ä»¥ä¸ŠçŸ¥è¯†ä¹‹å, å¯ä»¥å¾—å‡ºä»¥ä¸‹å‡ ç‚¹ï¼š\næ•°æ®å¤„ç†éœ€è¦å¤„ç†å“ªäº›å¦‚ä½•å¤„ç†è¿˜ä¸å¤ªäº†è§£ é€šè¿‡æ•°æ®åšæŠ¥å‘Šæ˜¯ChatGPTçš„å¼ºé¡¹, ä¸è¿‡å¯¹äºè¾“å‡ºæ ¼å¼æ¯æ¬¡è¾“å‡ºéƒ½å¯èƒ½é‡‡å–ä¸åŒçš„æ ¼å¼, æ¯æ¬¡å…³æ³¨çš„é‡ç‚¹å’Œæ’ç‰ˆéƒ½å¯èƒ½ä¼šæœ‰æ‰€å˜åŒ–. å¦‚æœä½¿ç”¨çš„è¯è¿˜æ˜¯éœ€è¦å¤šæ¬¡çš„Promptè°ƒè¯•, å¯»æ‰¾åˆ°è¾“å‡ºç»“æœç¨³å®š, ç¬¦åˆæˆ‘ä»¬é¢„æœŸçš„Prompt. åŒæ—¶æ¨¡å‹å¯èƒ½ä¼šå¯¹æ•°æ®æœ‰æ‰€é—æ¼, è¿™ä¸ªä¸å¤ªå¯æ§. ï¼ã€€å¯¹äºä»£ç å®‰å…¨ä¼˜åŒ–çš„ä½¿ç”¨, ä¸€æ˜¯æ¨¡å‹ç¡®å®å¯ä»¥æ£€æµ‹ä»£ç ä¸­çš„æ¼æ´, ä¹Ÿå¯ä»¥å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–. ï¼ã€€äºŒæ˜¯æ¨¡å‹å¯èƒ½ä¼šè¾“å‡ºæœ‰æ¼æ´çš„ä»£ç , è€Œæˆ‘ä»¬å†æ¬¡åé—®å®ƒç”Ÿæˆçš„ä»£ç æ˜¯å¦æœ‰æ¼æ´æ—¶, å®ƒä¹Ÿä¼šå¦ç„¶æ‰¿è®¤ æ•æ„Ÿæ•°æ®è¯†åˆ«ã€å¨èƒè¯­ä¹‰æ£€æµ‹ã€å¨èƒå®šæ€§åˆ†æã€å¼•å¯¼å¼è¿è¥åˆ†æã€æŠ¥å‘Šç”Ÿæˆã€ä»¥åŠå¤„ç½®å»ºè®®éƒ½å±äºå¤§æ¨¡å‹é€‚åˆå¤„ç†çš„å†…å®¹. åœ¨æ”»å‡»ç«¯çš„ä½¿ç”¨å¯èƒ½ä¼šæœ‰å¤§çš„é˜»åŠ›, å› ä¸ºç”Ÿæˆé’“é±¼é‚®ä»¶å’Œæ”»å‡»å†…å®¹, æ˜¯è¢«æ¨¡å‹è®­ç»ƒæ–¹ä¸æ–­å¼±åŒ–çš„å†…å®¹. æˆç†Ÿçš„å¤§æ¨¡å‹éƒ½ä¸ä¼šç»™å‡ºæ”»å‡»å»ºè®®. çŸ¥è¯†æä¾›ä¹Ÿæ˜¯é€‚åˆæ¨¡å‹å»å®Œæˆçš„å†…å®¹. ç»¼ä¸Š, åœ¨çŸ¥è¯†ç±»é—®ç­”ä¸­å¯ä»¥å‚è€ƒprivateGPTçš„å®ç°æ–¹å¼, æä¾›ç¨³å®šçš„çŸ¥è¯†é—®ç­”. è€Œåœ¨æ•°æ®åˆ†æä¸Šåˆ™ä¸å¯é‡‡ç”¨privateGPTçš„æ–¹æ³•. åº”è¯¥å¯»æ‰¾æ•ˆæœå¥½çš„æ¨¡å‹è¿›è¡ŒPrompt tuningæˆ–è€…LoRAè®­ç»ƒ. æ— è®ºé€šè¿‡ä»€ä¹ˆæ–¹æ³•å®ç°, æˆ‘ä»¬ä¹Ÿåº”è¯¥åŒæ—¶æ³¨é‡æ¨¡å‹åŸºå»º. è¿™ç±»åŸºå»ºä»»åŠ¡, æ— è®ºæ˜¯ä»å¤´å¼€å§‹è®­ç»ƒå¤§æ¨¡å‹è¿˜æ˜¯åœ¨Promptåº”ç”¨, ä»¥åŠLoRAè®­ç»ƒä¸Šéƒ½å æœ‰ä¸ä¸‹äºç™¾åˆ†ä¹‹ä¸ƒåçš„å·¥ä½œé‡.\n"},{"id":64,"href":"/docs/programmer/ml/paddle/","title":"Paddle","section":"æœºå™¨å­¦ä¹ ","content":"slug: Paddleçš„å‘ # èµ„æºå ç”¨ # å‘½ä»¤ç¤ºä¾‹(ymlä¸­ä¿®æ”¹äº†train,testæ ·æœ¬åœ°å€,ä½¿ç”¨--gpusè¿™é‡Œåªç”¨äº†ä¸€ä¸ªGPU,å¯æ–¹ä¾¿ä¿®æ”¹ä¸ºå¤šå¡0,1,2,3)\npython -m paddle.distributed.launch --gpus \u0026#39;1\u0026#39; tools/train.py -c configs/rec/PP-OCRv3/en_PP-OCRv3_rec.yml -o Global.pretrained_model=./pretrain_models/en_PP-OCRv3_rec_train/best_accuracy.pdparams en_PP-OCRv3_recé»˜è®¤æ€§èƒ½é…ç½®åœ¨, å•å¡V100ä¸Š: +\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+ | 1 Tesla V100-SXM2\u0026hellip; On | 00000000:00:09.0 Off | 0 | | N/A 53C P0 223W / 300W | 23065MiB / 32510MiB | 100% Default | | | | N/A | +\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-+\nPaddle å¤šå¡è®­ç»ƒ # You may need to install \u0026rsquo;nccl2\u0026rsquo; from NVIDIA official website\nTraceback: è¿™ç§é—®é¢˜å¯ä»¥å‚çœ‹Github Issues\nå†™åœ¨å‘å‰å¤´ # ç»æµ‹è¯•ï¼Œä¸‹é¢é¢„è®­ç»ƒæ¨¡å‹ä¸‹è½½åœ°å€å’Œæ£€æµ‹è®­ç»ƒæ•ˆæœçš„è„šæœ¬ä¹‹æ‰€ä»¥æŠ¥é”™æ˜¯å› ä¸ºPaddleOCRé¡¹ç›®ä¸»é¡µçš„readmeä¸­é“¾æ¥çš„å­readmeæ˜¯developåˆ†æ”¯çš„ã€‚ä¸”è¿™ä¸ªåˆ†æ”¯æ˜¯è½åäºå½“å‰release/2.5çš„ï¼Œæ‰€ä»¥å‡ºç°äº†ä»¥ä¸‹ä¸åŒ¹é…çš„æƒ…å†µ. åˆ‡æ¢äº†åˆ†æ”¯ä¹‹å, åŒ¹é…åº¦è¿˜å¯ä»¥æ¥å—.\nPaddleOCR é¢„è®­ç»ƒæ¨¡å‹ # ç™¾åº¦å†™æ–‡æ¡£çš„ç§¯ææ€§æ˜¯çœŸçš„ä½ï¼Œçœ‹æ¥è¿™ä¸œè¥¿ç”¨çš„äººæ˜¯çœŸçš„å°‘\u0026hellip; è¿™æ˜¯å®˜æ–¹è¯´æ˜æ–‡æ¡£:\ncd PaddleOCR/ # ä¸‹è½½MobileNetV3çš„é¢„è®­ç»ƒæ¨¡å‹ wget -P ./pretrain_models/ https://paddle-imagenet-models-name.bj.bcebos.com/MobileNetV3_large_x0_5_pretrained.tar # æˆ–ï¼Œä¸‹è½½ResNet18_vdçš„é¢„è®­ç»ƒæ¨¡å‹ wget -P ./pretrain_models/ https://paddle-imagenet-models-name.bj.bcebos.com/ResNet18_vd_pretrained.tar # æˆ–ï¼Œä¸‹è½½ResNet50_vdçš„é¢„è®­ç»ƒæ¨¡å‹ wget -P ./pretrain_models/ https://paddle-imagenet-models-name.bj.bcebos.com/ResNet50_vd_ssld_pretrained.tar # è§£å‹é¢„è®­ç»ƒæ¨¡å‹æ–‡ä»¶ï¼Œä»¥MobileNetV3ä¸ºä¾‹ tar -xf ./pretrain_models/MobileNetV3_large_x0_5_pretrained.tar ./pretrain_models/ # æ³¨ï¼šæ­£ç¡®è§£å‹backboneé¢„è®­ç»ƒæƒé‡æ–‡ä»¶åï¼Œæ–‡ä»¶å¤¹ä¸‹åŒ…å«ä¼—å¤šä»¥ç½‘ç»œå±‚å‘½åçš„æƒé‡æ–‡ä»¶ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š ./pretrain_models/MobileNetV3_large_x0_5_pretrained/ â””â”€ conv_last_bn_mean â””â”€ conv_last_bn_offset â””â”€ conv_last_bn_scale â””â”€ conv_last_bn_variance â””â”€ ...... ä½†æ˜¯ # Paddle åœ¨1.8ç‰ˆæœ¬åå·²ç»ä¸ç”¨è¿™ç§æ ¼å¼çš„é¢„è®­ç»ƒæ¨¡å‹äº†ï¼ 2022-06-07 ç°åœ¨å·²ç»æ›´æ–°åˆ°2.3.0 æ‰€ä»¥ä¸‹è½½ä¸‹æ¥å‹æ ¹ä¸èƒ½ä½¿ç”¨ wget -P ./pretrain_models/ https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/ResNet18_vd_pretrained.pdparams å¢åŠ dygraph åç¼€ä¿®æ”¹ä¸ºpdparams ä½¿ç”¨è®­ç»ƒç»“æœæ£€æµ‹å•å¼ å›¾ç‰‡ # åº”ä½¿ç”¨:\npython tools/infer_det.py --config=configs/det/det_res18_db_v2.0.yml -o Global.infer_img=\u0026#34;./train_data/icdar2015/ch4_test_images/img_4.jpg\u0026#34; Global.checkpoints=\u0026#34;./output/ch_db_res18/latest.pdparams\u0026#34; Global.use_gpu=false è€Œéå®˜ç½‘æ‰€ç¤ºçš„:\npython3 tools/infer_det.py -c configs/det/det_mv3_db_v1.1.yml -o Global.infer_img=\u0026#34;./doc/imgs_en/img_10.jpg\u0026#34; Global.checkpoints=\u0026#34;./output/det_db/best_accuracy\u0026#34; å¦åˆ™ä¼šæŠ¥é”™:\nTraceback (most recent call last): File \u0026#34;... /PaddleOCR/tools/infer_det.py\u0026#34;, line 133, in \u0026lt;module\u0026gt; config, device, logger, vdl_writer = program.preprocess() File \u0026#34;... /PaddleOCR/tools/program.py\u0026#34;, line 535, in preprocess FLAGS = ArgsParser().parse_args() File \u0026#34;... /PaddleOCR/tools/program.py\u0026#34;, line 57, in parse_args assert args.config is not None, \\ AssertionError: Please specify --config=configure_file_path. å¤šå¡å’Œæ–­ç‚¹ç»­ä¼  # æ–­ç‚¹å¯èƒ½æ€•æ˜¯ä¸è¡Œäº†ã€‚ã€‚ã€‚\nå¤šå¡ä½¿ç”¨:\npython -m paddle.distributed.launch --gpus \u0026#39;1,2\u0026#39; tools/train.py -c configs/det/det_res18_db_v2.0.yml -o Global.use_gpu=true Global.checkpoints=\u0026#34;./output/ch_db_res18/latest.pdparams\u0026#34; | tee train_det.log ä¼šå‡ºç°:\n[2022/06/08 18:36:48] ppocr INFO: num_workers : 4 [2022/06/08 18:36:48] ppocr INFO: shuffle : True [2022/06/08 18:36:48] ppocr INFO: profiler_options : None [2022/06/08 18:36:48] ppocr INFO: train with paddle 2.3.0 and device Place(gpu:1) server not ready, wait 3 sec to retry... not ready endpoints:[\u0026#39;127.0.0.1:36939\u0026#39;] W0608 18:36:51.403939 745832 dynamic_loader.cc:276] You may need to install \u0026#39;nccl2\u0026#39; from NVIDIA official website: https://developer.nvidia.com/nccl/nccl-downloadbefore install PaddlePaddle. Traceback (most recent call last): File \u0026#34;tools/train.py\u0026#34;, line 191, in \u0026lt;module\u0026gt; main(config, device, logger, vdl_writer) File \u0026#34;tools/train.py\u0026#34;, line 47, in main dist.init_parallel_env() File \u0026#34;/data/anaconda3/lib/python3.8/site-packages/paddle/distributed/parallel.py\u0026#34;, line 315, in init_parallel_env parallel_helper._init_parallel_ctx() File \u0026#34;/data/anaconda3/lib/python3.8/site-packages/paddle/fluid/dygraph/parallel_helper.py\u0026#34;, line 42, in _init_parallel_ctx __parallel_ctx__clz__.init() RuntimeError: (PreconditionNotMet) The third-party dynamic library (libnccl.so) that Paddle depends on is not configured correctly. (error code is libnccl.so: cannot open shared object file: No such file or directory) Suggestions: 1. Check if the third-party dynamic library (e.g. CUDA, CUDNN) is installed correctly and its version is matched with paddlepaddle you installed. 2. Configure third-party dynamic library environment variables as follows: - Linux: set LD_LIBRARY_PATH by `export LD_LIBRARY_PATH=...` - Windows: set PATH by `set PATH=XXX; (at /paddle/paddle/phi/backends/dynload/dynamic_loader.cc:303) LSTM Model # import os import sys import jieba import codecs import chardet import shutil import time from tqdm import tqdm, trange from bs4 import BeautifulSoup import paddle import paddlenlp chardet.__dict__ import numpy as np from functools import partial import paddle.nn as nn import paddle.nn.functional as F import paddlenlp as ppnlp from paddlenlp.data import Pad, Stack, Tuple print(paddle.__version__, paddlenlp.__version__) # from paddlenlp.datasets import MapDatasetWrapper # åŠ è½½æ–‡ä»¶åˆ—è¡¨ import pandas as pd columns = [\u0026#39;id\u0026#39;, \u0026#39;flag\u0026#39;, \u0026#39;filename\u0026#39;, \u0026#39;url\u0026#39;] tempdf = pd.read_csv(\u0026#39;MaliciousWebpage/file_list.txt\u0026#39;, sep=\u0026#39;,\u0026#39;,skiprows=0, header=None, names=columns, skipfooter=0) tempdf[:5] # pä¸ºé’“é±¼é¡µé¢ï¼Œdä¸ºè¢«é»‘é¡µé¢ï¼Œnä¸ºæ­£å¸¸é¡µé¢ tempdf[\u0026#39;flag\u0026#39;].unique() tempdf[\u0026#39;flag\u0026#39;].value_counts() # æŸ¥çœ‹æ­£å¸¸é¡µé¢å¯¹åº”çš„filename df1=tempdf[tempdf[\u0026#39;flag\u0026#39;]==\u0026#39;n\u0026#39;] df1.head() # é€‰æ‹©ä¸€ä¸ªæ­£å¸¸é¡µé¢è¿›è¡Œhtmlå†…å®¹è§£æ html = BeautifulSoup(open(\u0026#39;MaliciousWebpage/file1/\u0026#39;+\u0026#39;66178272dee70b26f1400bb5c2aea1ab\u0026#39;, encoding=\u0026#34;utf-8\u0026#34;),\u0026#39;html.parser\u0026#39;, from_encoding=\u0026#39;utf-8\u0026#39;) # è·å–æœ€å20ç»„éæ ‡ç­¾å­—ç¬¦ä¸²ï¼Œä¼šè‡ªåŠ¨å»æ‰ç©ºç™½å­—ç¬¦ä¸²ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªlist list(html.stripped_strings)[-20:] # ç”±äºåœ¨PaddleNLPè¿›è¡Œæ–‡æœ¬åˆ†ç±»æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ„é€ çš„è¾“å…¥å†…å®¹æ˜¯ä¸€ä¸²è¿ç»­çš„æ–‡å­—ï¼Œå› æ­¤è¿™é‡Œè¦ç”¨åˆ°listå’Œstringçš„è½¬åŒ– # å°†listè½¬åŒ–ä¸ºstring print(\u0026#39;\u0026#39;.join(list(html.stripped_strings)[-20:])) n_page = tempdf[tempdf[\u0026#39;flag\u0026#39;]==\u0026#39;n\u0026#39;] # å¯¹æ­£å¸¸é¡µé¢è¿›è¡Œéšæœºé‡‡æ · n_page = n_page.sample(n=500) # æå–å…¨éƒ¨è¢«é»‘é¡µé¢æ ·æœ¬ d_page = tempdf[tempdf[\u0026#39;flag\u0026#39;]==\u0026#39;d\u0026#39;] # åˆå¹¶æ ·æœ¬ train_page = pd.concat([n_page,d_page],axis=0) # åšä¸€ä¸ªä¹±åº train_page = train_page.sample(frac = 1) # æŸ¥çœ‹æ•ˆæœï¼Œç¡®è®¤æ•°æ®é›†çš„æ ·æœ¬å‡†å¤‡å®Œæˆ train_page.head(10) for filename in tqdm(train_page[\u0026#39;filename\u0026#39;]): # è¿™é‡Œè¦å…ˆåšä¸ªåˆ¤æ–­ï¼Œæœ‰çš„file_listé‡Œé¢çš„æ–‡ä»¶ä¸å­˜åœ¨ if os.path.exists(\u0026#39;MaliciousWebpage/file1/\u0026#39;+filename): # è¯»å–æ–‡ä»¶ï¼Œè·å–å­—ç¬¦é›† content = codecs.open(\u0026#39;MaliciousWebpage/file1/\u0026#39;+filename,\u0026#39;rb\u0026#39;).read() source_encoding = chardet.detect(content)[\u0026#39;encoding\u0026#39;] # ä¸ªåˆ«æ–‡ä»¶çš„source_encodingæ˜¯Noneï¼Œè¿™é‡Œè¦å…ˆè¿›è¡Œç­›é€‰ if source_encoding is None: pass # åªå¯¹å­—ç¬¦é›†æ˜¯gb2312æ ¼å¼çš„æ–‡ä»¶å°è¯•è½¬ç  elif source_encoding == \u0026#39;gb2312\u0026#39;: # è½¬ç å¦‚æœå¤±è´¥ï¼Œå°±è·³è¿‡è¯¥æ–‡ä»¶ try: content = content.decode(source_encoding).encode(\u0026#39;utf-8\u0026#39;) codecs.open(\u0026#39;TrainWebpage/file1/\u0026#39;+filename,\u0026#39;wb\u0026#39;).write(content) except UnicodeDecodeError: print(filename + \u0026#34;è¯»å–å¤±è´¥\u0026#34;) pass # å­—ç¬¦é›†æ˜¯utf-8æ ¼å¼çš„æ–‡ä»¶ç›´æ¥ä¿å­˜ elif source_encoding == \u0026#39;utf-8\u0026#39;: codecs.open(\u0026#39;TrainWebpage/file1/\u0026#39;+filename,\u0026#39;wb\u0026#39;).write(content) else: pass else: pass for i, filename in enumerate(tqdm(train_page[\u0026#39;filename\u0026#39;])): # è¿™é‡Œè¦å…ˆåšä¸ªåˆ¤æ–­ï¼Œæœ‰çš„file_listé‡Œé¢çš„æ–‡ä»¶ä¸å­˜åœ¨ if os.path.exists(\u0026#39;TrainWebpage/file1/\u0026#39;+filename): # è¯»å–æ–‡ä»¶ï¼Œè§£æHTMLé¡µé¢ html = BeautifulSoup(open(\u0026#39;TrainWebpage/file1/\u0026#39;+filename, encoding=\u0026#34;utf-8\u0026#34;),\u0026#39;html.parser\u0026#39;, from_encoding=\u0026#39;utf-8\u0026#39;) text = \u0026#39;\u0026#39;.join(list(html.stripped_strings)[-20:]) # å»æ‰å¤šä½™çš„æ¢è¡Œç¬¦ï¼ˆéƒ¨åˆ†æ•°æ®æœ€åè§£æç»“æœä¸ºï¼‰ text = text.replace(\u0026#34;\\n\u0026#34;, \u0026#34;\u0026#34;) text = text.replace(\u0026#34; \u0026#34;, \u0026#34;,\u0026#34;) # real_label = train_page[\u0026#39;flag\u0026#39;][train_page[\u0026#39;filename\u0026#39;]==filename].values[0] if i % 5 == 0: if train_page[\u0026#39;flag\u0026#39;][train_page[\u0026#39;filename\u0026#39;]==filename].values[0] == \u0026#39;n\u0026#39;: with open(\u0026#34;webtest.txt\u0026#34;,\u0026#34;a+\u0026#34;, encoding=\u0026#34;utf-8\u0026#34;) as f: f.write(text[-100:] + \u0026#39;\\t\u0026#39; + \u0026#39;0\u0026#39; + \u0026#39;\\n\u0026#39;) elif train_page[\u0026#39;flag\u0026#39;][train_page[\u0026#39;filename\u0026#39;]==filename].values[0] == \u0026#39;d\u0026#39;: with open(\u0026#34;webtest.txt\u0026#34;,\u0026#34;a+\u0026#34;, encoding=\u0026#34;utf-8\u0026#34;) as f: f.write(text[-100:] + \u0026#39;\\t\u0026#39; + \u0026#39;1\u0026#39; + \u0026#39;\\n\u0026#39;) elif i % 5 == 1: if train_page[\u0026#39;flag\u0026#39;][train_page[\u0026#39;filename\u0026#39;]==filename].values[0] == \u0026#39;n\u0026#39;: with open(\u0026#34;webdev.txt\u0026#34;,\u0026#34;a+\u0026#34;, encoding=\u0026#34;utf-8\u0026#34;) as f: f.write(text[-100:] + \u0026#39;\\t\u0026#39; + \u0026#39;0\u0026#39; + \u0026#39;\\n\u0026#39;) elif train_page[\u0026#39;flag\u0026#39;][train_page[\u0026#39;filename\u0026#39;]==filename].values[0] == \u0026#39;d\u0026#39;: with open(\u0026#34;webdev.txt\u0026#34;,\u0026#34;a+\u0026#34;, encoding=\u0026#34;utf-8\u0026#34;) as f: f.write(text[-100:] + \u0026#39;\\t\u0026#39; + \u0026#39;1\u0026#39; + \u0026#39;\\n\u0026#39;) else: if train_page[\u0026#39;flag\u0026#39;][train_page[\u0026#39;filename\u0026#39;]==filename].values[0] == \u0026#39;n\u0026#39;: with open(\u0026#34;webtrain.txt\u0026#34;,\u0026#34;a+\u0026#34;, encoding=\u0026#34;utf-8\u0026#34;) as f: f.write(text[-100:] + \u0026#39;\\t\u0026#39; + \u0026#39;0\u0026#39; + \u0026#39;\\n\u0026#39;) elif train_page[\u0026#39;flag\u0026#39;][train_page[\u0026#39;filename\u0026#39;]==filename].values[0] == \u0026#39;d\u0026#39;: with open(\u0026#34;webtrain.txt\u0026#34;,\u0026#34;a+\u0026#34;, encoding=\u0026#34;utf-8\u0026#34;) as f: f.write(text[-100:] + \u0026#39;\\t\u0026#39; + \u0026#39;1\u0026#39; + \u0026#39;\\n\u0026#39;) else: pass class MyDataset(paddle.io.Dataset): \u0026#34;\u0026#34;\u0026#34; æ­¥éª¤ä¸€ï¼šç»§æ‰¿ paddle.io.Dataset ç±» \u0026#34;\u0026#34;\u0026#34; def __init__(self, data_path=\u0026#34;\u0026#34;, data_list=[]): \u0026#34;\u0026#34;\u0026#34; æ­¥éª¤äºŒï¼šå®ç° __init__ å‡½æ•°ï¼Œåˆå§‹åŒ–æ•°æ®é›†ï¼Œå°†æ ·æœ¬å’Œæ ‡ç­¾æ˜ å°„åˆ°åˆ—è¡¨ä¸­ \u0026#34;\u0026#34;\u0026#34; super().__init__() if data_list: self.data_list = data_list else: self.data_list = [] with open(data_path, encoding=\u0026#39;utf-8\u0026#39;) as f: for line in f: self.data_list.append(line.strip().split(\u0026#39;\\t\u0026#39;)) def __getitem__(self, index): \u0026#34;\u0026#34;\u0026#34; æ­¥éª¤ä¸‰ï¼šå®ç° __getitem__ å‡½æ•°ï¼Œå®šä¹‰æŒ‡å®š index æ—¶å¦‚ä½•è·å–æ•°æ®ï¼Œå¹¶è¿”å›å•æ¡æ•°æ®ï¼ˆæ ·æœ¬æ•°æ®ã€å¯¹åº”çš„æ ‡ç­¾ï¼‰ \u0026#34;\u0026#34;\u0026#34; # æ ¹æ®ç´¢å¼•ï¼Œä»åˆ—è¡¨ä¸­å–å‡ºä¸€ä¸ªå›¾åƒ try: data = self.data_list[index] if len(data) == 2: content, label = data elif len(data) \u0026gt;= 2: label = data[-1] content = \u0026#39;\u0026#39;.join(data[0: -1]) print(f\u0026#34;fuck you: {data} index: {index}\u0026#34;) except Exception as err: print(f\u0026#34;é˜¿è¥¿å§: {self.data_list[index]}ï¼Œ index: {index}\u0026#34;) label = int(label) return [content, label] def __len__(self): \u0026#34;\u0026#34;\u0026#34; æ­¥éª¤å››ï¼šå®ç° __len__ å‡½æ•°ï¼Œè¿”å›æ•°æ®é›†çš„æ ·æœ¬æ€»æ•° \u0026#34;\u0026#34;\u0026#34; return len(self.data_list) def get_labels(self): return [0, 1] train_ds, dev_ds, test_ds = MyDataset(\u0026#39;webtrain.txt\u0026#39;), MyDataset(\u0026#39;webdev.txt\u0026#39;), MyDataset(\u0026#39;webtest.txt\u0026#39;) label_list = train_ds.get_labels() print(label_list) for i in range(10): print (train_ds[i]) import jieba dict_path = \u0026#39;webdict.txt\u0026#39; #åˆ›å»ºæ•°æ®å­—å…¸ï¼Œå­˜æ”¾ä½ç½®ï¼šwebdict.txtã€‚åœ¨ç”Ÿæˆä¹‹å‰å…ˆæ¸…ç©ºwebdict.txt #åœ¨ç”Ÿæˆall_data.txtä¹‹å‰ï¼Œé¦–å…ˆå°†å…¶æ¸…ç©º with open(dict_path, \u0026#39;w\u0026#39;, encoding=\u0026#34;utf-8\u0026#34;) as f: f.seek(0) f.truncate() dict_set = set() train_data = open(\u0026#39;webtrain.txt\u0026#39;, encoding=\u0026#34;utf-8\u0026#34;) for data in train_data: seg = jieba.lcut(data[:-3]) for datas in seg: if datas != \u0026#34; \u0026#34;: dict_set.add(datas) dicts = open(dict_path,\u0026#39;w\u0026#39;, encoding=\u0026#34;utf-8\u0026#34;) dicts.write(\u0026#39;[PAD]\\n\u0026#39;) dicts.write(\u0026#39;[UNK]\\n\u0026#39;) for data in dict_set: dicts.write(data + \u0026#39;\\n\u0026#39;) dicts.close() # # ä¸‹è½½è¯æ±‡è¡¨æ–‡ä»¶word_dict.txtï¼Œç”¨äºæ„é€ è¯-idæ˜ å°„å…³ç³»ã€‚ # !wget https://paddlenlp.bj.bcebos.com/data/senta_word_dict.txt def load_vocab(vocab_file): \u0026#34;\u0026#34;\u0026#34;Loads a vocabulary file into a dictionary.\u0026#34;\u0026#34;\u0026#34; vocab = {} with open(vocab_file, \u0026#34;r\u0026#34;, encoding=\u0026#34;utf-8\u0026#34;) as reader: tokens = reader.readlines() for index, token in enumerate(tokens): token = token.rstrip(\u0026#34;\\n\u0026#34;).split(\u0026#34;\\t\u0026#34;)[0] vocab[token] = index return vocab # åŠ è½½è¯è¡¨ # vocab = load_vocab(\u0026#39;data/webdict.txt\u0026#39;) vocab = load_vocab(\u0026#39;./webdict.txt\u0026#39;) for k, v in vocab.items(): print(k, v) break def convert_example(example, vocab, unk_token_id=1, is_test=False): tokenizer = jieba \u0026#34;\u0026#34;\u0026#34; Builds model inputs from a sequence for sequence classification tasks. It use `jieba.cut` to tokenize text. Args: example(obj:`list[str]`): List of input data, containing text and label if it have label. vocab(obj:`dict`): The vocabulary. unk_token_id(obj:`int`, defaults to 1): The unknown token id. is_test(obj:`False`, defaults to `False`): Whether the example contains label or not. Returns: input_ids(obj:`list[int]`): The list of token ids.s valid_length(obj:`int`): The input sequence valid length. label(obj:`numpy.array`, data type of int64, optional): The input label if not is_test. \u0026#34;\u0026#34;\u0026#34; input_ids = [] # print(\u0026#34;example æ˜¯: \u0026#34;, example) if len(example) != 2: print(f\u0026#34;fuck you!: {example}\u0026#34;) for token in tokenizer.cut(example[0]): token_id = vocab.get(token, unk_token_id) input_ids.append(token_id) valid_length = np.array([len(input_ids)]) input_ids = np.array(input_ids, dtype=\u0026#34;int32\u0026#34;) if not is_test: label = np.array(example[-1], dtype=\u0026#34;int64\u0026#34;) return input_ids, valid_length, label else: return input_ids, valid_length # pythonä¸­çš„åå‡½æ•°partialï¼ŒæŠŠä¸€ä¸ªå‡½æ•°çš„æŸäº›å‚æ•°å›ºå®šä½ï¼ˆä¹Ÿå°±æ˜¯è®¾ç½®é»˜è®¤å€¼ï¼‰ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè°ƒç”¨è¿™ä¸ªæ–°å‡½æ•°ä¼šæ›´ç®€å•ã€‚ trans_function = partial( convert_example, vocab=vocab, unk_token_id=vocab.get(\u0026#39;[UNK]\u0026#39;, 1), is_test=False) # ç‰ˆæœ¬ä¸åŒ¹é…çš„å…¼å®¹ä¿®æ”¹æ–¹å¼ from paddlenlp.datasets import MapDataset train_ds_new = MapDataset(train_ds) dev_ds_new = MapDataset(dev_ds) test_ds_new = MapDataset(test_ds) # train_ds_new.map(trans_function, lazy=True) def create_dataloader(dataset, trans_function=None, mode=\u0026#39;train\u0026#39;, batch_size=1, pad_token_id=0, batchify_fn=None): if trans_function: dataset = dataset.map(trans_function, lazy=True) # return_list æ•°æ®æ˜¯å¦ä»¥listå½¢å¼è¿”å› # collate_fn æŒ‡å®šå¦‚ä½•å°†æ ·æœ¬åˆ—è¡¨ç»„åˆä¸ºmini-batchæ•°æ®ã€‚ä¼ ç»™å®ƒå‚æ•°éœ€è¦æ˜¯ä¸€ä¸ªcallableå¯¹è±¡ï¼Œéœ€è¦å®ç°å¯¹ç»„å»ºçš„batchçš„å¤„ç†é€»è¾‘ï¼Œå¹¶è¿”å›æ¯ä¸ªbatchçš„æ•°æ®ã€‚åœ¨è¿™é‡Œä¼ å…¥çš„æ˜¯`prepare_input`å‡½æ•°ï¼Œå¯¹äº§ç”Ÿçš„æ•°æ®è¿›è¡Œpadæ“ä½œï¼Œå¹¶è¿”å›å®é™…é•¿åº¦ç­‰ã€‚ dataloader = paddle.io.DataLoader( dataset, return_list=True, batch_size=batch_size, collate_fn=batchify_fn) return dataloader # å°†è¯»å…¥çš„æ•°æ®batchåŒ–å¤„ç†ï¼Œä¾¿äºæ¨¡å‹batchåŒ–è¿ç®—ã€‚ # batchä¸­çš„æ¯ä¸ªå¥å­å°†ä¼špaddingåˆ°è¿™ä¸ªbatchä¸­çš„æ–‡æœ¬æœ€å¤§é•¿åº¦batch_max_seq_lenã€‚ # å½“æ–‡æœ¬é•¿åº¦å¤§äºbatch_max_seqæ—¶ï¼Œå°†ä¼šæˆªæ–­åˆ°batch_max_seq_lenï¼›å½“æ–‡æœ¬é•¿åº¦å°äºbatch_max_seqæ—¶ï¼Œå°†ä¼špaddingè¡¥é½åˆ°batch_max_seq_len. batchify_fn = lambda samples, fn=Tuple( Pad(axis=0, pad_val=vocab[\u0026#39;[PAD]\u0026#39;]), # input_ids Stack(dtype=\u0026#34;int64\u0026#34;), # seq len Stack(dtype=\u0026#34;int64\u0026#34;) # label ): [data for data in fn(samples)] train_loader = create_dataloader( train_ds_new, trans_function=trans_function, batch_size=32, mode=\u0026#39;train\u0026#39;, batchify_fn=batchify_fn) dev_loader = create_dataloader( dev_ds_new, trans_function=trans_function, batch_size=32, mode=\u0026#39;validation\u0026#39;, batchify_fn=batchify_fn) test_loader = create_dataloader( test_ds_new, trans_function=trans_function, batch_size=32, mode=\u0026#39;test\u0026#39;, batchify_fn=batchify_fn) class LSTMModel(nn.Layer): def __init__(self, vocab_size, num_classes, emb_dim=64, padding_idx=0, lstm_hidden_size=96, direction=\u0026#39;forward\u0026#39;, lstm_layers=2, dropout_rate=0, pooling_type=None, fc_hidden_size=48): super().__init__() # é¦–å…ˆå°†è¾“å…¥word id æŸ¥è¡¨åæ˜ å°„æˆ word embedding self.embedder = nn.Embedding( num_embeddings=vocab_size, embedding_dim=emb_dim, padding_idx=padding_idx) # å°†word embeddingç»è¿‡LSTMEncoderå˜æ¢åˆ°æ–‡æœ¬è¯­ä¹‰è¡¨å¾ç©ºé—´ä¸­ self.lstm_encoder = ppnlp.seq2vec.LSTMEncoder( emb_dim, lstm_hidden_size, num_layers=lstm_layers, direction=direction, dropout=dropout_rate, pooling_type=pooling_type) # LSTMEncoder.get_output_dim()æ–¹æ³•å¯ä»¥è·å–ç»è¿‡encoderä¹‹åçš„æ–‡æœ¬è¡¨ç¤ºhidden_size self.fc = nn.Linear(self.lstm_encoder.get_output_dim(), fc_hidden_size) # æœ€åçš„åˆ†ç±»å™¨ self.output_layer = nn.Linear(fc_hidden_size, num_classes) def forward(self, text, seq_len): # text shape: (batch_size, num_tokens) # print(\u0026#39;input :\u0026#39;, text.shape) # Shape: (batch_size, num_tokens, embedding_dim) embedded_text = self.embedder(text) # print(\u0026#39;after word-embeding:\u0026#39;, embedded_text.shape) # Shape: (batch_size, num_tokens, num_directions*lstm_hidden_size) # num_directions = 2 if direction is \u0026#39;bidirectional\u0026#39; else 1 text_repr = self.lstm_encoder(embedded_text, sequence_length=seq_len) # print(\u0026#39;after lstm:\u0026#39;, text_repr.shape) # Shape: (batch_size, fc_hidden_size) fc_out = paddle.tanh(self.fc(text_repr)) # print(\u0026#39;after Linear classifier:\u0026#39;, fc_out.shape) # Shape: (batch_size, num_classes) logits = self.output_layer(fc_out) # print(\u0026#39;output:\u0026#39;, logits.shape) # probs åˆ†ç±»æ¦‚ç‡å€¼ probs = F.softmax(logits, axis=-1) # print(\u0026#39;output probability:\u0026#39;, probs.shape) return probs model= LSTMModel( len(vocab), len(label_list), direction=\u0026#39;bidirectional\u0026#39;, padding_idx=vocab[\u0026#39;[PAD]\u0026#39;]) model = paddle.Model(model) model optimizer = paddle.optimizer.Adam( parameters=model.parameters(), learning_rate=1e-4) loss = paddle.nn.CrossEntropyLoss() metric = paddle.metric.Accuracy() model.prepare(optimizer, loss, metric) # è®¾ç½®visualdlè·¯å¾„ log_dir = \u0026#39;./visualdl\u0026#39; callback = paddle.callbacks.VisualDL(log_dir=log_dir) model.fit(train_loader, dev_loader, epochs=100, save_dir=\u0026#39;./checkpoints\u0026#39;, save_freq=5, callbacks=callback) results = model.evaluate(dev_loader) print(\u0026#34;Finally test acc: %.5f\u0026#34; % results[\u0026#39;acc\u0026#39;]) print(results) import random label_map = {0: \u0026#39;æ­£å¸¸é¡µé¢\u0026#39;, 1: \u0026#39;è¢«é»‘é¡µé¢\u0026#39;} results = model.predict(test_loader, batch_size=128)[0] predictions = [] for batch_probs in results: # æ˜ å°„åˆ†ç±»label idx = np.argmax(batch_probs, axis=-1) idx = idx.tolist() labels = [label_map[i] for i in idx] predictions.extend(labels) # çœ‹çœ‹é¢„æµ‹æ•°æ®å‰5ä¸ªæ ·ä¾‹åˆ†ç±»ç»“æœ for idx, data in enumerate(test_ds.data_list[:10]): print(\u0026#39;Data: {} \\t Value: {} \\t Label: {}\u0026#39;.format(data[0], data[-1], predictions[idx])) å¯è§†åŒ– # python -m pip install visualdl -i https://mirror.baidu.com/pypi/simple visualdl.exe --logdir . "},{"id":65,"href":"/docs/3dgame/blender/","title":"Blender","section":"å»ºæ¨¡å’Œæ¸¸æˆ","content":" å¿«æ·é”® # åˆ‡æ¢ä¸ºå››è§†å›¾ | Ctrl+Alt+q å¤åˆ¶å¹¶ç§»åŠ¨(è¿›å…¥Grabæ¨¡å¼) ï½œ Shift+d(+x|y|x é€‰æ‹©ç§»åŠ¨è½´) çº¿/é¢æŒ¤å‡º ï½œ e(+x|y|x é€‰æ‹©æŒ¤å‡ºæ–¹å‘è½´) ä¸Šä¸€æ­¥çš„æ“ä½œåº”ç”¨åˆ°å½“å‰é€‰æ‹© ï½œ Shift+r æ‰“å¼€æ¨¡å‹å³ä¾§çš„å°å·¥å…·æ (ä½ç½®æ’ä»¶åŠŸèƒ½ç­‰è°ƒæ•´) ï½œ n å¡«å……(ä¸¤ç‚¹è¿æˆçº¿,çº¿åœˆå¡«æˆé¢) ï½œ n å¤‡å¿˜ # åˆå¹¶ç‰©ä½“æ—¶,è°è¢«æœ€åé€‰æ‹©\u0026ndash;æ˜¯ActiveçŠ¶æ€,å°†ä½œä¸ºæ¯ä½“åˆå¹¶ "},{"id":66,"href":"/docs/programmer/langs/python/pypi/","title":"PyPiä½¿ç”¨è¯´æ˜","section":"Python","content":" PypiåŒ…ç®¡ç† # ç¤ºä¾‹é¡¹ç›® # py-muti-scrcpy\né…ç½®æ–‡ä»¶ # pyproject\nå·¥å…·ä»‹ç» # poetry\nå¢åŠ å®‰è£…åŒ… # ç›´æ¥ä¿®æ”¹pyproject.tomlæ–‡ä»¶å¹¶ä¸èƒ½ç”Ÿæ•ˆ, å› ä¸ºè¿˜ä¾èµ–äºpoetry.lock\nå¯ä½¿ç”¨poetry add {xxx}è¿›è¡Œæ·»åŠ \næ³¨æ„äº‹é¡¹ # éœ€è¦é“¾æ¥å¤–ç½‘ # HTTPSConnectionPool(host=\u0026#39;files.pythonhosted.org\u0026#39;, port=443): Max retries exceeded with url: /packages/17/61/32c3ab8951142e061587d957226b5683d1387fb22d95b4f69186d92616d1/typing_extensions-4.0.0-py3-none-any.whl (Caused by ProxyError(\u0026#39;Cannot connect to proxy.\u0026#39;, ConnectionResetError(54, \u0026#39;Connection reset by peer\u0026#39;))) HTTPSConnectionPool(host=\u0026#39;pypi.org\u0026#39;, port=443): Max retries exceeded with url: /pypi/colorama/0.4.4/json (Caused by ProxyError(\u0026#39;Cannot connect to proxy.\u0026#39;, ConnectionResetError(54, \u0026#39;Connection reset by peer\u0026#39;))) éœ€è¦å®‰è£…ssl # SSLError HTTPSConnectionPool(host=\u0026#39;pypi.org\u0026#39;, port=443): Max retries exceeded with url: /pypi/importlib-metadata/4.2.0/json (Caused by SSLError(SSLEOFError(8, \u0026#39;EOF occurred in violation of protocol (_ssl.c:1129)\u0026#39;))) è¯¥é—®é¢˜å¯é€šè¿‡å®‰è£…opensslè§£å†³:\npip install ndg-httpsclient pip install pyopenssl pip install pyasn1 CI WorkFlows # workflows\npypi token # æ³¨å†Œpypiè´¦å· è¿›å…¥è´¦å·ç®¡ç†ä¸­å¿ƒè¿™é‡Œ æ‰¾è§API tokensåˆ›å»ºæ–°tokenæˆ–è€…ä½¿ç”¨æ—§çš„ï¼Œéšä¸ªäºº åœ¨GitHubé¡¹ç›®é…ç½®ä¸­æ‰¾åˆ°Action secretsç®¡ç†è¿™é‡Œ Repository secrets ä¸­åŠ å…¥PYPI_TOKEN å› ä¸ºWorkFlowsä¸­ä½¿ç”¨çš„æ˜¯PYPI_TOKEN è§POETRY_PYPI_TOKEN_PYPI: ${{ secrets.PYPI_TOKEN }} "},{"id":67,"href":"/docs/programmer/ml/tensorflow/","title":"Tensorflow","section":"æœºå™¨å­¦ä¹ ","content":"\nv2å…¼å®¹v1 API # import tensorflow.compat.v1 as tf tf.disable_v2_behavior() "},{"id":68,"href":"/docs/programmer/gui/pyinstaller-python%E6%89%93%E5%8C%85/","title":"pythonæ‰“åŒ…","section":"å›¾å½¢ç”¨æˆ·ç•Œé¢-GUI","content":" æ‰“åŒ… # pyinstaller\npip install pyinstaller pyinstaller /path/to/yourscript.py pyinstaller -key yourpasswd -F /path/to/yourscript.py è§£åŒ… # è§£åŒ…å·¥å…· # pyinstxtractor.py\nhexç¼–è¾‘å™¨ # 010Editor ä¸‹è½½åœ°å€\næ­¥éª¤ # å°†pyinstxtractor.pyä¸exeæ”¾ç½®åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹å†…ï¼Œæ‰“å¼€cmdï¼Œè¾“å…¥ä¸‹åˆ—æŒ‡ä»¤ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶å¤¹\npython pyinstxtractor.py xxx.exe ä½¿ç”¨010Editoræ‰“å¼€æ–‡ä»¶å¤¹ä¸­çš„mainå’Œstructï¼Œå°†structä¸­E3å‰é¢çš„å­—èŠ‚å¤åˆ¶ç²˜è´´åˆ°010Editorçš„E3å‰ ä¿®æ”¹mainæ–‡ä»¶åç¼€ä¸ºmain.pyc ä½¿ç”¨åœ¨çº¿å·¥å…·https://tool.lu/pyc/ å°†main.pycåç¼–è¯‘ä¸ºpyæ–‡ä»¶\nåº”å¯¹å¢åŠ keyä¹‹åçš„è§£åŒ… # æš‚æ— \nå®‰è£…ç¨‹åº # å…ˆå°†ç¨‹åºæ‰“åŒ…exe(ä»¥å¤šæ–‡ä»¶æ¨¡å¼, ä½†æ–‡ä»¶è¿è¡Œèµ·æ¥æ¯æ¬¡éƒ½éœ€è¦è§£å‹å†è¿è¡Œå¾ˆæ…¢ï¼Œå¤§æ–‡ä»¶çš„è¯å¤šæ¬¡è¿è¡Œè¿˜ä¼šæŒ¤å‹Cç›˜ç©ºé—´) å°†æ‰“åŒ…å¥½çš„ç›®å½•å‹ç¼©æ‰“åŒ…zip ç¼–å†™æœ¬è´¨ä¸ºmv lnkçš„è„šæœ¬ æŠŠè„šæœ¬æ‰“åŒ…æˆexe æ‰§è¡Œè„šæœ¬exe å…·ä½“ä»£ç å¯ä»¥çœ‹è¿™é‡Œ "},{"id":69,"href":"/docs/programmer/gui/qt/","title":"Qt/PySide","section":"å›¾å½¢ç”¨æˆ·ç•Œé¢-GUI","content":"\nç»˜åˆ¶ç•Œé¢å’Œä½¿ç”¨ # å®‰è£…Qtæœ¬ä½“åå¯ä»¥ä½¿ç”¨Designç»˜åˆ¶å›¾å½¢åŒ–ç•Œé¢.è€Œåä¿å­˜ä¸ºxxx.uiæ–‡ä»¶.\nè½¬æ¢ä¸ºpy # æ³¨æ„ç‰ˆæœ¬ pyside6-uic xxx.ui -o ui_xxx.py ä¸è¿‡ä¿¡å·æ§½å°±ä¸è¦åœ¨Designä¸­å»æ ‡äº†, æ”¾åœ¨pyä¸­æ‰‹åŠ¨åˆ›å»ºå’Œç®¡ç†ç›®å‰çœ‹æ¥æ›´ä¸ºç›´è§‚æ–¹ä¾¿.\npyside6-designer ä¸èƒ½ç”¨çš„é—®é¢˜ # æ¡Œé¢ç¯å¢ƒ: Ubuntu 24.04 LTS Wayland\npip å®‰è£…åè¿è¡Œpyside6-designer æç¤º, å¯ä»¥æ˜¾ç¤ºæ¬¢è¿é¡µä½†æ˜¯æ— æ³•è¿›å…¥ä¸»é¡µé¢:\nqt.pysideplugin: Environment variable PYSIDE_DESIGNER_PLUGINS is not set, bailing out. qt.pysideplugin: No instance of QPyDesignerCustomWidgetCollection was found. å®‰è£…Qticaåè«åæ¢å¤pip install Qtica æœ¬æ¥æ˜¯æœ¬ç€æŒ‡å®šPYSIDE_DESIGNER_PLUGINS, æŒ‡å®šregisterwigglywidget.pyæ–‡ä»¶, ç„¶åè¡¥å……wigglywidgetåŒ…çš„ç›®çš„å®‰è£…çš„Qticaä½†æ˜¯wigglywidgetåŒ…ä¾ç„¶æ²¡æœ‰å®‰è£…ä¸Š, ä½†æ˜¯pyside6-designerå®ƒå¥½äº†,å¯ä»¥è¿›å…¥ä¸»ç•Œé¢äº†\u0026hellip;.\n"},{"id":70,"href":"/docs/programmer/platforms/install_some/","title":"å®‰è£…é—®é¢˜","section":"å¹³å°","content":" è®°å½•ä¸€äº›å®‰è£…é—®é¢˜ # Debian ä½¿ç”¨ apt-add-repository(ppa) # sudo apt update sudo apt install software-properties-common FreeBSDæ¡Œé¢ # æ¢æº pkg install xorg xfce echo \u0026lsquo;dbus_enable=\u0026ldquo;YES\u0026rdquo;\u0026rsquo; \u0026raquo; /etc/rc.conf echo \u0026ldquo;/usr/local/etc/xdg/xfce4/xinitrc\u0026rdquo; \u0026gt; ~/.xinitrc startx ç™»å½•ç•Œé¢ # pkg install slim slim-themes echo \u0026lsquo;slim_enable=\u0026ldquo;YES\u0026rdquo;\u0026rsquo; \u0026raquo; /etc/rc.conf vbox(æ²¡æµ‹è¯•) # pkg install virtualbox-ose-additions å‘/etc/rc.confå†™å…¥ vboxguest_enable=\u0026#34;YES\u0026#34; vboxservice_enable=\u0026#34;YES\u0026#34; ä»…ä¾›å‚è€ƒçœ‹è¿™é‡Œ å› ä¸ºvboxæ˜¾å¡å¤ªå¼±å®‰è£…äº†vmwareåå°±ä¸€ç›´æ²¡ç”¨å›è¿‡vbox,æˆ‘è¿˜æ²¡æµ‹è¯•è¿‡\nvmware # pkg install open-vm-tools xf86-video-vmware xf86-input-vmmouse ç»§ç»­å‘/etc/rc.confä¸­å†™å…¥ hald_enable=\u0026#34;YES\u0026#34; moused_enable=\u0026#34;YES\u0026#34; # vmware_guest_vmblock_enable=\u0026#34;YES\u0026#34; # vmware_guest_vmhgfs_enable=\u0026#34;YES\u0026#34; # vmware_guest_vmmemctl_enable=\u0026#34;YES\u0026#34; # vmware_guest_vmxnet_enable=\u0026#34;YES\u0026#34; # vmware_guest_enable=\u0026#34;YES\u0026#34; ä¸‹é¢æ³¨é‡Šæ‰çš„æ˜¯å› ä¸ºåœ¨æµ‹è¯•ä¸­å¦‚æœæ‰“å¼€çš„è¯ä¼šæœ‰å„ç§é—®é¢˜\u0026hellip;.å°¤å…¶é¼ æ ‡ å…¶ä»–å¯è§è¿™é‡Œå‚è€ƒ ä»…ä¾›å‚è€ƒ, è¿™é‡Œé¢çš„ä¸œè¥¿å¾ˆå¤šéƒ½æ˜¯æœ‰é—®é¢˜çš„.\nClash(æ¨¹è“æ´¾4 cliç‰ˆ) # ä¸‹è¼‰å°æ‡‰ç‰ˆæœ¬åœ°å€ æ³¨æ„ä¸è¦é¸æ“‡1.9.0ç‰ˆæœ¬,æˆ‘ç”¨çš„1.8.0,9å¤šäººåæ˜ (ä»¥åŠæˆ‘)æœ‰å•é¡Œ æˆ‘æ˜¯æ¨¹è“æ´¾4 ç”¨çš„armv8 æ¨¹è“æ´¾3 æ“šèªªç”¨armv7 è§£å£“çµ¦é‹è¡Œæ¬Šé™ å¾ç„¡è«–æŸè™•æ‹¿åˆ°é…ç½®æ–‡ä»¶ å¤§å¤šçµ¦è¨‚é–±åœ°å€, ä½†é€™è£ä½¿ç”¨éœ€è¦æˆ‘å€‘æ‰‹å‹•ä¸‹è¼‰å¥½ é…ç½®systemdæˆ–å…¶ä»–(æ‰‹å‹•å•“å‹•çš„è©±æ³¨æ„éœ€è¦root,æˆ–è€…çµ¦ç›¸æ‡‰ç”¨æˆ¶é…ç½®ç«¯å£æ¬Šé™) [Unit] Description=clash daemon [Service] Type=simple User=root ExecStart=/home/pi/apps/clash-linux-armv8-v1.8.0/clash-linux-armv8-v1.8.0 -f /home/pi/.config/clash/config.yaml Restart=on-failure [Install] WantedBy=multi-user.target å•“ç”¨ sudo systemctl enable clash sudo systemctl start clash sudo systemctl status clash Windowsä¸‹wsl2 å®‰è£… npm \u0026amp;\u0026amp; nodejs # æ‘˜æŠ„è‡ªå¾®è½¯è¯´æ˜æ–‡æ¡£\nå®‰è£…nvm (Node ç‰ˆæœ¬ç®¡ç†å™¨) å›½å†…ç½‘å¯èƒ½æœ‰é—®é¢˜, ä¸‹è½½ä¸‹ä¿å­˜ç›´æ¥bash install.shå°±å¯å®‰è£…. curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash command -v nvméªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ,å®ƒä¼šè‡ªè¡Œæ·»åŠ .bashrcéœ€é‡å¯bash nvm lsæŸ¥çœ‹Nodeç‰ˆæœ¬ nvm install --ltså³å¯å®‰è£…ltsç‰ˆ, nvm install nodeå®‰è£…æœ€æ–°ç‰ˆ ä¼šå®‰è£…è¿™ä¹ˆå¤šä¸œè¥¿ -\u0026gt; v16.13.2 default -\u0026gt; lts/* (-\u0026gt; v16.13.2) iojs -\u0026gt; N/A (default) unstable -\u0026gt; N/A (default) node -\u0026gt; stable (-\u0026gt; v16.13.2) (default) stable -\u0026gt; 16.13 (-\u0026gt; v16.13.2) (default) lts/* -\u0026gt; lts/gallium (-\u0026gt; v16.13.2) lts/argon -\u0026gt; v4.9.1 (-\u0026gt; N/A) lts/boron -\u0026gt; v6.17.1 (-\u0026gt; N/A) lts/carbon -\u0026gt; v8.17.0 (-\u0026gt; N/A) lts/dubnium -\u0026gt; v10.24.1 (-\u0026gt; N/A) lts/erbium -\u0026gt; v12.22.9 (-\u0026gt; N/A) lts/fermium -\u0026gt; v14.18.3 (-\u0026gt; N/A) lts/gallium -\u0026gt; v16.13.2 å¯ä»¥äº† æˆ–è€…å®˜ç½‘ä¸‹è½½ä¸è¿‡åœ¨wsl2é‡Œnodeå¥½ä½¿å”¤,npmæ— æ•ˆ(åªæœ‰0K)\u0026hellip; Dgraph # é—®é¢˜è§: è¿™é‡Œ\nnpm # æ ‘è“æ´¾ # å®˜ç½‘ä¸‹è½½ æ ‘è“æ´¾4b é€‰æ‹©ARMv8ä¹‹å‰çš„æ ‘è“æ´¾å‹å·é€‰æ‹©ARMv7 é…ç½®PATH å‘/usr/local/bin/ä¸‹å»ºç«‹nodeè½¯é“¾ export PATH=\u0026#34;~/node-v16.14.0-linux-arm64/bin:$PATH\u0026#34; #sudo ln -s ~/node-v16.14.0-linux-arm64/bin/node /usr/bin/node Windowsä¸‹wsl2 å®‰è£… npm \u0026amp;\u0026amp; nodejs # æ‘˜æŠ„è‡ªå¾®è½¯è¯´æ˜æ–‡æ¡£\nå®‰è£…nvm (Node ç‰ˆæœ¬ç®¡ç†å™¨) å›½å†…ç½‘å¯èƒ½æœ‰é—®é¢˜, ä¸‹è½½ä¸‹ä¿å­˜ç›´æ¥bash install.shå°±å¯å®‰è£…. curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash command -v nvméªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ,å®ƒä¼šè‡ªè¡Œæ·»åŠ .bashrcéœ€é‡å¯bash nvm lsæŸ¥çœ‹Nodeç‰ˆæœ¬ nvm install --ltså³å¯å®‰è£…ltsç‰ˆ, nvm install nodeå®‰è£…æœ€æ–°ç‰ˆ ä¼šå®‰è£…è¿™ä¹ˆå¤šä¸œè¥¿ -\u0026gt; v16.13.2 default -\u0026gt; lts/* (-\u0026gt; v16.13.2) iojs -\u0026gt; N/A (default) unstable -\u0026gt; N/A (default) node -\u0026gt; stable (-\u0026gt; v16.13.2) (default) stable -\u0026gt; 16.13 (-\u0026gt; v16.13.2) (default) lts/* -\u0026gt; lts/gallium (-\u0026gt; v16.13.2) lts/argon -\u0026gt; v4.9.1 (-\u0026gt; N/A) lts/boron -\u0026gt; v6.17.1 (-\u0026gt; N/A) lts/carbon -\u0026gt; v8.17.0 (-\u0026gt; N/A) lts/dubnium -\u0026gt; v10.24.1 (-\u0026gt; N/A) lts/erbium -\u0026gt; v12.22.9 (-\u0026gt; N/A) lts/fermium -\u0026gt; v14.18.3 (-\u0026gt; N/A) lts/gallium -\u0026gt; v16.13.2 å¯ä»¥äº† æˆ–è€…å®˜ç½‘ä¸‹è½½ä¸è¿‡åœ¨wsl2é‡Œnodeå¥½ä½¿å”¤,npmæ— æ•ˆ(åªæœ‰0K)\u0026hellip; "},{"id":71,"href":"/docs/programmer/database/dgraph-graph-db/","title":"Dgraphä½¿ç”¨å°è®°","section":"Database","content":"\næ¦‚å¿µ # ä»¥ä¸‹å‚è€ƒè‡ª: è¿™é‡Œ Console # Mutate: çªå˜, ç»“æ„/æ•°æ®å˜åŒ–çš„æ—¶å€™ç”¨ Query: æŸ¥è¯¢, EmmmmæŸ¥è¯¢çš„æ—¶å€™ç”¨ æ‰€ä»¥çœ‹æ¥æ²¡æœ‰getsetäº†???? Schema # ç®¡ç†å­—æ®µ(Predicate, Type, list,lang,indexç­‰)\né—®é¢˜ # åœ¨æ–°æ‰‹æ‘çš„æ—¶å€™ä½¿ç”¨dgraph/standalone ä½†æ­¤æ—¶(2021-12-8 18:30:23)æ–‡æ¡£ä½¿ç”¨çš„ç‰ˆæœ¬ä¸ºdgraph/standalone:v21.03.2ä½†æ˜¯è¿™ä¸ªç‰ˆæœ¬çš„Ratel UIä¸å·¥ä½œ\u0026hellip;. å¯¼è‡´hello ä¸äº† worldå¾ˆæ˜¯éš¾å—\nç»“æœæ¢äº†dgraph/standalone:v20.11.3å¥½äº†è¯¶.\nsudo docker run --rm -it -p \u0026#34;8080:8080\u0026#34; -p \u0026#34;9080:9080\u0026#34; -p \u0026#34;8000:8000\u0026#34; -v ~/dgraph:/dgraph \u0026#34;dgraph/standalone:v20.11.3\u0026#34; http://127.0.0.1:8000 çªå˜ # set # å†…å®¹è¾ƒå¤š, ä¸‹é¢å•ç‹¬ç½—åˆ—\ndelete # æ ¹æ®UID åˆ é™¤æŒ‡å®špredicate_name\n{ delete { \u0026lt;UID\u0026gt; \u0026lt;predicate_name\u0026gt; * . } } set # åˆ›å»º # ç›´æ¥jsonç»™å‡ºç»“æ„å’Œæ•°æ®,å³å¯å®Œæˆåˆ›å»º.åªä¸è¿‡å¦‚æœæœ‰ç”¨åˆ°@langæ—¶å°±éœ€è¦å»Schemaé‡Œæ›´æ–°ä¸€ä¸‹å­—æ®µ - ç±»å‹ ???? (Schema-Type)çš„æ”¯æŒé¡¹\n{ \u0026#34;set\u0026#34;: [ { \u0026#34;food_name\u0026#34;: \u0026#34;Sushi\u0026#34;, \u0026#34;review\u0026#34;: [ { \u0026#34;comment\u0026#34;: \u0026#34;Tastes very good\u0026#34;, \u0026#34;comment@jp\u0026#34;: \u0026#34;ã¨ã¦ã‚‚ç¾å‘³ã—ã„\u0026#34;, \u0026#34;comment@ru\u0026#34;: \u0026#34;Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ²ĞºÑƒÑĞ½Ğ¾\u0026#34; } ], \u0026#34;origin\u0026#34;: [ { \u0026#34;country\u0026#34;: \u0026#34;Japan\u0026#34; } ] } ] } æ›´æ–° # ä½¿ç”¨å’Œåˆ›å»ºå·®ä¸å¤š,ä¸è¿‡ç›®å‰æˆ‘å·²çŸ¥çš„æ›´æ–°åªèƒ½ç”¨UIDå¦åˆ™éƒ½ä¼šç›´æ¥åˆ›å»ºä¸€ä¸ªç›¸åŒå†…å®¹çš„æ–°æ•°æ®å‡ºæ¥\n{ \u0026#34;set\u0026#34;:[ { \u0026#34;uid\u0026#34;: \u0026#34;{UID}\u0026#34;, \u0026#34;age\u0026#34;: 41 } ] } æŸ¥è¯¢ # has # ç›´æ¥json è¿”å›å€¼ä¹Ÿä¼šæŒ‰ç…§è¿™ä¸ªæ ¼å¼ç»™å‡º,å±‚çº§æ·±æµ…å¯éšæ„è‡ªå®š\n{ good_name(func: has(food_name)) { food_name review } } { good_name(func: has(food_name)) { food_name review{ comment } } } uid # é™¤äº†ä¸Šè¿°çš„hasè¿˜æœ‰å¾ˆå¤šæŸ¥è¯¢å†…ç½®æ–¹æ³•,ä¸è¿‡æ·±åº¦çš„è¯é™¤äº†æ‰‹åŠ¨ç½—åˆ—ä¹Ÿå¯é€šè¿‡recurse - depthæ¥ç¡®å®š,å†™å¤šäº†ä¹Ÿä¸ä¼šå¤šè¿”å›\n{ find_follower(func: uid({UID})) @recurse(depth: 4) { name age follows } } eq\u0026amp;ç´¢å¼• # éœ€è¦è®¾ç½®hashç´¢å¼•, å¦‚ä¸‹ä¸ºæŸ¥è¯¢Sushiçš„review *ä¸ºç»Ÿé… å¯æŒ‡å®šlang, ä»€ä¹ˆéƒ½ä¸åŠ é»˜è®¤æ— æŒ‡å®šlangçš„æ•°æ®\n{ food_review(func: eq(food_name,\u0026#34;Sushi\u0026#34;)) { food_name review { comment@* } } } \u0026lt;\u0026gt;= # func è¯´æ˜ eq ç­‰äº lt å°äº le å°äºç­‰äº gt å¤§äº ge å¤§äºç­‰äº { authors_and_ratings(func: ge(rating, 4.0)) { uid author_name rating published { title content dislikes } } } ç´¢å¼• # hash å¯ç­‰æŸ¥è¯¢(eq), ä½†ä¸æ”¯æŒå­—ç¬¦ä¸²æ¯”è¾ƒå¤§å° exact å”¯ä¸€å…è®¸å­—ç¬¦ä¸²æ¯”è¾ƒ(ge,gt,le,lt)æŸ¥è¯¢çš„ç´¢å¼•(å¾ˆç‰›é€¼çš„æ ·å­) term å¸¦æœ‰ä»»æ„ä¸€ä¸ª(anyofterms), åŒæ—¶æ‹¥æœ‰(allofterms), ç›¸ç­‰(eq) // å¤šä¸ªå…³é”®å­—(æœ¯è¯­)ä½¿ç”¨ç©ºæ ¼éš”å¼€å³å¯. // æŸ¥è¯¢å¤§å°å†™ä¸æ•æ„Ÿ // dgraph ä¼˜åŒ–æœºåˆ¶æ˜¯å°†å…¨æ–‡è½¬æ¢ä¸ºtoken æŸ¥è¯¢ä½¿ç”¨æŸ¥è¯¢token æ‰€ä»¥å¤šä¸ªæŸ¥è¯¢å…³é”®è¯ä¼šè¿›è¡Œé‡æ’åˆ— è·å–å”¯ä¸€tokenåå»å…¨æ–‡ä¸­å¯¹æ¯”. ç”±æ­¤æŸ¥è¯¢è¯çš„é¡ºåºæ— å…³ç´§è¦ // ä¹Ÿå°±æ˜¯è¯´anyofterms\u0026amp;alloftermsçš„ `1 2 3 == 3 2 1 == 2 1 3` (ç»“æœç›¸åŒæ˜¯ç†æ‰€å½“ç„¶çš„, æ¶ˆè€—å’Œå†…éƒ¨é€»è¾‘ä¹Ÿæ˜¯ç›¸åŒ) { find_tweets(func: anyofterms(tweet, \u0026#34;Go GraphQL\u0026#34;)) { tweet } } "},{"id":72,"href":"/docs/programmer/cloudnative/note-of-docker/","title":"Docker","section":"äº‘åŸç”Ÿ","content":" Docker # æ•™ç¨‹æ‰‹å†Œ # å¥½ç”¨çš„ä½¿ç”¨æ•™ç¨‹\nInstall # ç•¥è¿‡~ ğŸ˜\næ‰“é•œåƒå’Œè·‘ # docker build -t server:v0 . -f server.dockerfile è·‘ # docker run -p 9080:80 --name server server:v0 æŒ‡å®šå¯åŠ¨å‘½ä»¤ # sudo docker run -it -p 9080:80 --name nova_server nova_server:v0 sh -c \u0026#34;echo hello\u0026#34; åŠ å…¥è‡ªå®šä¹‰ç½‘ç»œ # --network {{network name}} è¯¦è§ï¼š[[#Network]]\nè·‘å‡ºé—®é¢˜-è¿›å…¥å®¹å™¨æ’æŸ¥ # sudo docker run -it -p 9080:80 --name nova_server nova_server:v0 sh -c \u0026#34;bash\u0026#34; ä½¿ç”¨-itè¿›å…¥å®¹å™¨æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤è¿›è¡Œè°ƒè¯•\nå¯åŠ¨å…¨éƒ¨å®¹å™¨ # docker ps -a | grep \u0026#34;Exited\u0026#34; | awk \u0026#39;{print $1}\u0026#39; | xargs docker start Network # docker runæ—¶å®¹å™¨åŠ å…¥æ–¹æ³•-redisä¸ºä¾‹ åæœŸåŠ å…¥æ–¹å¼ åˆ›å»ºä¸€ä¸ªæ–°ç½‘ æ£€æµ‹ init_redis: docker run -p 6379:6379 \\\\ --network websafe-network \\\\ --name redislatest redis:latest --requirepass 3b21d032a7fd8eb51fa7bd8a2e812b78b7b3a36f join_network: docker network connect websafe-network mysql56 docker network connect websafe-network daemon-xxx init_network: docker network create websafe-network check_network: docker network inspect websafe-network docker network inspect websafe-network | findStr IPv4Address åˆ é™¤ # å¯è§†åŒ– # go install github.com/jesseduffield/lazydocker@latest å¦‚æœéœ€è¦sudoæƒé™çš„è¯æ— æ³•ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼Œåªèƒ½whereè·å–åŸå§‹è·¯å¾„åsudo+åŸå§‹è·¯å¾„æ‰§è¡Œ å¦‚ï¼š\nâœ“sudo /home/ian/go/bin/lazydocker âœ—sudo lazydocker å¸¸è§é—®é¢˜å’Œæ¨¡æ¿ # ç”¨æˆ·sudoé—®é¢˜ # debianå¢åŠ dockerç”¨æˆ·ç»„,ä¼˜åŒ–æ¯æ¬¡sudoé—®é¢˜ æˆ–\nsudo groupadd docker # å®‰è£…å®Œdocker.ioä¹‹åä¸€èˆ¬éƒ½ä¼šè‡ªåŠ¨åˆ›å»ºæ‰€ä»¥è¿™ä¸€æ­¥å…¶å®æ²¡å•¥ç”¨ sudo gpasswd -a $USERNAME docker newgrp docker # æ›´æ–° Docker Mysqlç¼–ç  # version: \u0026#34;2.2\u0026#34; services: redis: image: \u0026#34;redis\u0026#34; # ports: # - 6379:6379 command: redis-server --appendonly yes #ä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤ restart: always # è‡ªåŠ¨é‡å¯ myserver: image: mainName/myserver restart: always # è‡ªåŠ¨é‡å¯ mainServer: image: mainName/mainServer # container_name: mainServerv1.0.0 depends_on: - redis ports: - 9001:9001 restart: always volumes: - \u0026#34;./logs:/src/build/logs\u0026#34; links: - redis - myserver mysql ç¼–ç é—®é¢˜|å•æ¡: docker run --name predix_mysql -e MYSQL_ROOT_PASSWORD=predix123predix -p 33061:3306 -e LANG=C.UTF-8 -d mysql:5.7 --character-set-server=utf8mb4 --collation-server=utf8mb4_general_ci\næ—¶åŒº/æ—¶é—´ä¿®æ”¹ # #docker #æ—¶åŒº\nFROM alpine:3.14 RUN apk add -U tzdata \u0026amp;\u0026amp; cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \u0026amp;\u0026amp; echo \u0026#34;Asia/Shanghai\u0026#34; \u0026gt; /etc/timezone ENV TZ=Asia/Shanghai \\ GO111MODULE=on \\ CGO_ENABLED=0 \\ GOOS=linux \\ GOARCH=amd64 \\ PROGRAM_ENV=pro WORKDIR /src/build # å¤åˆ¶æ„å»ºåº”ç”¨ç¨‹åºæ‰€éœ€çš„ä»£ç  COPY ./build . EXPOSE 8088 CMD [\u0026#34;./main\u0026#34;] bashè¿›å…¥æŸAppå†… # docker exec -it webserver bash webserver ä¸ºAPPåç§°\nSwarm # Docker Compose Docker Machine: Macã€WindowsåŒºåˆ«é¢„å…ˆå®‰è£…ã€‚ Linuxç›´æ¥å®‰è£… Win10 Hyper-V å‘å¸ƒé•œåƒ é•œåƒå……å½“å·²éƒ¨ç½²å®¹å™¨ï¼Œå¡«å†™å¿…è¦ä¿¡æ¯ï¼šusernameã€repoã€tag dockers-compose.yml å‰¯æœ¬\nå…¶å®ä»¥ä¸Šåœ¨å®˜æ–¹æ•™ç¨‹æœ‰å¾ˆå¥½è¯´æ˜åœ¨è¿™é‡Œï¼Œä½†æ¯•ç«Ÿé«˜çº§åº”ç”¨ï¼Œæš‚ä¸”è®°ä¸‹ã€‚\nåˆ›å»ºè™šæ‹Ÿæœºæ¥è¯•éªŒä¸€ä¸‹ # $ docker-machine create --driver virtualbox myvm1 $ docker-machine create --driver virtualbox myvm2 ç¬¬ä¸€ä¸ªç®¡ç†èŠ‚ç‚¹ï¼šdocker swarm initï¼Œç¬¬äºŒä¸ªå·¥ä½œèŠ‚ç‚¹`docker swarm join``\nshould like this show: # $ docker-machine ssh myvm1 \u0026#34;docker swarm init\u0026#34; Swarm initialized: current node \u0026lt;node ID\u0026gt; is now a manager. To add a worker to this swarm, run the following command: docker swarm join \\ --token \u0026lt;token\u0026gt; \\ \u0026lt;ip\u0026gt;:\u0026lt;port\u0026gt; é€šè¿‡è¿è¡Œ docker-machine ls æ¥å¤åˆ¶ myvm1 çš„ IP åœ°å€ï¼Œç„¶åä½¿ç”¨ è¯¥ IP åœ°å€å¹¶é€šè¿‡ \u0026ndash;advertise-addr æŒ‡å®šç«¯å£ 2377ï¼ˆç”¨äº swarm join çš„ç«¯å£ï¼‰ï¼Œ ä»¥ä¾¿å†æ¬¡è¿è¡Œ docker swarm init å‘½ä»¤ã€‚ä¾‹å¦‚ï¼š\ndocker-machine ssh myvm1 \u0026#34;docker swarm init --advertise-addr 192.168.99.100:2377\u0026#34; å¤åˆ¶æ­¤å‘½ä»¤ï¼Œç„¶åé€šè¿‡ docker-machine ssh å°†å…¶å‘é€ç»™ myvm2ï¼Œä»è€Œè®© myvm2 åŠ å…¥ # $ docker-machine ssh myvm2 \u0026#34;docker swarm join \\ --token \u0026lt;token\u0026gt; \\ \u0026lt;ip\u0026gt;:\u0026lt;port\u0026gt;\u0026#34; This node joined a swarm as a worker. è‡³æ­¤ï¼Œ åˆ›å»ºswarmå®Œæˆã€‚ # è¿æ¥ # ä½¿ç”¨sshè¿æ¥docker-machine ssh myvm1,è¿è¡Œdocker node lsæŸ¥çœ‹æ­¤ä¸­èŠ‚ç‚¹ã€‚\nMybe like this. # docker@myvm1:~$ docker node ls ID HOSTNAME STATUS AVAILABILITY MANAGER STATUS brtu9urxwfd5j0zrmkubhpkbd myvm2 Ready Active rihwohkh3ph38fhillhhb84sk * myvm1 Ready Active Leader mybe not you are ture. ğŸ˜‚\nä¹‹åï¼Œå…¶ä½™ä¸œè¥¿zæœ‰ç”¨åˆ°å†å»å®˜ç½‘æŸ¥çœ‹å§ã€‚ è®°å½•ä¸å¦ï¼Œå–å†³äºä¿ºã€‚\n"},{"id":73,"href":"/docs/programmer/cloudnative/%E5%AE%B9%E5%99%A8/note-of-docker/","title":"Docker","section":"äº‘åŸç”Ÿ","content":" Docker # æ•™ç¨‹æ‰‹å†Œ # å¥½ç”¨çš„ä½¿ç”¨æ•™ç¨‹\nInstall # ç•¥è¿‡~ ğŸ˜\nåŸºç¡€å‘½ä»¤ # æ‰“é•œåƒå’Œè·‘ # æ‰“ # docker build -t server:v0 . -f server.dockerfile dockerignore # å¦‚æœæ‚¨æƒ³åœ¨ Dockerfile ä¸­å°†å½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½å¤åˆ¶åˆ° Docker é•œåƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨ Dockerfile ä¸­çš„Â COPYÂ æŒ‡ä»¤ã€‚å…·ä½“çš„è¯­æ³•å¦‚ä¸‹ï¼š\nCOPY . /ç›®æ ‡è·¯å¾„/ å…¶ä¸­.Â è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œ/ç›®æ ‡è·¯å¾„/Â è¡¨ç¤ºç›®æ ‡è·¯å¾„ï¼Œè¿™é‡Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„ã€‚ è¿™å°†ä¼šå°†å½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°é•œåƒä¸­çš„Â /app/Â ç›®å½•ä¸‹ã€‚è¯·æ³¨æ„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹éƒ½ä¼šè¢«å¤åˆ¶åˆ°é•œåƒä¸­ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚å¦‚æœæ‚¨ä¸æƒ³å¤åˆ¶æŸäº›æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œå¯ä»¥åœ¨è¿è¡ŒÂ COPYÂ æŒ‡ä»¤ä¹‹å‰é€šè¿‡Â .dockerignoreÂ æ–‡ä»¶æ¥æŒ‡å®šå¿½ç•¥çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚\nè·‘ # docker run -p 9080:80 --name server server:v0 æŒ‡å®šå¯åŠ¨å‘½ä»¤ # sudo docker run -it -p 9080:80 --name nova_server nova_server:v0 sh -c \u0026#34;echo hello\u0026#34; åŠ å…¥è‡ªå®šä¹‰ç½‘ç»œ # --network {{network name}} è¯¦è§ï¼š[[#Network]]\nè·‘å‡ºé—®é¢˜-è¿›å…¥å®¹å™¨æ’æŸ¥ # sudo docker run -it -p 9080:80 --name nova_server nova_server:v0 sh -c \u0026#34;bash\u0026#34; ä½¿ç”¨-itè¿›å…¥å®¹å™¨æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤è¿›è¡Œè°ƒè¯•\nå¯åŠ¨å…¨éƒ¨å®¹å™¨ # docker ps -a | grep \u0026#34;Exited\u0026#34; | awk \u0026#39;{print $1}\u0026#39; | xargs docker start é‡å‘½å # podman rename {old_name} {new_name} Network # docker runæ—¶å®¹å™¨åŠ å…¥æ–¹æ³•-redisä¸ºä¾‹ åæœŸåŠ å…¥æ–¹å¼ åˆ›å»ºä¸€ä¸ªæ–°ç½‘ æ£€æµ‹ init_redis: docker run -p 6379:6379 \\\\ --network websafe-network \\\\ --name redislatest redis:latest --requirepass 3b21d032a7fd8eb51fa7bd8a2e812b78b7b3a36f join_network: docker network connect websafe-network mysql56 docker network connect websafe-network daemon-xxx init_network: docker network create websafe-network check_network: docker network inspect websafe-network docker network inspect websafe-network | findStr IPv4Address åˆ é™¤ # lazydocker å¯è§†åŒ– # go install github.com/jesseduffield/lazydocker@latest å¦‚æœéœ€è¦sudoæƒé™çš„è¯æ— æ³•ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼Œåªèƒ½whereè·å–åŸå§‹è·¯å¾„åsudo+åŸå§‹è·¯å¾„æ‰§è¡Œ å¦‚ï¼š\nâœ“sudo /home/ian/go/bin/lazydocker âœ—sudo lazydocker å¸¸è§é—®é¢˜å’Œæ¨¡æ¿ # ç”¨æˆ·sudoé—®é¢˜ # debianå¢åŠ dockerç”¨æˆ·ç»„,ä¼˜åŒ–æ¯æ¬¡sudoé—®é¢˜ æˆ–\nsudo groupadd docker # å®‰è£…å®Œdocker.ioä¹‹åä¸€èˆ¬éƒ½ä¼šè‡ªåŠ¨åˆ›å»ºæ‰€ä»¥è¿™ä¸€æ­¥å…¶å®æ²¡å•¥ç”¨ sudo gpasswd -a $USERNAME docker newgrp docker # æ›´æ–° ä¸å¥½ä½¿çš„è¯ # è¿™é‡Œæˆ‘æœ‰ä¸ªdocker(Docker version 24.0.5, build ced0996)\ndocker --version sudo groupadd docker sudo gpasswd -a ian docker sudo systemctl status snap.docker.dockerd.service sudo systemctl restart snap.docker.dockerd.service sudo systemctl status snap.docker.dockerd.service sudo usermod -aG docker ian sudo chmod 666 /var/run/docker.sock sudo setfacl --modify user:ian:rw /var/run/docker.sock docker ps -a Docker Mysqlç¼–ç  # version: \u0026#34;2.2\u0026#34; services: redis: image: \u0026#34;redis\u0026#34; # ports: # - 6379:6379 command: redis-server --appendonly yes #ä¸€ä¸ªå®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤ restart: always # è‡ªåŠ¨é‡å¯ myserver: image: mainName/myserver restart: always # è‡ªåŠ¨é‡å¯ mainServer: image: mainName/mainServer # container_name: mainServerv1.0.0 depends_on: - redis ports: - 9001:9001 restart: always volumes: - \u0026#34;./logs:/src/build/logs\u0026#34; links: - redis - myserver mysql ç¼–ç é—®é¢˜|å•æ¡ # docker run --name predix_mysql -e MYSQL_ROOT_PASSWORD=predix123predix -p 33061:3306 -e LANG=C.UTF-8 -e TZ=Asia/Shanghai -d mysql:5.7 --character-set-server=utf8mb4 --collation-server=utf8mb4_general_ci` æ—¶åŒºä¿®æ”¹-é•œåƒæ—¶é—´é—®é¢˜ # FROM alpine:3.14 RUN apk add -U tzdata \u0026amp;\u0026amp; cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \u0026amp;\u0026amp; echo \u0026#34;Asia/Shanghai\u0026#34; \u0026gt; /etc/timezone ENV TZ=Asia/Shanghai \\ GO111MODULE=on \\ CGO_ENABLED=0 \\ GOOS=linux \\ GOARCH=amd64 \\ PROGRAM_ENV=pro WORKDIR /src/build # å¤åˆ¶æ„å»ºåº”ç”¨ç¨‹åºæ‰€éœ€çš„ä»£ç  COPY ./build . EXPOSE 8088 CMD [\u0026#34;./main\u0026#34;] Mysql æ—¶åŒºé—®é¢˜ # -e TZ=Asia/Shanghai bashè¿›å…¥æŸAppå†… # docker exec -it webserver bash webserver ä¸ºAPPåç§°\nSwarm # Docker Compose Docker Machine: Macã€WindowsåŒºåˆ«é¢„å…ˆå®‰è£…ã€‚ Linuxç›´æ¥å®‰è£… Win10 Hyper-V å‘å¸ƒé•œåƒ é•œåƒå……å½“å·²éƒ¨ç½²å®¹å™¨ï¼Œå¡«å†™å¿…è¦ä¿¡æ¯ï¼šusernameã€repoã€tag dockers-compose.yml å‰¯æœ¬\nå…¶å®ä»¥ä¸Šåœ¨å®˜æ–¹æ•™ç¨‹æœ‰å¾ˆå¥½è¯´æ˜åœ¨è¿™é‡Œï¼Œä½†æ¯•ç«Ÿé«˜çº§åº”ç”¨ï¼Œæš‚ä¸”è®°ä¸‹ã€‚\nåˆ›å»ºè™šæ‹Ÿæœºæ¥è¯•éªŒä¸€ä¸‹ # $ docker-machine create --driver virtualbox myvm1 $ docker-machine create --driver virtualbox myvm2 ç¬¬ä¸€ä¸ªç®¡ç†èŠ‚ç‚¹ï¼šdocker swarm initï¼Œç¬¬äºŒä¸ªå·¥ä½œèŠ‚ç‚¹`docker swarm join``\nshould like this show: # $ docker-machine ssh myvm1 \u0026#34;docker swarm init\u0026#34; Swarm initialized: current node \u0026lt;node ID\u0026gt; is now a manager. To add a worker to this swarm, run the following command: docker swarm join \\ --token \u0026lt;token\u0026gt; \\ \u0026lt;ip\u0026gt;:\u0026lt;port\u0026gt; é€šè¿‡è¿è¡Œ docker-machine ls æ¥å¤åˆ¶ myvm1 çš„ IP åœ°å€ï¼Œç„¶åä½¿ç”¨ è¯¥ IP åœ°å€å¹¶é€šè¿‡ \u0026ndash;advertise-addr æŒ‡å®šç«¯å£ 2377ï¼ˆç”¨äº swarm join çš„ç«¯å£ï¼‰ï¼Œ ä»¥ä¾¿å†æ¬¡è¿è¡Œ docker swarm init å‘½ä»¤ã€‚ä¾‹å¦‚ï¼š\ndocker-machine ssh myvm1 \u0026#34;docker swarm init --advertise-addr 192.168.99.100:2377\u0026#34; å¤åˆ¶æ­¤å‘½ä»¤ï¼Œç„¶åé€šè¿‡ docker-machine ssh å°†å…¶å‘é€ç»™ myvm2ï¼Œä»è€Œè®© myvm2 åŠ å…¥ # $ docker-machine ssh myvm2 \u0026#34;docker swarm join \\ --token \u0026lt;token\u0026gt; \\ \u0026lt;ip\u0026gt;:\u0026lt;port\u0026gt;\u0026#34; This node joined a swarm as a worker. è‡³æ­¤ï¼Œ åˆ›å»ºswarmå®Œæˆã€‚\nç©ºé—´å ç”¨é—®é¢˜ # é¦–å…ˆæŸ¥çœ‹dockerå­˜å‚¨ä½ç½® sudo docker info # è¿™é‡Œ: Docker Root Dir: ä¿®æ”¹/etc/docker/deamon.json or ~/.config/docker/daemon.json: { \u0026quot;data-root\u0026quot;: \u0026quot;/home/hellxz/docker-home\u0026quot;}\né€šè¿‡snapå®‰è£…çš„dockeré…ç½®æ–‡ä»¶è·¯å¾„ # /var/snap/docker/current/etc/docker/daemon.json /var/snap/docker/current/config/daemon.json sudo snap restart docker è¿æ¥ # ä½¿ç”¨sshè¿æ¥docker-machine ssh myvm1,è¿è¡Œdocker node lsæŸ¥çœ‹æ­¤ä¸­èŠ‚ç‚¹ã€‚\nMybe like this. # docker@myvm1:~$ docker node ls ID HOSTNAME STATUS AVAILABILITY MANAGER STATUS brtu9urxwfd5j0zrmkubhpkbd myvm2 Ready Active rihwohkh3ph38fhillhhb84sk * myvm1 Ready Active Leader mybe not you are ture. ğŸ˜‚\nä¹‹åï¼Œå…¶ä½™ä¸œè¥¿zæœ‰ç”¨åˆ°å†å»å®˜ç½‘æŸ¥çœ‹å§ã€‚ è®°å½•ä¸å¦ï¼Œå–å†³äºä¿ºã€‚\nsupervisord ç¦ç”¨æ—¥å¿—æ–‡ä»¶æˆ–ä½¿ç”¨logfile=/dev/stdout # from: https://www.coder.work/article/100835 æ ‡ç­¾ docker supervisord\n[supervisord] nodaemon=true logfile=/dev/stdout pidfile=/var/run/supervisord.pid childlogdir=/var/log/supervisor å½“æˆ‘è¿™æ ·åšæ—¶ï¼Œè¿™ä¸ªä¸»ç®¡ä¼šå´©æºƒï¼Œå› ä¸ºå®ƒæ— æ³•åœ¨/dev/stdout ä¸­å¯»æ‰¾\nå¦‚ä½•ç¦ç”¨ supervisord åœ¨æˆ‘çš„ docker å®¹å™¨ä¸­åˆ›å»ºä»»ä½•æ—¥å¿—æ–‡ä»¶ï¼Ÿ\næœ€ä½³ç­”æ¡ˆ\nå¯¹äºä¸»ä¸»ç®¡ï¼Œnodaemon å°†å¯¼è‡´æ—¥å¿—è½¬åˆ° stdout\n[supervisord] nodaemon=true logfile=/dev/null logfile_maxbytes=0 ç„¶åå°†æ¯ä¸ªæ‰˜ç®¡è¿›ç¨‹çš„æ—¥å¿—å‘é€åˆ°æ ‡å‡†è¾“å‡ºæ–‡ä»¶æè¿°ç¬¦/dev/fd/1\n[program:x] command=echo test stdout_logfile=/dev/fd/1 stdout_logfile_maxbytes=0 redirect_stderr=true æˆ–è€…ï¼Œå¦‚æœæ‚¨å¸Œæœ›å°† stderr ä¿ç•™åœ¨ä¸åŒçš„æµä¸Š:\n[program:x] command=echo test stdout_logfile=/dev/fd/1 stdout_logfile_maxbytes=0 stderr_logfile=/dev/fd/2 stderr_logfile_maxbytes=0 å…³äºdocker - supervisord ç¦ç”¨æ—¥å¿—æ–‡ä»¶æˆ–ä½¿ç”¨ logfile=/dev/stdoutï¼Œæˆ‘ä»¬åœ¨Stack Overflowä¸Šæ‰¾åˆ°ä¸€ä¸ªç±»ä¼¼çš„é—®é¢˜ï¼š https://stackoverflow.com/questions/45645758/\nsedæŠ¥Device or resource busyé”™è¯¯çš„å¤„ç†åŸå› åŠæ–¹å¼ # è½¬è½½ kuSorZ åšä¸»æ–‡ç« åˆ†ç±»ï¼šLinux æ–‡ç« æ ‡ç­¾: docker | sed æ–‡ç« åˆ†ç±»: Docker åŸæ–‡å‡ºå¤„ï¼š https://www.cnblogs.com/xuxinkun/p/7116737.htmlé”™è¯¯ç°è±¡\nåœ¨dockerå®¹å™¨ä¸­æƒ³è¦ä¿®æ”¹/etc/resolv.confä¸­çš„nameseverï¼Œä½¿ç”¨sedå‘½ä»¤è¿›è¡Œæ‰§è¡Œæ—¶é‡åˆ°é”™è¯¯ï¼š\n/ # sed -i \u0026rsquo;s/192.168.1.1/192.168.1.254/g\u0026rsquo; /etc/resolv.conf sed: can\u0026rsquo;t move \u0026lsquo;/etc/resolv.conf73UqmG\u0026rsquo; to \u0026lsquo;/etc/resolv.conf\u0026rsquo;: Device or resource busy\nä½†æ˜¯å¯ä»¥é€šè¿‡vi/vimç›´æ¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶/etc/resolv.confè¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚ é—®é¢˜åŸå› \nsedå‘½ä»¤çš„å®è´¨å¹¶ä¸æ˜¯ä¿®æ”¹æ–‡ä»¶ï¼Œè€Œæ˜¯äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶æ›¿æ¢åŸæœ‰çš„æ–‡ä»¶ã€‚è¿™é‡Œæˆ‘ä»¬åšäº†ä¸€ä¸ªå®éªŒã€‚\næˆ‘å…ˆåˆ›å»ºäº†ä¸€ä¸ªtest.txtçš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹æ˜¯123ã€‚ç„¶åæˆ‘ä½¿ç”¨sedå‘½ä»¤å¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œäº†æ›¿æ¢ã€‚å†æ¬¡æŸ¥çœ‹test.txtã€‚\n/ # stat test.txt File: test.txt Size: 4 Blocks: 8 IO Block: 4096 regular fileDevice: fd28h/64808d Inode: 265 Links: 1Access: (0644/-rw-r\u0026ndash;r\u0026ndash;) Uid: ( 0/ root) Gid: ( 0/ root)Access: 2017-07-04 06:28:35.000000000Modify: 2017-07-04 06:28:17.000000000Change: 2017-07-04 06:29:03.000000000/ # cat test.txt 123/ # sed -i \u0026rsquo;s/123/321/g\u0026rsquo; test.txt/ # stat test.txt File: test.txt Size: 4 Blocks: 8 IO Block: 4096 regular fileDevice: fd28h/64808d Inode: 266 Links: 1Access: (0644/-rw-r\u0026ndash;r\u0026ndash;) Uid: ( 0/ root) Gid: ( 0/ root)Access: 2017-07-04 06:29:31.000000000Modify: 2017-07-04 06:29:31.000000000Change: 2017-07-04 06:29:31.000000000/ # cat test.txt321\nå¯ä»¥çœ‹åˆ°æ–‡ä»¶å†…å®¹è¢«æ­£ç¡®ä¿®æ”¹äº†ï¼Œä½†æ˜¯åŒæ—¶ï¼Œæ–‡ä»¶çš„inodeä¹Ÿä¿®æ”¹äº†ã€‚è¯´æ˜äº†å®è´¨ä¸Šæ˜¯æ–°ç”Ÿæˆçš„æ–‡ä»¶æ›¿æ¢äº†åŸæœ‰çš„æ–‡ä»¶ã€‚ä½†æ˜¯vim/viæ˜¯åœ¨åŸæ–‡ä»¶åŸºç¡€ä¸Šä¿®æ”¹çš„ï¼Œæ‰€ä»¥inodeæ²¡æœ‰å˜åŒ–ã€‚\nåœ¨dockerä¸­ï¼Œ/etc/resolv.confæ˜¯é€šè¿‡æŒ‚è½½å…¥å®¹å™¨çš„ã€‚æ‰€ä»¥å½“ä½ æƒ³å»åˆ é™¤è¿™ä¸ªæŒ‚è½½æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æŒ‚è½½ç‚¹æ—¶ï¼Œè‡ªç„¶å°±ä¼šæŠ¥Device or resource busyã€‚\nè¿™ä¸ªè·Ÿæ˜¯ä¸æ˜¯ç‰¹æƒprivilegeæ²¡æœ‰å…³ç³»ã€‚å³ä½¿æ˜¯privilegeçš„å®¹å™¨ï¼Œä¹Ÿä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚ / # rm /etc/resolv.conf rm: can\u0026rsquo;t remove \u0026lsquo;/etc/resolv.conf\u0026rsquo;: Device or resource busy\nå…¶å®ä¸ä»…ä»…/etc/resolv.confï¼Œè¿˜æœ‰/etc/hostnameï¼Œ/etc/hostsç­‰æ–‡ä»¶éƒ½æ˜¯é€šè¿‡æŒ‚è½½æ–¹å¼æŒ‚è½½åˆ°å®¹å™¨ä¸­æ¥çš„ã€‚æ‰€ä»¥æƒ³è¦ç”¨sedå¯¹ä»–ä»¬è¿›è¡Œä¿®æ”¹ï¼Œéƒ½ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡df -hæŸ¥çœ‹å®¹å™¨å†…çš„æŒ‚è½½æƒ…å†µã€‚\n/ # df -h Filesystem Size Used Available Use% Mounted on/dev/mapper/docker-253:2-807144231-37acfcd86387ddcbc52ef8dac69d919283fc5d9d8ab5f55fd23d1c782e3b1c70 10.0G 33.8M 10.0G 0% /tmpfs 15.4G 0 15.4G 0% /devtmpfs 15.4G 0 15.4G 0% /sys/fs/cgroup/dev/mapper/centos-home 212.1G 181.8G 30.3G 86% /run/secrets/dev/mapper/centos-home 212.1G 181.8G 30.3G 86% /dev/termination-log/dev/mapper/centos-home 212.1G 181.8G 30.3G 86% /etc/resolv.conf/dev/mapper/centos-home 212.1G 181.8G 30.3G 86% /etc/hostname/dev/mapper/centos-home 212.1G 181.8G 30.3G 86% /etc/hostsshm 64.0M 0 64.0M 0% /dev/shmtmpfs 15.4G 0 15.4G 0% /proc/kcoretmpfs 15.4G 0 15.4G 0% /proc/timer_stats\nå¦‚ä½•è§£å†³\nä½¿ç”¨viå›ºç„¶å¯ä»¥ï¼Œä½†æ˜¯å¯¹äºæ‰¹é‡æ“ä½œå°±ä¸æ˜¯å¾ˆåˆé€‚äº†ã€‚å¯ä»¥é€šè¿‡sedå’Œechoçš„ç»„åˆå‘½ä»¤echo \u0026ldquo;$(sed \u0026rsquo;s/192.168.1.1/192.168.1.254/g\u0026rsquo; /etc/resolv.conf)\u0026rdquo; \u0026gt; /etc/resolv.conf å³å¯å®ç°æ›¿æ¢ã€‚\n/ # cat /etc/resolv.conf search default.svc.games.local svc.games.local games.localnameserver 192.168.1.1options ndots:5/ # echo \u0026ldquo;$(sed \u0026rsquo;s/192.168.1.1/192.168.1.254/g\u0026rsquo; /etc/resolv.conf)\u0026rdquo; \u0026gt; /etc/resolv.conf / # cat /etc/resolv.conf search default.svc.games.local svc.games.local games.localnameserver 192.168.1.254options ndots:5\nè¿™é‡Œå¦‚æœä½¿ç”¨sed \u0026rsquo;s/192.168.1.1/192.168.1.254/g\u0026rsquo; /etc/resolv.conf \u0026gt; /etc/resolv.confæ˜¯æ— æ•ˆçš„ã€‚æœ€ç»ˆä¼šå¯¼è‡´/etc/resolv.confå†…å®¹ä¸ºç©ºã€‚\nç¤ºä¾‹ # Dockerfile # CMD mkdir -p /var/log/scancenter \\ \u0026amp;\u0026amp; sed \u0026#39;s/INFO\\|ERROR/DEBUG/g\u0026#39; -i scancenter/logging.cfg \\ \u0026amp;\u0026amp; uwsgi /opt/disk2/var/www/scancenter/3rd/conf/uwsgi-docker/uwsgi.ini --log-master k8s yaml # spec: containers: - command: - /bin/sh - -c - mkdir -p /var/log/scancenter \u0026amp;\u0026amp; echo -e \u0026#34;10.120.16.12\\tapi.s.com\\n10.5.25.5\\tpp.api.com\u0026#34; \u0026gt;\u0026gt; /etc/hosts \u0026amp;\u0026amp; echo \u0026#34;$(sed \u0026#39;s/^-e //g\u0026#39; /etc/hosts)\u0026#34; \u0026gt; /etc/hosts \u0026amp;\u0026amp; sed \u0026#39;s/INFO\\|ERROR/DEBUG/g\u0026#39; -i scancenter/logging.cfg \u0026amp;\u0026amp; uwsgi /opt/disk2/var/www/scancenter/3rd/conf/uwsgi-docker/uwsgi.ini env: - name: POD_IP_ADDRESS valueFrom: fieldRef: apiVersion: v1 fieldPath: status.podIP "},{"id":74,"href":"/docs/programmer/cloudnative/fastapi/","title":"Djangoçš„å»ºç«™çš„(ï½¡ï½¥ï½¥)ï¾‰ï¾","section":"äº‘åŸç”Ÿ","content":" å¤šä¸€å±‚ç›®å½•æ—¶ # # Dir Tree just like: # . # â”œâ”€â”€ app # â”‚Â â”œâ”€â”€ __init__.py # â”‚ â””â”€â”€ main.py # â”œâ”€â”€ Dockerfile # â””â”€â”€ requirements.txt å¦‚æœåœ¨appåŒçº§ç›®å½•ï¼Œè€Œéappä¸‹è¿è¡Œæ—¶ï¼š\nuvicorn app.main:app --reload "},{"id":75,"href":"/docs/programmer/net/tips-of-grpc/","title":"gRpcä½¿ç”¨å°è®°","section":"Net","content":"\ngRpc HelloWorld # helloWorld # quickstart\nprotoc --go_out=. --go_opt=paths=source_relative \\ --go-grpc_out=. --go-grpc_opt=paths=source_relative \\ helloworld/helloworld.proto MacOSä¸‹é—®é¢˜ # åŸæœ¬protobufä¸­æ²¡æœ‰macçš„gen-goå’Œgen-go-grpc,æ‰€ä»¥éœ€è¦é¢å¤–è¿è¡Œå®‰è£…. é™¤äº†ä½¿ç”¨brewç”¨go getåº”è¯¥ä¹Ÿæ˜¯å¯ä»¥çš„,å°±æ˜¯æœ‰è·¯å¾„é—®é¢˜,æ‰€ä»¥è¿˜æ˜¯ä½¿ç”¨brewå§ brew install protobuf brew install protoc-gen-go brew install protoc-gen-go-grpc "},{"id":76,"href":"/docs/programmer/langs/golang/advanced-knowledge-of-golang/","title":"Golangè¿›é˜¶ç¬”è®°","section":"Golang","content":" Golangè¿›é˜¶ç¬”è®° # æ€§èƒ½åˆ†æ # import ( \u0026#34;net/http\u0026#34; _ \u0026#34;net/http/pprof\u0026#34; ) go func() { log.Println(http.ListenAndServe(\u0026#34;localhost:6060\u0026#34;, nil)) }() å°†ä»¥ä¸Šä»£ç æ’å…¥ç¨‹åºä¸­ å¯åŠ¨ä¹‹åæ‰§è¡Œ\ngo tool pprof http://localhost:6060/debug/pprof/profile?seconds=30 å…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥help å¦‚æœä½¿ç”¨topçš„è¯å°±å¯ä»¥æŸ¥çœ‹æ–¹æ³•å ç”¨äº†\n(pprof) top Showing nodes accounting for 29.59s, 98.60% of 30.01s total Dropped 35 nodes (cum \u0026lt;= 0.15s) flat flat% sum% cum cum% 28.98s 96.57% 96.57% 28.98s 96.57% time.Now 0.24s 0.8% 97.37% 0.51s 1.70% runtime.selectgo 0.16s 0.53% 97.90% 0.16s 0.53% memeqbody 0.13s 0.43% 98.33% 0.29s 0.97% runtime.mapaccess2_faststr 0.08s 0.27% 98.60% 29.95s 99.80% example.com//pts/services/monitor.Run å¦‚ä»¥ä¸Šå°±æ˜¯è¯´monitor.Runæ–¹æ³•ä¸­ä½¿ç”¨äº†select, ç„¶åå…¶ä¸­çš„time.Nowè¢«ç–¯ç‹‚æ‰§è¡Œ.\nè·¯å¾„é—®é¢˜ # test_test.go # package main import \u0026#34;testing\u0026#34; func TestHelloWorld(t *testing.T) { // t.Fatal(\u0026#34;not implemented\u0026#34;) path := getCurrentPath() t.Log(\u0026#34;getCurrentPath: \u0026#34;, path) } test.go # package main import ( \u0026#34;fmt\u0026#34; \u0026#34;log\u0026#34; \u0026#34;os\u0026#34; \u0026#34;path\u0026#34; \u0026#34;path/filepath\u0026#34; \u0026#34;runtime\u0026#34; \u0026#34;strings\u0026#34; ) func main() { fmt.Println(\u0026#34;getTmpDirï¼ˆå½“å‰ç³»ç»Ÿä¸´æ—¶ç›®å½•ï¼‰ = \u0026#34;, getTmpDir()) fmt.Println(\u0026#34;getCurrentAbPathByExecutableï¼ˆä»…æ”¯æŒgo buildï¼‰ = \u0026#34;, getCurrentAbPathByExecutable()) fmt.Println(\u0026#34;getCurrentAbPathByCallerï¼ˆä»…æ”¯æŒgo runï¼‰ = \u0026#34;, getCurrentAbPathByCaller()) fmt.Println(\u0026#34;getCurrentAbPathï¼ˆæœ€ç»ˆæ–¹æ¡ˆ-å…¨å…¼å®¹ï¼‰ = \u0026#34;, getCurrentAbPath()) fmt.Println(\u0026#34;getCurrentPathï¼ˆruntime.Caller1ï¼‰ = \u0026#34;, getCurrentPath()) } // æœ€ç»ˆæ–¹æ¡ˆ-å…¨å…¼å®¹ func getCurrentAbPath() string { dir := getCurrentAbPathByExecutable() if strings.Contains(dir, getTmpDir()) { return getCurrentAbPathByCaller() } return dir } func getCurrentPath() string { _, filename, _, _ := runtime.Caller(1) return path.Dir(filename) } // è·å–ç³»ç»Ÿä¸´æ—¶ç›®å½•ï¼Œå…¼å®¹go run func getTmpDir() string { dir := os.Getenv(\u0026#34;TEMP\u0026#34;) if dir == \u0026#34;\u0026#34; { dir = os.Getenv(\u0026#34;TMP\u0026#34;) } res, _ := filepath.EvalSymlinks(dir) return res } // è·å–å½“å‰æ‰§è¡Œæ–‡ä»¶ç»å¯¹è·¯å¾„ func getCurrentAbPathByExecutable() string { exePath, err := os.Executable() if err != nil { log.Fatal(err) } res, _ := filepath.EvalSymlinks(filepath.Dir(exePath)) return res } // è·å–å½“å‰æ‰§è¡Œæ–‡ä»¶ç»å¯¹è·¯å¾„ï¼ˆgo runï¼‰ func getCurrentAbPathByCaller() string { var abPath string _, filename, _, ok := runtime.Caller(0) if ok { abPath = path.Dir(filename) } return abPath } è¾“å‡º # ian@ianDebian:~$ ./test getTmpDirï¼ˆå½“å‰ç³»ç»Ÿä¸´æ—¶ç›®å½•ï¼‰ = . getCurrentAbPathByExecutableï¼ˆä»…æ”¯æŒgo buildï¼‰ = /home/ian getCurrentAbPathByCallerï¼ˆä»…æ”¯æŒgo runï¼‰ = /home/ian getCurrentAbPathï¼ˆæœ€ç»ˆæ–¹æ¡ˆ-å…¨å…¼å®¹ï¼‰ = /home/ian getCurrentPathï¼ˆruntime.Caller1ï¼‰ = /home/ian ian@ianDebian:~$ ian@ianDebian:~$ go run test.go getTmpDirï¼ˆå½“å‰ç³»ç»Ÿä¸´æ—¶ç›®å½•ï¼‰ = . getCurrentAbPathByExecutableï¼ˆä»…æ”¯æŒgo buildï¼‰ = /tmp/go-build3048077768/b001/exe getCurrentAbPathByCallerï¼ˆä»…æ”¯æŒgo runï¼‰ = /home/ian getCurrentAbPathï¼ˆæœ€ç»ˆæ–¹æ¡ˆ-å…¨å…¼å®¹ï¼‰ = /tmp/go-build3048077768/b001/exe getCurrentPathï¼ˆruntime.Caller1ï¼‰ = /home/ian ian@ianDebian:~$ ian@ianDebian:~$ go test test_test.go test.go -v === RUN TestHelloWorld test_test.go:8: getCurrentPath: /home/ian --- PASS: TestHelloWorld (0.00s) PASS ok command-line-arguments\t0.002s Golang ç§æœ‰ä»“åº“ # xxxæ›¿æ¢ä¸ºå…·ä½“åœ°å€\nexport GOPRIVATE=github.com/xxx/xxx ä¿®æ”¹~/.gitconfigè®©go getå§‹ç»ˆé€šè¿‡sshè€Œéhttp\n[url \u0026#34;git@github.com:\u0026#34;] insteadOf = https://github.com/ [url \u0026#34;git@gitlab.com:\u0026#34;] insteadOf = https://gitlab.com/ -å’Œ_ä¸åŒçš„åˆ†éš”ç¬¦å¼•å‘çš„åŒ…å¯¼å…¥é”™è¯¯ # é€‚ç”¨äºGithubä»“åº“åä¸ºxxxxx-xxxxxä½†åŒ…åä¸ºxxxxx_xxxxx, å› ä¸ºgo mod ä¸æ”¯æŒ-åˆ†éš”.\nmodule example.com go 1.16 replace github.com/xxx-xx/xxxxx_xxxxx =\u0026gt; github.com/xxx-xx/xxxxx-xxxxx v0.0.1 // indirect require github.com/xxx-xx/xxxxx_xxxxx v0.0.1 éç¡¬æ€§ç»“æŸæœåŠ¡ # http.Server.Shutdown # http.Serverç»“æ„ä½“æœ‰ä¸€ä¸ªç»ˆæ­¢æœåŠ¡çš„æ–¹æ³•Shutdown\né¦–å…ˆå…³é—­æ‰€æœ‰å¼€å¯çš„ç›‘å¬å™¨ å…³é—­æ‰€æœ‰é—²ç½®è¿æ¥ ç­‰å¾…æ´»è·ƒçš„è¿æ¥å‡é—²ç½®äº†æ‰ç»ˆæ­¢æœåŠ¡ é•¿é“¾æ¥ # å¯¹è¯¸å¦‚WebSocketç­‰çš„é•¿è¿æ¥ï¼ŒShutdownä¸ä¼šå°è¯•å…³é—­ä¹Ÿä¸ä¼šç­‰å¾…è¿™äº›è¿æ¥ã€‚è‹¥éœ€è¦ï¼Œéœ€è°ƒç”¨è€…åˆ†å¼€é¢å¤–å¤„ç†ï¼ˆè¯¸å¦‚é€šçŸ¥è¯¸é•¿è¿æ¥æˆ–ç­‰å¾…å®ƒä»¬å…³é—­ï¼Œä½¿ç”¨RegisterOnShutdownæ³¨å†Œç»ˆæ­¢é€šçŸ¥å‡½æ•°ï¼‰\nsignal.Notify # å¯æŒ‡å®šä¿¡å·ç±»å‹/all incoming signals will be relayed to c\nç»¼ä¸Š # Demo1 # srv := http.Server{ Addr: *addr, Handler: handler, } // make sure idle connections returned processed := make(chan struct{}) go func() { c := make(chan os.Signal, 1) signal.Notify(c, os.Interrupt) \u0026lt;-c ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second) defer cancel() if err := srv.Shutdown(ctx); nil != err { log.Fatalf(\u0026#34;server shutdown failed, err: %v\\n\u0026#34;, err) } log.Println(\u0026#34;server gracefully shutdown\u0026#34;) close(processed) }() // serve err := srv.ListenAndServe() if http.ErrServerClosed != err { log.Fatalf(\u0026#34;server not gracefully shutdown, err :%v\\n\u0026#34;, err) } // waiting for goroutine above processed \u0026lt;-processed } Demo2 # func main() { c := make(chan os.Signal) // ç›‘å¬ä¿¡å· signal.Notify(c, syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM, syscall.SIGQUIT, syscall.SIGUSR1, syscall.SIGUSR2) go func() { for s := range c { switch s { case syscall.SIGHUP, syscall.SIGINT, syscall.SIGTERM: fmt.Println(\u0026#34;é€€å‡º:\u0026#34;, s) ExitFunc() case syscall.SIGUSR1: fmt.Println(\u0026#34;usr1\u0026#34;, s) case syscall.SIGUSR2: fmt.Println(\u0026#34;usr2\u0026#34;, s) default: fmt.Println(\u0026#34;å…¶ä»–ä¿¡å·:\u0026#34;, s) } } }() fmt.Println(\u0026#34;å¯åŠ¨äº†ç¨‹åº\u0026#34;) sum := 0 for { sum++ fmt.Println(\u0026#34;ä¼‘çœ äº†:\u0026#34;, sum, \u0026#34;ç§’\u0026#34;) time.Sleep(1 * time.Second) } } func ExitFunc() { fmt.Println(\u0026#34;å¼€å§‹é€€å‡º...\u0026#34;) fmt.Println(\u0026#34;æ‰§è¡Œæ¸…ç†...\u0026#34;) fmt.Println(\u0026#34;ç»“æŸé€€å‡º...\u0026#34;) os.Exit(0) } Demo3 # package main import ( \u0026#34;log\u0026#34; \u0026#34;io\u0026#34; \u0026#34;time\u0026#34; \u0026#34;net/http\u0026#34; ) func startHttpServer() *http.Server { srv := \u0026amp;http.Server{Addr: \u0026#34;:8080\u0026#34;} http.HandleFunc(\u0026#34;/\u0026#34;, func(w http.ResponseWriter, r *http.Request) { io.WriteString(w, \u0026#34;hello world\\n\u0026#34;) }) go func() { if err := srv.ListenAndServe(); err != nil { // cannot panic, because this probably is an intentional close log.Printf(\u0026#34;Httpserver: ListenAndServe() error: %s\u0026#34;, err) } }() // returning reference so caller can call Shutdown() return srv } func main() { log.Printf(\u0026#34;main: starting HTTP server\u0026#34;) srv := startHttpServer() log.Printf(\u0026#34;main: serving for 10 seconds\u0026#34;) time.Sleep(10 * time.Second) log.Printf(\u0026#34;main: stopping HTTP server\u0026#34;) // now close the server gracefully (\u0026#34;shutdown\u0026#34;) // timeout could be given instead of nil as a https://golang.org/pkg/context/ if err := srv.Shutdown(nil); err != nil { panic(err) // failure/timeout shutting down the server gracefully } log.Printf(\u0026#34;main: done. exiting\u0026#34;) } "},{"id":77,"href":"/docs/programmer/langs/python/pytest/","title":"PyTest","section":"Python","content":" ä¸€ã€å‘½ä»¤ # å¸¸ç”¨å‚æ•° # 1. å¿½ç•¥æŠ¥è­¦ä¿¡æ¯ # -p no:warnings 2. pdbè°ƒè¯• # ipdbæœ‰çš„ç‰ˆæœ¬å¯ä»¥æœ‰çš„ä¸è¡Œ\n--pdb 3. æŒ‡å®šå·¥ä½œç›®å½• # æœ‰æ—¶å€™éœ€è¦ä½¿ç”¨python -m pytestæ‰ç”Ÿæ•ˆ, ç›´æ¥pytestä¸ç”Ÿæ•ˆ æ€»ä¹‹ä¸å¦‚ä½¿ç”¨sys.path.insert\n--rootdir /home/path/ 4. Djangoä½¿ç”¨pytestæµ‹è¯• # pip install pytest-django pytest -s -vv .\\tests\\test_step2.py --rootdir X:\\Code\\workflows\\ --ds project.settings rootdir æŒ‡å®šé¡¹ç›®æ ¹ç›®å½• ds æŒ‡å‘django setting.py æ–‡ä»¶ äºŒã€æ³›è®º # 1ã€ä¸ºä»€ä¹ˆéœ€è¦pytest # helps you write better programs\næé«˜é˜…è¯»ç†è§£ä»£ç æ•ˆç‡ æé«˜debugæ•ˆç‡ æé«˜å¼€å‘æ•ˆç‡ ä¿è¯äº¤ä»˜ä»£ç è´¨é‡ ç®€å•ä¾‹å­ # å…¥é—¨ä¾‹å­:\näº†è§£ä½¿ç”¨testæ–‡ä»¶å‘½åæ ¼å¼: test_å‰ç¼€ äº†è§£æ–­è¨€assert äº†è§£æµ‹è¯•è¾“å‡º # content of test_sample.py def inc(x): return x + 1 def test_answer(): assert inc(3) == 5 è¾“å‡º\n$ pytest =========================== test session starts ============================ platform linux -- Python 3.x.y, pytest-7.x.y, pluggy-1.x.y rootdir: /home/sweet/project collected 1 item test_sample.py F [100%] ================================= FAILURES ================================= _______________________________ test_answer ________________________________ def test_answer(): \u0026gt; assert inc(3) == 5 E assert 4 == 5 E + where 4 = inc(3) test_sample.py:6: AssertionError ========================= short test summary info ========================== FAILED test_sample.py::test_answer - assert 4 == 5 ============================ 1 failed in 0.12s ============================= å¸¸ç”¨å‘½ä»¤ # ç†Ÿæ‚‰æµ‹è¯•å‘½ä»¤å’Œå¤‡å¿˜, äº†è§£å¸¸ç”¨å‚æ•°å«ä¹‰\npytest -s è¾“å‡ºprintå’Œæ—¥å¿— --pdb å…è®¸pdbè°ƒè¯• -vv è¯¦ç»†è¾“å‡º Django # python2 manage.py test tests/ # Django Test Allure # pytest --alluredir=./allure_report allure serve ./allure_report å®‰è£… # æ¶‰åŠåˆ°çš„åº“å’Œä¾èµ–å®‰è£…å‘½ä»¤å¤‡å¿˜\napt install npm apt install openjdk-11-jdk npm install -g allure-commandline --save-dev pip install pytest pip install allure-pytest # -i https://pypi.tuna.tsinghua.edu.cn/simple 2ã€APIæµ‹è¯• # æ‰¹é‡APIæµ‹è¯•ç®€åŒ–å†™æ³•, åˆæ­¥ä½“éªŒä¸€ä¸‹ç®€åŒ–å·¥ä½œçš„å¿«ä¹\nç®€å•ä¸”é‡å¤çš„æ¥å£æµ‹è¯• ä»¥CSVä¸ºä¾‹ # test.csv # url body contains https://httpbin.org/post {\u0026ldquo;key\u0026rdquo;: \u0026ldquo;value\u0026rdquo;} {\u0026ldquo;url\u0026rdquo;: \u0026ldquo;https://httpbin.org/post\"} https://httpbin.org/post {\u0026ldquo;key\u0026rdquo;: \u0026ldquo;value\u0026rdquo;} {\u0026ldquo;data\u0026rdquo;: \u0026ldquo;{\u0026quot;key\u0026quot;: \u0026quot;value\u0026quot;}\u0026rdquo;} test_api.py # def readCsv(): data=list() with open(\u0026#39;test.csv\u0026#39;,\u0026#39;r\u0026#39;) as f: reader=csv.reader(f) next(reader) for item in reader: data.append(item) return data @pytest.mark.parametrize(\u0026#39;data\u0026#39;, readCsv()) def test_csv_login(data): r=requests.post( url=data[0], json=json.loads(data[1])) _temp = r.json() _temp_update = copy.deepcopy(_temp) _temp_update.update(json.loads(data[2])) assert _temp == _temp_update è¾“å‡º\npytest test_api.py ==================================== test session starts ==================================== platform linux -- Python 3.9.2, pytest-7.2.1, pluggy-1.0.0 rootdir: /mnt/share/code plugins: allure-pytest-2.12.0, anyio-3.6.2 collected 2 items test_api.py .. [100%] ===================================== 2 passed in 3.12s ===================================== 3ã€Mock å’Œæµ‹è¯• # äº†è§£æµ‹è¯•ä¸­å¸¸ç”¨çš„å°å·¥å…·, å¢è¿›å¼€å‘è‡ªæµ‹å¹¸ç¦æ„Ÿ\nå‰ã€åç«¯å¹¶è¡Œå¼€å‘, æ‘†è„±ä¾èµ– æ¨¡æ‹Ÿæ— æ³•è®¿é—®çš„èµ„æº éš”ç¦»ç³»ç»Ÿ, é¿å…è„æ•°æ®å¹²æ‰°æˆ–ç”Ÿäº§è„æ•°æ® 0. Mockçš„æ–¹å¼ # i. æ‰‹åŠ¨æŒ‡å®š mock èŒƒå›´ # def test_get_sum(): mock_get_sum = mock.patch(\u0026#34;app.get_sum\u0026#34;, return_value=20) mock_get_sum.start() rst = app.get_sum(1, 3) mock_get_sum.stop() ii. è£…é¥°å™¨ # @mock.patch(\u0026#34;app.get_sum\u0026#34;) def test_get_sumv2(mock_get_sum): mock_get_sum.side_effect = mock_sum rst = app.get_sum(1, 3) assert rst == 10 iii. ä¸Šä¸‹æ–‡ç®¡ç†å™¨ # with mock.patch(\u0026#34;app.get_sum\u0026#34;, new_callable=mock_sum) as mock_get_sum: rst = app.get_sum assert rst == 10 æ€»ç»“ # - æ‰‹åŠ¨æŒ‡å®š è£…é¥°å™¨ ä¸Šä¸‹æ–‡ç®¡ç†å™¨ ä¼˜ç‚¹ å¯ä»¥æ›´ç²¾ç»†æ§åˆ¶mockçš„èŒƒå›´ æ–¹ä¾¿mockå¤šä¸ªå¯¹è±¡ 1 ä¸è¶³ éœ€è¦æ‰‹åŠ¨startå’Œstop è£…é¥°å™¨é¡ºåºå’Œå‡½æ•°å‚æ•°ç›¸åå®¹æ˜“æ··ä¹± ä¸€ä¸ªwithåªèƒ½mockä¸€ä¸ªå¯¹è±¡ 1. Mockä¸€ä¸ªæ–¹æ³• # from pathlib import Path def test_getssh(monkeypatch): monkeypatch.setattr(Path, \u0026#34;home\u0026#34;, mockreturn) 2. Mockä¸€ä¸ªç±» # ä»¥ requests ä¸ºä¾‹, mock get ä»»æ„urlçš„(.json())è¿”å›å€¼\nimport requests class App: def get_json(self, url): return requests.get(url).json() class MockResponse: @staticmethod def json(): return {\u0026#34;mock_key\u0026#34;: \u0026#34;mock_response\u0026#34;} def test_get_json(monkeypatch): def mock_get(*args, **kwargs): return MockResponse() monkeypatch.setattr(requests, \u0026#34;get\u0026#34;, mock_get) result = App().get_json(\u0026#34;https://fakeurl\u0026#34;) assert result[\u0026#34;mock_key\u0026#34;] == \u0026#34;mock_response\u0026#34; 3. å®ä¾‹ # backent - Django Test # from django.test import TestCase from events.preview_service import PreviewService class MailTestCase(TestCase): def setUp(self): pass @patch(\u0026#39;events.preview_service.get_app_platform_logo\u0026#39;) @patch(\u0026#39;events.preview_service.is_master_node\u0026#39;) def test_preview_info_master(self, mock_node, mock_logo): mock_node.return_value = True base64_image = \u0026#34;R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=\u0026#34; # é»‘è‰²å›¾ç‰‡ mock_logo.return_value = (2000, base64_image) cnt = PreviewService({ \u0026#34;notice_object\u0026#34;: \u0026#34;customer\u0026#34;, \u0026#34;event_object\u0026#34;: { \u0026#34;event_list\u0026#34;: [ { \u0026#34;start_time\u0026#34;: \u0026#34;2023-01-16\u0026#34;, \u0026#34;end_time\u0026#34;: \u0026#34;2023-01-16\u0026#34;, \u0026#34;customer_name\u0026#34;: \u0026#34;6\u0026#34;, } ]} }).get_preview_info() self.assertEqual(type(cnt), dict) self.assertEqual(cnt.keys(), {\u0026#34;flag\u0026#34;: None, \u0026#34;preview_info\u0026#34;: None, \u0026#34;sender\u0026#34;: None}.keys()) self.assertEqual(cnt[\u0026#34;flag\u0026#34;], True) self.assertEqual(cnt[\u0026#34;sender\u0026#34;][\u0026#34;address\u0026#34;], \u0026#34;mdr@nsfocus.com\u0026#34;) self.assertEqual(cnt[\u0026#34;preview_info\u0026#34;][\u0026#34;email_title\u0026#34;], u\u0026#34;ã€ç»¿ç›Ÿç§‘æŠ€1ã€‘MDRå¨èƒåˆ†ææœåŠ¡å®‰å…¨äº‹ä»¶é€šçŸ¥\u0026#34;) MOC # from common.nscloud import NsCloudNuriClient class MockResponse: @staticmethod def json(): return {\u0026#34;results\u0026#34;: []} def test_a(monkeypatch): def mock_request(*args, **kwargs): return MockResponse() monkeypatch.setattr(NsCloudNuriClient, \u0026#34;request\u0026#34;, mock_request) # import pdb; pdb.set_trace() content = generate_daily_report_content(\u0026#34;\u0026#34;, \u0026#34;\u0026#34;) assert bool(content) 4ã€åŠŸèƒ½é‡ç”¨(pytest.fixture) # fixtureä¸€ç‚¹éœ€è¦è€ƒè™‘çš„æ˜¯åˆå§‹åŒ–ä¸æ¸…ç†ã€‚\nä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹ä¸­, éƒ½å¿…é¡»éƒ½å¾—æœ‰åˆå§‹åŒ–ä¸æ¸…ç†çš„éƒ¨åˆ†, è¿™æ ·æ‰æ˜¯ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹çš„ è¿˜æœ‰ä¸€ç‚¹æ˜¯fixtureçš„å‡½æ•°ä¹Ÿå¯ä»¥å’Œè¿”å›å€¼æ•´åˆèµ·æ¥æ„æˆå®Œæ•´æµç¨‹, ä»¥getæ¡ˆä¾‹, é‚£ä¹ˆé¦–å…ˆéœ€è¦addä¹¦ç±, ç„¶åæ˜¯get, æœ€åæ˜¯del #!coding:utf-8 import pytest import requests from loguru import logger def add_book(get_token): r=requests.post( url=\u0026#39;https://www.example.org/\u0026#39;, headers={\u0026#39;Authorization\u0026#39;:\u0026#39;JWT {0}\u0026#39;.format(get_token)} ) del_book = add_book # ä»…æ¼”ç¤ºç”¨ @pytest.fixture() def init(get_token): add_book(get_token) logger.info(\u0026#34;add_book in init\u0026#34;) yield del_book(get_token) logger.info(\u0026#34;del_book in init\u0026#34;) def test_get_book(init, get_token): r=requests.post( url=\u0026#39;https://www.example.org/\u0026#39;, headers={\u0026#39;Authorization\u0026#39;:\u0026#39;JWT {0}\u0026#39;.format(get_token)} ) logger.info(\u0026#34;get_book in test\u0026#34;) assert r.text fixtureä½œç”¨èŒƒå›´(scope) # @pytest.fixture()å¦‚æœä¸å†™å‚æ•°, é»˜è®¤å°±æ˜¯scope=\u0026quot;function\u0026quot; å®ƒçš„ä½œç”¨èŒƒå›´æ˜¯æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ¥ä¹‹å‰è¿è¡Œä¸€æ¬¡, é”€æ¯ä»£ç åœ¨æµ‹è¯•ç”¨ä¾‹è¿è¡Œä¹‹åè¿è¡Œ\nè¯¦ç»†å¦‚ä¸‹:\nfunction æ¯ä¸€ä¸ªå‡½æ•°æˆ–æ–¹æ³•éƒ½ä¼šè°ƒç”¨ class æ¯ä¸€ä¸ªç±»è°ƒç”¨ä¸€æ¬¡, ä¸€ä¸ªç±»å¯ä»¥æœ‰å¤šä¸ªæ–¹æ³• module æ¯ä¸€ä¸ª.pyæ–‡ä»¶è°ƒç”¨ä¸€æ¬¡, è¯¥æ–‡ä»¶å†…åˆæœ‰å¤šä¸ªfunctionå’Œclass session æ˜¯å¤šä¸ªæ–‡ä»¶è°ƒç”¨ä¸€æ¬¡, å¯ä»¥è·¨.pyæ–‡ä»¶è°ƒç”¨, æ¯ä¸ª.pyæ–‡ä»¶å°±æ˜¯module è¾“å‡º\npytest test_api.py -s test_api.py 2023-02-07 15:38:22.906 | INFO | test_api:init:17 - add_book in init 2023-02-07 15:38:24.471 | INFO | test_api:test_get_book:27 - get_book in test 2023-02-07 15:38:25.894 | INFO | test_api:init:20 - del_book in init ================ 1 passed in 6.71s ================ 5ã€æµç¨‹è§„èŒƒ(Allure) # åŒæ ·ä»¥add, get, delä¸ºä¾‹ è¯¦å‚è¿™é‡Œ å’Œ è¿™é‡Œ import allure import pytest import requests @pytest.fixture(scope=\u0026#34;session\u0026#34;) def login_setup(): return \u0026#34;token\u0026#34; @allure.feature(\u0026#34;åŠŸèƒ½æ¨¡å—\u0026#34;) @allure.story(\u0026#34;æµ‹è¯•ç”¨ä¾‹å°æ¨¡å—-æˆåŠŸæ¡ˆä¾‹\u0026#34;) @allure.title(\u0026#34;æµ‹è¯•ç”¨ä¾‹åç§°: æµç¨‹æ€§çš„ç”¨ä¾‹, æ·»åŠ æµ‹è¯•æ­¥éª¤\u0026#34;) def test_add_goods_and_buy(login_setup): \u0026#39;\u0026#39;\u0026#39; ç”¨ä¾‹æè¿°: å‰ç½®: ç™»é™† ç”¨ä¾‹æ­¥éª¤: 1.æµè§ˆå•†å“ 2.æ·»åŠ è´­ç‰©è½¦ 3.è´­ä¹° 4.æ”¯ä»˜æˆåŠŸ \u0026#39;\u0026#39;\u0026#39; with allure.step(\u0026#34;step1: æµè§ˆå•†å“\u0026#34;): assert True with allure.step(\u0026#34;step2: æ·»åŠ è´­ç‰©è½¦\u0026#34;): assert True with allure.step(\u0026#34;step3: ç”Ÿæˆè®¢å•\u0026#34;): # assert False assert True with allure.step(\u0026#34;step4: æ”¯ä»˜\u0026#34;): assert True with allure.step(\u0026#34;æ–­è¨€\u0026#34;): assert True @allure.feature(\u0026#34;MDRæœåŠ¡é‚®ä»¶é€šçŸ¥å»ç»¿ç›Ÿäº‘\u0026#34;) @allure.story(\u0026#34;å®¢æˆ·å®‰å…¨äº‹ä»¶é‚®ä»¶é€šçŸ¥å»ç»¿ç›ŸåŒ–\u0026#34;) @allure.link(\u0026#34;https://inone.intra.nsfocus.com/jira/browse/MDR-4271\u0026#34;) @allure.title(\u0026#34;æ ‡é¢˜1\u0026#34;) def test_f1(): \u0026#39;\u0026#39;\u0026#39; ç”¨ä¾‹æè¿°: å‰ç½®: æ—  ç”¨ä¾‹æ­¥éª¤: 1.æµ‹è¯•1 2.æµ‹è¯•2 \u0026#39;\u0026#39;\u0026#39; with allure.step(\u0026#34;step1\u0026#34;): assert True with allure.step(\u0026#34;step2\u0026#34;): assert True ![[pytest-demo.jpg]]\nä¸‰ã€å¼‚æ­¥æ–¹æ³•æµ‹è¯• # å®‰è£… # pip install pytest pytest-asyncio ä½¿ç”¨ # # -------------------å¾…æµ‹å‡½æ•°--------------- import asyncio async def async_function(x): await asyncio.sleep(1) # æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ return x * 2 # æµ‹è¯•ç”¨ä¾‹ import pytest from your_module import async_function # æ›¿æ¢ä¸ºä½ çš„æ¨¡å—å @pytest.mark.asyncio async def test_async_function(): result = await async_function(5) assert result == 10 "},{"id":78,"href":"/docs/3dgame/noteofue4/","title":"UE4 ç¬”è®°","section":"å»ºæ¨¡å’Œæ¸¸æˆ","content":" UE4 ç¬”è®° # æ‰‹æœº # è·¯å¾„å¿…é¡»ä¸èƒ½ç”¨æ±‰å­—, ä¸€å¾‹å…¨è‹±æ–‡(ç¥å¥‡\u0026hellip;ä»¥å‰ä¹ æƒ¯å°±æ˜¯å…¨è‹±,ä»¥ä¸ºè¿™é—®é¢˜æ˜¯ä¸Šä¸–çºªçš„äº†,æµ‹è¯•æ—¶ä¸çŸ¥æ€ä¹ˆå°±æŠŠé¡ºæ‰‹çš„è‹±æ–‡æ¢æˆä¸­æ–‡äº†,ç»“æœå°±è«åä¸­æªäº†) java8 (ue4.26.2, ä¹‹å‰4.25ä¹Ÿæ˜¯, åæ­£å°±æ‰¾ä¸ªç¨³å®šç‰ˆjavaä¸€ç›´ä½¿å§, è¿™è¯­è¨€å¤ªamazingäº†.) è™½ç„¶å¯¹javaç‰ˆæœ¬æœ‰ä¸€å®šè¦æ±‚, ä¸è¿‡æŒ‰ç…§æˆ‘è¿™æ¬¡çš„æµ‹è¯•å’Œä½¿ç”¨, è§‰å¾—æŠ˜è…¾é‚£ä¹ˆä¹…å®Œå…¨æ˜¯æ±‰å­—é¡¹ç›®åä¸æ”¯æŒ\u0026hellip;æ‰€ä»¥javaç‰ˆæœ¬è¦æ±‚åº”è¯¥ä¸æ˜¯å¾ˆä¸¥é‡ åŠ¨ç”» # äº‹ä»¶å›¾è¡¨\u0026amp;åŠ¨ç”»å›¾è¡¨ # äº‹ä»¶å›¾è¡¨: æ”¶é›†åŠ¨ç”»-\u0026gt;å­˜å‚¨åœ¨å˜é‡ä¸­ åŠ¨ç”»å›¾è¡¨: é©±åŠ¨æ‰€æœ‰åŠ¨ä½œ äº‹ä»¶å›¾è¡¨ # isValid # è“å›¾ä¸çŸ¥é“è¢«å“ªä¸ªå®ä¾‹æŒæœ‰(é€šç”¨)\næœå‘ # ä¸»è§’æœ¬åœ°åæ ‡Xè½´æ­£æ–¹å‘è¡¨æ­£å‰æ–¹\nGetVelocity\nRotationFromXVector\nGetControlRotaion\n2,3æ±‚Delta.\nè¾“å‡º # é€Ÿåº¦ æ–¹å‘ æ€»æ­¥éª¤ # å‘é‡é•¿åº¦è·å–Speed å‘é‡æ–¹å‘-æ§åˆ¶å™¨æ–¹å‘è·å–Direction ä»¥ä¸Š2ä¿å­˜ä¸ºå˜é‡, äº¤ç”±åŠ¨ç”»å›¾è¡¨ åŠ¨ç”»å›¾è¡¨ # Params-Blend-Result:\nè·å–é€Ÿåº¦,æ–¹å‘(çœ‹æƒ…å†µå¯å¤šå¯å°‘) å°†1è¾“å…¥åŠ¨ç”»æ··åˆç©ºé—´ è¾“å‡ºå§¿åŠ¿ State Machine # åœ¨ä»¥ä¸Šä¸€ç»„åŠ¨ä½œä¸­åŠ å…¥çŠ¶æ€ç»†åˆ†\nState Machine - State1-(rule)-State2\u0026hellip;StateN State - (Params-Blend-Result) ç”Ÿæ•ˆ # è§’è‰² ç½‘æ ¼ä½“(éª¨éª¼ç½‘æ ¼ä½“) åŠ¨ç”»-åŠ¨ç”»ç±»-åŠ¨ç”»è“å›¾ "},{"id":79,"href":"/docs/programmer/cloudnative/nginx-%E9%AB%98%E5%8F%AF%E7%94%A8/","title":"Nginxé«˜å¯ç”¨","section":"äº‘åŸç”Ÿ","content":" Keepalived+Nginxå®ç°é«˜å¯ç”¨ # Nginx å…³é”®å­— # IOå¤šè·¯å¤ç”¨epoll(IOå¤ç”¨) è½»é‡,æ’ä»¶: Nginxä»…ä¿ç•™äº†HTTP CPUäº²å’Œ: æ¯ä¸ªworkerè¿›ç¨‹å›ºå®šåœ¨ä¸€ä¸ªCPU Nginxé…ç½® # ä»£ç† # åŠ¨é™åˆ†ç¦» # åŠ¨æ€é¡µé¢å’Œé™æ€é¡µé¢äº¤ç»™ä¸åŒçš„æœåŠ¡å™¨æ¥è§£æ\nè´Ÿè½½å‡è¡¡ # upstream balanceServer { server 10.1.22.33:12345; server 10.1.22.34:12345; server 10.1.22.35:12345; } server { server_name fe.server.com; listen 80; location /api { proxy_pass http://balanceServer; } } æœºåˆ¶ # é»˜è®¤: è½®è¯¢, å•æœºå¡é¡¿, å½±å“åˆ†é…åœ¨è¿™å°æœåŠ¡å™¨ä¸‹çš„ç”¨æˆ· é»˜è®¤: æƒé‡è½®è¯¢, å®•æœºNginxä¼šè‡ªåŠ¨å‰”é™¤å‡ºé˜Ÿåˆ—, ip_hash-æ¥æºIPåˆ†é…åˆ†é…ç»™åŒä¸ªæœåŠ¡å™¨ fair: æ ¹æ®ç›¸åº”æ—¶é—´å‡è¡¡åˆ†é…, é»˜è®¤ä¸æ”¯æŒ. éœ€å®‰è£…upstream_fair, url_hashç±»ip_hashåŒæ ·éœ€è¦å®‰è£…Nginxçš„hashè½¯ä»¶åŒ…. Keepalived é…ç½® # ç²˜è´´è‡ª: è¿™é‡Œ\næ¦‚è§ˆ # VIP IP ä¸»æœºå Nginxç«¯å£ é»˜è®¤ä¸»ä» 192.168.50.130 192.168.50.133 liuyazhuang133 88 MASTER 192.168.50.130 192.168.50.134 liuyazhuang134 88 BACKUP ä¸»æœºå™¨é…ç½® # vi /etc/keepalived/keepalived.conf # ä¸»è¦ global_defs { ## keepalived è‡ªå¸¦çš„é‚®ä»¶æé†’éœ€è¦å¼€å¯ sendmail æœåŠ¡ã€‚ å»ºè®®ç”¨ç‹¬ç«‹çš„ç›‘æ§æˆ–ç¬¬ä¸‰æ–¹ SMTP router_id liuyazhuang133 ## æ ‡è¯†æœ¬èŠ‚ç‚¹çš„å­—æ¡ä¸²ï¼Œé€šå¸¸ä¸º hostname } ## keepalived ä¼šå®šæ—¶æ‰§è¡Œè„šæœ¬å¹¶å¯¹è„šæœ¬æ‰§è¡Œçš„ç»“æœè¿›è¡Œåˆ†æï¼ŒåŠ¨æ€è°ƒæ•´ vrrp_instance çš„ä¼˜å…ˆçº§ã€‚å¦‚æœè„šæœ¬æ‰§è¡Œç»“æœä¸º 0ï¼Œå¹¶ä¸” weight é…ç½®çš„å€¼å¤§äº 0ï¼Œåˆ™ä¼˜å…ˆçº§ç›¸åº”çš„å¢åŠ ã€‚å¦‚æœè„šæœ¬æ‰§è¡Œç»“æœé 0ï¼Œå¹¶ä¸” weighté…ç½®çš„å€¼å°äº 0ï¼Œåˆ™ä¼˜å…ˆçº§ç›¸åº”çš„å‡å°‘ã€‚å…¶ä»–æƒ…å†µï¼Œç»´æŒåŸæœ¬é…ç½®çš„ä¼˜å…ˆçº§ï¼Œå³é…ç½®æ–‡ä»¶ä¸­ priority å¯¹åº”çš„å€¼ã€‚ vrrp_script chk_nginx { script \u0026#34;/etc/keepalived/nginx_check.sh\u0026#34; ## æ£€æµ‹ nginx çŠ¶æ€çš„è„šæœ¬è·¯å¾„ interval 2 ## æ£€æµ‹æ—¶é—´é—´éš” weight -20 ## å¦‚æœæ¡ä»¶æˆç«‹ï¼Œæƒé‡-20 } ## å®šä¹‰è™šæ‹Ÿè·¯ç”±ï¼Œ VI_1 ä¸ºè™šæ‹Ÿè·¯ç”±çš„æ ‡ç¤ºç¬¦ï¼Œè‡ªå·±å®šä¹‰åç§° vrrp_instance VI_1 { state MASTER ## ä¸»èŠ‚ç‚¹ä¸º MASTERï¼Œ å¯¹åº”çš„å¤‡ä»½èŠ‚ç‚¹ä¸º BACKUP interface eth0 ## ç»‘å®šè™šæ‹Ÿ IP çš„ç½‘ç»œæ¥å£ï¼Œä¸æœ¬æœº IP åœ°å€æ‰€åœ¨çš„ç½‘ç»œæ¥å£ç›¸åŒï¼Œ æˆ‘çš„æ˜¯ eth0 virtual_router_id 33 ## è™šæ‹Ÿè·¯ç”±çš„ ID å·ï¼Œ ä¸¤ä¸ªèŠ‚ç‚¹è®¾ç½®å¿…é¡»ä¸€æ ·ï¼Œ å¯é€‰ IP æœ€åä¸€æ®µä½¿ç”¨, ç›¸åŒçš„ VRID ä¸ºä¸€ä¸ªç»„ï¼Œä»–å°†å†³å®šå¤šæ’­çš„ MAC åœ°å€ mcast_src_ip 192.168.50.133 ## æœ¬æœº IP åœ°å€ priority 100 ## èŠ‚ç‚¹ä¼˜å…ˆçº§ï¼Œ å€¼èŒƒå›´ 0-254ï¼Œ MASTER è¦æ¯” BACKUP é«˜ nopreempt ## ä¼˜å…ˆçº§é«˜çš„è®¾ç½® nopreempt è§£å†³å¼‚å¸¸æ¢å¤åå†æ¬¡æŠ¢å çš„é—®é¢˜ advert_int 1 ## ç»„æ’­ä¿¡æ¯å‘é€é—´éš”ï¼Œä¸¤ä¸ªèŠ‚ç‚¹è®¾ç½®å¿…é¡»ä¸€æ ·ï¼Œ é»˜è®¤ 1s ## è®¾ç½®éªŒè¯ä¿¡æ¯ï¼Œä¸¤ä¸ªèŠ‚ç‚¹å¿…é¡»ä¸€è‡´ authentication { auth_type PASS auth_pass 1111 ## çœŸå®ç”Ÿäº§ï¼ŒæŒ‰éœ€æ±‚å¯¹åº”è¯¥è¿‡æ¥ } ## å°† track_script å—åŠ å…¥ instance é…ç½®å— track_script { chk_nginx ## æ‰§è¡Œ Nginx ç›‘æ§çš„æœåŠ¡ } # # è™šæ‹Ÿ IP æ± , ä¸¤ä¸ªèŠ‚ç‚¹è®¾ç½®å¿…é¡»ä¸€æ · virtual_ipaddress { 192.168.50.130 ## è™šæ‹Ÿ ipï¼Œå¯ä»¥å®šä¹‰å¤šä¸ª } } å¤‡ä»½æœºé…ç½® # vi /etc/keepalived/keepalived.conf # å¤‡ä»½ ! Configuration File for keepalived global_defs { router_id liuyazhuang134 } vrrp_script chk_nginx { script \u0026#34;/etc/keepalived/nginx_check.sh\u0026#34; interval 2 weight -20 } vrrp_instance VI_1 { state BACKUP interface eth1 virtual_router_id 33 mcast_src_ip 192.168.50.134 priority 90 advert_int 1 authentication { auth_type PASS auth_pass 1111 } track_script { chk_nginx } virtual_ipaddress { 192.168.50.130 } } Nginx è¿ç»´å‘½ä»¤ # # å¿«é€Ÿå…³é—­Nginxï¼Œå¯èƒ½ä¸ä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œå¹¶è¿…é€Ÿç»ˆæ­¢webæœåŠ¡ nginx -s stop # å¹³ç¨³å…³é—­Nginxï¼Œä¿å­˜ç›¸å…³ä¿¡æ¯ï¼Œæœ‰å®‰æ’çš„ç»“æŸwebæœåŠ¡ nginx -s quit # å› æ”¹å˜äº†Nginxç›¸å…³é…ç½®ï¼Œéœ€è¦é‡æ–°åŠ è½½é…ç½®è€Œé‡è½½ nginx -s reload # é‡æ–°æ‰“å¼€æ—¥å¿—æ–‡ä»¶ nginx -s reopen # ä¸º Nginx æŒ‡å®šä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ¥ä»£æ›¿ç¼ºçœçš„ nginx -c filename # ä¸è¿è¡Œï¼Œè€Œä»…ä»…æµ‹è¯•é…ç½®æ–‡ä»¶ã€‚nginx å°†æ£€æŸ¥é…ç½®æ–‡ä»¶çš„è¯­æ³•çš„æ­£ç¡®æ€§ï¼Œå¹¶å°è¯•æ‰“å¼€é…ç½®æ–‡ä»¶ä¸­æ‰€å¼•ç”¨åˆ°çš„æ–‡ä»¶ nginx -t # æ˜¾ç¤º nginx çš„ç‰ˆæœ¬ nginx -v # æ˜¾ç¤º nginx çš„ç‰ˆæœ¬ï¼Œç¼–è¯‘å™¨ç‰ˆæœ¬å’Œé…ç½®å‚æ•° nginx -V # æ ¼å¼æ¢æ˜¾ç¤º nginx é…ç½®å‚æ•° 2\u0026gt;\u0026amp;1 nginx -V | xargs -n1 2\u0026gt;\u0026amp;1 nginx -V | xargs -n1 | grep lua "},{"id":80,"href":"/docs/programmer/ml/opencv/","title":"OpenCV","section":"æœºå™¨å­¦ä¹ ","content":"\né—®é¢˜(libSM.so.6 ç¼ºå¤±) # è¿è¡Œopencvçš„ä»£ç æ—¶ï¼ŒæŠ¥ä»¥ä¸‹é”™è¯¯ï¼š # Traceback (most recent call last): File \u0026#34;data_generator.py\u0026#34;, line 24, in \u0026lt;module\u0026gt; import cv2 File \u0026#34;/usr/local/lib/python3.5/dist-packages/cv2/__init__.py\u0026#34;, line 3, in \u0026lt;module\u0026gt; from .cv2 import * ImportError: libSM.so.6: cannot open shared object file: No such file or directory è§£å†³ # åŸå› æ˜¯ç¼ºå°‘å…±äº«æ–‡ä»¶åº“ï¼Œè§£å†³åŠæ³•å¦‚ä¸‹ï¼š\nå®‰è£…apt-file $ apt-get update $ apt-get install apt-file $ apt-file update\nå¯»æ‰¾ä¾èµ–åº“ $ apt-file search libSM.so.6\nlibsm6: /usr/lib/x86_64-linux-gnu/libSM.so.6 libsm6: /usr/lib/x86_64-linux-gnu/libSM.so.6.0.1\næ ¹æ®æç¤ºï¼Œå®‰è£…åˆé€‚çš„ä¾èµ–åº“ $ apt-get install libsm6\nå…¶ä½™æ–‡ä»¶ç¼ºå¤±ç±»ä¼¼, å³å¯è§£å†³é—®é¢˜ã€‚ "},{"id":81,"href":"/docs/programmer/basetc/for_china/","title":"å„ä¸ªè½¯ä»¶æ¢æº","section":"åŸºç¡€å·¥å…·å’Œé…ç½®","content":"\nåœ¨å›½å†…ç”¨åŸæºéƒ½ä¼šå¾ˆæ…¢, æ‰€ä»¥æ€»ç»“ä¸€ä¸‹å„ä¸ªè½¯ä»¶(?å§)æ¢æºæ–¹æ³•.\nQt # ä½¿ç”¨Maintainç®¡ç†kitæ—¶ï¼Œå¯ä»¥åœ¨Settingsä¸­è®¾ç½®Repositoriesï¼Œè®¾ç½®åœ°å€å¯ä»Qt Downloadsé¡µé¢æŸ¥è¯¢.\napt # å¯è§£å†³ç‰ˆæœ¬å‡çº§æ—¶çš„é—®é¢˜,å³ä½¿ç”¨äº†å›½å†…æº,æœ€åä¸€ä¸ªæ–‡ä»¶ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿˜æ˜¯ä»å›½å¤–æ‹‰å–\u0026hellip;\n# sudo touch /etc/apt/apt.conf sudo vim /etc/apt/apt.conf -\u0026gt; Acquire::http::Proxy \u0026ldquo;http://127.0.0.1:8001\u0026rdquo;;\nFreeBSD # mkdir -p /usr/local/etc/pkg/repos vim /usr/local/etc/pkg/repos/bjtu.conf\nbjtu: { url: \u0026#34;pkg+http://mirror.bjtu.edu.cn/reverse/freebsd-pkg/${ABI}/quarterly\u0026#34;, mirror_type: \u0026#34;srv\u0026#34;, signature_type: \u0026#34;none\u0026#34;, fingerprints: \u0026#34;/usr/share/keys/pkg\u0026#34;, enabled: yes } FreeBSD: { enabled: no } pkg update\nQt # æº # ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ï¼šhttp://mirrors.ustc.edu.cn/qtproject/ æ¸…åå¤§å­¦ï¼šhttps://mirrors.tuna.tsinghua.edu.cn/qt/ åŒ—äº¬ç†å·¥å¤§å­¦ï¼šhttp://mirror.bit.edu.cn/qtproject/ ä¸­å›½äº’è”ç½‘ç»œä¿¡æ¯ä¸­å¿ƒï¼šhttps://mirrors.cnnic.cn/qt/ Python Pip # pip install --index https://pypi.mirrors.ustc.edu.cn/simple/ dlib(numpyç­‰åŒ…å) æº # é˜¿é‡Œäº‘ http://mirrors.aliyun.com/pypi/simple/ ä¸­å›½ç§‘æŠ€å¤§å­¦ https://pypi.mirrors.ustc.edu.cn/simple/ è±†ç“£(douban) http://pypi.douban.com/simple/ æ¸…åå¤§å­¦ https://pypi.tuna.tsinghua.edu.cn/simple/ ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ http://pypi.mirrors.ustc.edu.cn/simple/ Nodejs Npm # ä¸è¿‡å¥½åƒæ¢äº†ä¼šæœ‰é—®é¢˜.Npmå„ä¸ªåŒ…ä¾èµ–æ··ä¹±ä¸å ª,ä¸å¿ç›´è§†.\nnpm install --registry=https://registry.npm.taobao.org Ubuntu # åœ°å€: /etc/apt/sources.list\næ³¨æ„å¤‡ä»½, sudo æƒé™\nçœ‹è¿™é‡Œ: https://mirrors.ustc.edu.cn/repogen/\næ–‡ä»¶å†…å®¹å¦‚ä¸‹, åŸæºéƒ¨åˆ†æ²¡æœ‰ç²˜è´´å®Œå…¨ # 20.04 Focal Fossa # # å›½å†…æº # Ali deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse # QH # é»˜è®¤æ³¨é‡Šäº†æºç é•œåƒä»¥æé«˜ apt update é€Ÿåº¦ï¼Œå¦‚æœ‰éœ€è¦å¯è‡ªè¡Œå–æ¶ˆæ³¨é‡Š deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted universe multiverse # See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to # newer versions of the distribution. deb http://archive.ubuntu.com/ubuntu/ focal main restricted # deb-src http://archive.ubuntu.com/ubuntu/ focal main restricted ## Major bug fix updates produced after the final release of the ## distribution. deb http://archive.ubuntu.com/ubuntu/ focal-updates main restricted # deb-src http://archive.ubuntu.com/ubuntu/ focal-updates main restricted # åŸæº(ä»¥ä¸‹å¯ä¿å­˜ä¹Ÿå¯ä¸ä¿å­˜å§, ä»¥ä¸Šå¯é€‰å…¶ä¸€ä¹Ÿå¯å…¨éƒ¨éƒ½æ”¾ç€, ç›®å‰æ²¡å•¥é—®é¢˜) ## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu ## team. Also, please note that software in universe WILL NOT receive any ## review or updates from the Ubuntu security team. Pi # åŒdebian\n"},{"id":82,"href":"/docs/programmer/net/epoll%E5%AE%9E%E7%8E%B0/","title":"Epollå®ç°","section":"Net","content":"\nC++ \u0026amp; Epoll # ä»£ç å¯è§è¿™é‡Œ\nä¹Ÿæ²¡å•¥é«˜çº§å°±æ˜¯:\ncreate_socket epoll_create1 epoll_ctl(1. \u0026amp; 2.) struct epoll_event events[MAX_EPOLL_EVENTS] = {0}; while1: epoll_wait(2, \u0026amp; 4.) eventfd == sockfd accept else =\u0026gt; connfd read æ‰€ä»¥å°±æ˜¯:\nepoll_event -\u0026gt; å†…æ ¸ç©ºé—´ epitem -\u0026gt; çº¢é»‘ è®¾å¤‡äº‹ä»¶å°±ç»ª - callback (epitem -\u0026gt; rdlisté“¾è¡¨) emmmm\u0026hellip;æœ‰éœ€è¦å†ç»§ç»­æ•´ç†å§ å’Œselect-pollåŒºåˆ«ä¸º: ä¸€ä¸ªéå†, ä¸€ä¸ªè§¦å‘å¼çš„.\n"},{"id":83,"href":"/docs/programmer/langs/tips-of-debugers/","title":"Tips of debuggers","section":"ç¼–ç¨‹è¯­è¨€","content":" Clang \u0026amp;\u0026amp; lldb # å¬è¯´clang+lldb \u0026gt;= gcc + gdb, æ‰€ä»¥ä¸€è¯•:\nlldbåŸºæœ¬å‘½ä»¤ # ä¸GDBç›¸åŒ\nbreak (b) - è®¾ç½®æ–­ç‚¹ï¼Œä¹Ÿå°±æ˜¯ç¨‹åºæš‚åœçš„åœ°æ–¹ run (r) - å¯åŠ¨ç›®æ ‡ç¨‹åºï¼Œå¦‚æœé‡åˆ°æ–­ç‚¹åˆ™æš‚åœ step (s) - è¿›å…¥ä¸‹ä¸€æ¡æŒ‡ä»¤ä¸­çš„å‡½æ•°å†…éƒ¨ backtrace (bt) - æ˜¾ç¤ºå½“å‰çš„æœ‰æ•ˆå‡½æ•° frame (f) - é»˜è®¤æ˜¾ç¤ºå½“å‰æ ˆçš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡ frame arg è¿›å…¥ç‰¹å®šçš„ frameï¼ˆç”¨ä½œè¾“å‡ºæœ¬åœ°å˜é‡ï¼‰ next (n) - è¿è¡Œå½“å‰ç®­å¤´æŒ‡å‘è¡Œ continue (c) - ç»§ç»­è¿è¡Œç¨‹åºç›´åˆ°é‡åˆ°æ–­ç‚¹ã€‚ clang hello.c -g -o hello lldb hello # lldb b main run n p str è¿˜æœ‰é¢œè‰² ğŸ˜‚ å¯è§†æ•ˆæœç¡®å®æé«˜äº†ä¸å°‘ è€Œä¸”è¿™å››ä¸ªå·¥å…·å¯ä»¥æ··ç”¨,ä¹Ÿè›®å¥½.\nGDB # First and foremost, you will need to compile your program with the flag \u0026ldquo;-g\u0026rdquo; (for debug) to run it via GDB. From there the syntax to start debugging is:\n$ gdb -tui [executable\u0026#39;s name] placing breakpoints\nbreak [line number] or b [line number] or [file name]:[line number] or [function name] And even better, can set conditional breakpoints:\nbreak [line number] if [condition] For example, can set (if have a loop)\nbreak 11 if i \u0026gt; 97 Place a \u0026ldquo;watchpoint\u0026rdquo; which will pause the program if a variable is modified:\nwatch [variable] Once our breakpoints are set, we can run the program with the \u0026ldquo;run\u0026rdquo; command, or simply:\nr [command line arguments if your program takes some] How we got to that point:\nbt Display all the local variables and their current values.\ninfo locals Of course:\np [variable] ptype [variable] step next delete [line number] continue quit Playing with fire. As well do it all the way:\nset var [variable] = [new value] "},{"id":84,"href":"/docs/programmer/cloudnative/notesdjango/","title":"Djangoçš„å»ºç«™çš„(ï½¡ï½¥ï½¥)ï¾‰ï¾","section":"äº‘åŸç”Ÿ","content":"author: Ian\nDjango å»ºç«™çš„ä¸€äº›ä¸œè¥¿ # ä¸€äº›é—®é¢˜ # ä½¿ç”¨å­—ä½“ zh-cnæ—¶å¦‚æœæŠ¥é”™: # OSError: No translation files found for default language zh-cn.\nLANGUAGE_CODE = \u0026#39;zh-Hans\u0026#39; TIME_ZONE = \u0026#39;Asia/Shanghai\u0026#39; # zh-Hansæ˜¯ç®€ä½“ä¸­æ–‡ zh-Hantæ˜¯ç¹ä½“ä¸­æ–‡ # å¦‚æœæ•°æ®åº“æœ‰UTCçš„æ—¶é—´ï¼Œé‚£ä¹ˆå¯ä»¥è®¾ç½®ï¼š # USE_TZ = True æ”¹ä¸º USE_TZ = False æ—¶åŒºé—®é¢˜ # python3.8/site-packages/django/db/models/fields/init.py:1416: RuntimeWarning: DateTimeField {DATABASEMODEL}.update_time received a naive datetime (2023-09-14 21:55:56) while time zone support is active. warnings.warn(\u0026ldquo;DateTimeField %s received a naive datetime (%s)\u0026rdquo;\nè¿™ä¸ªè­¦å‘Šæ˜¯ç”±äºåœ¨ä½¿ç”¨å¸¦æœ‰æ—¶åŒºæ”¯æŒçš„DateTimeFieldå­—æ®µæ—¶ï¼Œä¼ å…¥äº†ä¸€ä¸ªæ²¡æœ‰æ—¶åŒºä¿¡æ¯çš„datetimeå¯¹è±¡ã€‚è¦ä¿®å¤è¿™ä¸ªè­¦å‘Šï¼Œä½ å¯ä»¥å°†ä¼ å…¥DateTimeFieldå­—æ®µçš„datetimeå¯¹è±¡è½¬æ¢ä¸ºå¸¦æœ‰æ—¶åŒºä¿¡æ¯çš„datetimeå¯¹è±¡ã€‚\næœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\nä½¿ç”¨å¸¦æœ‰æ—¶åŒºä¿¡æ¯çš„datetimeå¯¹è±¡ï¼šç¡®ä¿åœ¨åˆ›å»ºdatetimeå¯¹è±¡æ—¶ï¼Œä½¿ç”¨æ­£ç¡®çš„æ—¶åŒºä¿¡æ¯ã€‚ä½ å¯ä»¥ä½¿ç”¨pytzåº“æ¥è®¾ç½®æ—¶åŒºä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š from datetime import datetime import pytz # åˆ›å»ºå¸¦æœ‰æ—¶åŒºä¿¡æ¯çš„datetimeå¯¹è±¡ naive_datetime = datetime(2023, 9, 14, 21, 55, 56) timezone = pytz.timezone(\u0026#34;Asia/Shanghai\u0026#34;) aware_datetime = timezone.localize(naive_datetime) # å°†å¸¦æœ‰æ—¶åŒºä¿¡æ¯çš„datetimeå¯¹è±¡ä¼ é€’ç»™DateTimeFieldå­—æ®µ ScannerDevice.update_time = aware_datetime å°†DateTimeFieldå­—æ®µçš„auto_nowæˆ–auto_now_addå±æ€§è®¾ç½®ä¸ºTrueï¼šè¿™å°†è‡ªåŠ¨å°†å­—æ®µçš„å€¼è®¾ç½®ä¸ºå½“å‰çš„å¸¦æœ‰æ—¶åŒºä¿¡æ¯çš„datetimeå¯¹è±¡ã€‚ä¾‹å¦‚ï¼š from django.db import models class DATABASEMODEL(models.Model): update_time = models.DateTimeField(auto_now=True) é€šè¿‡ä»¥ä¸Šä¸¤ç§æ–¹æ³•ä¹‹ä¸€ï¼Œä½ å¯ä»¥ä¿®å¤è¿™ä¸ªè­¦å‘Šå¹¶ç¡®ä¿æ­£ç¡®å¤„ç†æ—¶åŒºä¿¡æ¯ã€‚\ndaemon å‘½ä»¤ # Django çš„ BaseCommandæ€ä¹ˆä½¿ç”¨ï¼Ÿ\nAI: è¦ä½¿ç”¨ Django çš„ BaseCommandï¼Œä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š\nåˆ›å»ºä¸€ä¸ªæ–°çš„ Python æ¨¡å—æˆ–æ–‡ä»¶ï¼Œä¾‹å¦‚ myapp/management/commands/mycommand.py è¿™é‡Œçš„è·¯å¾„å¾ˆé‡è¦ åœ¨ mycommand.py æ–‡ä»¶ä¸­å¯¼å…¥å¿…è¦çš„æ¨¡å—å’Œç±»ï¼š from django.core.management.base import BaseCommand åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª BaseCommand çš„å­ç±»ï¼Œå¹¶å®ç° handle() æ–¹æ³•æ¥å®šä¹‰ä½ çš„å‘½ä»¤é€»è¾‘ã€‚ä¾‹å¦‚ï¼š class Command(BaseCommand): help = \u0026#39;My custom command\u0026#39; def handle(self, *args, **options): # åœ¨è¿™é‡Œç¼–å†™ä½ çš„å‘½ä»¤é€»è¾‘ self.stdout.write(\u0026#39;Hello, world!\u0026#39;) åœ¨ Django é¡¹ç›®ä¸­è¿è¡Œä½ çš„å‘½ä»¤ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ ¼å¼ï¼š python manage.py mycommand è¿™å°†æ‰§è¡Œä½ åœ¨ handle() æ–¹æ³•ä¸­å®šä¹‰çš„é€»è¾‘ã€‚ ä½ è¿˜å¯ä»¥åœ¨ handle() æ–¹æ³•ä¸­ä½¿ç”¨ self.stdout.write() æ–¹æ³•æ¥è¾“å‡ºä¿¡æ¯åˆ°å‘½ä»¤è¡Œã€‚\nç¤ºä¾‹å¦‚ä¸‹: # from django.core.management.base import BaseCommand class Command(BaseCommand): def add_arguments(self, parser): parser.add_argument(\u0026#39;-s\u0026#39;, \u0026#34;--start\u0026#34;, required=True) parser.add_argument(\u0026#39;-e\u0026#39;, \u0026#34;--end\u0026#34;, required=True) def handle(self, **options): try: start_timed = datetime.datetime.strptime(options.get(\u0026#39;start\u0026#39;, None), \u0026#34;%Y-%m-%d\u0026#34;) end_timed = datetime.datetime.strptime(options.get(\u0026#39;end\u0026#39;, None), \u0026#34;%Y-%m-%d\u0026#34;) run(start_timed, end_timed) except Exception: print(traceback.print_exc()) å¦‚æ­¤å°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ‰§è¡Œ:\npython manage.py {pyfilename} --start 2023-04-01 --end 2023-05-01 åˆ©ç”¨nginxfdåå‘ä»£ç†è§£å†³è·¨åŸŸé—®é¢˜ # çº ç»“äº†å¾ˆä¹…çš„è·¨åŸŸé—®é¢˜ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ä¸€ç›´é…ç½®Djangoã€‚ã€‚ã€‚ã€‚ã€‚é—®é¢˜é‡é‡ï¼Œä»é…ç½®æ–¹é¢è¿™æ¡è·¯è¿˜æ²¡æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œå¦‚ä»¥åç¡®è®¤æ— è¯¯åå°±å†æ”¾åœ¨è¿™å„¿ã€‚å‘Šæ…°å‰é¢ä»˜å‡ºçš„ç§ç§è‰°è¾› ğŸ˜“ğŸ˜€\næ¥è‡ª(è¿™å„¿)[https://www.jb51.net/article/105786.htm]\næ–¹æ³•æ˜¯ï¼š æ‰“å¼€nginxé»˜è®¤é…ç½®æ–‡ä»¶/etc/nginx/sites-available/default æ›´æ”¹å¦‚ä¸‹ï¼š\n## demo listen 5017 proxy 5000 and 5001 ## server { listen 5017; server_name a.xxx.com; access_log /var/log/nginx/a.access.log; error_log /var/log/nginx/a.error.log; root html; index index.html index.htm index.php; ## send request back to flask ## location / { proxy_pass http://127.0.0.1:5000/ ; #Proxy Settings proxy_redirect off; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504; proxy_max_temp_file_size 0; proxy_connect_timeout 90; proxy_send_timeout 90; proxy_read_timeout 90; proxy_buffer_size 4k; proxy_buffers 4 32k; proxy_busy_buffers_size 64k; } location /proxy { rewrite ^.+proxy/?(.*)$ /$1 break; proxy_pass http://127.0.0.1:5001/ ; #Proxy Settings proxy_redirect off; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504; proxy_max_temp_file_size 0; proxy_connect_timeout 90; proxy_send_timeout 90; proxy_read_timeout 90; proxy_buffer_size 4k; proxy_buffers 4 32k; proxy_busy_buffers_size 64k; } } ## End a.xxx.com ## å¾ˆæ˜¾ç„¶ï¼Œè¿™ç§è§£å†³æ–¹æ³•ä»…ä»…é€‚ç”¨äºåŒæœåŠ¡å™¨ï¼Œæ¶è®¾ä¸¤ä¸ªç½‘ç«™ã€‚è¿›è¡Œè·¨åŸŸè®¿é—®ã€‚ æ‰€ä»¥è¿™ç§ä¸œè¥¿â€¦â€¦å°±å¾ˆæ¬ ç¼ºã€‚ æˆ–è€…nginxä¹Ÿæ”¯æŒå¤šæœåŠ¡å™¨â€œå¹¶è”â€ï¼Ÿ\nä½†è¿™ç§è§£å†³æ–¹æ¡ˆä¾ç„¶ä¸èƒ½è§£å†³ä¸¤ä¸ªâ€œä¸¥æ ¼æ— å…³â€çš„ç½‘ç«™é€šä¿¡ã€‚\næ‘’å¼ƒjavaåçš„\u0026rsquo;æ¬¢ä¹\u0026rsquo;?æ—¶å…‰? # Django çš„å‰ç«¯ç›¸å…³ # [^_^]è™½ç„¶æˆ‘å‰ç«¯ä¸ç”¨è¿™ä¸ªå§ï¼Œä½†å°±ä¸€è®°å½•ã€‚å±Šæ—¶ä¼°è®¡è¿˜æ˜¯å›æ¥ç¿»Djangoå®˜æ–¹æ–‡æ¡£çš„ã€‚ æ‘˜ä¸€ä¸ªçœ‹ä¸€ä¸ªç‰›é€¼å“„å“„çš„ä¸œè¥¿ï¼š Removing hardcoded URLs in templates Remember, when we wrote the link to a question in the polls/index.html template, the link was partially hardcoded like this\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;/polls/{{ question.id }}/\u0026#34;\u0026gt;{{ question.question_text }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; The problem with this hardcoded, tightly-coupled approach is that it becomes challenging to change URLs on projects with a lot of templates. However, since you defined the name argument in the path() functions in the polls.urls module, you can remove a reliance on specific URL paths defined in your url configurations by using the \\{\\% url \\%\\} template tag: The problem with this hardcoded, tightly-coupled approach is that it becomes challenging to change URLs on projects with a lot of templates. However, since you defined the name argument in the path() functions in the polls.urls module, you can remove a reliance on specific URL paths defined in your url configurations by using the \\{\\% url \\%\\} template tag:\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{% url \u0026#39;detail\u0026#39; question.id %}\u0026#34;\u0026gt;{{ question.question_text }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; The way this works is by looking up the URL definition as specified in the polls.urls module. You can see exactly where the URL name of â€˜detailâ€™ is defined below:\n# the \u0026#39;name\u0026#39; value as called by the {% url %} template tag path(\u0026#39;\u0026lt;int:question_id\u0026gt;/\u0026#39;, views.detail, name=\u0026#39;detail\u0026#39;), If you want to change the URL of the polls detail view to something else, perhaps to something like polls/specifics/12/ instead of doing it in the template (or templates) you would change it in polls/urls.py:\n# added the word \u0026#39;specifics\u0026#39; path(\u0026#39;specifics/\u0026lt;int:question_id\u0026gt;/\u0026#39;, views.detail, name=\u0026#39;detail\u0026#39;), Namespacing URL names # The answer is to add namespaces to your URLconf. In the polls/urls.py file, go ahead and add an app_name to set the application namespace:\nfrom django.urls import path from . import views app_name = \u0026#39;polls\u0026#39; urlpatterns = [ path(\u0026#39;\u0026#39;, views.index, name=\u0026#39;index\u0026#39;), path(\u0026#39;\u0026lt;int:question_id\u0026gt;/\u0026#39;, views.detail, name=\u0026#39;detail\u0026#39;), path(\u0026#39;\u0026lt;int:question_id\u0026gt;/results/\u0026#39;, views.results, name=\u0026#39;results\u0026#39;), path(\u0026#39;\u0026lt;int:question_id\u0026gt;/vote/\u0026#39;, views.vote, name=\u0026#39;vote\u0026#39;), ] Change your polls/index.html template from: polls/templates/polls/index.htmlÂ¶\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{% url \u0026#39;detail\u0026#39; question.id %}\u0026#34;\u0026gt;{{ question.question_text }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; to point at the namespaced detail view: polls/templates/polls/index.htmlÂ¶\n\u0026lt;li\u0026gt;\u0026lt;a href=\u0026#34;{% url \u0026#39;polls:detail\u0026#39; question.id %}\u0026#34;\u0026gt;{{ question.question_text }}\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; ç‰ˆæœ¬ # å…¶ä¸­ï¼Œå¾ˆä»¤äººå¤´ç–¼çš„ä¾¿æ˜¯ç‰ˆæœ¬ã€‚ å¦‚æœé‡åˆ°ä»€ä¹ˆè«åå…¶å¦™çš„é”™ï¼Œè¯·æŸ¥çœ‹æ˜¯å¦æ˜¯ç‰ˆæœ¬çš„åŸå› ã€‚ è¿™é‡Œçš„ç‰ˆæœ¬åŸå› å¹¶ä¸â˜ä¸€äº›äººè¯´çš„åº“ä¾èµ–ä¸¥é‡ï¼Œå¥½åƒå¼€å‘è€…ç‰ˆæœ¬æ›´è¿­ä¸è€ƒè™‘å…¼å®¹â€”â€”æˆ–è€…è¯´å±…ç„¶å‹¤å¥‹çš„æ¥å£é‡æ¢é‚£èˆ¬ä¸¥é‡ã€‚ æ­¤å¤„ä»…ä»…â˜åœ¨è¿è¡Œæ–°ç‰ˆæœ¬æ—¶å¦ä¸ªæ–¹æ³•æ—¶ï¼Œæˆ–è®¸ä¼šè«åå…¶å¦™å¼•å‘ä¸€ä¸ªæ—©å·²æ‘’å¼ƒçš„å‡½æ•°é”™è¯¯ã€‚è¿™æ—¶å€™å°±å¯èƒ½æ˜¯åœ¨æŠ˜è…¾ç‰ˆæœ¬æ˜¯å¯¼è‡´æœ‰çš„ä¸åŒç‰ˆæœ¬æœ‰æ–‡ä»¶æ®‹ç•™ã€‚åœ¨è¿è¡Œæ—¶è«åå…¶å¦™çš„è¢«importäº†ç„¶åå®ƒæœ‰è°ƒå–å…¶ä»–ä¸œè¥¿ï¼Œä½†æ˜¯æ‰¾ä¸åˆ°çš„â€¦\nè¿™æ—¶å€™è½»åˆ™pip uninstall é‡åˆ™ç¯å¢ƒé‡å»ºã€‚æ‰€ä»¥å¯è§è™šæ‹Ÿç¯å¢ƒè¿˜æ˜¯æŒºæœ‰ç”¨çš„å˜›â€”â€”\nMVC # å…¨åï¼š Model ã€Viewã€Controllerã€‚æ¨¡å‹ï¼Œè§†å›¾ï¼Œæ§åˆ¶å™¨è¿™ç§åŠŸèƒ½åˆ†ç¦»çš„è½¯ä»¶è®¾è®¡è§„èŒƒã€‚æ‰€ä»¥å®ƒæ˜¯é€šç”¨çš„â€¦ä¸è¦å’Œçˆªå“‡æ†ç»‘ï¼Œæå¾—å’ŒæŸä¸ªç¥å¥‡æŠ€æœ¯ä¸€èˆ¬â€¦ (âŠ™ï¹âŠ™)\nç®€ä»‹ # åœ¨å®‰è£…ä¹‹åï¼Œä½¿ç”¨django-admin startproject +åå­—æ¥åˆå§‹åŒ–ä¸€ä¸ªå·¥ç¨‹ã€‚ å¯¹æ¯”åˆ°pythonä¸­å°±æ˜¯åˆ›å»ºå¥½äº†æ–‡æ¡£ç›®å½•ï¼Œè¿˜åœ¨æ–‡ä»¶ä¸­å†™å…¥ç›¸å…³æ¡†æ¶ä»£ç ï¼Œä»¥æ­¤æ”¯æŒè¿è¡Œã€‚\nè¯•ä¸€ä¸‹? # python manage.py runserver ä¾¿å¯å¼€å¯æœåŠ¡å™¨ï¼Œè¿™æ—¶å€™è®¿é—®ç›¸åº”ç«¯å£ï¼Œå°±ä¸€ä¸ªæ¬¢è¿ç•Œé¢ï¼Œæç¤ºå—¯~ o(ï¿£â–½ï¿£)oï¼Œä½ èƒ½å¼€è·‘äº†ã€‚\nå†è¯•ä¸€ä¸‹ï¼Ÿ # åœ¨11ç‰ˆæœ¬ä¸­æœ‰\\adminåœ°å€å¯ä»¥è®¿é—®ï¼Œè®¿é—®ä¹‹åä¾¿æ˜¯ä¸€ä¸ªç™»é™†ç•Œé¢.ä½†,å¹¶ä¸çŸ¥é“ç”¨æˆ·åå’Œå¯†ç å•Š~ emmâ€¦ ä¸è¿‡å¥½å¤„æ˜¯èƒ½çœ‹åˆ°è¿™ä¸ªé¡µé¢è‡³å°‘ä¿è¯äº†djangoåœ¨renderä¸€ä¸ª.htmlé¡µé¢æ—¶æ˜¯æ­£å¸¸çš„ã€‚è€Œä¹‹å‰è¯´çš„è€ç‰ˆæœ¬æ®‹ç•™å°±ä¼šå¯¼è‡´renderæ—¶å‡ºé”™ã€‚\nç»“æ„ # æ ¹ç›®å½•ä¸‹ï¼Œ\u0026lsquo;é¡¹ç›®åæ–‡ä»¶\u0026rsquo;æ˜¯é¡¹ç›®å®¹å™¨ğŸ˜° manage.py å‘½ä»¤è¡Œå·¥å…·ï¼Œemm ç±»ä¼¼äºpython clickåº“çš„å‘½ä»¤è¡Œç¨‹åºï¼Œä½¿ç”¨å‚æ•°å¹²ä¸åŒçš„äº‹æƒ…ã€‚ è¿›å…¥åˆ°é¡¹ç›®å®¹å™¨ä¸­ï¼Œå…¶ä¸­settings.pyé¡¾åæ€ä¹‰ urls.pyåŒä¸Šï¼Œç®¡ç†å„ä¸ªurlé€šå¾€å“ªé‡Œ wsgl.pyæŸä¸ªå…¼å®¹å•¥ï¼Œç°åœ¨ä¸ç”¨ç®¡â€¦\nå¾—çŸ¥ç»“æ„ä¹‹å # ç„¶åå°±èƒ½\nåœ¨urls.pyé‡Œæ„‰å¿«çš„æ·»åŠ å„ä¸ªåŠŸèƒ½urlã€‚è¿™é‡Œé¢å°±ä¸€ä¸ªurlpatternsåˆ—è¡¨ï¼Œä½¿ç”¨djangol.conf.urls.urlæ–¹æ³•æ¥é…ç½®ã€‚ ä¸è¿‡å…¶å¯¹åº”çš„æ‰§è¡Œå‡½æ•°éƒ½éœ€è¦ä¸€ä¸ªrequestæ¥æ¥å—è¯·æ±‚æ•°æ®ã€‚ returnå›ä¸€ä¸ªé¡µé¢~ ç°åœ¨ç”¨åˆ°çš„æœ‰django,shortcuts.render åŠ render_to_responseå‡ºæ¥çš„ï¼Œä»¥åŠdjango.http.HttpResponseå‡ºæ¥çš„ä¸œè¥¿ã€‚\nå—¯â€¦â€¦ ulr é“¾æ¥çš„æ‰§è¡Œæ–¹æ³•è¯¦æƒ…å°±æ”¾åœ¨æ–°åˆ›å»ºçš„view.pyä¸­ç®¡ç†ã€‚\nè€Œåœ¨viewä¸­éœ€è¦æ¸²æŸ“çš„htmlæ–‡ä»¶åˆ™æ”¾ç½®åœ¨æ ¹ç›®å½•æ–°åˆ›å»ºçš„templatesæ–‡ä»¶å¤¹ä¸­ã€‚é€šè¿‡åœ¨setting.pyä¸­çš„\u0026rsquo;TEMPLATES\u0026rsquo;åˆ—è¡¨ä¸­çš„ä¸çŸ¥åå­—å…¸(å› ä¸ºå®ƒç¡®å®æ²¡å–åå•ŠğŸ˜”)deDIRSå…ƒç´ æ¥æŒ‡è·¯ã€‚\nè¿™ä¸‹å¯ä»¥å¾ˆå‰å®³äº† # è¿›è€Œè¿›è¡Œæ•°æ®åº“é…ç½®â€”â€” è¿˜åœ¨setting.pyä¸­çš„\u0026rsquo;DATABASES\u0026rsquo;æ¥æŒ‡è·¯ã€‚ ä½†Djangoè§„å®šè¦ä½¿ç”¨æ¨¡å‹ï¼Œå°±è¦åˆ›å»ºä¸€ä¸ªçˆ±æ€•æ€•appï¼š\ndjango-admin startapp TestModel ğŸ¦‘ å†å°†æ­¤çˆ±æ€•æ€•é¢†åˆ°setting.pyä¸­NSTALLED_APPSä¸­ç­¾ä¸€ä¸‹åˆ°ã€‚ éšååœ¨TestModelä¸‹çš„modelsä¸­åˆ›å»ºç»§æ‰¿äºdjango.db.models.Modelçš„æ•°æ®ç±»ï¼Œç„¶åä½¿ç”¨éš¶å±äºmodelsä¸‹çš„æ–¹æ³•æ¥åˆ¶å®šæ•°æ®ç±»å‹eg:\nname = models.CharField(max_length=20) æ¯•ç«Ÿä¸èƒ½ç›´æ¥é€šè¿‡Pythonçš„è‡ªç”±ç±»å˜›â€¦ ç„¶åä¹Ÿè‚¯å®šä¸èƒ½é€šè¿‡pythonçš„åˆ¶å®šç±»å‹â€¦ æ¯•ç«Ÿpythonæ•°æ®ç±»å‹å’ŒMySQLå¤©å·®åœ°åˆ«ã€‚\næœ€å å†å›åˆ°å‘½ä»¤è¡Œä¸­ä½¿ç”¨\npython manage.py migrate //åˆ›å»ºè¡¨ç»“æ„ python manage.py makemigrations //é€šçŸ¥æ›´æ”¹ python manage.py testModel // åˆ›å»ºè¡¨ç»“æ„ ğŸ˜²â“ æ­£å¼æ‹‰å…¥ç¼–åˆ¶ä¹‹åå°±èƒ½ç”¨äº†ã€‚ 2019å¹´1æœˆ23æ—¥\n- Change your models(in *models.py*) - Run *python manage.py makemigrations* to create migration for those changes - Run *python manage.py migrate* to apply those changes to the database Of courses, If Null Run python manage.py migrate can make a models.py whitch has nothings.\né‚£ä¹ˆè¿™ä¸ªæ•°æ®åº“æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿ # è‡ªç„¶æ˜¯åˆ°urls.pyä¸­æ·»åŠ ğŸ”—é“¾æ¥åˆ°æ–¹æ³•çš„è·¯ å†åˆ°å®¹å™¨é‡Œé¢æ·»åŠ testdb.pyæ¥è¯´æ˜æ–¹æ³•è¯¦ç»†ã€‚\nå¢åˆ æ”¹æŸ¥ # å®ä¾‹åŒ–ç±» ç›´æ¥.save()å³ä¿å­˜ æœªå®ä¾‹åŒ–ç±»ï¼Œallæ ‡è¯†æŸ¥æ‰¾å…¨éƒ¨ .objects.filter(å¡«å†™åˆ é€‰æ¡ä»¶) .objects.get(è·å–) .order_by(æ’åºæ¡ä»¶) æ›´æ”¹åˆ™æ˜¯å°†æŸ¥å‡ºæ¥çš„ä¸œè¥¿ç›´æ¥ä¿®æ”¹.update(ä¿®æ”¹ä¸œè¥¿) å†.saveä¿å­˜ åˆ é™¤ä¾¿æ˜¯.delete() ``. å·®ä¸å¤šäº† ä¹‹åçš„è¯¦ç»†å†éšæƒ…å†µæ›´æ–°ã€‚ ### é‚£ä¹ˆæ•°æ®åº“è¡¨å¤šäº†æ€ä¹ˆä¸€é”®ç”Ÿæˆå¯¹åº”ç±»å‘¢ï¼Ÿ ```shell python manage.py inspectdb //è‡ªåŠ¨ç”Ÿæˆmodelsæ¨¡å‹æ–‡ä»¶ python manage.py inspectdb \u0026gt; app/models.py //å‡è®¾æœ‰äº†åä¸º\u0026#39;app\u0026#39;çš„çˆ±æ€•æ€• // è€ä¸€å¥— python manage.py makemigrations python manage.py migrate ä½†æ˜¯ä¼šå°†ä¹‹å‰models.pyä¸­çš„ä¸œè¥¿åˆ æ‰â€¦ è¿˜ä¼šæŠŠæ•°æ®åº“ä¸­çš„è¡¨åé‡å‘½åâ€¦ æŒ‰å®ƒçš„è§„çŸ©æ¥ç”Ÿæˆï¼Œå—¯â€¦å…¶å®ä¹ŸğŸ†—çš„ã€‚\næˆ‘çˆ±Java 2018å¹´6æœˆ24æ—¥16ç‚¹40åˆ†çš„æˆ‘ç”±è¡·çš„å†™åˆ° # åœ¨MySQLä¸­è¯»å–blobå­˜å‚¨çš„å­—æ®µæ—¶ï¼Œä½¿ç”¨BinaryFieldä¸å¯ä½¿ç”¨å…¶é€†å‘ç”Ÿæˆçš„æ¨¡å‹è¯»å–æ–¹å¼ã€‚å½“ç„¶ï¼Œå¯¹ç…§è¡¨å¦‚ä¸‹\n\u0026#39;AutoField\u0026#39;: \u0026#39;integer AUTO_INCREMENT\u0026#39;, \u0026#39;BigAutoField\u0026#39;: \u0026#39;bigint AUTO_INCREMENT\u0026#39;, \u0026#39;BinaryField\u0026#39;: \u0026#39;longblob\u0026#39;, \u0026#39;BooleanField\u0026#39;: \u0026#39;bool\u0026#39;, \u0026#39;CharField\u0026#39;: \u0026#39;varchar(%(max_length)s)\u0026#39;, \u0026#39;CommaSeparatedIntegerField\u0026#39;: \u0026#39;varchar(%(max_length)s)\u0026#39;, \u0026#39;DateField\u0026#39;: \u0026#39;date\u0026#39;, \u0026#39;DateTimeField\u0026#39;: \u0026#39;datetime\u0026#39;, \u0026#39;DecimalField\u0026#39;: \u0026#39;numeric(%(max_digits)s, %(decimal_places)s)\u0026#39;, \u0026#39;DurationField\u0026#39;: \u0026#39;bigint\u0026#39;, \u0026#39;FileField\u0026#39;: \u0026#39;varchar(%(max_length)s)\u0026#39;, \u0026#39;FilePathField\u0026#39;: \u0026#39;varchar(%(max_length)s)\u0026#39;, \u0026#39;FloatField\u0026#39;: \u0026#39;double precision\u0026#39;, \u0026#39;IntegerField\u0026#39;: \u0026#39;integer\u0026#39;, \u0026#39;BigIntegerField\u0026#39;: \u0026#39;bigint\u0026#39;, \u0026#39;IPAddressField\u0026#39;: \u0026#39;char(15)\u0026#39;, \u0026#39;GenericIPAddressField\u0026#39;: \u0026#39;char(39)\u0026#39;, \u0026#39;NullBooleanField\u0026#39;: \u0026#39;bool\u0026#39;, \u0026#39;OneToOneField\u0026#39;: \u0026#39;integer\u0026#39;, \u0026#39;PositiveIntegerField\u0026#39;: \u0026#39;integer UNSIGNED\u0026#39;, \u0026#39;PositiveSmallIntegerField\u0026#39;: \u0026#39;smallint UNSIGNED\u0026#39;, \u0026#39;SlugField\u0026#39;: \u0026#39;varchar(%(max_length)s)\u0026#39;, \u0026#39;SmallIntegerField\u0026#39;: \u0026#39;smallint\u0026#39;, \u0026#39;TextField\u0026#39;: \u0026#39;longtext\u0026#39;, \u0026#39;TimeField\u0026#39;: \u0026#39;time\u0026#39;, \u0026#39;UUIDField\u0026#39;: \u0026#39;char(32)\u0026#39;, ä»¥ä¸Šæ˜¯ä¸€éƒ¨åˆ†ï¼Œå…·ä½“ç‚¹è¿™é‡Œ\næ¨¡å‹å­—æ®µåç§° # åœ¨é€†å‘ç”Ÿæˆæ—¶ï¼Œæˆ‘é‡åˆ°è¿‡ä¸€æ¬¡å°†æ•°æ®åº“åä¿®æ”¹çš„å…ˆä¾‹ï¼Œä¸è¿‡åæ¥ä¼¼ä¹æ²¡æœ‰ä¿®æ”¹è¿‡ã€‚ ç„¶åå°±æ˜¯é©¼å³°å‘½åæ³•çš„å­—æ®µå¯èƒ½emmä¹Ÿæ˜¯å› ä¸ºæ­¤æˆ‘æ‰å¼€å§‹å†™è¿™äº›ä¿¡æ¯ï¼Œå°±æ˜¯ï¼Œé©¼å³°å‘½åæ³•çš„å­—æ®µå¯èƒ½åœ¨æ¨¡å‹å­—æ®µä¸­ä¸ºå…¨å°å†™ã€‚ è¿˜æœ‰å°±æ˜¯Djangoè«åå…¶å¦™çš„çš„ç¼–ç é”™è¯¯ï¼ŒçœŸçš„æ˜¯ä¸€åˆ†é’Ÿç¼–ç¨‹ï¼Œä¸€å°æ—¶ä¿®æ”¹ç¼–ç â€¦è€Œä¸”è°ƒè¯•èµ·æ¥çœŸçš„â€¦æˆ‘ç›®å‰çš„è°ƒè¯•æ–¹å¼æä¸ºåŸå§‹ï¼Œæ‰€ä»¥æ„Ÿè§‰çœŸçš„ä¸æƒ³ç¼–ç¨‹å—¯â€¦\nDjango è¿”å›æ–‡ä»¶ä¸‹è½½ # def readFile(fn, buf_size=262144): # å¤§æ–‡ä»¶ä¸‹è½½ï¼Œè®¾å®šç¼“å­˜å¤§å° f = open(fn, \u0026#34;rb\u0026#34;) while True: # å¾ªç¯è¯»å– c = f.read(buf_size) if c: yield c else: break f.close() response = HttpResponse(readFile(filePath), content_type=\u0026#39;APPLICATION/OCTET-STREAM\u0026#39;) # è®¾å®šæ–‡ä»¶å¤´ï¼Œè¿™ç§è®¾å®šå¯ä»¥è®©ä»»æ„æ–‡ä»¶éƒ½èƒ½æ­£ç¡®ä¸‹è½½ï¼Œè€Œä¸”å·²çŸ¥æ–‡æœ¬æ–‡ä»¶ä¸æ˜¯æœ¬åœ°æ‰“å¼€ fileName = \u0026#39;haya\u0026#39; fileType = \u0026#39;.docx\u0026#39; response[\u0026#39;Content-Disposition\u0026#39;] = \u0026#39;attachment; filename=\u0026#39; + fileName.encode(\u0026#39;utf-8\u0026#39;) + fileType.encode(\u0026#39;utf-8\u0026#39;) # è®¾å®šä¼ è¾“ç»™å®¢æˆ·ç«¯çš„æ–‡ä»¶åç§° response[\u0026#39;Content-Length\u0026#39;] = os.path.getsize(filePath) # ä¼ è¾“ç»™å®¢æˆ·ç«¯çš„æ–‡ä»¶å¤§å° return response Python Docxç¼–è¾‘ # æ›¿æ¢ # åœ¨`.docx`æ–‡ä»¶ä¸­å°†éœ€è¦æ›¿æ¢çš„ä½ç½® ä½¿ç”¨å˜é‡ç«™ä½ï¼Œå†™æ³•{{ placheholdParaName }} ä½¿ç”¨æ–‡ä»¶æ—¶ï¼Œåªèƒ½å†™åš{{placheholdParaName}}ä¸èƒ½æœ‰ç©ºæ ¼â€¦å¦å¤–docxä½¿ç”¨docxä¸­çš„Documentè¯»å…¥å³å¯\ntpl = DocxTemplate(self.prjRootPath + \u0026#39;/word_template/\u0026#39; + \u0026#34;word_template.docx\u0026#34;) sub1 = tpl.new_subdoc() sub1.subdocx = Document(temPath + \u0026#39;sub1_bond.docx\u0026#39;) subContext[\u0026#39;sub1\u0026#39;] = sub1 ä¸Šè¿°ä¸­ï¼Œåªèƒ½å†™ä½œâ€¦â€¦éš¾é“æ˜¯å› ä¸ºä½¿ç”¨{{someThing}}è¿™ç§å†™æ³•è€Œéšè—äº†ï¼Ÿï¼ï¼ é‚£ä¹ˆï¼Œä»Šåå†™å½©å¸¦æ³¨é‡Šå²‚ä¸æ˜¯ä¸éœ€è¦ä½¿ç”¨^_^è€Œç›´æ¥ä½¿ç”¨åŒèŠ±æ‹¬å·çš„å†™æ³•å°±èƒ½ç›´æ¥éšè—äº†ä¹ˆ(âŠ™oâŠ™ ) å‡„ã„ Pyä¸­ï¼š\nfrom docxtpl import DocxTemplate, InlineImage from docx.shared import Mm, Inches, Pt doc = DocxTemplate(\u0026#34;my_word_template.docx\u0026#34;) myimage = InlineImage(doc, \u0026#39;C:/Users/GuPengxiang/Pictures/ha.jpg\u0026#39;,width=Mm(20)) context = { \u0026#39;fundName\u0026#39; : u\u0026#39;è¿™é‡Œæ˜¯åŸºé‡‘åç§°\u0026#39;, \u0026#39;stars\u0026#39;:u\u0026#39;äº”æ˜Ÿçº§ç‰ç’ƒå…­\u0026#39;, \u0026#39; bench\u0026#39;: u\u0026#39;å¯¹æ¯”åŸºé‡‘\u0026#39;, \u0026#39;income\u0026#39;: u\u0026#39;12\u0026#39;, \u0026#39;bb\u0026#39;: u\u0026#39;0.1%\u0026#39;, \u0026#39;image0\u0026#39; : myimage} doc.render(context) doc.save(\u0026#34;generated_doc.docx\u0026#34;) ç”Ÿæˆechartså›¾è¡¨å›¾ç‰‡ # ç¯å¢ƒ # # æ›´æ–°è½¯ä»¶åˆ—è¡¨ \u0026amp; æ›´æ–°è½¯ä»¶ sudo apt-get update sudo apt-get upgrade # ä¸‹è½½åŒ… pip install pyecharts-snapshot wget https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.5.0-beta-linux-ubuntu-xenial-x86_64.tar.gz # è§£å‹ tar -xzvf phantomjs-2.5.0-beta-linux-ubuntu-xenial-x86_64.tar.gz # è¿›å…¥è·¯å¾„ cd phantomjs-2.5.0-beta-ubuntu-xenial/bin # èµ‹äºˆæƒé™ chmod +x phantomjs # æŸ¥çœ‹ç‰ˆæœ¬å· phantomjs -v # è‹¥æ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œå¦‚ 2.1.1 åˆ™ç”Ÿæ•ˆ ç”Ÿæˆå›¾ç‰‡ # from pyecharts import Line, Pie, Grid from pyecharts_snapshot.main import make_a_snapshot attr = [\u0026#34;è¡¬è¡«\u0026#34;, \u0026#34;ç¾Šæ¯›è¡«\u0026#34;, \u0026#34;é›ªçººè¡«\u0026#34;, \u0026#34;è£¤å­\u0026#34;, \u0026#34;é«˜è·Ÿé‹\u0026#34;, \u0026#34;è¢œå­\u0026#34;] v1 = [5, 20, 36, 10, 10, 100] v2 = [55, 60, 16, 20, 15, 80] line = Line(\u0026#34;æŠ˜çº¿å›¾ç¤ºä¾‹\u0026#34;) line.add(\u0026#34;å•†å®¶A\u0026#34;, attr, v1, mark_point=[\u0026#34;average\u0026#34;]) line.add(\u0026#34;å•†å®¶B\u0026#34;, attr, v2, is_smooth=True, mark_line=[\u0026#34;max\u0026#34;, \u0026#34;average\u0026#34;]) line.render(\u0026#39;test.html\u0026#39;) make_a_snapshot(\u0026#39;test.html\u0026#39;, \u0026#39;test.pdf\u0026#39;) # æˆ–è€…ç›´æ¥ç”Ÿæˆ line.render(\u0026#39;test.png\u0026#39;) åœ¨ç”Ÿæˆå›¾ç‰‡æ—¶ï¼Œæ’ä»¶åŒ…æ–‡ä»¶æºç ä¸­æœ‰Logï¼Œä½†å´æ˜¯printå‡ºæ¥çš„ï¼Œè€Œåœ¨éƒ¨ç½²ç¯å¢ƒä¸­ä¸å…è®¸å‡ºç°printï¼Œæ‰€ä»¥â€¦â€¦ å¾—åœ¨åŒ…æºç ä¸­å°†ä¹‹å±è”½\nè¿ç»­ç”Ÿæˆå›¾ç‰‡ # ç”¨ä»¥ä¸Šæ–¹æ³•æ¥ç”Ÿæˆå›¾ç‰‡æ˜¯â€¦å¾ˆæ…¢çš„ğŸ¢â¬…è¿™ä¸ªé€Ÿåº¦ã€‚ä½†å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸ºæ¸²æŸ“åˆ›å»ºä¸€ä¸ªé»˜è®¤é…ç½®ç¯å¢ƒæ¥é¿å…å¤šæ¬¡ç”Ÿæˆç¯å¢ƒé…ç½®ã€‚æ‰€ä»¥â€”â€” å…·ä½“æ¥çœ‹pyechartsä¸­çš„é«˜çº§è¯´æ˜ğŸ•¶\nfrom pyecharts import Bar, Line from pyecharts.engine import create_default_environment bar = Bar(\u0026#34;æˆ‘çš„ç¬¬ä¸€ä¸ªå›¾è¡¨\u0026#34;, \u0026#34;è¿™é‡Œæ˜¯å‰¯æ ‡é¢˜\u0026#34;) bar.add(\u0026#34;æœè£…\u0026#34;, [\u0026#34;è¡¬è¡«\u0026#34;, \u0026#34;ç¾Šæ¯›è¡«\u0026#34;, \u0026#34;é›ªçººè¡«\u0026#34;, \u0026#34;è£¤å­\u0026#34;, \u0026#34;é«˜è·Ÿé‹\u0026#34;, \u0026#34;è¢œå­\u0026#34;], [5, 20, 36, 10, 75, 90]) line = Line(\u0026#34;æˆ‘çš„ç¬¬ä¸€ä¸ªå›¾è¡¨\u0026#34;, \u0026#34;è¿™é‡Œæ˜¯å‰¯æ ‡é¢˜\u0026#34;) line.add(\u0026#34;æœè£…\u0026#34;, [\u0026#34;è¡¬è¡«\u0026#34;, \u0026#34;ç¾Šæ¯›è¡«\u0026#34;, \u0026#34;é›ªçººè¡«\u0026#34;, \u0026#34;è£¤å­\u0026#34;, \u0026#34;é«˜è·Ÿé‹\u0026#34;, \u0026#34;è¢œå­\u0026#34;], [5, 20, 36, 10, 75, 90]) env = create_default_environment(\u0026#34;html\u0026#34;) # ä¸ºæ¸²æŸ“åˆ›å»ºä¸€ä¸ªé»˜è®¤é…ç½®ç¯å¢ƒ # create_default_environment(filet_ype) # file_type: \u0026#39;html\u0026#39;, \u0026#39;svg\u0026#39;, \u0026#39;png\u0026#39;, \u0026#39;jpeg\u0026#39;, \u0026#39;gif\u0026#39; or \u0026#39;pdf\u0026#39; env.render_chart_to_file(bar, path=\u0026#39;bar.html\u0026#39;) env.render_chart_to_file(line, path=\u0026#39;line.html\u0026#39;) (ï¿£â–½ï¿£)o å¦‚ä¸Š\næ³¨æ„ # åœ¨ç”ŸæˆæŠ¥è¡¨æ—¶ï¼Œ ç”±äºé‡‡ç”¨çš„æ˜¯æµè§ˆå™¨æˆªå›¾çš„æ–¹å¼ï¼Œåœ¨ä½¿ç”¨`phantomjs`æ—¶ä¼šè‡ªåŠ¨åˆ¤æ–­å›¾ç‰‡æ˜¯å¦åŠ è½½å®Œæˆï¼ˆechartsåœ¨æ˜¾ç¤ºå›¾è¡¨ä¹‹å‰æ˜¯æœ‰ä¸€æ®µåŠ¨ç”»çš„â€¦â€¦ï¼‰ç„¶åå†`pyecharts`ä¸­å¹¶æ²¡æœ‰å…³é—­åŠ¨ç”»çš„æ¥å£ï¼Œè€Œechartsæ˜¯æœ‰çš„ã€‚ ä½†æ¯•ç«Ÿ`echarts`æ˜¯åœ¨åšç¿»è¯‘ï¼Œæ‰€ä»¥åªè¦åœ¨\u0026quot;Chart\u0026quot;åŸºç±»ä¸­ï¼Œå°†`animation=False`å°±å¯ä»¥äº†ã€‚ æˆ‘æ”¹çš„æ—¶å€™åœ¨`chart.py`æ–‡ä»¶çš„29è¡Œï¼Œdef __init__ä¸­ã€‚ SSlåŠ å¯†ï¼Œhttpsé…ç½® # è™½ç„¶å°±é…ç½®è¿‡ä¹‹åæ˜¾å¾—æ“ä½œå¾ˆç®€å•ï¼Œè€Œä¸”ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œä½†å°±é…ç½®ä¹‹åˆç€å®è¿˜æ˜¯è´¹äº†ä¸€äº›åŠŸå¤«çš„ã€‚æˆ–è®¸æ˜¯å› ä¸ºå¤§è€Œå…¨çš„ä¸œè¥¿æ‡’å¾—çœ‹ï¼Œè€Œç½‘ä¸Šæœç´¢åˆ°çš„ç²˜è´´å¤åˆ¶ä¹‹è¯åˆå¤ªè¿‡ç‰‡é¢ï¼Œæˆ–è®¸å¤§å®¶å†™çš„æ—¶å€™ä¹Ÿå°±å½“ä½œæ—¥è®°æ¥å†™çš„ï¼Œæœ¬å°±æ²¡å‡†å¤‡è®©åˆ«äººå»å‚è€ƒã€‚æ‰€ä»¥å†åŠ ä¸Šæœç´¢çš„æ—¶å€™ä¿ºè¡¨è¿°è¯ä¸è¾¾æ„ï¼Œæ‰€ä»¥æ€»æ˜¯å¾ˆæ›²æŠ˜ï¼ˆå‘µï¼Œç”¨è°·æ­Œæœå¤–æ–‡ç½‘å°±ä¸å­˜åœ¨è¿™é—®é¢˜ï¼Œå‰é¢å°±è°¦è™šä¸€ä¸‹ğŸ™ƒï¼‰\nä¹‹å‰å†™çš„æ–‡æ¡£ # 1 sslåŠ å¯†éƒ¨ç½²æ­¥éª¤è¯´æ˜æ–‡æ¡£ ä¸€ï¼ç”³è¯·sslè¯ä¹¦ 1.ç”Ÿæˆcsræ–‡ä»¶ï¼Œå¯ä½¿ç”¨opensslå·¥å…·ç”Ÿæˆ (1)ä¾‹:openssl genrsa -des3 -out server.key 1024 ç”ŸæˆæœåŠ¡å™¨keyæ–‡ä»¶; (2)ä¾‹:openssl req -new -key server.key -out server.csr ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦è¯·æ±‚CSRæ–‡ä»¶; æˆ–ä½¿ç”¨CSRæ–‡ä»¶ç”Ÿæˆå·¥å…·ç”Ÿæˆ(ä¾‹https://www.chinassl.net/ssltools/generator-csr.htmlï¼Œå¡«å†™ä¿¡æ¯åç‚¹å‡»ç”ŸæˆCSRæ–‡ä»¶å³å¯) ï¼ˆCSRæ–‡ä»¶ä¸­åŒ…æ‹¬ç»„ç»‡éƒ¨é—¨ã€å›½å®¶åœ°åŒºã€ç®—æ³•ã€ä»¥åŠé‚®ç®±å’ŒåŸŸåç­‰ä¿¡æ¯ï¼‰ 2.ç”³è¯·/è´­ä¹°HTTPSè¯ä¹¦ï¼Œ å¡«å†™ä¸ä¸Šè¿°ç›¸åŒçš„ä¿¡æ¯ï¼ŒéªŒè¯ç±»å‹é€‰æ‹©DNSï¼ŒCSRç”Ÿæˆé€‰æ‹©æä¾›CSR(å³æä¾›ç¬¬ä¸€æ­¥ç”Ÿæˆçš„CSRæ–‡ä»¶)ï¼ˆä¾‹ï¼šåœ¨é˜¿é‡Œäº‘æˆ–è…¾è®¯ç­‰åœ°ï¼Œæœ¬æ–‡æ¡£æ’°å†™æ—¶æ˜¯é€šè¿‡https://freessl.org/ å…è´¹ç”³è¯·è€Œæ¥ï¼ˆä¸€å¹´æœ‰æ•ˆæœŸï¼Œå•åŸŸåï¼Œï¼‰ï¼‰ äºŒã€éªŒè¯åŸŸåæ‰€å±å…³ç³» 1.åˆ°åŸŸåç®¡ç†æ§åˆ¶å°ä¸­é€‰æ‹©äº‘è§£æDNS, é€‰æ‹©åŸŸåï¼Œæ·»åŠ â€œè®°å½•â€ï¼Œè®°å½•ç±»å‹é€‰æ‹©â€˜TXTâ€™ï¼Œä¸»æœºè®°å½•åŠè®°å½•å€¼å¡«å†™è¯ä¹¦ç”³è¯·æ–¹æä¾›å†…å®¹ã€‚ 2.ç­‰å¾…1åˆ†é’Ÿæˆ–10åˆ†é’Ÿåï¼Œç­‰å¾…ç”Ÿæ•ˆ 3.ç‚¹å‡»éªŒè¯ ä¸‰ã€è¯ä¹¦ä¸‹è½½ éªŒè¯é€šè¿‡åï¼Œä¸‹è½½ç½‘ç«™æä¾›è¯ä¹¦ï¼Œå«ï¼ˆCAè¯ä¹¦ã€æœåŠ¡å™¨è¯ä¹¦ã€æœåŠ¡å™¨ç§é’¥ï¼‰ å››ã€Apache2éƒ¨ç½²å¼€å¯SSLåŠ å¯† æ›´æ”¹httpd.conf æ–‡ä»¶è®¾ç½®ï¼š 1.Listen {å†…ç½‘IP}:80 2.å¼€å¯models (1)LoadModule ssl_module modules/mod_ssl.so (2)LoadModule socache_shmcb_module modules/mod_socache_shmcb.so (3)LoadModule rewrite_module modules/mod_rewrite.so (4)ServerName {ä¸åŸŸåç›¸åŒ}ï¼ˆæœªæµ‹è¯•æ˜¯å¦å¿…é¡»ç›¸åŒï¼‰ 3.httpè·³è½¬åˆ°https: (1)RewriteEngine on (2)RewriteCond %{SERVER_PORT} !^443$ (3)RewriteRule ^/?(.*)$ https://%{SERVER_NAME}/$1 [L,R] æ›´æ”¹extra/httpd-ssl.conf æ–‡ä»¶è®¾ç½® 1.Listen 443 2.ServerName www.lejinrong.cn 3.ServerAdmin admin@lejinrong 4.SSLCertificateFile \u0026ldquo;c:/Apache24/conf/ssl/server.crt\u0026rdquo; 5.SSLCertificateKeyFile \u0026ldquo;c:/Apache24/conf/ssl/server.key\u0026rdquo; ç¬¬å››æ­¥ä¸­crtæ–‡ä»¶æŒ‡å‘æœåŠ¡å™¨è¯ä¹¦æ–‡ä»¶ï¼Œ ç¬¬äº”æ­¥ä¸­.keyæ–‡ä»¶æŒ‡å‘ç§é’¥æ–‡ä»¶ (å…¶ä½™éƒ¨ç½²æ–¹æ¡ˆæˆ–è®¸æœ‰æ‰€ä¸åŒï¼Œä¼šä½¿ç”¨CAè¯ä¹¦)\n1.1 æ³¨æ„ï¼š ç¡®ä¿æœåŠ¡å™¨ä¸­é˜²ç«å¢™å…¥ç«™è§„åˆ™ä¸­æ·»åŠ äº†80ç«¯å£å’Œ443ç«¯å£ã€‚\n2 é™„ï¼š 2.1.1 æœ¬åœ°æµ‹è¯•æ–¹æ¡ˆï¼š\nç¯å¢ƒï¼šwamp Apache 2.4.9 å‰è¨€ï¼šwampå®‰è£…å¥½åï¼Œé»˜è®¤çš„åªæœ‰httpæœåŠ¡ï¼Œä»¥ä¸‹é…ç½®å¯ç”¨httpsæœåŠ¡ æ¡ä»¶ï¼šåœ¨Apacheå®‰è£…ç›®å½•ä¸‹éœ€è¦æœ‰ä¸€ä¸‹æ–‡ä»¶ [Apacheå®‰è£…ç›®å½•]/modules/ mod_ssl.so [Apacheå®‰è£…ç›®å½•]/bin/ openssl.exe, libeay32.dll, ssleay32.dll [Apacheå®‰è£…ç›®å½•]/conf/ openssl.cnf æ­¥éª¤ï¼š ä¸€ã€ä¿®æ”¹é…ç½®æ–‡ä»¶httpd.confï¼Œå»æ‰ä¸‹é¢è¡Œé¦–çš„#ï¼ˆè½½å…¥sslæ¨¡å—å’Œå…¶ä»–é…ç½®æ–‡ä»¶ï¼‰ LoadModule socache_shmcb_module modules/mod_socache_shmcb.so LoadModule ssl_module modules/mod_ssl.so Include conf/extra/httpd-ssl.conf äºŒã€è®¤è¯æ–‡ä»¶ç”Ÿæˆï¼ˆç”Ÿæˆè¯ä¹¦ç­¾å‘è¯·æ±‚ï¼‰ è¿›å…¥Apacheå®‰è£…ç›®å½•çš„binç›®å½•ä¸‹ï¼Œè¾“å…¥cmdï¼Œè¿›å…¥DOSçª—å£ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ openssl req -new -out server.csr -config ../conf/openssl.cnf å›è½¦åæç¤ºè¾“å…¥å¯†ç å’Œç¡®è®¤å¯†ç ï¼Œæœ¬æœºè¾“å…¥ï¼škeypasswd åé¢ä¼šæç¤ºè¾“å…¥ä¸€ç³»åˆ—çš„å‚æ•° \u0026hellip;\u0026hellip; Country Name (2 letter code) [AU]:Â ï¼ˆè¦æ±‚è¾“å…¥å›½å®¶ç¼©å†™ï¼Œåªèƒ½è¾“å…¥2ä¸ªå­—æ¯ï¼Œè¿™é‡Œè¾“å…¥cnï¼‰ State or Province Name (full name) [Some-State]:Â ï¼ˆè¦æ±‚è¾“å…¥å·åæˆ–çœåï¼Œè¿™é‡Œè¾“å…¥hubeiï¼‰ Locality Name (eg, city) []:Â ï¼ˆè¦æ±‚è¾“å…¥åŸå¸‚åï¼Œè¿™é‡Œè¾“å…¥wuhanï¼‰ Organization Name (eg, company) [Internet Widgits Pty Ltd]:Â ï¼ˆè¦æ±‚è¾“å…¥ç»„ç»‡åæˆ–å…¬å¸åï¼Œè¿™é‡Œè¾“å…¥ggï¼‰ Organizational Unit Name (eg, section) []:Â ï¼ˆè¦æ±‚è¾“å…¥éƒ¨é—¨åï¼Œè¿™é‡Œè¾“å…¥ggï¼‰ Common Name (eg, YOUR name) []:Â ï¼ˆè¦æ±‚è¾“å…¥æœåŠ¡å™¨åŸŸåæˆ–IPåœ°å€ï¼‰ Email Address []:Â ï¼ˆè¦æ±‚è¾“å…¥é‚®ä»¶åœ°å€ï¼‰ A challenge password[]:ï¼ˆè¦æ±‚è¾“å…¥å¯†ç ï¼‰ An optional company name[]ï¼ˆè¦æ±‚è¾“å…¥å…¬å¸åˆ«åï¼Œè¿™é‡Œè¾“å…¥ggsï¼‰ \u0026hellip;.. ç”Ÿæˆç§é’¥ï¼Œåœ¨DOSçª—å£ä¸‹çš„Apacheçš„binç›®å½•ä¸‹è¾“å…¥å‘½ä»¤ openssl rsa -in privkey.pem -out server.key ç„¶åè¦æ±‚è¾“å…¥ä¹‹å‰Â privkey.pemÂ çš„å¯†ç ï¼ˆkeypasswd) åˆ›å»ºè¯ä¹¦ï¼Œè¾“å…¥å‘½ä»¤ openssl x509 -in server.csr -out server.crt -req -signkey server.key -days 8000 å›è½¦åï¼Œæ˜¾ç¤ºåˆ›å»ºæˆåŠŸï¼Œæœ‰æ•ˆæœŸä¸ºÂ 8000Â å¤© å°†Apacheçš„binç›®å½•ä¸‹çš„server.csrã€server.crtã€server.keyæ‹·è´åˆ°Apacheå®‰è£…ç›®å½•ä¸‹çš„conf\\sslï¼Œè‹¥æ²¡æœ‰sslæ–‡ä»¶åˆ™åˆ›å»º æ‰“å¼€Apacheå®‰è£…ç›®å½•conf/extra/httpd-ssl.confæ–‡ä»¶ï¼Œè®¾ç½®SSLCertificateFileå’ŒSSLCertificateKeyFile SSLCertificateFile \u0026ldquo;C:/apache2.4.9/conf/ssl/server.crt\u0026rdquo; SSLCertificateKeyFile \u0026ldquo;C:/apache2.4.9/conf/ssl/server.key\u0026rdquo; æœ€åé‡å¯ApacheæœåŠ¡ï¼ŒHTTPSæœåŠ¡çš„é»˜è®¤ç›‘å¬ç«¯å£ä¸º443 éšååœ¨æœ¬æœºä¸­å®‰è£…server.crtè‡³æ”¶ä¿¡äººçš„æ ¹è¯ä¹¦é¢å‘æœºæ„å³å¯ä¸å†æç¤ºè¯ä¹¦æ— æ•ˆ æ³¨æ„ï¼šåœ¨é‡å¯Apacheæ—¶ï¼Œè‹¥ApacheæœåŠ¡å¯åŠ¨ä¸èµ·æ¥ï¼Œåˆ™åœ¨Apacheå®‰è£…ç›®å½•çš„binç›®å½•ä¸‹ï¼Œè¾“å…¥httpd â€“tï¼Œå¯ä»¥æ ¹æ®æç¤ºæ¥ä¿®æ”¹ä½ çš„é…ç½®æ–‡ä»¶\né™„ # ç°åœ¨æ˜¯2018å¹´8æœˆ25æ—¥16ç‚¹01åˆ† æ‰€ä»¥ä¸Šé¢å…¶å®æ˜¯ä¸€ä¸ªæœˆå‰å†™ç»™åˆ«äººçœ‹çš„æ–‡æ¡£ã€‚ åœ¨æˆ‘æœçš„æ—¶å€™ç”±äºå…ˆåœ¨æœ¬åœ°é…ç½®ï¼Œå°”åå†ç½‘ä¸Šæ‰¾CAå‘è¯ä¹¦ï¼Œè‡ªæˆ‘æ„Ÿè§‰è¿™ä¸ªæ­¥éª¤æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚å°±ä»Šå¤©åœ¨\nApacheé…ç½®åŒç½‘ç«™/https # çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯è¿™æ ·ï¼Œå…ˆåœ¨æœ¬åœ°é€šè¿‡ä¸åŒç«¯å£æµ‹è¯•ï¼Œç¡®å®šæ–¹æ¡ˆä¹‹åå†åœ¨æœåŠ¡å™¨ä¸Šé€šè¿‡ServerNameè¿›è¡ŒåŒºåˆ†ã€‚ ä¹Ÿå°±æ˜¯å¯ç”¨httpd-vhosts.confä¹‹åï¼Œå†\n# Virtual Hosts # # Required modules: mod_log_config # If you want to maintain multiple domains/hostnames on your # machine you can setup VirtualHost containers for them. Most configurations # use only name-based virtual hosts so the server doesn\u0026#39;t need to worry about # IP addresses. This is indicated by the asterisks in the directives below. # # Please see the documentation at # \u0026lt;URL:http://httpd.apache.org/docs/2.4/vhosts/\u0026gt; # for further details before you try to setup virtual hosts. # # You may use the command line option \u0026#39;-S\u0026#39; to verify your virtual host # configuration. # # VirtualHost example: # Almost any Apache directive may go into a VirtualHost container. # The first VirtualHost section is used for all requests that do not # match a ServerName or ServerAlias in any \u0026lt;VirtualHost\u0026gt; block. # \u0026lt;VirtualHost 192.168.1.81:80\u0026gt; ServerName www.lejinrong.cn ServerAlias www.lejinrong.cn ServerAdmin www.lejinrong.cn #æŒ‡å®šmywebé¡¹ç›®çš„wsgi.pyé…ç½®æ–‡ä»¶è·¯å¾„ WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/Fund_Evaluation_System/wsgi.py #é…ç½®é™æ€å˜é‡è·¯å¾„ Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static/ \u0026lt;Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static\u0026gt; Allow from all \u0026lt;/Directory\u0026gt; DocumentRoot \u0026#34;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2\u0026#34; \u0026lt;Directory \u0026#34;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2\u0026#34;\u0026gt; Options Indexes FollowSymLinks AllowOverride None \u0026lt;/Directory\u0026gt; RewriteEngine on RewriteCond %{SERVER_PORT} !^400$ RewriteRule ^/?(.*)$ https://%{SERVER_NAME}/$1 [L,R] ErrorLog \u0026#34;logs/dummy-host.example.com-error.log\u0026#34; CustomLog \u0026#34;logs/dummy-host.example.com-access.log\u0026#34; common \u0026lt;/VirtualHost\u0026gt; \u0026lt;VirtualHost 192.168.1.81:8880\u0026gt; ServerName lejinrong.cn ServerAlias vip.lejinrong.cn ServerAdmin vip.lejinrong.cn #æŒ‡å®šmywebé¡¹ç›®çš„wsgi.pyé…ç½®æ–‡ä»¶è·¯å¾„ WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/Fund_Evaluation_System/wsgi.py #é…ç½®é™æ€å˜é‡è·¯å¾„ Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static/ \u0026lt;Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static\u0026gt; Allow from all \u0026lt;/Directory\u0026gt; DocumentRoot \u0026#34;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3\u0026#34; \u0026lt;Directory \u0026#34;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3\u0026#34;\u0026gt; Options Indexes FollowSymLinks AllowOverride None \u0026lt;/Directory\u0026gt; ErrorLog \u0026#34;logs/dummy-host.example.com-error.log\u0026#34; CustomLog \u0026#34;logs/dummy-host.example.com-access.log\u0026#34; common RewriteEngine on RewriteCond %{SERVER_PORT} !^443$ RewriteRule ^/?(.*)$ https://%{SERVER_NAME}/$1 [L,R] \u0026lt;/VirtualHost\u0026gt; åŒç†ï¼Œåœ¨httpd-ssl.confä¸­ä¹Ÿæ˜¯é€šè¿‡é…ç½®ä¸åŒVirtualHostè¿›è¡ŒåŒºåˆ†\n# # This is the Apache server configuration file providing SSL support. # It contains the configuration directives to instruct the server how to # serve pages over an https connection. For detailed information about these # directives see \u0026lt;URL:http://httpd.apache.org/docs/2.4/mod/mod_ssl.html\u0026gt; # # Do NOT simply read the instructions in here without understanding # what they do. They\u0026#39;re here only as hints or reminders. If you are unsure # consult the online docs. You have been warned. # # Required modules: mod_log_config, mod_setenvif, mod_ssl, # socache_shmcb_module (for default value of SSLSessionCache) # # Pseudo Random Number Generator (PRNG): # Configure one or more sources to seed the PRNG of the SSL library. # The seed data should be of good random quality. # WARNING! On some platforms /dev/random blocks if not enough entropy # is available. This means you then cannot use the /dev/random device # because it would lead to very long connection times (as long as # it requires to make more entropy available). But usually those # platforms additionally provide a /dev/urandom device which doesn\u0026#39;t # block. So, if available, use this one instead. Read the mod_ssl User # Manual for more details. # #SSLRandomSeed startup file:/dev/random 512 #SSLRandomSeed startup file:/dev/urandom 512 #SSLRandomSeed connect file:/dev/random 512 #SSLRandomSeed connect file:/dev/urandom 512 # # When we also provide SSL we have to listen to the # standard HTTP port (see above) and to the HTTPS port # Listen 443 Listen 400 #ServerName www.lejinrong.cn ## ## SSL Global Context ## ## All SSL configuration in this context applies both to ## the main server and all SSL-enabled virtual hosts. ## # SSL Cipher Suite: # List the ciphers that the client is permitted to negotiate, # and that httpd will negotiate as the client of a proxied server. # See the OpenSSL documentation for a complete list of ciphers, and # ensure these follow appropriate best practices for this deployment. # httpd 2.2.30, 2.4.13 and later force-disable aNULL, eNULL and EXP ciphers, # while OpenSSL disabled these by default in 0.9.8zf/1.0.0r/1.0.1m/1.0.2a. SSLCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES SSLProxyCipherSuite HIGH:MEDIUM:!MD5:!RC4:!3DES # By the end of 2016, only TLSv1.2 ciphers should remain in use. # Older ciphers should be disallowed as soon as possible, while the # kRSA ciphers do not offer forward secrecy. These changes inhibit # older clients (such as IE6 SP2 or IE8 on Windows XP, or other legacy # non-browser tooling) from successfully connecting. # # To restrict mod_ssl to use only TLSv1.2 ciphers, and disable # those protocols which do not support forward secrecy, replace # the SSLCipherSuite and SSLProxyCipherSuite directives above with # the following two directives, as soon as practical. # SSLCipherSuite HIGH:MEDIUM:!SSLv3:!kRSA # SSLProxyCipherSuite HIGH:MEDIUM:!SSLv3:!kRSA # User agents such as web browsers are not configured for the user\u0026#39;s # own preference of either security or performance, therefore this # must be the prerogative of the web server administrator who manages # cpu load versus confidentiality, so enforce the server\u0026#39;s cipher order. SSLHonorCipherOrder on # SSL Protocol support: # List the protocol versions which clients are allowed to connect with. # Disable SSLv3 by default (cf. RFC 7525 3.1.1). TLSv1 (1.0) should be # disabled as quickly as practical. By the end of 2016, only the TLSv1.2 # protocol or later should remain in use. SSLProtocol all -SSLv3 SSLProxyProtocol all -SSLv3 # Pass Phrase Dialog: # Configure the pass phrase gathering process. # The filtering dialog program (`builtin\u0026#39; is an internal # terminal dialog) has to provide the pass phrase on stdout. SSLPassPhraseDialog builtin # Inter-Process Session Cache: # Configure the SSL Session Cache: First the mechanism # to use and second the expiring timeout (in seconds). #SSLSessionCache \u0026#34;dbm:c:/Apache24/logs/ssl_scache\u0026#34; SSLSessionCache \u0026#34;shmcb:c:/Apache24/logs/ssl_scache(512000)\u0026#34; SSLSessionCacheTimeout 300 # OCSP Stapling (requires OpenSSL 0.9.8h or later) # # This feature is disabled by default and requires at least # the two directives SSLUseStapling and SSLStaplingCache. # Refer to the documentation on OCSP Stapling in the SSL/TLS # How-To for more information. # # Enable stapling for all SSL-enabled servers: #SSLUseStapling On # Define a relatively small cache for OCSP Stapling using # the same mechanism that is used for the SSL session cache # above. If stapling is used with more than a few certificates, # the size may need to be increased. (AH01929 will be logged.) #SSLStaplingCache \u0026#34;shmcb:c:/Apache24/logs/ssl_stapling(32768)\u0026#34; # Seconds before valid OCSP responses are expired from the cache #SSLStaplingStandardCacheTimeout 3600 # Seconds before invalid OCSP responses are expired from the cache #SSLStaplingErrorCacheTimeout 600 ## ## SSL Virtual Host Context ## \u0026lt;VirtualHost 192.168.1.81:400\u0026gt; # General setup for the virtual host DocumentRoot \u0026#34;c:/Apache24/htdocs\u0026#34; ServerName www.lejinrong.cn ServerAdmin admin@lejinrong.cn ErrorLog \u0026#34;c:/Apache24/logs/error.log\u0026#34; TransferLog \u0026#34;c:/Apache24/logs/access.log\u0026#34; # SSL Engine Switch: # Enable/Disable SSL for this virtual host. SSLEngine on # Server Certificate: # Point SSLCertificateFile at a PEM encoded certificate. If # the certificate is encrypted, then you will be prompted for a # pass phrase. Note that a kill -HUP will prompt again. Keep # in mind that if you have both an RSA and a DSA certificate you # can configure both in parallel (to also allow the use of DSA # ciphers, etc.) # Some ECC cipher suites (http://www.ietf.org/rfc/rfc4492.txt) # require an ECC certificate which can also be configured in # parallel. SSLCertificateFile \u0026#34;c:/Apache24/conf/ssl/server.crt\u0026#34; #SSLCertificateFile \u0026#34;c:/Apache24/conf/server-dsa.crt\u0026#34; #SSLCertificateFile \u0026#34;c:/Apache24/conf/server-ecc.crt\u0026#34; # Server Private Key: # If the key is not combined with the certificate, use this # directive to point at the key file. Keep in mind that if # you\u0026#39;ve both a RSA and a DSA private key you can configure # both in parallel (to also allow the use of DSA ciphers, etc.) # ECC keys, when in use, can also be configured in parallel SSLCertificateKeyFile \u0026#34;c:/Apache24/conf/ssl/server.key\u0026#34; #SSLCertificateKeyFile \u0026#34;c:/Apache24/conf/server-dsa.key\u0026#34; #SSLCertificateKeyFile \u0026#34;c:/Apache24/conf/server-ecc.key\u0026#34; # Server Certificate Chain: # Point SSLCertificateChainFile at a file containing the # concatenation of PEM encoded CA certificates which form the # certificate chain for the server certificate. Alternatively # the referenced file can be the same as SSLCertificateFile # when the CA certificates are directly appended to the server # certificate for convenience. #SSLCertificateChainFile \u0026#34;c:/Apache24/conf/server-ca.crt\u0026#34; # Certificate Authority (CA): # Set the CA certificate verification path where to find CA # certificates for client authentication or alternatively one # huge file containing all of them (file must be PEM encoded) # Note: Inside SSLCACertificatePath you need hash symlinks # to point to the certificate files. Use the provided # Makefile to update the hash symlinks after changes. #SSLCACertificatePath \u0026#34;c:/Apache24/conf/ssl.crt\u0026#34; #SSLCACertificateFile \u0026#34;c:/Apache24/conf/ssl.crt/ca-bundle.crt\u0026#34; # Certificate Revocation Lists (CRL): # Set the CA revocation path where to find CA CRLs for client # authentication or alternatively one huge file containing all # of them (file must be PEM encoded). # The CRL checking mode needs to be configured explicitly # through SSLCARevocationCheck (defaults to \u0026#34;none\u0026#34; otherwise). # Note: Inside SSLCARevocationPath you need hash symlinks # to point to the certificate files. Use the provided # Makefile to update the hash symlinks after changes. #SSLCARevocationPath \u0026#34;c:/Apache24/conf/ssl.crl\u0026#34; #SSLCARevocationFile \u0026#34;c:/Apache24/conf/ssl.crl/ca-bundle.crl\u0026#34; #SSLCARevocationCheck chain # Client Authentication (Type): # Client certificate verification type and depth. Types are # none, optional, require and optional_no_ca. Depth is a # number which specifies how deeply to verify the certificate # issuer chain before deciding the certificate is not valid. #SSLVerifyClient require #SSLVerifyDepth 10 # TLS-SRP mutual authentication: # Enable TLS-SRP and set the path to the OpenSSL SRP verifier # file (containing login information for SRP user accounts). # Requires OpenSSL 1.0.1 or newer. See the mod_ssl FAQ for # detailed instructions on creating this file. Example: # \u0026#34;openssl srp -srpvfile c:/Apache24/conf/passwd.srpv -add username\u0026#34; #SSLSRPVerifierFile \u0026#34;c:/Apache24/conf/passwd.srpv\u0026#34; # Access Control: # With SSLRequire you can do per-directory access control based # on arbitrary complex boolean expressions containing server # variable checks and other lookup directives. The syntax is a # mixture between C and Perl. See the mod_ssl documentation # for more details. #\u0026lt;Location /\u0026gt; #SSLRequire ( %{SSL_CIPHER} !~ m/^(EXP|NULL)/ \\ # and %{SSL_CLIENT_S_DN_O} eq \u0026#34;Snake Oil, Ltd.\u0026#34; \\ # and %{SSL_CLIENT_S_DN_OU} in {\u0026#34;Staff\u0026#34;, \u0026#34;CA\u0026#34;, \u0026#34;Dev\u0026#34;} \\ # and %{TIME_WDAY} \u0026gt;= 1 and %{TIME_WDAY} \u0026lt;= 5 \\ # and %{TIME_HOUR} \u0026gt;= 8 and %{TIME_HOUR} \u0026lt;= 20 ) \\ # or %{REMOTE_ADDR} =~ m/^192\\.76\\.162\\.[0-9]+$/ #\u0026lt;/Location\u0026gt; # SSL Engine Options: # Set various options for the SSL engine. # o FakeBasicAuth: # Translate the client X.509 into a Basic Authorisation. This means that # the standard Auth/DBMAuth methods can be used for access control. The # user name is the `one line\u0026#39; version of the client\u0026#39;s X.509 certificate. # Note that no password is obtained from the user. Every entry in the user # file needs this password: `xxj31ZMTZzkVA\u0026#39;. # o ExportCertData: # This exports two additional environment variables: SSL_CLIENT_CERT and # SSL_SERVER_CERT. These contain the PEM-encoded certificates of the # server (always existing) and the client (only existing when client # authentication is used). This can be used to import the certificates # into CGI scripts. # o StdEnvVars: # This exports the standard SSL/TLS related `SSL_*\u0026#39; environment variables. # Per default this exportation is switched off for performance reasons, # because the extraction step is an expensive operation and is usually # useless for serving static content. So one usually enables the # exportation for CGI and SSI requests only. # o StrictRequire: # This denies access when \u0026#34;SSLRequireSSL\u0026#34; or \u0026#34;SSLRequire\u0026#34; applied even # under a \u0026#34;Satisfy any\u0026#34; situation, i.e. when it applies access is denied # and no other module can change it. # o OptRenegotiate: # This enables optimized SSL connection renegotiation handling when SSL # directives are used in per-directory context. #SSLOptions +FakeBasicAuth +ExportCertData +StrictRequire \u0026lt;FilesMatch \u0026#34;\\.(cgi|shtml|phtml|php)$\u0026#34;\u0026gt; SSLOptions +StdEnvVars \u0026lt;/FilesMatch\u0026gt; \u0026lt;Directory \u0026#34;c:/Apache24/cgi-bin\u0026#34;\u0026gt; SSLOptions +StdEnvVars \u0026lt;/Directory\u0026gt; # SSL Protocol Adjustments: # The safe and default but still SSL/TLS standard compliant shutdown # approach is that mod_ssl sends the close notify alert but doesn\u0026#39;t wait for # the close notify alert from client. When you need a different shutdown # approach you can use one of the following variables: # o ssl-unclean-shutdown: # This forces an unclean shutdown when the connection is closed, i.e. no # SSL close notify alert is sent or allowed to be received. This violates # the SSL/TLS standard but is needed for some brain-dead browsers. Use # this when you receive I/O errors because of the standard approach where # mod_ssl sends the close notify alert. # o ssl-accurate-shutdown: # This forces an accurate shutdown when the connection is closed, i.e. a # SSL close notify alert is send and mod_ssl waits for the close notify # alert of the client. This is 100% SSL/TLS standard compliant, but in # practice often causes hanging connections with brain-dead browsers. Use # this only for browsers where you know that their SSL implementation # works correctly. # Notice: Most problems of broken clients are also related to the HTTP # keep-alive facility, so you usually additionally want to disable # keep-alive for those clients, too. Use variable \u0026#34;nokeepalive\u0026#34; for this. # Similarly, one has to force some clients to use HTTP/1.0 to workaround # their broken HTTP/1.1 implementation. Use variables \u0026#34;downgrade-1.0\u0026#34; and # \u0026#34;force-response-1.0\u0026#34; for this. BrowserMatch \u0026#34;MSIE [2-5]\u0026#34; \\ nokeepalive ssl-unclean-shutdown \\ downgrade-1.0 force-response-1.0 # Per-Server Logging: # The home of a custom SSL log file. Use this when you want a # compact non-error SSL logfile on a virtual host basis. CustomLog \u0026#34;c:/Apache24/logs/ssl_request.log\u0026#34; \\ \u0026#34;%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\\u0026#34;%r\\\u0026#34; %b\u0026#34; #æŒ‡å®šmywebé¡¹ç›®çš„wsgi.pyé…ç½®æ–‡ä»¶è·¯å¾„ WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/Fund_Evaluation_System/wsgi.py #é…ç½®é™æ€å˜é‡è·¯å¾„ Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static/ \u0026lt;Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2/static\u0026gt; Allow from all \u0026lt;/Directory\u0026gt; DocumentRoot \u0026#34;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2\u0026#34; \u0026lt;Directory \u0026#34;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2\u0026#34;\u0026gt; Options Indexes FollowSymLinks AllowOverride None \u0026lt;/Directory\u0026gt; \u0026lt;/VirtualHost\u0026gt; \u0026lt;VirtualHost 192.168.1.81:443\u0026gt; DocumentRoot \u0026#34;c:/Apache24/htdocs\u0026#34; ServerName www.lejinrong.cn ServerAdmin admin@lejinrong.cn ErrorLog \u0026#34;c:/Apache24/logs/error.log\u0026#34; TransferLog \u0026#34;c:/Apache24/logs/access.log\u0026#34; SSLEngine on SSLCertificateFile \u0026#34;c:/Apache24/conf/ssl/server.crt\u0026#34; SSLCertificateKeyFile \u0026#34;c:/Apache24/conf/ssl/server.key\u0026#34; \u0026lt;FilesMatch \u0026#34;\\.(cgi|shtml|phtml|php)$\u0026#34;\u0026gt; SSLOptions +StdEnvVars \u0026lt;/FilesMatch\u0026gt; \u0026lt;Directory \u0026#34;c:/Apache24/cgi-bin\u0026#34;\u0026gt; SSLOptions +StdEnvVars \u0026lt;/Directory\u0026gt; BrowserMatch \u0026#34;MSIE [2-5]\u0026#34; \\ nokeepalive ssl-unclean-shutdown \\ downgrade-1.0 force-response-1.0 CustomLog \u0026#34;c:/Apache24/logs/ssl_request.log\u0026#34; \\ \u0026#34;%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \\\u0026#34;%r\\\u0026#34; %b\u0026#34; WSGIScriptAlias / D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/Fund_Evaluation_System/wsgi.py Alias /static/ D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static/ \u0026lt;Directory D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3/static\u0026gt; Allow from all \u0026lt;/Directory\u0026gt; DocumentRoot \u0026#34;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3\u0026#34; \u0026lt;Directory \u0026#34;D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V3\u0026#34;\u0026gt; Options Indexes FollowSymLinks AllowOverride None \u0026lt;/Directory\u0026gt; \u0026lt;/VirtualHost\u0026gt; ä½†å…¶å® éƒ½å†™äº†è·³è½¬ï¼Œæ‰€ä»¥åœ¨httpd-vhosts.confæ–‡ä»¶ä¸­çš„é¡¹ç›®ä»¥åŠé™æ€èµ„æºè·¯å¾„æŒ‡å®šå°±ä¸ç”¨æŒ‡å®šäº†ï¼Œåªä¸è¿‡æˆ‘æ‡’å¾—åˆ â€¦ è¿˜æœ‰ä¸€ä¸ªå‘ç‚¹å°±æ˜¯ åŸæœ¬æœ‰ä¸€ä¸ªæŒ‡å®šé¡¹ç›®è·¯å¾„ä»¥åŠpythonç¯å¢ƒçš„è¯­å¥ï¼š\n#WSGIPythonPath \u0026#34;C:/Python27/Lib;C:/Python27/Lib/site-packages;C:/Python27/DLLs\u0026#34; #WSGIPythonPath D:/FundEvaluationSystem_svn1 #WSGIPythonHome \u0026#34;C:/Python27\u0026#34; æˆ‘ä¸çŸ¥é“æŒ‰ç…§ä¸Šä¸‹è¿™ä¸¤ç§ä¸ºä»€ä¹ˆä¼šå‡ºé—®é¢˜ï¼Œä½†ç½‘ä¸Šé‚£äº›äººä¸ä¼šã€‚ä½†ä¸­é—´é‚£ä¸ªæ˜¯ç”¨æ¥æŒ‡å‘é¡¹ç›®è·¯å¾„çš„ä¸€ä¸ªå–å·§çš„åŠæ³•ã€‚å“¦å› ä¸ºwsgiæˆ–è®¸æˆ‘å·²ç»åœ¨åˆ«å¤„åˆ¶è®¢è¿‡äº†ã€‚æ‰€ä»¥åªè¦åœ¨wsgi.pyä¸­å£°æ˜sys.path.append('D:/FundEvaluationSystem_svn1/Fund_Evaluation_System_V2')å°±å¯ä»¥å°†é¡¹ç›®åŒ…æ‹¬è¿›æ¥ï¼Œè€Œä¸éœ€è¦é€šè¿‡ ç¬¬äºŒå¥é‚£ä¸ªåˆ¶å®špythonè·¯å¾„çš„ä¸œè¥¿ã€‚è€Œç”¨é‚£ä¸ªï¼Œä¼šå¯¼è‡´èµ„æºåªæœ‰å£°æ˜çš„é¡¹ç›®1ä¼šè¢«åŠ è½½ï¼Œè€Œé¡¹ç›®2çš„èµ„æºå°±ä¸ä¼šå£°æ˜ï¼Œè€Œå°†é‚£ä¸‰å¥è¯æ³¨é‡Šï¼Œåªè¦åˆ†åˆ«åœ¨\u0026rsquo;wsgi.py\u0026rsquo;ä¸­å£°æ˜é¡¹ç›®èµ„æºï¼Œè€Œåœ¨.confæ–‡ä»¶ä¸­æŒ‡å‘\u0026rsquo;wsgi.py\u0026rsquo;æ–‡ä»¶å°±å¯ä»¥å¦‚æ•°åŠ è½½äº†ã€‚\n(âŠ™ï¹âŠ™)è¯­åº é€»è¾‘æ··ä¹±ä¹‹åä¸åŠ ç­äº†å†æ•´ç†å§~~ğŸ˜­\nå‰ç«¯ Vue # vueçš„ä½¿ç”¨æ–¹å¼å¯ä»¥é€šè¿‡htmlé¡µé¢ç›´æ¥å¼•ç”¨ï¼Œä¹Ÿèƒ½ç›´æ¥ç”¨vue-cilåˆ›å»ºé¡¹ç›®ã€‚ ç½‘ä¸Šäººç§°vueè„šæ‰‹æ¶ï¼Ÿæ™“ä¸å¤§å¾— è€Œæˆ‘è¿™é‡Œè‡ªç„¶è¯´çš„å°±æ˜¯ vue-cilå³ é€šè¿‡vue init webpack \u0026lt;prjName\u0026gt;æ¥ç”Ÿæˆçš„é¡¹ç›®å–½\nç³»ç»Ÿçš„åˆ›å»ºä»¥åŠä»‹ç»ä¹‹åä½¿ç”¨å†ç†Ÿä¸€äº›å†å†™ï¼Œç°åœ¨å…ˆè®°ä¸€äº›é›¶æ•£çš„ä¸œè¥¿ã€‚ [^_^]2018å¹´9æœˆ18æ—¥ 21ç‚¹36åˆ†\nè·¯ç”±é…ç½®ç™»é™†è®¿é—® # åœ¨`router/index.js`ä¸­ï¼š { path: \u0026#39;/\u0026#39;, // é¦–é¡µ name: \u0026#39;Main\u0026#39;, component: Main, meta: { requireAuth: true, // æ·»åŠ è¯¥å­—æ®µï¼Œè¡¨ç¤ºè¿›å…¥è¿™ä¸ªè·¯ç”±æ˜¯éœ€è¦ç™»å½•çš„ } }, "},{"id":85,"href":"/docs/programmer/langs/golang/note-of-golang/","title":"Golangç¬”è®°","section":"Golang","content":" Golangç¬”è®° # å…ˆè´´ä¸€ä¸ªå®¢è§‚çš„æ•™ç¨‹æ–‡æ¡£ç½‘ç«™http://www.runoob.com/go/go-slice.html\nåƒåœ¾å›æ”¶ # å¸¸è§çš„å›æ”¶ç®—æ³• # å¼•ç”¨è®¡æ•° ä¼˜ç‚¹ï¼šå¯¹è±¡å¯ä»¥è¢«å¾ˆå¿«å›æ”¶ ç¼ºç‚¹ï¼šä¸å¤ªå¥½å¤„ç†å¾ªç¯å¼•ç”¨ æ ‡è®°-æ¸…é™¤ ä¼˜ç‚¹ï¼šè§£å†³äº†å¼•ç”¨è®¡æ•°çš„ç¼ºç‚¹ ç¼ºç‚¹ï¼šéœ€è¦ STW(Stop The World),æš‚æ—¶åœæ­¢ç¨‹åºè¿è¡Œ åˆ†ä»£æ”¶é›†(æŒ‰ç…§å¯¹è±¡ç”Ÿå‘½å‘¨æœŸé•¿çŸ­åˆ’åˆ†ä¸åŒçš„ä»£ç©ºé—´ï¼Œç”Ÿå‘½å‘¨æœŸé•¿çš„æ”¾å…¥è€å¹´ä»£ï¼Œæ®µçš„æ”¾å…¥æ–°ç”Ÿä»£ï¼Œä¸åŒä»£æœ‰ä¸åŒçš„å›æ”¶ç®—æ³•å’Œå›æ”¶é¢‘ç‡) ä¼˜ç‚¹ï¼šå›æ”¶æ€§èƒ½å¥½ ç¼ºç‚¹ï¼šç®—æ³•å¤æ‚ ä¸‰è‰²æ ‡è®°æ³•(åˆå§‹çŠ¶æ€ï¼šç™½è‰²ã€ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†ï¼Œéå†åˆ°çš„å˜æˆç°è‰²ï¼Œéå†ç°è‰²ï¼Œå°†ç°è‰²å¼•ç”¨çš„æ ‡è®°ç°è‰²ï¼Œéå†è¿‡çš„ç°è‰²å¯¹è±¡å˜ä¸ºé»‘è‰²ã€‚å¾ªç¯éå†ç°è‰²å¯¹è±¡ã€‚é€šè¿‡å†™å±éšœæ£€æµ‹å¯¹è±¡çš„å˜åŒ–ï¼Œé‡å¤ã€‚æ”¶é›†æ‰€æœ‰ç™½è‰²å¯¹è±¡(åƒåœ¾)) GPMè°ƒåº¦å’ŒCSPæ¨¡å‹ # CSP æ¨¡å‹ï¼Ÿ # CSP æ¨¡å‹æ˜¯â€œä»¥é€šä¿¡çš„æ–¹å¼æ¥å…±äº«å†…å­˜â€ï¼Œä¸åŒäºä¼ ç»Ÿçš„å¤šçº¿ç¨‹é€š è¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ã€‚ç”¨äºæè¿°ä¸¤ä¸ªç‹¬ç«‹çš„å¹¶å‘å®ä½“é€šè¿‡å…±äº«çš„é€š è®¯ channel (ç®¡é“)è¿›è¡Œé€šä¿¡çš„å¹¶å‘æ¨¡å‹ã€‚\nGPM åˆ†åˆ«æ˜¯ä»€ä¹ˆã€åˆ†åˆ«æœ‰å¤šå°‘æ•°é‡ï¼Ÿ # â€¢ Gï¼ˆGoroutineï¼‰ï¼š å³Goåç¨‹ï¼Œæ¯ä¸ªgoå…³é”®å­—éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå ç¨‹ã€‚ â€¢ Mï¼ˆMachineï¼‰ï¼šå·¥ä½œçº¿ç¨‹ï¼Œåœ¨Goä¸­ç§°ä¸ºMachineï¼Œæ•°é‡å¯¹åº”çœŸ å®çš„CPUæ•°ï¼ˆçœŸæ­£å¹²æ´»çš„å¯¹è±¡ï¼‰ã€‚ â€¢ Pï¼ˆProcessorï¼‰ï¼š å¤„ç†å™¨ï¼ˆGoä¸­å®šä¹‰çš„ä¸€ä¸ªæ‘¡å¿µï¼ŒéCPUï¼‰ï¼Œ åŒ…å«è¿è¡ŒGoä»£ç çš„å¿…è¦èµ„æºï¼Œç”¨æ¥è°ƒåº¦ G å’Œ M ä¹‹é—´çš„å…³è”å…³ ç³»ï¼Œå…¶æ•°é‡å¯é€šè¿‡ GOMAXPROCS() æ¥è®¾ç½®ï¼Œé»˜è®¤ä¸ºæ ¸å¿ƒæ•°ã€‚ Må¿…é¡»æ‹¥æœ‰Pæ‰å¯ä»¥æ‰§è¡ŒGä¸­çš„ä»£ç ï¼ŒPå«æœ‰ä¸€ä¸ªåŒ…å«å¤šä¸ªGçš„é˜Ÿ åˆ—ï¼ŒPå¯ä»¥è°ƒåº¦Gäº¤ç”±Mæ‰§è¡Œã€‚\nGoroutineè°ƒåº¦ç­–ç•¥ # â€¢ é˜Ÿåˆ—è½®è½¬ï¼šP ä¼šå‘¨æœŸæ€§çš„å°†Gè°ƒåº¦åˆ°Mä¸­æ‰§è¡Œï¼Œæ‰§è¡Œä¸€æ®µæ—¶é—´ åï¼Œä¿å­˜ä¸Šä¸‹æ–‡ï¼Œå°†Gæ”¾åˆ°é˜Ÿåˆ—å°¾éƒ¨ï¼Œç„¶åä»é˜Ÿåˆ—ä¸­å†å–å‡ºä¸€ä¸ª Gè¿›è¡Œè°ƒåº¦ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒPè¿˜ä¼šå‘¨æœŸæ€§çš„æŸ¥çœ‹å…¨å±€é˜Ÿåˆ—æ˜¯å¦æœ‰Gç­‰ å¾…è°ƒåº¦åˆ°Mä¸­æ‰§è¡Œã€‚ â€¢ ç³»ç»Ÿè°ƒç”¨ï¼šå½“G0å³å°†è¿›å…¥ç³»ç»Ÿè°ƒç”¨æ—¶ï¼ŒM0å°†é‡Šæ”¾Pï¼Œè¿›è€ŒæŸä¸ªç©º é—²çš„M1è·å–Pï¼Œç»§ç»­æ‰§è¡ŒPé˜Ÿåˆ—ä¸­å‰©ä¸‹çš„Gã€‚M1çš„æ¥æºæœ‰å¯èƒ½æ˜¯ Mçš„ç¼“å­˜æ± ï¼Œä¹Ÿå¯èƒ½æ˜¯æ–°å»ºçš„ã€‚ å½“G0ç³»ç»Ÿè°ƒç”¨ç»“æŸåï¼Œå¦‚æœæœ‰ç©ºé—²çš„Pï¼Œåˆ™è·å–ä¸€ä¸ªPï¼Œç»§ç»­æ‰§ è¡ŒG0ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™å°†G0æ”¾å…¥å…¨å±€é˜Ÿåˆ—ï¼Œç­‰å¾…è¢«å…¶ä»–çš„Pè°ƒåº¦ã€‚ ç„¶åM0å°†è¿›å…¥ç¼“å­˜æ± ç¡çœ ã€‚ ![[goroutine.png]]\nCHAN åŸç† # ç»“æ„ä½“ # type hchan struct { qcount uint // é˜Ÿåˆ—ä¸­çš„æ€»å…ƒç´ ä¸ªæ•° dataqsiz uint // ç¯å½¢é˜Ÿåˆ—å¤§å°ï¼Œå³å¯å­˜æ”¾å…ƒç´ çš„ä¸ªæ•° buf unsafe.Pointer // ç¯å½¢é˜Ÿåˆ—æŒ‡é’ˆ elemsize uint16 //æ¯ä¸ªå…ƒç´ çš„å¤§å° closed uint32 //æ ‡è¯†å…³é—­çŠ¶æ€ elemtype *_type // å…ƒç´ ç±»å‹ sendx uint // å‘é€ç´¢å¼•ï¼Œå…ƒç´ å†™å…¥æ—¶å­˜æ”¾åˆ°é˜Ÿåˆ—ä¸­çš„ä½ç½® recvx uint // æ¥æ”¶ç´¢å¼•ï¼Œå…ƒç´ ä»é˜Ÿåˆ—çš„è¯¥ä½ç½®è¯»å‡º recvq waitq // ç­‰å¾…è¯»æ¶ˆæ¯çš„goroutineé˜Ÿåˆ— sendq waitq // ç­‰å¾…å†™æ¶ˆæ¯çš„goroutineé˜Ÿåˆ— lock mutex //äº’æ–¥é”ï¼Œchanä¸å…è®¸å¹¶å‘è¯»å†™ } è¯»å†™æµç¨‹ # å‘ channel å†™æ•°æ®: # è‹¥ç­‰å¾…æ¥æ”¶é˜Ÿåˆ— recvq ä¸ä¸ºç©ºï¼Œåˆ™ç¼“å†²åŒºä¸­æ— æ•°æ®æˆ–æ— ç¼“å†²åŒºï¼Œå°†ç›´æ¥ä» recvq å–å‡º G ï¼Œå¹¶æŠŠæ•°æ®å†™å…¥ï¼Œæœ€åæŠŠè¯¥ G å”¤é†’ï¼Œç»“æŸå‘é€è¿‡ç¨‹ã€‚ è‹¥ç¼“å†²åŒºä¸­æœ‰ç©ºä½™ä½ç½®ï¼Œåˆ™å°†æ•°æ®å†™å…¥ç¼“å†²åŒºï¼Œç»“æŸå‘é€è¿‡ç¨‹ã€‚ è‹¥ç¼“å†²åŒºä¸­æ²¡æœ‰ç©ºä½™ä½ç½®ï¼Œåˆ™å°†å‘é€æ•°æ®å†™å…¥ Gï¼Œå°†å½“å‰ G åŠ å…¥sendq ï¼Œè¿›å…¥ç¡çœ ï¼Œç­‰å¾…è¢«è¯» goroutine å”¤é†’ã€‚ ä» channel è¯»æ•°æ® # è‹¥ç­‰å¾…å‘é€é˜Ÿåˆ— sendq ä¸ä¸ºç©ºï¼Œä¸”æ²¡æœ‰ç¼“å†²åŒºï¼Œç›´æ¥ä» sendqä¸­å–å‡º G ï¼ŒæŠŠ G ä¸­æ•°æ®è¯»å‡ºï¼Œæœ€åæŠŠ G å”¤é†’ï¼Œç»“æŸè¯»å–è¿‡ç¨‹ã€‚ å¦‚æœç­‰å¾…å‘é€é˜Ÿåˆ— sendq ä¸ä¸ºç©ºï¼Œè¯´æ˜ç¼“å†²åŒºå·²æ»¡ï¼Œä»ç¼“å†²åŒºä¸­é¦–éƒ¨è¯»å‡ºæ•°æ®ï¼ŒæŠŠ G ä¸­æ•°æ®å†™å…¥ç¼“å†²åŒºå°¾éƒ¨ï¼ŒæŠŠ G å”¤é†’ï¼Œç»“æŸè¯»å–è¿‡ç¨‹ã€‚ å¦‚æœç¼“å†²åŒºä¸­æœ‰æ•°æ®ï¼Œåˆ™ä»ç¼“å†²åŒºå–å‡ºæ•°æ®ï¼Œç»“æŸè¯»å–è¿‡ç¨‹ã€‚ å°†å½“å‰ goroutine åŠ å…¥ recvq ï¼Œè¿›å…¥ç¡çœ ï¼Œç­‰å¾…è¢«å†™ goroutineå”¤é†’ã€‚ å…³é—­ channel # å…³é—­ channel æ—¶ä¼šå°† recvq ä¸­çš„ G å…¨éƒ¨å”¤é†’ï¼Œæœ¬è¯¥å†™å…¥ G çš„æ•°æ®ä½ç½®ä¸º nilã€‚å°† sendq ä¸­çš„ G å…¨éƒ¨å”¤é†’ï¼Œä½†æ˜¯è¿™äº› G ä¼španicã€‚ panic å‡ºç°çš„åœºæ™¯è¿˜æœ‰ï¼š # å…³é—­å€¼ä¸º nil çš„ channel å…³é—­å·²ç»å…³é—­çš„ channel å‘å·²ç»å…³é—­çš„ channel ä¸­å†™æ•°æ® æ— ç¼“å†² Chan çš„å‘é€å’Œæ¥æ”¶æ˜¯å¦åŒæ­¥? # // æ— ç¼“å†²çš„channelç”±äºæ²¡æœ‰ç¼“å†²å‘é€å’Œæ¥æ”¶éœ€è¦åŒæ­¥ ch := make(chan int) //æœ‰ç¼“å†²channelä¸è¦æ±‚å‘é€å’Œæ¥æ”¶æ“ä½œåŒæ­¥ ch := make(chan int, 2) channel æ— ç¼“å†²æ—¶ï¼Œå‘é€é˜»å¡ç›´åˆ°æ•°æ®è¢«æ¥æ”¶ï¼Œæ¥æ”¶é˜»å¡ç›´åˆ°è¯» åˆ°æ•°æ®ï¼›channelæœ‰ç¼“å†²æ—¶ï¼Œå½“ç¼“å†²æ»¡æ—¶å‘é€é˜»å¡ï¼Œå½“ç¼“å†²ç©ºæ—¶æ¥ æ”¶é˜»å¡ã€‚\ncontext ç»“æ„åŸç† # ç”¨é€” # Contextï¼ˆä¸Šä¸‹æ–‡ï¼‰æ˜¯Golangåº”ç”¨å¼€å‘å¸¸ç”¨çš„å¹¶å‘æ§åˆ¶æŠ€æœ¯ ï¼Œå®ƒ å¯ä»¥æ§åˆ¶ä¸€ç»„å‘ˆæ ‘çŠ¶ç»“æ„çš„goroutineï¼Œæ¯ä¸ªgoroutineæ‹¥æœ‰ç›¸åŒçš„ ä¸Šä¸‹æ–‡ã€‚Context æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œä¸»è¦æ˜¯ç”¨äºæ§åˆ¶å¤šä¸ªåç¨‹ä¹‹é—´ çš„åä½œã€å–æ¶ˆæ“ä½œã€‚\næ•°æ®ç»“æ„ # Context åªå®šä¹‰äº†æ¥å£ï¼Œå‡¡æ˜¯å®ç°è¯¥æ¥å£çš„ç±»éƒ½å¯ç§°ä¸ºæ˜¯ä¸€ç§contextã€‚\ntype Context interface { Deadline() (deadline time.Time, ok bool) Done() \u0026lt;-chan struct{} Err() error Value(key interface{}) interface{} } ã€ŒDeadlineã€ æ–¹æ³•ï¼šå¯ä»¥è·å–è®¾ç½®çš„æˆªæ­¢æ—¶é—´ï¼Œè¿”å›å€¼ deadlineæ˜¯æˆªæ­¢æ—¶é—´ï¼Œåˆ°äº†è¿™ä¸ªæ—¶é—´ï¼ŒContext ä¼šè‡ªåŠ¨å‘èµ·å–æ¶ˆè¯·æ±‚ï¼Œè¿”å›å€¼ ok è¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†æˆªæ­¢æ—¶é—´ã€‚ ã€ŒDoneã€ æ–¹æ³•ï¼šè¿”å›ä¸€ä¸ªåªè¯»çš„ channel ï¼Œç±»å‹ä¸º struct{}ã€‚å¦‚æœè¿™ä¸ª chan å¯ä»¥è¯»å–ï¼Œè¯´æ˜å·²ç»å‘å‡ºäº†å–æ¶ˆä¿¡å·ï¼Œå¯ä»¥åšæ¸…ç†æ“ä½œï¼Œç„¶åé€€å‡ºåç¨‹ï¼Œé‡Šæ”¾èµ„æºã€‚ ã€ŒErrã€ æ–¹æ³•ï¼šè¿”å›Context è¢«å–æ¶ˆçš„åŸå› ã€‚ ã€ŒValueã€ æ–¹æ³•ï¼šè·å– Context ä¸Šç»‘å®šçš„å€¼ï¼Œæ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œé€šè¿‡ key æ¥è·å–å¯¹åº”çš„å€¼ã€‚ ç«æ€ã€å†…å­˜é€ƒé€¸ # ç«æ€ # èµ„æºç«äº‰ï¼Œå°±æ˜¯åœ¨ç¨‹åºä¸­ï¼ŒåŒä¸€å—å†…å­˜åŒæ—¶è¢«å¤šä¸ª goroutine è®¿é—®ã€‚æˆ‘ä»¬ä½¿ç”¨ go buildã€go runã€go test å‘½ä»¤æ—¶ï¼Œæ·»åŠ  -race æ ‡è¯†å¯ä»¥æ£€æŸ¥ä»£ç ä¸­æ˜¯å¦å­˜åœ¨èµ„æºç«äº‰ã€‚è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç»™èµ„æºè¿›è¡ŒåŠ é”ï¼Œè®©å…¶åœ¨åŒä¸€æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªåç¨‹æ¥æ“ä½œã€‚\nsync.Mutex sync.RWMutex é€ƒé€¸åˆ†æ # ã€Œé€ƒé€¸åˆ†æã€å°±æ˜¯ç¨‹åºè¿è¡Œæ—¶å†…å­˜çš„åˆ†é…ä½ç½®(æ ˆæˆ–å †)ï¼Œæ˜¯ç”±ç¼–è¯‘å™¨æ¥ç¡®å®šçš„ã€‚å †é€‚åˆä¸å¯é¢„çŸ¥å¤§å°çš„å†…å­˜åˆ†é…ã€‚ä½†æ˜¯ä¸ºæ­¤ä»˜å‡ºçš„ä»£ä»·æ˜¯åˆ†é…é€Ÿåº¦è¾ƒæ…¢ï¼Œè€Œä¸”ä¼šå½¢æˆå†…å­˜ç¢ç‰‡ã€‚\né€ƒé€¸åœºæ™¯ï¼š # æŒ‡é’ˆé€ƒé€¸ æ ˆç©ºé—´ä¸è¶³é€ƒé€¸ åŠ¨æ€ç±»å‹é€ƒé€¸ é—­åŒ…å¼•ç”¨å¯¹è±¡é€ƒé€¸ å¹¶å‘ Channel # ä½¿ç”¨å…³é”®å­—goå¼€å¯goroutine è½»é‡çº§çº¿ç¨‹ ä»£ç \ngo fun_name(paras_list) # eg: go f(x, y, z) package main import ( \u0026#34;fmt\u0026#34; \u0026#34;time\u0026#34; ) func say(s string) { for i := 0; i \u0026lt; 5; i++ { time.Sleep(100 * time.Millisecond) fmt.Println(s) } } func main() { go say(\u0026#34;world\u0026#34;) say(\u0026#34;hello\u0026#34;) } Channel # ç”¨äºä¼ é€’æ•°æ®çš„æ•°æ®ç»“æ„ å¯ç”¨äºä¸¤ä¸ªgoroutineä¹‹é—´ä¼ é€’æŒ‡å®šç±»å‹å€¼ï¼ŒåŒæ­¥å’Œé€šè®¯ \u0026lt;- æŒ‡å®šé€šé“æ–¹å‘(å‘é€oræ¥å—)ï¼ŒæœªæŒ‡å®šåˆ™åŒå‘é€šé“\nå£°æ˜é€šé“ # ä½¿ç”¨chanå…³é”®å­—, åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œéœ€å…ˆåˆ›å»º.\nch := make(chan int) // ç¤ºä¾‹ package main import \u0026#34;fmt\u0026#34; func sum(s []int, c chan int) { sum := 0 for _, v := range s { sum += v } c \u0026lt;- sum // æŠŠ sum å‘é€åˆ°é€šé“ c } func main() { s := []int{7, 2, 8, -9, 4, 0} c := make(chan int) go sum(s[:len(s)/2], c) go sum(s[len(s)/2:], c) x, y := \u0026lt;-c, \u0026lt;-c // ä»é€šé“ c ä¸­æ¥æ”¶ fmt.Println(x, y, x+y) } Cache-æœ‰ç¼“å†²é€šé“ # åœ¨åˆ›å»ºé€šé“æ—¶å¯åˆ›å»ºç¼“å†²åŒºï¼Œåšå‹å…¥å­˜å‚¨\nch := make(chan int, 100) // cache size // ç¤ºä¾‹ package main import \u0026#34;fmt\u0026#34; func main() { // è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¯ä»¥å­˜å‚¨æ•´æ•°ç±»å‹çš„å¸¦ç¼“å†²é€šé“ // ç¼“å†²åŒºå¤§å°ä¸º2 ch := make(chan int, 2) // å› ä¸º ch æ˜¯å¸¦ç¼“å†²çš„é€šé“ï¼Œæˆ‘ä»¬å¯ä»¥åŒæ—¶å‘é€ä¸¤ä¸ªæ•°æ® // è€Œä¸ç”¨ç«‹åˆ»éœ€è¦å»åŒæ­¥è¯»å–æ•°æ® ch \u0026lt;- 1 ch \u0026lt;- 2 // è·å–è¿™ä¸¤ä¸ªæ•°æ® fmt.Println(\u0026lt;-ch) fmt.Println(\u0026lt;-ch) } goçš„å¾ªç¯ # golang åªæœ‰for while==for golang ä¸­æ²¡æœ‰å°æ‹¬å·åŒ…è£¹, åªéœ€è¦ç”¨{}åˆ†éš”ä½œç”¨åŸŸå°±å¯ä»¥ for å¯ä»¥æœ‰\nfor A;B;C {} for ;B; {} for {} goçš„switch # æ¯ä¸ªcaseè‡ªåŠ¨break fallthrough æ˜¾å¼å£°æ˜å¯ä»¥ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªcase case æ— éœ€å¸¸é‡ switch {case} å¯åš if-else ç”¨ goçš„æŒ‡é’ˆ # goçš„æŒ‡é’ˆ æ²¡æœ‰æŒ‡é’ˆè¿ç®—.\nå‡½æ•°å®šä¹‰ # func function_name([å‚æ•°åˆ—è¡¨])[è¿”å›ç±»å‹]{ balabala } å¦‚ï¼š\nfunc Divide(varDividee int, varDivider int) (result int, errorMsg string) { if varDivider == 0 { dData := DivideError{ dividee: varDividee, divider: varDivider, } errorMsg = dData.Error() return } else { return varDividee / varDivider, \u0026#34;\u0026#34; } } æ¥å£ # package main import ( \u0026#34;fmt\u0026#34; ) # æˆ–è€… ç›´æ¥ import \u0026#34;fmt\u0026#34; type Phone interface { call() } type NokiaPhone struct { } func (nokiaPhone NokiaPhone) call() { fmt.Println(\u0026#34;I am Nokia, I can call you!\u0026#34;) } type IPhone struct { } func (iPhone IPhone) call() { fmt.Println(\u0026#34;I am iPhone, I can call you!\u0026#34;) } func main() { var phone Phone phone = new(NokiaPhone) phone.call() phone = new(IPhone) phone.call() } é”™è¯¯ # package main import ( \u0026#34;fmt\u0026#34; ) // å®šä¹‰ä¸€ä¸ª DivideError ç»“æ„ type DivideError struct { dividee int divider int } // å®ç° `error` æ¥å£ func (de *DivideError) Error() string { // ä»¥ä¸Šå‡½æ•°ä¸­ï¼Œå–ç»“æ„ä½“åœ°å€æ˜¯ï¼ˆç­‰åŒäºé¢å‘å¯¹è±¡å®ä¾‹åŒ–å¯¹è±¡å§ï¼Œç„¶åä¸‹æ–¹å¯ä»¥ // de.ä½¿ç”¨.çš„æ–¹å¼å»è°ƒå–ç»“æ„ä½“ä¸­å®šä¹‰çš„æŸå˜é‡ï¼‰ //é”™è¯¯Error()æ˜¯è°ƒç”¨æ¥å£ä¸­çš„å‡½æ•°ï¼Œåˆ¶å®šè¿”å›ç±»å‹ä¸ºstring strFormat := ` Cannot proceed, the divider is zero. dividee: %d divider: 0 ` return fmt.Sprintf(strFormat, de.dividee) } // å®šä¹‰ `int` ç±»å‹é™¤æ³•è¿ç®—çš„å‡½æ•° func Divide(varDividee int, varDivider int) (result int, errorMsg string) { if varDivider == 0 { dData := DivideError{ dividee: varDividee, divider: varDivider, } errorMsg = dData.Error() return } else { return varDividee / varDivider, \u0026#34;\u0026#34; } } func main() { // æ­£å¸¸æƒ…å†µ if result, errorMsg := Divide(100, 10); errorMsg == \u0026#34;\u0026#34; { fmt.Println(\u0026#34;100/10 = \u0026#34;, result) } // å½“è¢«é™¤æ•°ä¸ºé›¶çš„æ—¶å€™ä¼šè¿”å›é”™è¯¯ä¿¡æ¯ if _, errorMsg := Divide(100, 0); errorMsg != \u0026#34;\u0026#34; { fmt.Println(\u0026#34;errorMsg is: \u0026#34;, errorMsg) } } ä»¥ä¸Šæ€»ç»“ # å‡½æ•°å®šä¹‰çœŸæ˜¯â€¦ ä¹Ÿæˆ–è®¸åˆšå¼€å§‹æ¥è§¦å¤ªå¤šã€‚ä¹Ÿä¸çŸ¥é“è¿™ä¹ˆè®¾è®¡çš„ç›®çš„ å…¶ä¸­ åŠŸèƒ½é‡å†™è§d.Data.Errorã€‚å…ˆæ˜¯å°†d.Dataå®šä¹‰ä¸ºç»“æ„ä½“ï¼Œç„¶åå†å»è°ƒç”¨ç»“æ„ä½“ä¸‹çš„Errorï¼Œåˆ†æ˜ç»“æ„ä½“é‡Œå¹¶æ²¡æœ‰å®šä¹‰ï¼Œæ‰€ä»¥ä¸‹é¢çš„é‚£ä¸ªå‡½æ•°å®šç„¶æ˜¯å°†Error,ä¸DicideErrorè¿æ¥çš„å‡½æ•°ã€‚\næ‰€ä»¥Goå¹¶æ²¡æœ‰ç±»ä¸å¯¹è±¡ä¸€è¯´å§â€¦\nç”ŸåŠ¨ç‚¹æ¥è¯´é‚£ä¸ªå‡½æ•°ï¼ˆfunc (de *DivideError) Error() string {...}ï¼‰çš„å®šä¹‰å°±å¥½åƒæ˜¯åœ¨å¼ºè¡Œç»™è¿™ä¸ªåœ°å€çš„ç»“æ„ä½“ä¸­å¡è¿›å»ä¸€ä¸ªæ‰§è¡Œå‡½æ•°ã€‚ ä¸€ä¸ªè¨€ç®€æ„éª‡çš„å¯¹è±¡å®ç°æ–¹æ³•\né™„å½• # å¿«é—®å¿«ç­” # 1. go ä¸­é™¤äº†åŠ  Mutex é”ä»¥å¤–è¿˜æœ‰å“ªäº›æ–¹å¼å®‰å…¨è¯»å†™å…±äº«å˜é‡ï¼Ÿ # Go ä¸­ Goroutine å¯ä»¥é€šè¿‡ Channel è¿›è¡Œå®‰å…¨è¯»å†™å…±äº«å˜é‡ã€‚\n2. golangä¸­newå’Œmakeçš„åŒºåˆ«ï¼Ÿ # make ä»…ç”¨æ¥åˆ†é…åŠåˆå§‹åŒ–ç±»å‹ä¸º sliceã€mapã€chan çš„æ•°æ®ã€‚ new å¯åˆ†é…ä»»æ„ç±»å‹çš„æ•°æ®ï¼Œæ ¹æ®ä¼ å…¥çš„ç±»å‹ç”³è¯·ä¸€å—å†…å­˜ï¼Œè¿”å›æŒ‡å‘è¿™å—å†…å­˜çš„æŒ‡é’ˆï¼Œå³ç±»å‹ *Typeã€‚ make è¿”å›å¼•ç”¨ï¼Œå³ Typeï¼Œnew åˆ†é…çš„ç©ºé—´è¢«æ¸…é›¶ï¼Œ make åˆ†é…ç©ºé—´åï¼Œä¼šè¿›è¡Œåˆå§‹ã€‚ 3. Goä¸­å¯¹nilçš„Sliceå’Œç©ºSliceçš„å¤„ç†æ˜¯ä¸€è‡´çš„å—? # é¦–å…ˆGoçš„JSON æ ‡å‡†åº“å¯¹ nil slice å’Œ ç©º slice çš„å¤„ç†æ˜¯ä¸ä¸€è‡´ã€‚\nslice := make([]int,0ï¼‰ï¼šsliceä¸ä¸ºnilï¼Œä½†æ˜¯sliceæ²¡æœ‰å€¼ï¼Œsliceçš„åº•å±‚çš„ç©ºé—´æ˜¯ç©ºçš„ã€‚ slice := []int{} ï¼šsliceçš„å€¼æ˜¯nilï¼Œå¯ç”¨äºéœ€è¦è¿”å›sliceçš„å‡½æ•°ï¼Œå½“å‡½æ•°å‡ºç°å¼‚å¸¸çš„æ—¶å€™ï¼Œä¿è¯å‡½æ•°ä¾ç„¶ä¼šæœ‰nilçš„è¿”å›å€¼ã€‚ 4. åç¨‹å’Œçº¿ç¨‹å’Œè¿›ç¨‹çš„åŒºåˆ«ï¼Ÿ # è¿›ç¨‹: # è¿›ç¨‹æ˜¯å…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºï¼Œè¿›ç¨‹æ˜¯ç³»ç»Ÿèµ„æºåˆ†é…å’Œè°ƒåº¦çš„æœ€å°å•ä½ã€‚ æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„ç‹¬ç«‹å†…å­˜ç©ºé—´ï¼Œä¸åŒè¿›ç¨‹é€šè¿‡è¿›ç¨‹é—´é€šä¿¡æ¥é€šä¿¡ã€‚ç”±äºè¿›ç¨‹æ¯”è¾ƒé‡é‡ï¼Œå æ®ç‹¬ç«‹çš„å†…å­˜ï¼Œæ‰€ä»¥ä¸Šä¸‹æ–‡è¿›ç¨‹é—´çš„åˆ‡æ¢å¼€é”€ï¼ˆæ ˆã€å¯„å­˜å™¨ã€è™šæ‹Ÿå†…å­˜ã€æ–‡ä»¶å¥æŸ„ç­‰ï¼‰æ¯”è¾ƒå¤§ï¼Œä½†ç›¸å¯¹æ¯”è¾ƒç¨³å®šå®‰å…¨ã€‚\nçº¿ç¨‹: # çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“,çº¿ç¨‹æ˜¯å†…æ ¸æ€,è€Œä¸”æ˜¯CPUè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½,å®ƒæ˜¯æ¯”è¿›ç¨‹æ›´å°çš„èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ã€‚çº¿ç¨‹é—´é€šä¿¡ä¸»è¦é€šè¿‡å…±äº«å†…å­˜ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢å¾ˆå¿«ï¼Œèµ„æºå¼€é”€è¾ƒå°‘ï¼Œä½†ç›¸æ¯”è¿›ç¨‹ä¸å¤Ÿç¨³å®šå®¹æ˜“ä¸¢å¤±æ•°æ®ã€‚\nåç¨‹: # åç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œåç¨‹çš„è°ƒåº¦å®Œå…¨æ˜¯ç”±ç”¨æˆ·æ¥æ§åˆ¶çš„ã€‚åç¨‹æ‹¥æœ‰è‡ªå·±çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆã€‚ åç¨‹è°ƒåº¦åˆ‡æ¢æ—¶ï¼Œå°†å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆä¿å­˜åˆ°å…¶ä»–åœ°æ–¹ï¼Œåœ¨åˆ‡å›æ¥çš„æ—¶å€™ï¼Œæ¢å¤å…ˆå‰ä¿å­˜çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡å’Œæ ˆï¼Œç›´æ¥æ“ä½œæ ˆåˆ™åŸºæœ¬æ²¡æœ‰å†…æ ¸åˆ‡æ¢çš„å¼€é”€ï¼Œå¯ä»¥ä¸åŠ é”çš„è®¿é—®å…¨å±€å˜é‡ï¼Œæ‰€ä»¥ä¸Šä¸‹æ–‡çš„åˆ‡æ¢éå¸¸å¿«ã€‚\nGolangçš„å†…å­˜æ¨¡å‹ä¸­ä¸ºä»€ä¹ˆå°å¯¹è±¡å¤šäº†ä¼šé€ æˆGCå‹åŠ›ï¼Ÿ # é€šå¸¸å°å¯¹è±¡è¿‡å¤šä¼šå¯¼è‡´GCä¸‰è‰²æ³•æ¶ˆè€—è¿‡å¤šçš„CPUã€‚ä¼˜åŒ–æ€è·¯æ˜¯ï¼Œå‡å°‘å¯¹è±¡åˆ†é…ã€‚\nVim é«˜äº® # emmmmï¼Œå¶å°”ä¼šæœ‰ä¸æ”¯æŒGoé«˜äº®çš„æƒ…å†µ æ‰€ä»¥ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š\ncd ~ mkdir .vim cd .vim mkdir autoload plugged cd plugged git clone https://github.com/fatih/vim-go vim-go cd autoload wget https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim é…ç½® .vimrc\nvim ~/.vimrc set shiftwidth=4 softtabstop=4 expandtab call plug#begin() Plug \u0026#39;fatih/vim-go\u0026#39;, { \u0026#39;do\u0026#39;: \u0026#39;:GoInstallBinaries\u0026#39; } call plug#end() let g:go_version_warning = 0 over~! "},{"id":86,"href":"/docs/programmer/gui/vn.py%E7%AC%94%E8%AE%B0-%E4%BA%A4%E6%98%93%E5%B9%B3%E5%8F%B0%E5%AE%A2%E6%88%B7%E7%AB%AF/","title":"Vn.Pyå­¦ä¹ ç¬”è®°ï¼ˆPythonäº¤æ˜“å¹³å°æ¡†æ¶ï¼‰","section":"å›¾å½¢ç”¨æˆ·ç•Œé¢-GUI","content":"author: Ian\nVn.Pyç¬”è®° âœğŸ“” # # ä¸€ä¸ªå¼€æºPythonäº¤æ˜“è½¯ä»¶ï¼Œä¸»ä½¿ç”¨CTPåè®®ã€‚å½“ç„¶ï¼Œè¿˜æœ‰å…¶ä»–åè®®äº†å…¶æºé¡¹ç›®åœ¨http://www.vnpy.org/ åˆæœŸç¬”è®° # æŠ¥å•äº¤æ˜“è¿‡ç¨‹ä¸­ï¼Œ CTPä½¿ç”¨BrokerID ä»ä¸šåŠ¡å±‚é¢å®Œå…¨éš”ç¦»ä¸åŒç»çºªå…¬å¸çš„äº¤æ˜“ã€é£æ§åŠç»“ç®—ç”¨æˆ·çš„æ¥å…¥ã€‚ BrokerIDå…·ä½“å–å€¼å’¨è¯¢å¼€æˆ·çš„ç»çºªå…¬å¸ã€‚ CTPä¸­ UserIDä¸ºæ“ä½œå‘˜ä»£ç ï¼ŒInversterIDä¸ºæŠ•èµ„è€…ä»£ç ï¼› æŠ•èµ„è€…è‡ªå·±ä¸‹å•ä¸¤è€…åŒä¸ºæŠ•èµ„è€…ä»£ç \nCTP-APIä¸­ï¼ŒOrderRefå’ŒOrderAction å‰è€…ä¸ºCTPåå°æä¾›ç»™å®¢æˆ·ç«¯æ ‡è¯†ä¸€ç¬”æŠ¥ å•çš„å­—æ®µï¼Œä»å®¢æˆ·ç«¯å¯é€šè¿‡ï¼ˆFrontIDã€SessionIDã€OrderRefï¼‰å”¯ä¸€ç¡®å®šä¸€ç¬”æŠ¥ å•ï¼›ï¼›ï¼›åè€…ä¸OrderRefåŠŸèƒ½ç›¸ä¼¼ï¼Œæä¾›ç»™å®¢æˆ·ç«¯æ¥æ ‡è¯†ä¸€ç¬”æ’¤å•ã€‚ å‰è€…çš„æ•°æ®ç±»å‹ä¸ºå­—ç¬¦æ•°ç»„ï¼Œå¿…é¡»ä¸ºé˜¿æ‹‰ä¼¯æ•°å­—å­—ç¬¦ã€‚ OrderRefï¼ˆOrderActionRefï¼‰å–å€¼å¿…é¡»ä¿è¯åœ¨åŒä¸€ä¼šè¯å†…å‘é€çš„æŠ¥å• OrderRefï¼ˆOrderActionRefï¼‰å€¼å¤§äºä¹‹å‰çš„æœ€å¤§å€¼ï¼Œå¼€å‘å¤šçº¿ç¨‹å®¢æˆ·ç«¯å°¤ä¸ºéœ€è¦ æ³¨æ„ã€‚ CTP-APIåº“ï¼š\nerror.dtd\\error.xml é”™è¯¯å®šä¹‰æ–‡ä»¶ ---- ThostFrfcMdApi.h äº¤æ˜“æ¥å£ç±»å®šä¹‰æ–‡ä»¶ â€”â€”â€” ThostFtfcUserApiDataType.h ç±»å‹å®šä¹‰æ–‡ä»¶ ------ thostmduserapi.lib,thostmduserpi.dll è¡Œæƒ…æ¥å£åº“æ–‡ä»¶ ----- thosttraderapi.lib,thosttraderapi.dlläº¤æ˜“æ¥å£åº“æ–‡ä»¶ ----- äº¤æ˜“å’Œè¡Œæƒ…æ¥å£ç±»å®šä¹‰æ–‡ä»¶éƒ½åŒ…å«API å’Œ SPIç±»å®šä¹‰ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨APIå‘CTPåå° å‘é€è¯·æ±‚ï¼ŒCTPåå°åˆ™ä½¿ç”¨SPIå‘å®¢æˆ·ç«¯å›ä¼ å“åº”åŠå›æŠ¥ è¡Œæƒ…Demoå¼€å‘ï¼š 1.å°†APIæ–‡ä»¶å¤åˆ¶åˆ°å·¥ç¨‹ç›®å½•ï¼›å¹¶å°†æ‰€æœ‰çš„å¤´æ–‡ä»¶å’Œé™æ€ã€åŠ¨æ€åº“è¿é“¾æ¥åº“ å¹¶å°†æ–‡ä»¶å¯¼å…¥åˆ°é¡¹ç›®å·¥ç¨‹ä¸­ã€‚ å…ˆç»§æ‰¿è¡Œæƒ…æ¥å£ç±»CThostFtdcMdspiï¼Œå¹¶å®ç°éœ€è¦å®ç°çš„è™šå‡½æ•°ã€‚ OnFrontConnectdeã€OnFrontDisconnectedã€OnPspUserLoginã€ OnRspSubMarketDAta /APIå·¥ä½œæµç¨‹***/\nAPIå‹ç¼©åŒ…â€”â€”APIå«å¸¸é‡å¯¹åº”å­—ç¬¦ã€ç±»å‹å®šä¹‰ã€æ“ä½œç³»ç»Ÿç¼–è¯‘å®šä¹‰ã€å›è°ƒå‡½æ•°ï¼ˆMdSpiï¼‰ï¼ˆæŸœå°å‘ç”¨æˆ·ç«¯å‘é€ä¿¡æ¯åè¢«ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°ï¼‰ã€ä¸»åŠ¨å‡½æ•°ï¼ˆMdApiï¼‰ï¼ˆå‘æŸœå°å‘é€å„ç§è¯·æ±‚å’ŒæŒ‡ä»¤ï¼‰\nAPIå·¥ä½œæµç¨‹ï¼š åˆ›å»ºMdSpiå¯¹è±¡ï¼ˆå›æ‰å‡½æ•°ï¼‰ï¼Œè°ƒç”¨MdApiç±»ï¼Œä»¥Createå¼€å¤´çš„é™æ€æ–¹æ³•ï¼Œåˆ›å»ºMdApiå¯¹è±¡ï¼ˆä¸»åŠ¨å‡½æ•°ï¼‰ï¼Œæ³¨å†ŒMdSpiå¯¹è±¡æŒ‡é’ˆï¼Œè¡Œæƒ…æŸœå°å‰ç½®æœºåœ°å€ï¼Œè°ƒç”¨MdApiå¯¹è±¡Initæ–¹æ³•åˆå§‹åŒ–è¿æ¥å‰ç½®æœºï¼Œè¿æ¥æˆåŠŸä¼šé€šè¿‡OnFrontConnectedå›è°ƒé€šçŸ¥ç”¨æˆ·ï¼Œç”¨æˆ·è·å¾—è¿æ¥æˆåŠŸé€šçŸ¥åï¼Œè°ƒMdApiçš„ReqUserLoginç™»é™†ï¼Œç™»é™†åMdSpiçš„OnRsqUserLoginé€šçŸ¥ç”¨æˆ· \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-åˆ°æ­¤ç™»é™†å®Œæˆ\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\nMdApiï¼šï¼ˆè¡Œæƒ…ç›¸å…³ï¼‰ ä½¿ç”¨MdApiå¯¹è±¡çš„SubscribeMarketDataæ–¹æ³•ï¼Œä¼ å…¥å‚æ•°ä¸ºæƒ³è¦è®¢é˜…çš„â€œåˆçº¦ ä»£ç â€ï¼Œè®¢é˜…æˆåŠŸå½“åˆçº¦æœ‰æ–°è¡Œæƒ…é€šè¿‡MdApiçš„OnRtnDepthMarketDataå›è°ƒé€šçŸ¥ ç”¨æˆ· \u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-è‡³æ­¤è®¢é˜…å®Œæˆ\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash; å½“ç”¨æˆ·çš„æŸæ¬¡è¯·æ±‚å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¼šé€šè¿‡OnRspErroré€šçŸ¥ç”¨æˆ· MdApiä¹Ÿå«æœ‰é€€è®¢åˆçº¦ã€ç™»å‡ºåŠŸèƒ½ã€‚ è€Œä¸€èˆ¬é€€å‡ºç¨‹åºåˆ™ç›´æ¥æ€è¿›ç¨‹ï¼ˆä¸å¤ªå®‰å…¨ä¾¿æ˜¯ï¼‰\nTraderApiï¼šï¼ˆäº¤æ˜“ç›¸å…³ï¼‰ ä¸åŒäºä»¥ä¸Šçš„æœ‰ æ³¨å†ŒTraderSpiå¯¹è±¡çš„æŒ‡é’ˆåéœ€è¦è°ƒç”¨TraderApiå¯¹è±¡çš„ SubscribePrivateTopicå’ŒSubscribePublicTopicæ–¹æ³•å»é€‰æ‹©å…¬å¼€å’Œç§æœ‰æ•°æ®æµçš„é‡ ä¼ æ–¹æ³• å¯¹äºæœŸè´§æŸœå°ï¼Œæ¯ä¸€æ—¥ç¬¬ä¸€æ¬¡ç™»é™†éœ€è¦å…ˆæŸ¥è¯¢å‰ä¸€æ—¥çš„ç»“ç®—å•ï¼Œç­‰å¾…æŸ¥è¯¢ ç»“æœè¿”å›ï¼Œç¡®è®¤ï¼Œæ‰å¯è¿›è¡Œåç»­æ“ä½œï¼ˆCTPã€æ’ç”ŸUFTï¼‰ï¼Œè¯åˆ¸ï¼ˆLTSï¼‰æ— æ­¤è¦æ±‚ ä¸Šä¸€æ­¥å®Œæˆåï¼Œç”¨æˆ·å¯ä»¥è°ƒç”¨ReqQryInstrumentçš„æ–¹æ³•æŸ¥è¯¢æŸœå°ä¸Šæ‰€æœ‰å¯ ä»¥äº¤æ˜“çš„åˆçº¦ä¿¡æ¯ï¼ˆåŒ…æ‹¬ä»£ç ã€ä¸­æ–‡åã€æ¶¨è·Œåœã€æœ€å°ä»·ä½å˜åŠ¨ã€åˆçº¦ä¹˜æ•°ç­‰å¤§ é‡ç»†èŠ‚ï¼‰ï¼Œä¸€èˆ¬æ˜¯åœ¨è¿™é‡Œè·å¾—åˆçº¦ä¿¡æ¯åˆ—è¡¨åï¼Œå†å»MdApiä¸­è®¢é˜…åˆçº¦ï¼›ç»å¸¸æœ‰ äººé—®ä¸ºä»€ä¹ˆåœ¨MdApiä¸­æ‰¾ä¸åˆ°æŸ¥è¯¢å¯ä¾›è®¢é˜…çš„åˆçº¦ä»£ç çš„å‡½æ•°ï¼Œè¿™é‡Œå°¤å…¶è¦æ³¨ æ„ï¼Œå¿…é¡»é€šè¿‡TraderApiæ¥è·å– å½“ç”¨æˆ·æŠ¥å•ã€æˆäº¤çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒTraderApiä¼šè‡ªåŠ¨é€šè¿‡OnRtnOrderã€ OnRtnTradeé€šçŸ¥ï¼Œæ— éœ€é¢å¤–è®¢é˜… /å°è£…API****/ å°è£…åAPIçš„åŠ¨ä½œï¼š ä¸»åŠ¨å‡½æ•°ï¼š è°ƒç”¨å°è£…APIä¸»åŠ¨å‡½æ•°ï¼Œä¼ å…¥Pythonå˜é‡ä½œä¸ºå‚æ•°â€”\u0026gt;å°è£…APIå°†Pythonå˜é‡è½¬æ¢æˆC++å˜é‡â€”\u0026gt;APIè°ƒç”¨åŸç”ŸAPIä¸»åŠ¨å‡½æ•°ä¼ å…¥C++å˜é‡ä½œä¸ºå‚æ•° å›æ‰å‡½æ•°ï¼š äº¤æ˜“æŸœå°é€šè¿‡åŸç”ŸAPIä¼ å…¥å‚æ•°ä¸ºC++å˜é‡-\u0026gt;å°è£…APIå°†C++å˜é‡è½¬æ¢ä¸ºPythonå˜é‡-\u0026gt;å°è£…APIè°ƒç”¨å°è£…åçš„å›è°ƒå‡½æ•°æƒ³Pythonç¨‹åºä¸­æ¨é€æ•°\nå°è£…å¤„ç†ï¼š å°†å›è°ƒå‡½æ•°Spiç±»å’Œä¸»åŠ¨å‡½æ•°Apiç±»å°è£…ä¸ºä¸€ä¸ªç±»ï¼Œä½¿ç”¨ä¸­æ›´åŠ æ–¹ä¾¿ åœ¨APIä¸­åŒ…å«ä¸€ä¸ªç¼“å†²é˜Ÿåˆ—ï¼Œå½“å›è°ƒå‡½æ•°æ”¶åˆ°æ–°çš„æ•°æ®ä¿¡æ¯æ—¶åªæ˜¯ç®€å•å­˜å…¥ å¹¶ç«‹å³è¿”å›ï¼Œè€Œæ•°æ®ä¿¡æ¯çš„å¤„ç†å’Œå‘Pythonä¸­çš„æ¨é€åˆ™ç”±å¦ä¸€ä¸ªå·¥ä½œçº¿ç¨‹æ‰§è¡Œ é‰´äºPythonä¸­dictå­—å…¸å†…çš„é”®å’Œå€¼çš„ç±»å‹å¯ä»¥ä¸åŒï¼Œæ‰€ä»¥åˆ©ç”¨æ­¤æ¥ä»£æ›¿ C++çš„ç»“æ„ä½“ å¤„ç†ç¤ºä¾‹ï¼š getChar()ï¼š d(Pythonå­—å…¸å¯¹è±¡) key(dä¸­æƒ³è¦æå–çš„æ•°æ®é”®å) if(d.has_key(key)) åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿™ä¸ªé”®ï¼› object o = d[key]; æå–å¯¹åº”å€¼ extract\u0026lt;string\u0026gt; x(o); ç”Ÿæˆæå– std::stringç±»çš„æå–å™¨ if (x.check()) æ£€æµ‹èƒ½å¦æå–å‡ºæ•°æ® string s = x(); æ‰§è¡Œè§£åŒ…å™¨ï¼Œæå– stringå¯¹è±¡ const char *buffer = s.c_str(); ä»sä¸­è·å–å­—ç¬¦ä¸²æŒ‡é’ˆbufffer strcpy_s(value, strlen(buffer) + 1, buffer); å°†å­—ç¬¦ä¸²æŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦ä¸²æ•°ç»„å¤åˆ¶åˆ°ç»“æ„ä½“æˆå‘˜çš„æŒ‡é’ˆä¸Š å¯¹å­—ç¬¦ä¸²æŒ‡é’ˆèµ‹å€¼ å¿…é¡»ä½¿ç”¨strcpy_s, vs2013ä½¿ç”¨strcpy ç¼–è¯‘é€šä¸è¿‡+1åº”è¯¥æ˜¯å› ä¸ºC++å­—ç¬¦ä¸²çš„ç»“å°¾ç¬¦å·ï¼Ÿä¸æ˜¯ç‰¹åˆ«ç¡®å®šï¼Œä¸åŠ è¿™ä¸ª 1ä¼šå‡ºé”™ /äº‹ä»¶é©±åŠ¨***/\næ—¶é—´é©±åŠ¨ï¼š å®šæ—¶è°ƒç”¨ äº‹ä»¶é©±åŠ¨ï¼š æ–°äº‹ä»¶è¢«æ¨é€æ—¶ï¼ˆå¦‚æ–°è¡Œæƒ…ã€æˆäº¤ï¼‰åˆ™è°ƒç”¨ åˆå§‹åŒ–ï¼š äº‹ä»¶é˜Ÿåˆ—ã€å¼•æ“å¼€å…³ï¼ˆæ ‡å¿—ï¼‰ã€äº‹ä»¶çº¿ç¨‹ã€å®šæ—¶å™¨ã€ä¸€ä¸ªäº‹ä»¶å’Œå¤„ç†å‡½æ•°å¯¹åº”å­—å…¸ï¼ˆ__handlersï¼‰ å¼•æ“è¿è¡Œï¼š å¾ªç¯æ£€æŸ¥å¼•æ“å¼€å…³ è‹¥å¼€åˆ™ä¸€ç›´å°è¯•è·å–äº‹ä»¶ï¼ˆé˜»å¡å¼€ï¼Œæ—¶é—´1sï¼‰ï¼Œå¤„ç†äº‹ä»¶ï¼› è‹¥å‡ºé”™åˆ™pass å¤„ç†äº‹ä»¶ï¼š æ£€æµ‹æ˜¯å¦æœ‰å¯¹å½“å‰äº‹ä»¶ç›‘å¬çš„å¤„ç†å‡½æ•°ï¼Œè‹¥æœ‰åˆ™å¾ªç¯è°ƒç”¨ç›¸åº”å¤„ç†å‡½æ•°å¯¹äº‹ä»¶è¿›è¡Œå¤„ç† è®¡æ—¶å™¨äº‹ä»¶ï¼š åˆ›å»ºè®¡æ—¶å™¨äº‹ä»¶ï¼Œæ¨å…¥è®¡æ—¶å™¨äº‹ä»¶ å¼•æ“å¯åŠ¨ï¼š æ‰“å¼€å¼•æ“å¼€å…³ã€å¯åŠ¨äº‹ä»¶å¤„ç†çº¿ç¨‹ã€å¯åŠ¨å®šæ—¶å™¨ï¼ˆäº‹ä»¶é»˜è®¤é—´éš”1sï¼‰ åœæ­¢å¼•æ“ï¼š å…³é—­ã€‚ã€‚ã€‚ã€‚ã€åœæ­¢è®¡æ—¶å™¨ã€ç­‰å¾…äº‹ä»¶å¤„ç†çº¿ç¨‹é€€å‡º æ³¨å†Œäº‹ä»¶å¤„ç†ï¼š å°è¯•è·å–å¯¹åº”å¤„ç†æ­¤ç±»å‹å‡½æ•°åˆ—è¡¨ï¼ˆå¯¹åº”å­—å…¸ï¼‰ï¼Œè‹¥æ— åˆ™åˆ›å»ºã€‚ æ³¨é”€å‡½æ•°ç›‘å¬ï¼š ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ï¼Œè‹¥æ— åˆ™passï¼Œè‹¥å‡½æ•°å­˜åœ¨äºåˆ—è¡¨åˆ™å°†ä¹‹ç§»é™¤ï¼Œè‹¥å‡½æ•°åˆ—è¡¨ä¸ºç©ºï¼Œåˆ™å¼•æ“ä¸­ç§»é™¤è¯¥äº‹ä»¶ç±»å‹ putï¼š å‘äº‹ä»¶é˜Ÿåˆ—ä¸­å­˜å…¥äº‹ä»¶\nåº•å±‚æ¥å£å¯¹æ¥ï¼š äº¤æ˜“ç¨‹åºæ¶æ„åˆ†ï¼šåº•å±‚æ¥å£ã€ä¸­å±‚å¼•æ“ã€é¡¶å±‚GUIï¼Œ ä¸ºå°†æŸAPIå¯¹æ¥åˆ°ç¨‹åºä¸­éœ€ï¼š1.å°†APIçš„å›è°ƒå‡½æ•°æ”¶åˆ°çš„æ•°æ®â€”\u0026gt;ä¸­å±‚å¼•æ“ ç­‰å¾…å¤„ç† 2.å°†APIçš„ä¸»åŠ¨å‡½æ•°è¿›è¡Œä¸€å®šçš„ç®€åŒ–å°è£…ï¼Œä¾¿äºä¸­å±‚å¼•æ“è°ƒç”¨\nä¸­å±‚å¼•æ“è®¾è®¡ï¼š è¿›ä¸€æ­¥å°è£…åº•å±‚æ¥å£æ‰€æš´éœ²å‡ºçš„APIå‡½æ•°ï¼Œä½¿å¾—å…¶æ›´å®¹æ˜“è¢«ä¸Šå±‚çš„GUIå’Œç­–ç•¥ç»„ä»¶è°ƒç”¨ã€‚ æ„é€ å‡½æ•°ï¼š ä»¥ä¸»å¼•æ“æˆå‘˜å˜é‡å½¢å¼åˆ›å»ºäº‹ä»¶é©±åŠ¨å¼•æ“eeï¼Œè¡Œæƒ…æ¥å£mdå’Œäº¤æ˜“æ¥å£tdçš„å¯¹è±¡ã€‚ éšåç«‹å³å¯åŠ¨ï¼Œå½“ç”¨æˆ·è°ƒç”¨æ¥å£è¿æ¥ã€ç™»é™†ç­‰åŠŸèƒ½ã€æ”¶åˆ°äº‹ä»¶æ¨é€ï¼Œeeå¯ä»¥ç«‹å³æ¨é€åˆ°ç›‘å¬è¿™äº›äº‹ä»¶çš„ç»„ä»¶è¿›è¡Œå¤„ç†ã€‚ LTSå’ŒCTPæ¥å£çš„æŒä»“æƒ…å†µå’Œè´¦æˆ·æƒ…å†µä¸é€šè¿‡æ¨é€ï¼Œéœ€æ‰‹åŠ¨æŸ¥è¯¢ã€‚Demoé€‰æ‹©å¾ªç¯æŸ¥è¯¢æ¨¡å¼ï¼Œä¸æ–­æ›´æ–°ã€‚å¯é€‰æ‹©ä¸è¿›è¡ŒæŸ¥è¯¢ï¼Œé™ä½å ç”¨ç½‘ç»œå¸¦å®½ã€‚ ç™»é™†æˆåŠŸåï¼ŒæŸ¥è¯¢æŸœå°æ‰€æœ‰å¯äº¤æ˜“ä¿¡æ¯ï¼Œä¿å­˜åˆ°dictInstrumentå­—å…¸ä¸­ï¼Œæ–¹ä¾¿åç»­æŸ¥è¯¢ ä¼˜åŒ–äº†ä¸€äº›å‡½æ•°æ–¹æ³•çš„è°ƒç”¨æ–¹å¼ï¼Œå°†ç»çºªå•†ä¸€èµ·æä¾›çš„æ¥å£ç™»é™†å°è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå‡å°‘äº†é‡å¤ä¹¦å†™çš„æ¬¡æ•°ã€‚\nå¼•æ“ä¹‹é—´æ‰§è¡Œè¿‡ç¨‹ # å‘å•ä¸ºä¾‹ï¼š # è®¾ç½®å‘å•æŒ‰é’® -\u0026gt; å°†ç‚¹æŒ‰åŠ¨ä½œå…³è”sendOrderå‘å•å®ç°å‡½æ•°ï¼ˆä»è¾“å…¥æ¡†è·å–åˆçº¦ä»£ç -\u0026gt;è·å–åˆçº¦ä¿¡æ¯å¯¹è±¡ï¼ˆè§ä¸‹ï¼‰ -\u0026gt; å¦‚æœæˆåŠŸè·å– -\u0026gt; å†è·å–æ–¹å‘ä»·æ ¼ç­‰ä¿¡æ¯ -\u0026gt; è°ƒç”¨ä¸»å¼•æ“ä¸‹å‘å•å®ç° -\u0026gt; ä¸»å¼•æ“è½¬åˆ°TdApiä¸‹å‘å•å‡½æ•°æ‰§è¡Œï¼ˆè¯·æ±‚ç¼–å·ï¼ˆAPIç®¡ç†ï¼‰ -\u0026gt; å°†ä¼ å…¥ä¿¡æ¯æ•°æ®å­˜å…¥å­—å…¸ï¼ˆåˆçº¦ä»£ç ã€æ–¹å‘ä»·æ ¼ç­‰ï¼‰ -\u0026gt; æŠ¥å•ç¼–å·ï¼ˆAPIç®¡ç†ï¼‰ -\u0026gt; ç”¨æˆ·idã€å•å­å±æ€§ï¼ˆæŠ•æœºã€ç«‹å³å‘å•ã€ä»Šæ—¥æœ‰æ•ˆï¼‰ç­‰ä¿¡æ¯å­˜å…¥å­—å…¸ï¼‰ -\u0026gt; self.reqOrderInsert(reqï¼ˆä¿¡æ¯å­—å…¸ï¼‰, self.__reqidï¼ˆè¯·æ±‚ç¼–å·ï¼‰) -\u0026gt; è¿”å›è®¢å•å·ï¼ˆæŠ¥å•ç¼–å·ï¼‰ï¼‰\nä¸»å¼•æ“ï¼šï¼ˆè´Ÿè´£å¯¹APIçš„è°ƒåº¦ï¼‰ # init()åˆå§‹åŒ–ä¸­çš„åŠ¨ä½œï¼š åˆ›å»ºäº‹ä»¶é©±åŠ¨å¼•æ“ã€åˆ›å»ºAPIæ¥å£ã€å¯åŠ¨äº‹ä»¶é©±åŠ¨å¼•æ“ã€å¾ªç¯æŸ¥è¯¢æŒä»“å’Œè´¦æˆ·ç›¸å…³ï¼ˆä¹‹åå­¦ä¹ ï¼‰ã€åˆ›å»ºåˆçº¦å­˜å‚¨ç©ºå­—å…¸ï¼Œæ³¨å†Œæ’å…¥åˆçº¦å¯¹è±¡æ‰§è¡Œå‡½æ•°äº‹ä»¶ç±»å‹å’Œå…¶å¤„ç†å‡½æ•°ã€‚ å…¶ä¸­åŒ…å«å‡ ä¹æ‰€æœ‰çš„åŠŸèƒ½å‡½æ•°ï¼ŒåŒ…å«äº†æ¯ä¸ªåŠŸèƒ½å‡½æ•°çš„å®ç°æ–¹æ³•\näº‹ä»¶é©±åŠ¨å¼•æ“ï¼š # init()åˆå§‹åŒ–ä¸­çš„åŠ¨ä½œï¼š åˆ›å»ºäº‹ä»¶é˜Ÿåˆ—ã€åˆ›å»ºè®¾ç½®äº‹ä»¶å¼•æ“å¼€å…³ï¼ˆå…³ï¼‰ã€åˆ›å»ºäº‹ä»¶å¤„ç†çº¿ç¨‹(ç›®æ ‡ä¸ºå¼•æ“è¿è¡Œ)ã€åˆ›å»ºè®¡æ—¶å™¨ï¼ˆå°†è¶…æ—¶åŠ¨ä½œè¿æ¥åˆ°__onTimerå‡½æ•°ï¼‰ã€åˆ›å»º__handlersç©ºå­—å…¸ï¼ˆå­˜å‚¨å¯¹åº”äº‹ä»¶è°ƒç”¨å…³ç³»ï¼‰ ç»Ÿç­¹ç®¡ç†äº‹ä»¶çš„æ‰§è¡Œï¼Œåœ¨å…¶ä¸­å»ºç«‹èµ·äº‹ä»¶æ‰§è¡Œé˜Ÿåˆ—ç®¡ç†å‘é˜Ÿåˆ—ä¸­æ’å…¥äº‹ä»¶ï¼Œåˆ†é…äº‹ä»¶å¯¹è±¡ç±»å‹ï¼ˆæ®æ­¤æ³¨å†Œå…¶æ‰§è¡Œå‡½æ•°ï¼‰å’Œå…·ä½“äº‹ä»¶æ•°æ®ï¼ˆæ—¶é—´åŠæ—¥å¿—ï¼‰ï¼Œæ‹¥æœ‰æ³¨å†Œäº‹ä»¶å¤„ç†ç›‘å¬åŠæ³¨é”€ç›‘å¬ã€‚æœ€ç»ˆä½¿å¾—æ•´ä¸ªç¨‹åºæœ‰åºçš„è¿›è¡Œã€‚\nè°ƒç”¨å…³ç³» # ä¸»å¼•æ“åœ¨åˆå§‹åŒ–æ—¶å³å¯åŠ¨äº‹ä»¶é©±åŠ¨å¼•æ“ï¼ˆè°ƒç”¨å¯åŠ¨å‡½æ•°start()ï¼ˆå°†å¼•æ“å¼€å…³è®¾ä¸ºå¯åŠ¨ã€å¯åŠ¨äº‹ä»¶å¤„ç†çº¿ç¨‹ã€å¯åŠ¨è®¡æ—¶å™¨ï¼‰ï¼‰ -\u0026gt; äº‹ä»¶å¤„ç†çº¿ç¨‹è¿è¡Œç›®æ ‡__run()ï¼ˆè‹¥å¼€å…³å¼€åˆ™å°†ä»äº‹ä»¶é˜Ÿåˆ—ä¸­get()åˆ°äº‹ä»¶ï¼Œæ”¾åˆ°å¤„ç†å‡½æ•°__process()ä¸­æ‰§è¡Œï¼‰ -\u0026gt; __process()å¤„ç†äº‹ä»¶å‡½æ•°ï¼ˆæ£€æŸ¥äº‹ä»¶ç±»å‹ï¼Œåœ¨__handlerså­—å…¸ä¸­æ˜¯å¦æœ‰å¯¹æ­¤ç›‘å¬å¤„ç†å‡½æ•°ï¼Œè‹¥å­˜åœ¨åˆ™è°ƒç”¨å­—å…¸ä¸­å¤„ç†å‡½æ•°ï¼‰\näº‹ä»¶å¯åŠ¨å¼•æ“start()ä¸­å¯åŠ¨å®šæ—¶å™¨ -\u0026gt; åˆ›å»ºè®¡æ—¶å™¨äº‹ä»¶ -\u0026gt; å‘é˜Ÿåˆ—å­˜å…¥è®¡æ—¶å™¨äº‹ä»¶ è·å–åˆçº¦ä¿¡æ¯å¯¹è±¡ï¼š # ä»åˆçº¦å­—å…¸ä¸­è¯»å–åˆçº¦ä¿¡æ¯å¯¹è±¡æœ‰åˆ™ç»§ç»­æ‰§è¡ŒåŸæœ¬ç¨‹åºæ“ä½œï¼ˆè·å–åç§°ã€å‘å•æ’¤å•ï¼‰ï¼Œæ— åˆ™None\nä»¥åˆå§‹åŒ–æŸ¥è¯¢ä¸ºä¾‹ï¼š # ä¸»å¼•æ“åˆå§‹åŒ–ä¸­æ³¨å†Œself.ee.register(EVENT_TDLOGIN, self.initGet),EVENT_TDLOGINä¸ºäº¤æ˜“æœåŠ¡å™¨ç™»é™†æˆåŠŸäº‹ä»¶ã€‚å³æ­¤äº‹ä»¶ä¸ºç™»å½•æˆåŠŸåå¼€å§‹åˆå§‹åŒ–æŸ¥è¯¢ã€‚ æ­¥éª¤ï¼šæ‰“å¼€è®¾å®šæ–‡ä»¶setting.vnï¼Œå°è¯•è¯»å–è®¾å®šå­—å…¸ã€‚è½½å…¥åï¼Œè®¾å®šäº‹ä»¶ç±»å‹ã€å°†äº‹ä»¶æ¨å…¥äº‹ä»¶é˜Ÿåˆ—ã€æŸ¥è¯¢æŠ•èµ„è€…ã€å¾ªç¯æŸ¥è¯¢è´¦æˆ·å’ŒæŒä»“ã€‚ï¼ˆè‹¥ä¸å­˜åœ¨oråˆçº¦æ•°æ®éä»Šå¤©ï¼Œåˆ™å‘å‡ºè·å–åˆçº¦è¯·æ±‚ã€‚ï¼‰-\u0026gt; è·å–åˆçº¦ -\u0026gt; å®šä¹‰äº‹ä»¶ç±»å‹ -\u0026gt; æ¨å…¥äº‹ä»¶é˜Ÿåˆ— -\u0026gt; APIæŸ¥è¯¢åˆçº¦\nctpGateway æ¥å…¥æ–¹æ³• # è€ƒè™‘åˆ°ç°é˜¶æ®µå¤§éƒ¨åˆ†CTPä¸­çš„ExchangeIDå­—æ®µè¿”å›çš„éƒ½æ˜¯ç©ºå€¼ vtSymbolç›´æ¥ä½¿ç”¨symbol\nåˆ›å»ºCTPä»·æ ¼æ–¹å‘äº¤æ˜“æ‰€æŒä»“äº§å“ç­‰ç±»å‹æ˜ å°„ï¼Œæ–¹ä¾¿è°ƒç”¨ ç„¶å class CtpGateway(VtGateway):CTPæ¥å£ä¸­åˆå§‹åŒ–åŠ¨ä½œï¼ˆç»§æ‰¿VtGatewayå®ä¾‹åŒ–äº‹ä»¶å¼•æ“ã€è®¾å®šç½‘å…³åç§°ä¸ºâ€™CTPâ€˜ã€å®ä¾‹åŒ–ctpMdApiï¼ŒctpTdApiã€åˆå§‹åŒ–è¡Œæƒ…äº¤æ˜“è¿æ¥çŠ¶æ€ï¼Œå¾ªç¯æŸ¥è¯¢å…è®¸ï¼‰\nè¿æ¥è¿‡ç¨‹ åˆå§‹åŒ–è´¦å·å¯†ç ç­‰ã€è¿æ¥æœåŠ¡å™¨ã€æ³¨å†ŒæœåŠ¡å™¨åœ°å€ã€ç™»é™† è®¢é˜…åˆçº¦é‡Œæœ‰ä¸ªè®¾è®¡ä¸ºï¼šå°šæœªç™»é™†å°±è°ƒç”¨äº†è®¢é˜…åˆ™ä¿å­˜è®¢é˜…ä¿¡å·ï¼Œåˆ™åœ¨æˆåŠŸç™»é™†ä¹‹åçš„ç™»é™†å›æŠ¥å‡½æ•°ä¸­é‡æ–°è®¢é˜…\næ•°æ®è®°å½•å™¨ # drBase.pyä¸­ï¼ˆå®šä¹‰æ•°æ®ç±»å‹ï¼‰ï¼šï¼ˆæ•°æ®è®°å½•å™¨å’ŒCTAä¸¤æ¨¡å—å…±åŒä½¿ç”¨ï¼‰ # Kçº¿æ•°æ® æ„é€ å‡½æ•°ï¼ˆå®šä¹‰æ•°æ®ç±»å‹ï¼‰ï¼švtç³»ç»Ÿä»£ç ã€åˆçº¦ä»£ç ã€äº¤æ˜“æ‰€ä»£ç ã€å¼€é«˜ä½ å…³ã€barå¼€å§‹æ—¶é—´ã€æ—¶é—´ã€æˆäº¤é‡æŒä»“é‡ Tickæ•°æ® æ„é€ å‡½æ•°ï¼ˆå®šä¹‰æ•°æ®ç±»å‹ï¼‰ï¼švtç³»ç»Ÿä»£ç ã€åˆçº¦ä»£ç ã€äº¤æ˜“æ‰€ä»£ç ã€æˆäº¤æ•° æ®ã€tickæ—¶é—´ã€äº”æ¡£è¡Œæƒ… DrEngineæ•°æ®è®°å½•å¼•æ“ # è·å–å½“å‰æ–‡ä»¶ç»å¯¹è·¯å¾„\nsettingFileName = 'DR_setting.json' path = os.path.abspath(os.path.dirname(__file__)) settingFileName = os.path.join(path, settingFileName) åˆå§‹åŒ–ä¸­åŠ¨ä½œï¼šå®ä¾‹åŒ–è®¾ç½®ä¸»å¼•æ“ã€äº‹ä»¶å¼•æ“ã€è·å–å½“å‰æ—¥æœŸã€åˆ›å»ºä¸»åŠ›åˆçº¦ä»£ç æ˜ å°„å­—å…¸ã€Tickå¯¹è±¡å­—å…¸ã€Kçº¿å¯¹è±¡å­—å…¸ã€åˆå§‹åŒ–æ•°æ®åº“æ’å…¥å•ç‹¬çº¿ç¨‹ã€è½½å…¥è®¾ç½®ï¼Œè®¢é˜…è¡Œæƒ…\nè½½å…¥è®¾ç½®ã€è®¢é˜…è¡Œæƒ… # æ‰“å¼€DR_setting.jsonæ–‡ä»¶ï¼Œä»¥jsonè½½å…¥ï¼Œå…¶ä¸­â€™workingâ€˜å†³å®šæ˜¯å¦å¯åŠ¨è¡Œæƒ…è®°å½•åŠŸèƒ½ã€‚éšåä»jsonæ–‡ä»¶ä¸­å¾ªç¯è·å–åˆçº¦ä»£ç è®¢é˜…tickå’Œbar\nå¯åŠ¨æ•°æ®æ’å…¥çº¿ç¨‹ï¼ˆrunå‡½æ•°ï¼ˆå‘MongoDBä¸­æ’å…¥æ•°æ®ï¼‰ï¼‰ã€æ³¨å†Œäº‹ä»¶ç›‘å¬ï¼ˆprocecssTickEventå¤„ç†è¡Œæƒ…æ¨é€ï¼ˆä¸‹è¯¦ï¼‰ï¼‰\nå¤„ç†è¡Œæƒ…æ¨é€ # ä»äº‹ä»¶å­—å…¸ä¸­å–å‡ºä¿å­˜çš„å…·ä½“äº‹ä»¶æ•°æ®ã€vtSymbolä¸ºtickè¯†åˆ«ä¿¡å·ï¼ˆåˆçº¦ä»£ç ï¼‰ã€è½¬åŒ–Tickæ ¼å¼ã€æ›´æ–°TIckæ•°æ®ï¼ˆå¹¶å‘å‡ºæ—¥å¿—ï¼‰ã€æ›´æ–°åˆ†é’Ÿçº¿æ•°æ®\né£æ§æ¨¡å— # ä»é…ç½®jsonæ–‡ä»¶ä¸­è¯»å–è®¾å®šä¿¡æ¯ æ“ä½œè¿ä½œï¼š1.æ£€æµ‹é£æ§è®¾å®šå€¼å˜åŒ– 2.æ¯ç¬”äº¤æ˜“å‘å•æ—¶ä½¿ç”¨é£æ§æ¨¡å—å†³å®šè¯¥æ¬¡å‘å•æ˜¯å¦å…è®¸ ï¼ˆå…¶ä¸­æµæ§è®¡æ•°åœ¨æ¯æ¬¡è°ƒç”¨é£æ§æ£€æµ‹æ—¶è®¡æ•°ã€æˆäº¤åˆçº¦é‡åœ¨æ›´æ–°æˆäº¤æ•°æ®ä¸­åŠ äº¤æ˜“æ•°å€¼ï¼‰\nCTAç­–ç•¥ # ç›´æ¥æ¥åˆ°æ”¹ç‰ˆä¹‹åï¼š\nCTPäº¤æ˜“æ‰˜ç®¡API # ä»‹ç» # åŸºäºC++çš„ç±»åº“ï¼Œé€šè¿‡ä½¿ç”¨æä¾›æ¥å£å®ç°ç›¸å…³äº¤æ˜“åŠŸèƒ½ï¼Œå«ï¼šæŠ¥å•ä¸æŠ¥ä»·å½•å…¥ã€çš„æ’¤é”€ã€çš„æŒ‚èµ·ã€çš„æ¿€æ´»ã€çš„ä¿®æ”¹ã€çš„æŸ¥è¯¢ã€æˆäº¤å•æŸ¥è¯¢ã€æŠ•èµ„è€…æŸ¥è¯¢ã€ æŠ•èµ„è€…æŒä»“æŸ¥è¯¢ã€åˆçº¦æŸ¥è¯¢ã€äº¤æ˜“æ—¥è·å–ç­‰\nå«æ–‡ä»¶ï¼šäº¤æ˜“æ¥å£ã€APIæ‰€éœ€æ•°æ®ç±»å‹ã€ä¸šåŠ¡ç›¸å…³æ•°æ®ç»“æ„iã€çš„å¤´æ–‡ä»¶ã€åŠ¨æ€é“¾æ¥åº“ã€å¯¼å…¥åº“\nä½“ç³»ç»“æ„ # å»ºç«‹åœ¨TCPåè®®ä¹‹ä¸ŠFTDåè®®ä¸äº¤æ˜“æ‰˜ç®¡ç³»ç»Ÿè¿›è¡Œé€šè®¯ FTDé€šè®¯æ¨¡å¼ï¼š\nå¯¹è¯é€šè®¯æ¨¡å¼ - ä¼šå‘˜ç«¯è¯·æ±‚ã€æ¥æ”¶å¤„ç†ã€å“åº” ç§æœ‰é€šè®¯æ¨¡å¼ - äº¤æ˜“æ‰€ä¸»åŠ¨å‘ç‰¹å®šä¼šå‘˜å‘å‡º å¹¿æ’­é€šè®¯æ¨¡å¼ - äº¤æ˜“æ‰€ä¸»åŠ¨ã€å…¨å‘˜å‘é€ æ¥å£æ¨¡å¼ # CThostFtdeTraderApiå’ŒCThostFtdeTraderSpiï¼Œå‰è€…å‘é€è¯·æ±‚ï¼Œåè€…å›è°ƒå“åº”ã€‚æ——ä¸‹å‡½æ•°æ–¹æ³•å‰è€…ä»¥Reqå¼€å¤´åè€…ä»¥OnRspå¼€å¤´ã€‚è¯·æ±‚æ¥å£ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¯·æ±‚çš„å†…å®¹ï¼Œä¸èƒ½ä¸ºç©ºã€‚ç¬¬äºŒä¸ªå‚æ•°ä¸ºè¯·æ±‚å·ã€‚\nå¦‚æœæ¥æ”¶åˆ°çš„å“åº”æ•°æ®ä¸æ­¢ä¸€ä¸ªï¼Œåˆ™å›è°ƒå‡½æ•°ä¼šè¢«å¤šæ¬¡è°ƒç”¨ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå“åº”çš„å…·ä½“æ•°æ®ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå¤„ç†ç»“æœï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºè¯·æ±‚å·ï¼Œç¬¬å››ä¸ªå‚æ•°ä¸ºå“åº”ç»“æŸæ ‡å¿—ï¼Œè¡¨æ˜æ˜¯å¦æ˜¯æœ¬æ¬¡å“åº”çš„æœ€åä¸€æ¬¡å›è°ƒã€‚\nè¿è¡Œæ¨¡å¼ # è‡³å°‘ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªä¸ºåº”ç”¨ç¨‹åºä¸»çº¿ç¨‹ï¼Œä¸€ä¸ªä¸ºäº¤æ˜“å‘˜APIå·¥ä½œçº¿ç¨‹ï¼Œå…¶é—´é€šè®¯ç”±APIå·¥ä½œçº¿ç¨‹é©±åŠ¨ã€‚\næ’¤å• å‘å• # å‘å•ä¸ºä¾‹ï¼š # åœ¨ç”¨æˆ·ç‚¹å‡»å‘å•ä¹‹åï¼Œç¨‹åºä»â€œäº¤æ˜“â€æ çš„text()è·å–åˆçº¦ä»£ç ï¼Œéšåä»è¯¦ç»†åˆçº¦ä¿å­˜å­—å…¸ä¸­è¯»å–å…¶ä»–ä¿¡æ¯ï¼Œå°†ä¹‹ä¿å­˜åˆ°ä¸€ä¸ªå­—å…¸ä¸­ä¹‹åï¼Œè°ƒç”¨ä¸»å¼•æ“å¯¹ç‰¹å®šæ¥å£å‘å•ã€‚\nå‘å•å®Œæˆä¹‹åï¼Œé©¬ä¸Šä¼šæ”¶åˆ°æŠ¥å•å“åº” OnRspOrderInsertï¼Œè¯´æ˜äº¤æ˜“ç³»ç»Ÿå·²ç»æ”¶åˆ°æŠ¥å•ã€‚æŠ¥å•è¿›å…¥äº¤æ˜“ç³»ç»Ÿåï¼Œå¦‚æœæŠ¥å•çš„äº¤æ˜“çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šæ”¶åˆ°æŠ¥å•å›æŠ¥ OnRtnOrderã€‚å¦‚æœæŠ¥å•è¢«æ’®(éƒ¨åˆ†)æˆäº¤ï¼Œå°±ä¼šæ”¶åˆ°æˆäº¤å›æŠ¥ OnRtnTradeã€‚é€šè¿‡æ›´æ–°\næ’¤å•æ—¶ï¼š # ç¨‹åºä»å•å…ƒæ ¼ä¸­è·å–exchangeã€frontIDã€orderIDã€sessionIDã€symbolã€gatewayNameç­‰ä¿¡æ¯ï¼Œè°ƒç”¨ä¸»å¼•æ“å¯¹ç‰¹å®šæ¥å£æ’¤å•ã€‚æ’¤å•æ—¶è°ƒç”¨Apiå‡½æ•°ä¸ºreqOrderActionå…¶å†…å®¹åŒ…æ‹¬æ’¤é”€ã€æŒ‚èµ·ã€æ¿€æ´»ã€ä¿®æ”¹ï¼Œæ•…è¿˜éœ€ä¸€ä¸ªFlagå‚æ•°\npsï¼šå¦‚æœæŠ¥å•è¿˜åœç•™åœ¨ Thostï¼ŒThost å¯ä»¥ç”¨ Front ã€SessionIDã€OrderRef æ¥å®šä½ å¦‚æœæŠ¥å•åœç•™åœ¨äº¤æ˜“æ‰€ï¼ŒThost å¯ä»¥ç”¨ ExchangIDã€OrderSysID æ¥å®šä½ï¼Œç„¶åå‘äº¤æ˜“ æ‰€è½¬å‘æ’¤å•æŒ‡ä»¤ã€‚\nTraderApiæ‰€æœ‰æ–¹æ³•åŠŸèƒ½ # OnFrontConnected/Disconnected # å®¢æˆ·ç«¯ä¸äº¤æ˜“æ‰˜ç®¡ç³»ç»Ÿå»ºç«‹èµ·é€šä¿¡è¿æ¥æ—¶ OnHeartBeatWarning # å½“é•¿æ—¶é—´æœªæ”¶åˆ°æŠ¥æ–‡æ—¶ OnRspUserLogin/Logout # ç™»é™†æ³¨é”€å“åº” OnRspUserPasswordUpdate # æ”¹å¯†å“åº” OnRspTradingAccountPasswordUpdate # å½“å®¢æˆ·ç«¯å‘å‡ºèµ„é‡‘è´¦æˆ·å£ä»¤æ›´æ–°æŒ‡ä»¤åï¼Œäº¤æ˜“æ‰˜ç®¡ç³»ç»Ÿè¿”å›å“åº”æ—¶ OnRspError # è¯·æ±‚å‡ºé”™æ—¶ OnRspOrderInsert # æŠ¥å•å½•å…¥ OnRspOrderAction # æŠ¥å•æ“ä½œåŒ…æ‹¬æŠ¥å•çš„æ’¤é”€ã€æŠ¥å•çš„æŒ‚èµ·ã€æŠ¥å•çš„æ¿€æ´»ã€æŠ¥å•çš„ä¿®æ”¹ã€‚å½“å®¢æˆ·ç«¯ å‘å‡ºè¿‡æŠ¥å•æ“ä½œæŒ‡ä»¤åï¼Œäº¤æ˜“æ‰˜ç®¡ç³»ç»Ÿè¿”å›å“åº”æ—¶ OnRspQueryMaxOrderVolume # æŸ¥è¯¢æœ€å¤§æŠ¥å• OnRspSettlementInfoConfirm # å½“å®¢æˆ·ç«¯å‘å‡ºæŠ•èµ„è€…ç»“ç®—ç»“æœç¡®è®¤æŒ‡ä»¤åï¼Œäº¤æ˜“æ‰˜ç®¡ç³»ç»Ÿè¿”å›å“åº”æ—¶ ç­‰â€¦â€¦ lol ç»Ÿè®¡æ— åŠ› ï¼Ÿ\nCTA ç­–ç•¥å¼•æ“ # _init_()çš„å·¥ä½œï¼š # åŠ è½½ä¸»å¼•æ“ã€äº‹ä»¶å¼•æ“ï¼›è·å–å½“å‰æ—¥æœŸ è®¾å®šæ˜¯å¦åœ¨å›æµ‹ ä¿å­˜ç­–ç•¥å®ä¾‹çš„å­—å…¸strategyDict(keyä¸ºç­–ç•¥åç§°ï¼Œvalueä¸ºç­–ç•¥å®ä¾‹)ã€ ä¿å­˜vtSymbolå’Œç­–ç•¥å®ä¾‹æ˜ å°„çš„å­—å…¸(ç”¨äºæ¨é€tickæ•°æ®ï¼Œå¯èƒ½å¤šä¸ªç­–ç•¥äº¤æ˜“åŒä¸€ä¸ªvtSymbolå› æ­¤keyä¸ºvtSymbol.valueä¸ºåŒ…å«æ‰€æœ‰ç›¸å…³ç­–ç•¥å¯¹è±¡çš„list)ã€ ä¿å­˜vtOrderIDå’Œstrategyå¯¹è±¡æ˜ å°„çš„å­—å…¸(ç”¨äºæ¨é€orderå’Œtradeæ•°æ®keyä¸ºvtOrderIDï¼Œvalueä¸ºstrategyå¯¹è±¡ï¼‰ã€ æœ¬åœ°åœæ­¢å•ç¼–å·è®¡æ•°ã€æœ¬åœ°åœæ­¢å•å­—å…¸(keyä¸ºstopOrderIDï¼Œvalueä¸ºstopOrderå¯¹è±¡)ã€ æŒä»“ç¼“å­˜å­—å…¸(keyä¸ºvtSymbolï¼Œvalueä¸ºPositionBufferå¯¹è±¡)ã€ æˆäº¤å·é›†åˆã€ è®¾ç½®å¼•æ“ç±»å‹ä¸ºå®ç›˜ã€ æ³¨å†Œäº‹ä»¶ç›‘å¬ åˆå§‹åŒ–ç­–ç•¥ # ä»æ•°æ®åº“ä¸­è¯»å–3å¤©çš„å†å²TICKæ•°æ®ã€è¡Œæƒ…æ›´æ–°ã€‚ã€‚ã€‚ã€‚ã€‚æœ‰çš„è¯å¾…ç»­\nå¯åŠ¨ç­–ç•¥ # ä»ç­–ç•¥å®ä¾‹å­—å…¸ä¸­å–å‡ºç­–ç•¥å®ä¾‹ï¼Œè°ƒç”¨ç­–ç•¥å‡½æ•°ï¼ˆå·²ç»åˆå§‹åŒ–ï¼Œæ²¡æœ‰åœ¨è¿›è¡Œç­–ç•¥äº¤æ˜“ï¼‰ï¼Œå¼€å¯è¿›è¡Œäº¤æ˜“æ ‡å¿—ä½ã€‚\nåœæ­¢ç­–ç•¥ # ä»ç­–ç•¥å®ä¾‹å­—å…¸ä¸­å–å‡ºç­–ç•¥å®ä¾‹ï¼Œè°ƒç”¨ç­–ç•¥å‡½æ•°ï¼ˆ åœ¨è¿›è¡Œç­–ç•¥äº¤æ˜“ï¼‰ï¼Œå…³é—­ç­–ç•¥äº¤æ˜“æ ‡å¿—ä½ -\u0026gt; å¯¹è¯¥ç­–ç•¥å‘å‡ºçš„æ‰€æœ‰é™ä»·å•è¿›è¡Œæ’¤å• -\u0026gt; å‘å‡ºçš„æ‰€æœ‰æœ¬åœ°åœæ­¢å•æ’¤å• -\u0026gt;\nä¿å­˜ã€è¯»å–ç­–ç•¥é…ç½® # è§¦å‘ç­–ç•¥çŠ¶æ€å˜åŒ–äº‹ä»¶ï¼ˆé€šå¸¸ç”¨äºé€šçŸ¥GUIæ›´æ–°ï¼‰ è·å–ç­–ç•¥çš„å‚æ•°å­—å…¸ è·å–ç­–ç•¥å½“å‰çš„å˜é‡å­—å…¸\nè®°å½• # æŠ¥å•æ›´æ–°ã€æˆäº¤æ›´æ–°éƒ½æ˜¯å…ˆæ£€æµ‹æ˜¯å¦æœ‰å¯¹æ­¤ç›‘å¬çš„ç­–ç•¥ é™ä»·å•æˆäº¤å¤„ç†ï¼šæˆäº¤å›æŠ¥ã€æŠ¥å•å›æŠ¥ã€è®°å½•æˆäº¤åˆ°åˆ—è¡¨ã€åˆ é™¤è¯¥é™ä»·å•\nåŸºç¡€åŠŸèƒ½çš„ç­–ç•¥è°ƒç”¨ # ç­–ç•¥ä¸­å‘å•æ—¶ï¼Œéœ€è¦åœ¨è®¾ç½®å‚æ•°æ—¶è€ƒè™‘è®¾ç½®ã€‚ å¦è·å–æŒä»“ç¼“å­˜æ•°æ®ï¼Œåšå¹³æ˜¨å¹³ä»Šçš„é€‰æ‹©ã€‚ ç­–ç•¥ä¸­å‘å•æ—¶ï¼Œæ£€æŸ¥æŠ¥å•æ˜¯å¦æœ‰æ•ˆï¼Œèµ‹å‚ï¼Œæ’¤å•ã€‚ å‘åœæ­¢å•ï¼Œç¼–å·ï¼Œèµ‹å‚ï¼Œä¿å­˜è‡³å­—å…¸ æ’¤åœæ­¢å•ï¼Œä»å·¥ä½œåœæ­¢å•å­—å…¸ä¸­ç§»é™¤\nTa-Lib # è¶‹åŠ¿ç­–ç•¥åˆ†ä¸ºä»¥ä¸‹éƒ¨åˆ†ï¼š\nè¶‹åŠ¿ä¿¡å·ï¼ˆé€šå¸¸æ˜¯åŸºäºæŸå‡ ä¸ªå‚æ•°è®¡ç®—å‡ºæ¥çš„æŒ‡æ ‡å€¼è¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼‰ã€ ä¿¡å·è¿‡æ»¤ï¼ˆå’Œè¶‹åŠ¿ä¿¡å·ç±»ä¼¼ï¼‰ã€ å‡ºåœºæ–¹æ¡ˆï¼ˆå›ºå®šç‚¹æ•°/ç™¾åˆ†æ¯”çš„æ­¢ç›ˆå’Œæ­¢æŸï¼Œç§»åŠ¨æ­¢æŸï¼‰ã€‚ æ‰€ä»¥ï¼ŒTa-libæ˜¯ç­–ç•¥å®ç°å·¥å…·ç½¢äº†ã€‚ æ­¤åº“ä¸­æä¾›äº†å¤šç§æŠ€æœ¯åˆ†æçš„å‡½æ•°ï¼Œæœ‰å¤šç§æŒ‡æ ‡ï¼šADXã€MACDã€RSIã€å¸ƒæ—è½¨é“ç­‰ ï¼›Kçº¿å½¢æ€è¯†åˆ«ï¼Œå¦‚â€œé»„æ˜ä¹‹æ˜Ÿâ€ã€â€œé”¤å½¢çº¿â€ç­‰ã€‚\nä¾é æ­¤åº“å¯¹æ•°æ®çš„åˆ†æï¼Œæ¥ä¸‹è¾¾å‘å•æ’¤å•çš„åŠ¨ä½œå³ä¸ºç­–ç•¥ã€‚\nç­–ç•¥ç¤ºä¾‹ï¼š # åŸºäºTalibæ¨¡å—çš„åŒæŒ‡æ•°å‡çº¿ç­–ç•¥`class TalibDoubleSmaDemo(CtaTemplate):` å°±æ˜¯ä¸¤ä¸ªæŒ‡æ ‡çš„æ•°æ®æ¥åˆ¤æ–­å½“å‰å±€åŠ¿ç½¢äº†\nè®¾å®šç­–ç•¥å‚æ•° ç­–ç•¥å˜é‡ å‚æ•°åˆ—è¡¨ï¼ˆä¿å­˜å‚æ•°åç§°ï¼‰ å˜é‡åˆ—è¡¨ï¼ˆä¿å­˜å˜é‡åç§°ï¼‰ æ­¥éª¤ # åˆå§‹åŒ–ç­–ç•¥ï¼ˆåŠ è½½Baræ•°æ®ï¼‰ã€å¯åŠ¨ç­–ç•¥ã€åœæ­¢ç­–ç•¥ã€æ”¶åˆ°è¡Œæƒ…Tickæ¨é€ï¼ˆè®¡ç®—Kçº¿ï¼‰ã€æ”¶åˆ°Baræ¨é€ï¼ˆç¼“å­˜æœ€æ–°æ”¶ç›˜ä»·åˆ°åˆ—è¡¨ -\u0026gt; æ•°é‡è¶³å¤Ÿåè½¬åŒ–ä¸ºNumpyæ•°ç»„åä¼ å…¥talibå‡½æ•°SMAä¸­è®¡ç®— -\u0026gt; è¯»å–å½“å‰Kçº¿å’Œä¸Šä¸€æ ¹Kçº¿æ•°å€¼ï¼Œç”¨äºåˆ¤æ–­å‡çº¿äº¤å‰ -\u0026gt; æ£€æµ‹æŒä»“çŠ¶æ€ï¼Œåšå‡ºç›¸åº”äº¤æ˜“åŠ¨ä½œï¼‰\nCTAå›æµ‹ # _init_()çš„å·¥ä½œ # æœ¬åœ°åœæ­¢å•ç¼–å·è®¡æ•° self.stopOrderCount æœ¬åœ°åœæ­¢å•å­—å…¸ self.stopOrderDict And self.workingStopOrderDict è®¾å¼•æ“ç±»å‹ä¸ºå›æµ‹ å›æµ‹ç›¸å…³å˜é‡å®šä¹‰ å½“å‰æœ€æ–°æ•°æ®ï¼Œç”¨äºæ¨¡æ‹Ÿæˆäº¤ä½¿ç”¨ è¿è¡Œå›æµ‹ # è½½å…¥å†å²æ•°æ®\næ ¹æ®å›æµ‹æ¨¡å¼ç¡®å®šè¦ä½¿ç”¨æ•°æ®ç±»\nåˆå§‹åŒ–ç­–ç•¥\nå¯åŠ¨ç­–ç•¥\nå›æ”¾æ•°æ®ï¼ˆä»æ•°æ®åº“ä¸­å–å¾—æ¨åˆ°newBaræˆ–è€…newTickï¼‰\nç­–ç•¥è·å¾—æ–°æ•°æ®ï¼Œæ‰§è¡Œç›¸åº”æ“ä½œ\nåŸºäºæœ€æ–°æ•°æ®æ’®åˆé™ä»·å• # å…ˆç¡®å®šä¼šæ’®åˆæˆäº¤çš„ä»·æ ¼ -\u0026gt; éå†é™ä»·å•å­—å…¸ä¸­æ‰€æœ‰é™ä»·å• -\u0026gt; åˆ¤æ–­æ˜¯å¦ä¼šæˆäº¤ -\u0026gt; å‘ç”Ÿæˆäº¤æ¨é€æˆäº¤æ•°æ®ï¼ˆä¹°å…¥ -\u0026gt; å¢åŠ æŒä»“ æ¨é€å§”æ‰˜æ•°æ®ã€ä»å­—å…¸ä¸­åˆ é™¤è¯¥é™ä»·å•ï¼‰\nè®¡ç®—åŸç† # æ”¹ç‰ˆä¹‹åç¨‹åºæ¶æ„ # | | | | | | | | | | | | | |:\u0026mdash;- |\u0026mdash; | \u0026mdash; | |\u0026mdash; |\u0026mdash; |\u0026mdash;- | \u0026mdash; | \u0026mdash; | \u0026mdash; |\u0026mdash; |\u0026mdash;: | | |APIs | |*** | | | | | Trader | | | | |CTP | |KSGold |*** |Common |Condig |Core|Gateway |Setting |Strategy |UI |main| |CtpMdApiã€CtpTdApi | â€¦â€¦â€¦â€¦ | â€¦â€¦â€¦â€¦ |Mdã€Td| â€¦â€¦â€¦â€¦â€¦â€¦ | â€¦â€¦â€¦â€¦â€¦â€¦ |CTAã€HTAã€å¼•æ“ã€äº‹ä»¶ç®¡ç†| â€¦â€¦â€¦â€¦â€¦â€¦ |é…ç½®æ–‡ä»¶| â€¦â€¦â€¦â€¦â€¦â€¦ | â€¦â€¦â€¦â€¦â€¦â€¦ | â€¦â€¦â€¦â€¦â€¦â€¦ |\näº‹ä»¶å¼•æ“ # ä¸¤ç‰ˆéƒ½ä¸€æ ·ï¼Œä½œä¸ºä¸€ä¸ªç¨‹åºè¿è¡Œæœ€å¤–å±‚çš„ç”Ÿæˆçš„å®ä¾‹ï¼Œæ¥è¿›è¡Œå„ä¸ªå®ä¾‹ä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚å› ä¸ºæ¯ä¸ªå®ä¾‹éƒ½å°†æ•°æ®åœ¨äº‹ä»¶å¼•æ“ä¸­ä¿å­˜ï¼Œè°ƒç”¨äº‹ä»¶å¼•æ“ä¸­çš„äº‹ä»¶é˜Ÿåˆ—æ¥å¯¹è¿›è¡Œäº‹ä»¶è¿è¡Œå®‰æ’ã€‚\nLike Thisï¼š\nclass A(object): \u0026quot;\u0026quot;\u0026quot;docstring for A\u0026quot;\u0026quot;\u0026quot; def __init__(self, name): super(A, self).__init__() self.name = name self.a = 0 def da(self): print self.name print self.a a = A('I am A') a.da() class B(object): \u0026quot;\u0026quot;\u0026quot;docstring for B\u0026quot;\u0026quot;\u0026quot; def __init__(self, aclass): super(B, self).__init__() self.aclass = aclass self.aclass.a += 1 def dada(self): self.aclass.da() b = B(a) b.dada() class C(object): \u0026quot;\u0026quot;\u0026quot;docstring for B\u0026quot;\u0026quot;\u0026quot; def __init__(self, aclass): super(C, self).__init__() self.aclass = aclass self.aclass.a += 1 def dada(self): self.aclass.da() c = C(a) c.dada() I am A\n0\nI am A\n1\nI am A\n2\nBä¸Cåˆ†åˆ«åœ¨å»æ”¹å˜è¯»å–åœ¨Aä¸­å®šä¹‰çš„æ•°å€¼ã€‚ å—¯ï¼Œæ²¡é”™ï¼Œè¿™ä¹ˆçœ‹çš„ç”»ç¡®å®æ—¶PythonåŸºç¡€â€¦â€¦æ‰€ä»¥æ²¡æœ‰è¿™ä¸ªåŸºç¡€çš„æˆ‘çœ‹èµ·æ¥å‰æœŸè¿˜æŒºè´¹åŠ²ã€‚å½“ç„¶ï¼Œç†è§£å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯åœ¨å®ç°æ–¹æ³•ä¸Šä¸çŸ¥åŸç†çš„è¯å°±å¾ˆéš¾è¿‡ã€‚æœ€ä¸»è¦çš„æ˜¯ï¼ŒçŸ¥é“äº†åŸç†åœ¨è‡ªå·±ç¼–å†™çš„æ—¶å€™å¯ä»¥çš„å¿ƒç”¨æ‰‹ï¼Œä¿¡æ‰‹æ‹ˆæ¥ã€‚å—¯~ o(ï¿£â–½ï¿£)oå°±æ˜¯è¿™ä¹ˆå†™æ„å’Œæƒ¬æ„ã€‚Indigoè‰²åœ¨çº¯é»‘èƒŒæ™¯ä¸‹ä¸å¥½è¾¨è¯†å“ˆå“ˆï¼Œè¿˜æ˜¯æ¢å°‘å¥³ç²‰å§\nVn.Py ç•Œé¢ # Icon å›¾æ ‡ä¸‹è½½ç½‘: http://www.easyicon.net/\nç•Œé¢è®¾è®¡æ–‡æ¡£ # åŠŸèƒ½è¦æ±‚ # è¿æ¥ã€ç™»é™†ï¼Œè®¢é˜…ï¼Œå‘æ’¤å•ï¼ŒæŒä»“ã€è´¦æˆ·ä¿¡æ¯ã€æˆäº¤ï¼ˆä¸‹å•æ—¶é—´ã€æˆäº¤æ—¶é—´ã€å¤‡æ³¨ï¼ˆä¸‹å•åŠ¨ä½œè€…ï¼‰ï¼‰ã€ä¿ç•™äº¤æ˜“æ¨¡å—ã€è·Ÿéšé¼ æ ‡ç‚¹å‡»æ›´æ–°äº¤æ˜“æ¨¡å—ä¸­å•å­å†…å®¹\næ–‡æ¡£ç¼–å†™æ­¥éª¤ # ç”±éœ€æ±‚ç¡®å®šåŠŸèƒ½ï¼Œåˆ’åˆ†æ¨¡å—ï¼Œæ¨¡å—å…³ç³»ï¼Œä¸‹åˆ†æ¡†æ¶ï¼Œæ¡†æ¶å®ç°\næ¨¡å— # å·¥å…·æ ã€è¡Œæƒ…æ˜¾ç¤ºã€ç­–ç•¥æ± ã€è´¦æˆ·æŒä»“ã€æ¶ˆæ¯æ \nå·¥å…·æ  # è¿æ¥ï¼ˆå«å„ä¸ªç«¯å£ï¼‰ é£æ§ã€å¸®åŠ©ã€ç™»é™†çŠ¶æ€æ˜¾ç¤º\nå·¥å…·åŠŸèƒ½ # å·¥å…·åç§° è¯´æ˜ å¤‡æ³¨ è¿æ¥ å¼¹å‡ºç«¯å£åˆ—è¡¨ é€šè¿‡å¤é€‰æ¡†é€‰ä¸­å¯¹åº”ç«¯å£ é£æ§ å¼¹å‡ºè®¾å®šåˆ—è¡¨ é€šè¿‡æ–‡æœ¬æ¡†è¾“å…¥è®¾å®šæ•°å€¼ å¸®åŠ© å¼¹å‡ºå¸®åŠ©çª—å£ ç­–ç•¥æ±  # æ“ä½œä½ç½® çƒ­ç‚¹æ“ä½œ ç­–ç•¥åç§°å•å…ƒæ ¼ é¼ æ ‡æŒ‡é’ˆæ‚¬åœ å±•å¼€æ“ä½œç•Œé¢ åŠ¨ä½œæŒ‰é’® é¼ æ ‡å•å‡» æ‰§è¡Œé€‰ä¸­ åŠ¨ä½œæŒ‰é’® é¼ æ ‡å³å‡» å±•å¼€æ“ä½œç•Œé¢ æ¶ˆæ¯æ  # åˆ†â€œæˆäº¤â€ã€â€œé”™è¯¯â€ã€â€œæ—¥å¿—â€ä¸‰ä¸ªæ¨¡å—ï¼Œé€‰æ‹©ç›¸åº”æ¨¡å—æ˜¾ç¤ºå¯¹åº”å†…å®¹\næ—¥å¿— é”™è¯¯ æˆäº¤ æ—¶é—´ã€å†…å®¹ã€æ¥å£ æ—¶é—´ã€é”™è¯¯ä»£ç ã€é”™è¯¯ä¿¡æ¯ã€æ¥å£ æˆäº¤ç¼–å·ã€å§”æ‰˜ç¼–å·ã€åˆçº¦ä»£ç ã€åç§°ã€æ–¹å‘ã€å¼€å¹³ã€ä»·æ ¼ã€æˆäº¤é‡ã€æˆäº¤æ—¶é—´ã€æ¥å£ æ˜¾ç¤ºæ“ä½œæ—¥å¿— æ˜¾ç¤ºå½“å‰æ“ä½œé”™è¯¯ä¿¡æ¯ æ˜¾ç¤ºæˆäº¤å•ä¿¡æ¯ è´¦æˆ·æŒä»“ä¿¡æ¯ # è´¦æˆ·æ˜¾ç¤ºè´¦æˆ·ä¿¡æ¯ï¼Œå¹¶å…·å¤‡åˆ‡æ¢è´¦æˆ·åŠŸèƒ½ å½“å‰é€‰ä¸­è´¦æˆ· æ˜¾ç¤ºåœ¨æ—labelä¸­ã€‚\nç•Œé¢åˆ‡æ¢ # è®°å½•ç¬”è®° # ç…§ä¾‹ï¼Œå…ˆè´´ç½‘å€ï¼š http://www.qaulau.com/books/PyQt4_Tutorial/index.html\nçª—å£è®¾ç½® # resize(8, 8) setWindowTitle(u'æ ‡é¢˜') è·å–å›¾æ ‡ # def getIcon(filename): \u0026quot;\u0026quot;\u0026quot; è·å–å›¾æ ‡ \u0026quot;\u0026quot;\u0026quot; fileInfo = Qt.QFileInfo(filename) fileIcon = Qt.QFileIconProvider() icon = QtGui.QIcon(fileIcon.icon(fileInfo)) return icon ä½¿ç”¨æ—¶ï¼š self.setWindowIcon(getIcon('../hi/app.ico')) Dock # widgetTestM, dockTestM = self.createDock(AllMarketMonitor, vtText.â€œdock æ ‡é¢˜â€, QtCore.Qt.RightDockWidgetArea) # æ–¹å‘æœ‰ï¼š RightDockWidgetArea,BottomDockWidgetArea,LeftDockWidgetArea # åˆ›å»ºdockçª—å£ # å¯åˆ©ç”¨ self.tabifyDockWidget(dockMarketM, dockAllDataM) æ¥åˆå¹¶åŒä¸€ä¸ªæ–¹å‘ä¸Šçš„dock # æ­¤ä¸‹è¿˜æ²¡çœ‹â€¦ dockTradeM.raise_() dockPositionM.raise_() # è¿æ¥ç»„ä»¶ä¹‹é—´çš„ä¿¡å· widgetPositionM.itemDoubleClicked.connect(widgetTradingW.closePosition) # ä¿å­˜é»˜è®¤è®¾ç½® self.saveWindowSettings('default') å…¶å®ç°å‡½æ•°ä¸ºï¼š \u0026ldquo;\u0026ldquo;\u0026ldquo;åˆ›å»ºåœé ç»„ä»¶\u0026rdquo;\u0026rdquo;\u0026rdquo;\ndef createDock(self, widgetClass, widgetName, widgetArea): widget = widgetClass(self.mainEngine, self.eventEngine) dock = QtGui.QDockWidget(widgetName) dock.setWidget(widget) dock.setObjectName(widgetName) dock.setFeatures(dock.DockWidgetFloatable|dock.DockWidgetMovable) self.addDockWidget(widgetArea, dock) return widget, dock å†æœ¬è´¨ä¸€ç‚¹çš„ä¸œè¥¿ä¸ºï¼š\nwidget1 = Ha(self) dock = QtGui.QDockWidget('haha') dock.setObjectName('ha1') dock.setWidget(widget1) dock.setFeatures(dock.DockWidgetFloatable | dock.DockWidgetMovable) self.addDockWidget(QtCore.Qt.BottomDockWidgetArea, dock) åŠ¨ä½œ # exit = QtGui.QAction(QtGui.QIcon('hello.ico'), 'exit', self) exit.setShortcut('Ctrl+Q') exit.setStatusTip('Exit application') # å›¾æ ‡ã€æ–‡å­—ã€å¿«æ·é”®ã€æç¤ºä¿¡æ¯ menubar = self.menuBar() file = menubar.addMenu('\u0026amp;File') file.addAction(exit) # åˆ›å»ºç›®å½•å’Œå·¥å…·æ ï¼Œå°†åŠ¨ä½œæ·»åŠ è¿›å»ã€‚å·¥å…·æ åŒç† å®šä½å¸ƒå±€ # ç»å¯¹å®šä½ # label1 = QtGui.QLabel(u'ç»å¯¹å®šä½', self) label1.move(15, 60) # åˆ›å»ºã€ç§»åŠ¨åˆ°æ˜¾ç¤ºä½ç½® æ¡†å¸ƒå±€ åŠ å¸ƒå±€å…ƒç´ å¹³å‡åˆ†å¸ƒ # okButton = QtGui.QPushButton(\u0026quot;OK\u0026quot;) cancelButton = QtGui.QPushButton(\u0026quot;Cancel\u0026quot;) # åˆ›å»ºæŒ‰é’® hbox = QtGui.QHBoxLayout() hbox.addStretch(1) hbox.addWidget(okButton) # å¢åŠ ç»„ä»¶ hbox.addWidget(cancelButton) # åˆ›å»ºæ°´å¹³æ  hbox.addStretch() # å¹³å‡åˆ†å¸ƒ vbox = QtGui.QVBoxLayout() vbox.addStretch(1) # åˆ›å»ºç«–åˆ— vbox.addLayout(hbox) # å°†æ°´å¹³æ æ’å…¥ç«–åˆ— self.setLayout(vbox) # æ˜¾ç¤ºæœ€ç»ˆç«–åˆ— æ³¨æ„ä¸€ä¸‹addæ—¶é€‰æ‹©å¯¹ç±»å‹å°±å¥½äº†ã€‚\nç»„ä»¶ä¹‹é—´è¿æ¥ä¿¡å· # # classA(QtGui.QTableWidget): # pass classA.itemDoubleClicked.connect(classB.actionFunction) # è¿™æ ·å•çº¯è°ƒç”¨è¿˜æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ•°æ®ä¼ è¾“â€¦ å°±å¾—ç»§ç»­ç ”ç©¶ä¸€ä¸‹äº†ã€‚ è°ƒç”¨Windowsç¨‹åº # import win32api path = 'D:/vnpy- \\ master/docker/dockerTrader/gateway/ctpGateway/CTP_connect.json' win32api.ShellExecute(0, 'open', 'notepad.exe', path, '', 1) # ä½¿ç”¨è®°äº‹æœ¬æ‰“å¼€æ­¤æ–‡ä»¶ Json # with open('D:/vnpy- \\ master/docker/dockerTrader/gateway/ctpGateway/CTP_connect.json', 'r') as f: setting = json.load(f) self.userID = str(setting['userID']) self.password = str(setting['password']) å…³é—­äº‹ä»¶é€€å‡ºæç¤º # def closeEvent(self, event): reply = QtGui.QMessageBox.question(self, 'Message',\u0026quot;Are you sure to quit?\u0026quot;, QtGui.QMessageBox.Yes, QtGui.QMessageBox.No) if reply == QtGui.QMessageBox.Yes: event.accept() else: event.ignore() å‡½æ•°æ”¾ç½®ä½ç½®å°±æ˜¯ä¸»çª—å£ç±»ä¸‹å°±å¥½ã€‚\nVS2015 å¿«æ·é”® # Ctrl + k Ctrl + c # å¤šè¡Œæ³¨é‡Š Ctrl + k Ctrl + u # å¤šè¡Œå–æ¶ˆæ³¨é‡Š é¼ æ ‡äº‹ä»¶ # press move release doubleClick clicked() enterEvent é¼ æ ‡ç§»å…¥ leaveEvent é¼ æ ‡ç§»å‡º å›å»çœ‹çœ‹å…·ä½“å‡½æ•°\nä¿¡å·æ§½ï¼ˆä¼ è¾“é¢å¤–å‚æ•°ï¼‰ # ä¸€èˆ¬æ¥è¯´ï¼Œæ¯”å¦‚ä¸€ä¸ªæŒ‰é’®å§ã€‚ åœ¨é“¾æ¥ç‚¹å‡»ä¿¡å·ä¸æ§½æ—¶buttonInit[i].clicked.connect(partial(self.init, i))å°±å®Œäº‹äº†ã€‚ç„¶è€Œï¼Œå½“å¾ªç¯åˆ›å»ºæŒ‰é’®ï¼Œå¯¹åº”åŒæ ·çš„æ§½å‡½æ•°ï¼Œåªæ˜¯éœ€è¦æ‰§è¡Œçš„å˜é‡æœ‰åŒºåˆ«æ—¶ï¼Œå°±éœ€è¦ä¼ è¾“é¢å¤–çš„å‚æ•°ã€‚ è¿™æ—¶ï¼Œæ–¹æ³•æœ‰äºŒï¼š\nç¯å¢ƒï¼š\npython2.7.8\npyqt 4.11.1\nä¸€ï¼š ä½¿ç”¨lambdaè¡¨è¾¾å¼ # äºŒï¼š ä½¿ç”¨functoolsé‡Œçš„partialå‡½æ•° # ä¸‰ï¼šæ„Ÿè°¢æ¥æº\nç­–ç•¥ç®¡ç† # ç­–ç•¥ç±»ï¼Œå¼•æ“ï¼ŒæŠ¥å•ç®¡ç†\u0026amp;\u0026amp;ä»“ä½ç®¡ç†\nå¼•æ“ # å¼•æ“ä¸­å°†ç­–ç•¥äº‹ä»¶æœ‰åºæ·»åŠ åˆ°äº‹ä»¶å¼•æ“å’Œä¸»å¼•æ“ä¸­ã€‚ è¯»å–setting.json æ–‡ä»¶å¯¹ç­–ç•¥å‚æ•°ä»¥åŠæ˜¯å¦å¯ç”¨è¿›è¡Œé…ç½®ã€‚è®¾å®šæ—¥æœŸã€‚ ä½¿ç”¨ç­–ç•¥å®ä¾‹å­—å…¸ä¿å­˜ç­–ç•¥åä¸å®ä¾‹å…³ç³»â€”â€” å¹¶å°†æ­¤å­—å…¸åœ¨æ¨é€å­—å…¸ä¸­ä¸tickæ•°æ®IDå¯¹åº”ï¼ˆIDå¯¹å¤šå®ä¾‹ã€‚ï¼‰ å†æœ‰orderIDä¸ç­–ç•¥å¯¹åº”å­—å…¸ï¼Œç”¨ä»¥æ¨é€orderå’Œtradeæ•°æ® è®¡æ•°æœ¬åœ°åœæ­¢å• ã€ æŒä»“ç¼“å­˜å­—å…¸\næŠ¥å•ç®¡ç† # æˆäº¤æ¨é€å¤„ç† # æˆäº¤å›è°ƒ - \u0026gt; è®¢å•IDå’Œç­–ç•¥å¯¹åº”å­—å…¸ -\u0026gt; è®¡ç®—ç­–ç•¥æŒä»“ï¼ˆæ ¹æ®ç­–ç•¥æ–¹å‘ï¼ŒæŒä»“å¢åŠ äº¤æ˜“ç¬”æ•°ï¼‰-\u0026gt; æ›´æ–°æŒä»“ç¼“å­˜æ•°æ®\næŠ¥å•è€…ç±» # å•ä¸€åˆçº¦è®¢å•ç¼“å­˜ç±»â€”â€”åˆå§‹åŒ–buffer å­˜å‚¨å­—å…¸_logç­–ç•¥æ—¥å¿—å­˜å‚¨\n"},{"id":87,"href":"/docs/programmer/langs/tips-of-markdown/","title":"Tips of MarkDown","section":"ç¼–ç¨‹è¯­è¨€","content":" Markdown Notes ğŸ“ª # å¯¹å‹¾å’Œå‰å‰(å‰å·) # #å¯¹å‹¾ #å‰å·\n- \u0026amp;#9744; x \u0026amp;cross; - \u0026amp;#9745; \u0026amp;#10004; \u0026amp;check; â˜ x âœ— â˜‘ âœ” âœ“ HTMLé”šç‚¹ - é¡µé¢å†…ç‚¹å‡»è·³è½¬ # å¯ä»¥ä½¿ç”¨ HTML é”šç‚¹æ¥å®ç°ç‚¹å‡»å†…å®¹è·³è½¬å½“å‰é¡µé¢æŸæ ‡é¢˜ã€‚ å…·ä½“å®ç°æ–¹æ³•å¦‚ä¸‹ï¼š\né¦–å…ˆï¼Œåœ¨éœ€è¦è·³è½¬åˆ°çš„æ ‡é¢˜å‰æ’å…¥ä¸€ä¸ª HTML é”šç‚¹ï¼Œä¾‹å¦‚ï¼š ### \u0026lt;a name=\u0026#34;section1\u0026#34;\u0026gt;Section 1\u0026lt;/a\u0026gt; è¿™ä¸ªé”šç‚¹çš„åç§°ä¸º \u0026#34;section1\u0026#34;ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰ã€‚ åœ¨éœ€è¦ç‚¹å‡»è·³è½¬çš„å†…å®¹å¤„ï¼Œä½¿ç”¨ Markdown çš„é“¾æ¥è¯­æ³•ï¼Œå°†é“¾æ¥åœ°å€è®¾ç½®ä¸ºé”šç‚¹åç§°åŠ ä¸Š # ç¬¦å·ï¼Œä¾‹å¦‚ï¼š [è·³è½¬åˆ° Section 1](#section1) è¿™æ ·ï¼Œç‚¹å‡»è¿™ä¸ªé“¾æ¥å°±ä¼šè·³è½¬åˆ°é¡µé¢ä¸­çš„ \u0026#34;Section 1\u0026#34; æ ‡é¢˜å¤„ã€‚ æ³¨æ„äº‹é¡¹ï¼š # é”šç‚¹åç§°å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå¦åˆ™é“¾æ¥å¯èƒ½ä¼šè·³è½¬åˆ°é”™è¯¯çš„ä½ç½®ã€‚ å¦‚æœéœ€è¦è·³è½¬åˆ°å…¶ä»–é¡µé¢çš„é”šç‚¹ï¼Œé“¾æ¥åœ°å€åº”è¯¥åŒ…æ‹¬é¡µé¢è·¯å¾„å’Œé”šç‚¹åç§°ï¼Œä¾‹å¦‚ï¼š/path/to/page.html#section1ã€‚\n## Test äºŒçº§æ ‡é¢˜\nNow I will test the Markdown\u0026rsquo;s hobiy äºŒçº§ # Maybe is a nice way to impove my blog. ä¸‰çº§ # åŸæ¥æ ‡é¢˜ è¦# ä¸æ­£æ–‡éš”å¼€ä¸€ä¸ªç©ºæ ¼â€¦ Â·Â·Â·print â€œhello Markdownâ€Â·Â·Â· æ¬¸ï¼Ÿ æ€ä¹ˆå›äº‹ï¼Ÿä¸Šé¢çš„æ–‡å­— è«éæ˜¯ç”¨Tabèƒ½å°†å…¶æ”¾åˆ°ä¸€ä¸ªå®¹å™¨é‡Œï¼Ÿ\næ–°çš„åŒºå— # ä½ å¥½ï¼Œè¿™æ˜¯æˆ‘æ–°åˆ›å»ºçš„å®¹å™¨ã€‚ â€”â€”â€”å¥½å§ï¼Œåªæœ‰ç›´æ¥åœ¨æ ‡é¢˜ä¹‹ä¸‹çš„Tabæ‰èƒ½åˆ›å»º no~ï¼Œåœ¨ç©ºè¡Œä¸‹é¢ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ address@example.com\nMarkdown å­—ä½“é¢œè‰²ã€æµç¨‹å›¾ # æ–œä½“ # *æ–‡å­—*ï¼šå‰åæ˜Ÿå·æ–œä½“ å°±åƒè¿™æ ·ï¼Ÿ\næµç¨‹å›¾ # st=\u0026gt;start: Start e=\u0026gt;end: End opl=\u0026gt;operation: My Operation sub1=\u0026gt;subroutine: My subroutine cond=\u0026gt;condition: Yes or No? io=\u0026gt;inputoutput: catch something\nå‘ƒ æµç¨‹å›¾æˆ‘ä¸æ¸…æ¥šï¼Œä¸è¿‡\nå­—ä½“é¢œè‰² # å¯ä»¥å†…åµŒhtml ï¼šä½ å¥½ï¼Œæˆ‘æ˜¯çº¢è‰²å—?ï¼Œ\nä½ å¥½ï¼Œæˆ‘æ˜¯è‡ªå®šä¹‰è‰²å—? å³\n\u0026lt;font color=red\u0026gt;ä½ å¥½ï¼Œæˆ‘æ˜¯çº¢è‰²å—?\u0026lt;/font\u0026gt; \u0026lt;font color=#75362109\u0026gt;ä½ å¥½ï¼Œæˆ‘æ˜¯è‡ªå®šä¹‰è‰²å—?\u0026lt;/font\u0026gt; åˆšå¼€å§‹æˆ‘è¿˜åœ¨å¥½å¥‡æ€ä¹ˆä¸‰è‰²RGBæ€ä¹ˆå˜æˆå››ä¸ªäº†ï¼ŒåŸæ¥èµ·ä½œç”¨çš„è¿˜æ˜¯ä¸‰ä¸ªï¼Œåªä¸è¿‡markdowné€‰æ‹©æ€§å¿½ç•¥äº†å¤šä½™çš„å­—èŠ‚ã€‚ğŸ˜° è¿™æ®µè¯çš„é…ç½®å¦‚ä¸‹ï¼š\n\u0026lt;font color=#ff36ff\u0026gt;éªšæ°”çš„é¢œè‰²~\u0026lt;/font\u0026gt; è¶…é“¾æ¥ # Super Link is me? Yes , you are successful link to Google.hk\n[Super Link is me?](https://www.google.com.hk) è¡¨æ ¼ # 1 111 a 2 222 b 3 333 c 4 444 d 6 555 e 7 666 f åºåˆ— # è¿™æ˜¯ç¬¬ä¸€è¡Œ è¿™æ˜¯ç¬¬äºŒè¡Œ ç¬¬ä¸‰ Like This å¦ç§è¡¨ç° å®ç°æ–¹å¼ é˜¿é—¨ @çš„ç”¨æ³• # @åè·Ÿéšçš„å…³é”®å­—å¯ä»¥ç”ŸæˆGithubçš„æœç´¢è¶…é“¾æ¥ ä¾‹å¦‚ï¼š @markdown\næ³¨é‡Š # [^_^]: è¿™é‡Œæ˜¯æ³¨é‡Šï¼šè¿™ä¸ªæ˜¯åœ¨åˆ¶ä½œpptçš„æ—¶å€™æ¥å†™æ³¨é‡Šçš„â€¦â€¦ æ¯•ç«Ÿåœ¨ç¬”è®°é‡Œé¢å†™æ³¨é‡Šæ€•æ˜¯å¤±äº†æ™ºâ€¦ æ¯•ç«Ÿä¸ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥â€¦ ä¸è¿‡å› ä¸ºä¸Šé¢ä¹Ÿè¯´äº†æ˜¯æ”¯æŒhtmlè¯­æ³•çš„ã€‚æ‰€ä»¥â€¦â€¦\n\u0026lt;!-- è¿™é‡Œæ˜¯æ³¨é‡Š éšè—åŒºåŸŸ--\u0026gt; æ’å…¥å›¾ç‰‡ï¼šåªèƒ½æ’å…¥ç½‘å›¾â€¦ # å…³äº``` ç—›è‹¦çš„è¿›è¡Œä¸­ # (âŠ™ï¹âŠ™)ï¼Œ ```è¿™ä¸œè¥¿æ˜¯ç”¨æ¥æ ‡æ³¨ä»£ç å¼€å§‹çš„ï¼Œç„¶è€Œåœ¨æœ‰çš„ç¼–è¾‘å™¨ä¸­ï¼Œè‹¥ä¸æ˜¯ä»¥å•ç‹¬ä¸€è¡Œä¼šè¯†åˆ«ä¸º`ï¼Œä¹Ÿå°±æ˜¯å¯¹å¹³å¸¸è¯­å¥ä¸­çš„å­—ç¬¦çš„ä¿®é¥°ã€‚ä½†æ˜¯hexoæ˜¾ç„¶ä¸è¿™ä¹ˆè®¤ä¸ºï¼Œæ‰€ä»¥åªå¥½å°†ä¹‹å‰ä½¿ç”¨```çš„åœ°æ–¹éƒ½æ”¹æˆ`äº† ã€2018å¹´5æœˆ18æ—¥ çºªå¿µæˆ‘å‹¤å¥‹çš„ä¿®æ”¹å²ã€‘ æŠ˜å  ä»£ç  # obsidian ä¸€ä¸ªå¥½çœ‹çš„Calloutsæ  # [!note] å¯æŠ˜å éƒ¨åˆ† è¿™é‡Œæ˜¯å¯æŠ˜å çš„é•¿æ–‡æœ¬å†…å®¹ï¼Œå¯ä»¥åŒ…å«å¤šè¡Œã€‚ å•Š23é˜¿æ–¯é¡¿ä»¨çš„é˜¿æ–¯é¡¿ é˜¿æ–¯é¡¿ä»¨çš„é˜¿æ–¯é¡¿é˜¿æ–¯é¡¿å¤§as\næ–‡æœ¬å­—ä½“é€ŸæŸ¥è¡¨ # å‚è€ƒè‡ª: csdn ç‹å¤§é›„\né«˜äº® # 1. ä½¿ç”¨\u0026#34;`\u0026#34;åŒå¼•, eg: `{è¦é«˜äº®çš„æ–‡æœ¬}`; 2. ä½¿ç”¨\u0026#34;```\u0026#34; è·¨è¡Œ, eg:```\\n{è¦é«˜äº®çš„æ–‡æœ¬}\\n```; 3. HTML \u0026lt;mark\u0026gt;åŒå¼•, eg: \u0026lt;mark\u0026gt;{è¦é«˜äº®çš„æ–‡æœ¬}\u0026lt;mark\u0026gt; è¦é«˜äº®çš„æ–‡æœ¬ è§ä¸‹ è¦é«˜äº®çš„æ–‡æœ¬ è¦é«˜äº®çš„æ–‡æœ¬ "},{"id":88,"href":"/docs/programmer/basetc/tipsofvim/","title":"tip Of vim","section":"åŸºç¡€å·¥å…·å’Œé…ç½®","content":" Vim ä½¿ç”¨ # é™¤å»â€œç®€ä¾¿ç”Ÿæ´»â€é‡Œçš„å‡ æ¡é…ç½®ï¼Œåœ¨çº ç»“æ˜¯å¦æ·»åŠ åˆ°åˆ«çš„åœ°æ–¹ï¼Œæœç„¶è¿˜æ˜¯å•ç‹¬ç»™vimä¸€ä¸ªä½¿ç”¨æ‰‹å†Œæ¯”è¾ƒå¥½â€¦â€¦\næ³¨é‡Š # # æ³¨é‡Š 1ï¼Œ 12s/^/#/g --- # å–æ¶ˆæ³¨é‡Š 1ï¼Œ 12s/^#//g å…¶å® æ˜¯vimä¸­çš„ :sæ›¿æ¢å‘½ä»¤â€¦ ä¸‹æ–¹è§£é‡Š\næˆ–è€…ï¼Œä½¿ç”¨åˆ—ç¼–è¾‘çš„æ¨¡å¼:\nvã€é€‰æ‹©åŒºåŸŸã€ctrl qç½®è¡Œé¦–ã€Iæ’å…¥#ã€Escåº”ç”¨åˆ°å…¨åˆ— ctrl vã€Iã€#ã€Esc å› ä¸ºæœ‰çš„ctrl qæˆ–è€…ctrl v ä¸èƒ½ç”¨â€¦â€¦ å–æ¶ˆï¼Œå³ä½¿ç”¨ä¸Šè¿°æ–¹æ³•é€‰ä¸­è¡Œé¦–ï¼Œåˆ é™¤ç¬¬ä¸€ä¸ªå­—èŠ‚å³å¯äº† æ›¿æ¢ # :s/oldWords/newWords/g g : ä»£è¡¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œã€‚\nç”±æ­¤å¯çŸ¥: # ^è¡¨è¡Œé¦–æ ‡è¯†ç¬¦ã€‚ /^/è¡¨ç¤ºè¡Œé¦–çš„ç©ºå­—ç¬¦ã€‚ è€Œå–æ¶ˆæ³¨é‡Šä¸­çš„/^#/å³è¡¨ç¤ºè¡Œé¦–çš„#ï¼Œè¢«//ç©ºå­—ç¬¦æ‰€æ›¿æ¢ã€‚\nåˆ é™¤:g/å‡ºç°è®¡ç®—æ„å¤–/d # :g/å‡ºç°è®¡ç®—æ„å¤–/d æŸ¥æ‰¾é«˜äº® # set hlsearch set nohlsearch åˆ†å± # å®ç° # åœ¨å¤–éƒ¨ä½¿ç”¨-o or -Oå‚æ•° å†…éƒ¨split or vsplit æ“ä½œ # ç§»åŠ¨å…‰æ ‡ Ctrl + w hjkl ç§»åŠ¨åˆ†åŒºCtrl + w HJKL ç»Ÿä¸€é«˜åº¦Ctrl + w = æ”¹å˜é«˜åº¦Ctrl + w +- more and less # é˜…è¯»å™¨~~~ å› ä¸ºç»å¸¸è¯»å¤§æ–‡ä»¶å‘ç°äº†è¿™ä¸¤ä¸ªçš„æ— æ•Œå¥½å¤„â€”â€”å¿«ã€‚\nä½¿ç”¨å‘½ä»¤ # cat cat -b # æŸ¥çœ‹ä¸”æ ‡æ³¨è¡Œå· -n # åŒä¸Šï¼Œä½†ä¹Ÿä¼šæ˜¾ç¤ºç©ºè¡Œè¡Œå· more # - space å‘ä¸‹ç¿»é¡µ # - Ctrl+F åŒä¸Š # - b back è¿”å›ä¸€é¡µæ˜¾ç¤º # - Ctrl+B åŒä¸Š # - Enter å‘ä¸‹nè¡Œ,é»˜è®¤1 # - = è¾“å‡ºå½“å‰è¡Œå· # - v è°ƒç”¨vi/vim # - !å‘½ä»¤ è°ƒç”¨shell æ‰§è¡Œå‘½ä»¤ # - q é€€å‡º less Vi \u0026amp;\u0026amp; Vim # ä¸‰ä¸ªæ¨¡å¼:\nå‘½ä»¤æ¨¡å¼ æ’å…¥æ¨¡å¼ Exæ¨¡å¼ para : è¯´æ˜ o : åœ¨å½“å‰è¡Œä¸‹é¢æ’å…¥æ–°ç©ºç™½è¡Œ dd : åˆ é™¤å½“å‰ä¸€è¡Œã€‚ u : æ’¤é”€ä¸€æ­¥æ“ä½œ yy : å½“å‰è¡Œ-\u0026gt;ç¼“å†²åŒº p : ç¼“å†²åŒº-\u0026gt;å…‰æ ‡ä¹‹åæ’å…¥ n+ y å½“å‰åŠæ¥ä¸‹æ¥nè¡Œ-\u0026gt;ç¼“å†²åŒº r : æ›¿æ¢å½“å‰å­—ç¬¦ / : æŸ¥æ‰¾å…³é”®å­—â€”â€”æ”¯æŒæ±‰å­—å‘ï¼éš¾å¾— n : ä¸Šå‘½ä»¤ä¸‹åˆ‡æ¢ next Exä¸‹: # set number: æ˜¾ç¤ºè¡Œå·ã€‚ï¼ˆä¸è¿‡æˆ‘å·²ç»æ”¹äº†é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤æ˜¾ç¤ºï¼‰ ï¼+å‘½ä»¤ ä»£ç†æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚å¦‚ls cd sh æŒ‚ä¸‹ç¼–è¾‘ æ˜¾ç¤ºç³»ç»Ÿå‘½ä»¤è¡Œã€‚ ctrl+dè¿”å›ï¼ˆPS:å‘½ä»¤è¡Œä¸‹ï¼Œè¿™æ˜¯å…³é—­è™šæ‹Ÿç»ˆç«¯å¿«æ·é”®ï¼‰ tip:tail head ç­‰æŸ¥çœ‹å‘½ä»¤å¯ä»¥å’Œ \u0026raquo; å‘½ä»¤åˆç”¨ï¼Œå°†æ–‡ä»¶çš„é¦–è¡Œæˆ–è€…ç»“å°¾å­—æ·»åŠ åˆ°å¦ä¸€ä¸ªæ–‡æ¡£ï½ "},{"id":89,"href":"/docs/programmer/platforms/android/android/","title":"å®‰å“","section":"å¹³å°","content":" å°†å®‰å“æ‰‹æœºç”¨äºå¼€å‘ # Termux # ç±»ä¼¼äºWINç«¯çš„Subsystemâ€”â€”å…¶å®æ›´åƒUbuntuä¸‹çš„è™šæ‹Ÿç»ˆç«¯ã€‚ ä¸è¿‡è¿™ä¸œè¥¿åŠŸèƒ½å¼ºå¤§ï¼Œé™¤äº†å°†å®‰å“é‡Œçš„Linuxå‘æŒ¥å‡ºæ¥ã€‚è¿˜æœ‰Termux APIæ¥è°ƒç”¨æ‰‹æœºçš„åº•å±‚æ¥å£ã€‚\nXFCE4 # æ­¥éª¤ï¼š\nå®‰è£…Termux æ‰§è¡Œpkg update æ‰§è¡Œpkg install git \u0026amp;\u0026amp; git clone https://github.com/Yisus7u7/termux-desktop-xfce.git æ‰§è¡Œcd termux-desktop-xfce \u0026amp;\u0026amp; bash boostrap.sh å½“ç„¶ï¼Œ3\u0026amp;4æ­¥å¯ä»¥åˆå¹¶ä¸ºä¸€å¥curl -sLf https://raw.githubusercontent.com/Yisus7u7/termux-desktop-xfce/main/boostrap.sh | bash\nVNC # é»˜è®¤VNCåªèƒ½é€šè¿‡localhost:1æ¥è¿æ¥ï¼Œå±€åŸŸç½‘ä¸èƒ½è®¿é—®ã€‚æƒ³ç”¨å¤§å±æ¥çœ‹å°±ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚\n# å…ˆæ‰§è¡Œ`vncserver`ä½¿ç”¨æœ¬æœºçš„`VNC Viewer`çœ‹çœ‹æ•ˆæœï¼Œä¸»è¦æ˜¯éœ€è¦å…ˆè®¾ç½®ä¸€ä¸‹å¯†ç  vncserver # ç°åœ¨è¿˜æ— æ³•é€šè¿‡å±€åŸŸç½‘è¿æ¥ # å»è®¾ç½® cd ~/.vnc/ vim config # æ‰“å¼€æœ€åä¸€è¡Œæ³¨é‡Š # é‡æ–°è¿è¡Œ vncserver -kill :1 vncserver é…ç½®æ–‡ä»¶ä¸€è§ˆ # å°†configæ–‡ä»¶æœ€åä¸€è¡Œçš„æ³¨é‡Šæ‰“å¼€ï¼Œå³å¯\n## Supported server options to pass to vncserver upon invocation can be listed ## in this file. See the following manpages for more: vncserver(1) Xvnc(1). ## Several common ones are shown below. Uncomment and modify to your liking. ## # securitytypes=vncauth,tlsvnc # desktop=sandbox geometry=1280x720 # localhost # alwaysshared å°†è¿™è¡Œæ³¨é‡Šå–æ¶ˆæ³¨é‡Š alwaysshared # ä¿®æ”¹æˆè¿™æ · ç°åœ¨å„ä¸ªç‰ˆæœ¬æ¦‚è§ˆ # python - 3.10 clang - 14.0.5 opencv - 4.5.5 NumPy # # pip3 install numpy ä¸èƒ½å®‰è£… MATHLIB=\u0026#34;m\u0026#34; pip3 install numpy # numpy 1.22.4 C++ \u0026amp; OpenCV # ç°åœ¨å®‰è£…opencv-pythonè¿˜æœ‰é—®é¢˜,å¯èƒ½é—®é¢˜å‡ºç°åœ¨å®‰è£…numpyä¸Š,ä½†åæ¥ç»è¿‡åŠªåŠ›å®‰è£…å¥½äº†,ä½†ç‰ˆæœ¬æˆ–è€…å…¶ä»–é—®é¢˜å¯¼è‡´è¿˜æ˜¯ä¸èƒ½æ­£å¸¸è¿è¡Œ.ä½†C++è¿˜æ˜¯å¾ˆå¥½å‘€.\npkg install opencv opcv.cpp # #include \u0026lt;opencv2/opencv.hpp\u0026gt; #include \u0026lt;iostream\u0026gt; using namespace cv; using namespace std; int main() { Mat src = imread(\u0026#34;logo-red.png\u0026#34;, IMREAD_GRAYSCALE); if (src.empty()) { printf(\u0026#34;could not find the image\\n\u0026#34;); return -1; } imwrite(\u0026#34;grayscale.png\u0026#34;, src); printf(\u0026#34;save grayscale success\\n\u0026#34;); // waitKey(0); // system(\u0026#34;path\u0026#34;); // getchar(); return 0; } ç¼–è¯‘ \u0026amp; è¿è¡Œ # g++ opcv.cpp -o opcv `pkg-config --cflags --libs opencv4` ./opcv æŒ‡å®šç¼–è¯‘å™¨ç‰ˆæœ¬ # opencv4 éœ€è¦C++11\ng++ opcv.cpp -o opcv `pkg-config --cflags --libs opencv4` -std=c++11 sshä¸æ‰‹æœºè¿æ¥ # æ‰‹æœºç«¯sshpcç«¯ # ç”µè„‘ç”Ÿæˆå¯†åŒ™,æ— è§†å¯†ç è®¾ç½®å…¨éƒ¨å›è½¦ ssh-keygen -t rsa ç”µè„‘å¼€å¯sshdæœåŠ¡,ç”¨äºæ‰‹æœºçš„sshè¿æ¥åˆ°ç”µè„‘, æ‹·è´id_rsa.pubå†…å®¹ systemctl start sshd wsl: sshd re-exec requires execution with an absolute path è½¬å»æ‰‹æœºç«¯æ“ä½œ æ‰‹æœºè¿æ¥æ‹·è´ $HOME/.ssh/authorized_keys -\u0026gt; ä¸ç®¡ç”¨ä»€ä¹ˆå¤åˆ¶ï¼Œç„¶åæ”¾åˆ°è¿™ä¸ªè·¯å¾„å°±å¥½ã€‚ æŸ¥çœ‹æ‰‹æœºçš„ç”¨æˆ·å whoami å¼€å¯æœåŠ¡ sshd -p 9000 pcsshæ‰‹æœºç«¯ # ssh u0_222@192.168.1.14 -p 9000 å¯èƒ½æœ‰æ–‡ä»¶æƒé™é—®é¢˜ chmod 700 ~/.ssh chmod 600 ~/.ssh/authorized_keys ğŸ˜“\nå¿«æ·é”®(æœ‰ç”¨çš„éŸ³é‡é”®ï¼Ÿ) # æ˜¾ç¤ºæ‰©å±•åŠŸèƒ½æŒ‰é”® # æ–¹æ³•ä¸€: ä»å·¦å‘å³æ»‘åŠ¨,æ˜¾ç¤ºéšè—å¼å¯¼èˆªæ ,é•¿æŒ‰å·¦ä¸‹è§’çš„KEYBOARD.\næ–¹æ³•äºŒ: ä½¿ç”¨Termuxå¿«æ·é”®:éŸ³é‡++Qé”®\nå¸¸ç”¨å¿«æ·é”® # Ctrlé”®æ˜¯ç»ˆç«¯ç”¨æˆ·å¸¸ç”¨çš„æŒ‰é”® â€“ ä½†å¤§å¤šæ•°è§¦æ‘¸é”®ç›˜éƒ½æ²¡æœ‰è¿™ä¸ªæŒ‰é”®ã€‚ä¸ºæ­¤ï¼ŒTermuxä½¿ç”¨éŸ³é‡å‡å°æŒ‰é’®æ¥æ¨¡æ‹ŸCtrlé”®ã€‚åœ¨è§¦æ‘¸é”®ç›˜ä¸ŠæŒ‰éŸ³é‡å‡å°+ Lå‘é€ä¸åœ¨ç¡¬ä»¶é”®ç›˜ä¸ŠæŒ‰Ctrl + Lç›¸åŒçš„è¾“å…¥ã€‚ Ctrl+A -\u0026gt; å°†å…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦– Ctrl+C -\u0026gt; ä¸­æ­¢å½“å‰è¿›ç¨‹ Ctrl+D -\u0026gt; æ³¨é”€ç»ˆç«¯ä¼šè¯ Ctrl+E -\u0026gt; å°†å…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾ Ctrl+K -\u0026gt; ä»å…‰æ ‡åˆ é™¤åˆ°è¡Œå°¾ Ctrl+L -\u0026gt; æ¸…é™¤ç»ˆç«¯ Ctrl+Z -\u0026gt; æŒ‚èµ·ï¼ˆå‘é€SIGTSTPåˆ°ï¼‰å½“å‰è¿›ç¨‹ åŠ é”®ä¹Ÿå¯ä»¥ä½œä¸ºäº§ç”Ÿç‰¹å®šè¾“å…¥çš„ç‰¹æ®Šé”®. éŸ³é‡åŠ +E -\u0026gt; Escé”® éŸ³é‡åŠ +T -\u0026gt; Tabé”® éŸ³é‡åŠ +1 -\u0026gt; F1ï¼ˆå’ŒéŸ³é‡å¢åŠ + 2â†’F2ç­‰ï¼‰ éŸ³é‡åŠ +0 -\u0026gt; F10 éŸ³é‡åŠ +B -\u0026gt; Alt + Bï¼Œä½¿ç”¨readlineæ—¶è¿”å›ä¸€ä¸ªå•è¯ éŸ³é‡åŠ +F -\u0026gt; Alt + Fï¼Œä½¿ç”¨readlineæ—¶è½¬å‘ä¸€ä¸ªå•è¯ éŸ³é‡åŠ +X -\u0026gt; Alt+X éŸ³é‡åŠ +W -\u0026gt; å‘ä¸Šç®­å¤´é”® éŸ³é‡åŠ +A -\u0026gt; å‘å·¦ç®­å¤´é”® éŸ³é‡åŠ +S -\u0026gt; å‘ä¸‹ç®­å¤´é”® éŸ³é‡åŠ +D -\u0026gt; å‘å³ç®­å¤´é”® éŸ³é‡åŠ +L -\u0026gt; | ï¼ˆç®¡é“å­—ç¬¦ï¼‰ éŸ³é‡åŠ +H -\u0026gt; ã€œï¼ˆæ³¢æµªå·å­—ç¬¦ï¼‰ éŸ³é‡åŠ +U -\u0026gt; _ (ä¸‹åˆ’çº¿å­—ç¬¦) éŸ³é‡åŠ +P -\u0026gt; ä¸Šä¸€é¡µ éŸ³é‡åŠ +N -\u0026gt; ä¸‹ä¸€é¡µ éŸ³é‡åŠ +. -\u0026gt; Ctrl + \\ï¼ˆSIGQUITï¼‰ éŸ³é‡åŠ +V -\u0026gt; æ˜¾ç¤ºéŸ³é‡æ§åˆ¶ éŸ³é‡åŠ +Q -\u0026gt; æ˜¾ç¤ºé¢å¤–çš„æŒ‰é”®è§†å›¾ è·å–å½“å‰ip # curl -m3 -s \u0026#34;http://ipinfo.io\u0026#34; "},{"id":90,"href":"/docs/programmer/database/note-of-db-data-mongodb/","title":"æ•°æ®åº“-MongoDBç¯‡","section":"Database","content":" DBæ•°æ®åº“ ğŸ–¥ ğŸ“ŠğŸ–¥ # MongoDBç¬”è®° # å­¦ä¹ ç½‘ç«™ï¼šhttp://www.runoob.com/mongodb/mongodb-tutorial.html (å…¶å­¦ä¹ æ•™ç¨‹è¿˜æŒºå¯è§‚ï¼Œå¾ˆå¤šï¼Œä¸è¿‡è¿˜ä¸æ¸…æ¥šå¥½ä¸å¥½)\nå®‰è£… # Docker å®‰è£… 4.4.12ç‰ˆæœ¬ # pull: docker pull mongo:4.4.13 run: docker run -itd --name mongo --restart=always \\ -v /mongodb/datadb:/data/db \\ -p 27017:27017 \\ --network websafe-network \\ --privileged=true mongo:4.4.12 è¿›å…¥å®¹å™¨docker exec -it mongo bashå:\nmongo use admin # db.createUser({user: \u0026#34;admin\u0026#34;, pwd: \u0026#34;admin\u0026#34;, roles: [{role: \u0026#34;root\u0026#34;, db: \u0026#34;admin\u0026#34;}]}) # db.createUser({user: \u0026#34;admin\u0026#34;, pwd: \u0026#34;admin\u0026#34;, roles: [{role: \u0026#34;userAdminAnyDatabase\u0026#34;, db: \u0026#34;admin\u0026#34;}]}) # å¦‚æœèƒ½authå°±ä¸ç”¨createUseräº† db.auth(\u0026#34;admin\u0026#34;, \u0026#34;admin\u0026#34;) ç½‘ä¸Šä¼ çš„å°† MONGO_INITDB_ROOT_PASSWORD å’Œ MONGO_INITDB_ROOT_USERNAMEä¼ å…¥ç¯å¢ƒå˜é‡çš„æ–¹å¼ï¼Œåœ¨mongo4.4.12 å’Œ 4.4.13ä¸Šéƒ½ä¸å¥½ä½¿ã€‚\næ•°æ®è¿ç§» # insert into device_data_current select * from device_data; ä½¿ç”¨ mysqldump # å¾ˆæ…¢ å¾ˆå¤§ å¾ˆæ–¹ä¾¿ å¾ˆï¼ä¸å¥½ï¼ä½¿ç”¨ï¼åœ¨ä½¿ç”¨\u0026ndash;hostæ—¶ ä¸‹é¢å‘½ä»¤æ²¡ä¸€æ¬¡æ­£å¸¸å·¥ä½œçš„ï¼Œå¾ˆéš¾å—\nmysqldump -h192.168.0.25 -u{user} -p{passwd} {dbname} {tablename} \u0026gt; {tablename}.sql sed -i \u0026#39;s/{tablename}/{new_tablename}/g\u0026#39; {tablename}.sql mysql -u{user} -p{passwd} {dbname} \u0026lt; {table}.sql # å¢åŠ æ¡æ•°é™åˆ¶ bash-4.2# mysqldump -u{user} -p{passwd} test demo --host {host} --where=\u0026#34;true limit 5000\u0026#34; \u0026gt; demo.sql è¿˜æ˜¯ç”¨è‡ªå·±å†™çš„è„šæœ¬å¥½ä½¿ sql_one2one.py\næ³¨æ„äº‹é¡¹ # Mongo æ•°æ®åº“é” # mongoåªæä¾›åº“çº§ç²’åº¦é”ï¼Œæ‰€ä»¥ä¸€ä¸ªå†™æ“ä½œé”å®šæ—¶ï¼Œå…¶ä»–è¯»å†™æ“ä½œéƒ½ç­‰å¾…â€¦ æ‰€ä»¥è¿™ä¸ªå¯¼è‡´äº†Mongoå¤šçº¿ç¨‹å†™æ“ä½œåè€Œæ²¡æœ‰ä¸€ä¸ªçº¿ç¨‹å†™æ¥çš„å¿«ï¼Ÿ\nå‰å°å»ºç«‹ç´¢å¼•æ—¶ï¼ŒMongoéœ€å ç”¨ä¸€ä¸ªå†™é”ï¼ˆä¸”ä¸åŒä¸Šè¿°ã€ä¸ä¼šä¸´æ—¶æ”¾å¼ƒï¼‰ ä¸ºé¿å…æ­¤é—®é¢˜éœ€é‡‡ç”¨backgroundæ–¹å¼\ndb.posts.ensureIndex({user_id: 1}) #æ­¤æ–¹å¼å°†å¼•èµ·å…¨é¢æˆ˜äº‰ db.posts.ensureIndex({user_id: 1}ï¼Œ {background: 1}) # è¿™ä¸ªå°±æ¯”è¾ƒå’Œå¹³ æ“ä½œå‘½ä»¤ç®€å•è®°å½• # åˆ›å»ºã€æ’å…¥ # use DATABASE_NAME #å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ•°æ®åº“ï¼Œå¦åˆ™åˆ‡æ¢åˆ°æŒ‡å®šæ•°æ®åº“ã€‚ show dbs #æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“â€œname sizeâ€ åˆšåˆ›å»ºçš„æ•°æ®åº“ï¼Œå¦‚æ²¡æœ‰å†…å®¹åˆ™ä¸ç°å®åœ¨å…¶ä¸­\ndb.runoob.insert({\u0026quot;name\u0026quot;:\u0026quot;æ•™ç¨‹\u0026quot;}) #æ’å…¥æ•°æ® åˆ é™¤ # db.dropDatabase() #åˆ é™¤å½“å‰æ•°æ®åº“ï¼Œå¦‚æœªé€‰æ‹©åˆ™åˆ é™¤test db.collection.drop() #åˆ é™¤é›†åˆ db.site.drop() #ï¼šå¦‚åˆ é™¤siteé›†åˆ æ’å…¥æ–‡æ¡£ # db.COLLECTION_NAME.insert(document) db.col.insert({title: 'MongoDB æ•™ç¨‹', description: 'MongoDB æ˜¯ä¸€ä¸ª Nosql æ•°æ®åº“', by: 'èœé¸Ÿæ•™ç¨‹', url: 'http://www.runoob.com', tags: ['mongodb', 'database', 'NoSQL'], likes: 100 }) # ä¾‹å¦‚è¿™æ · db.col.find() # æŸ¥çœ‹å·²æ’å…¥æ–‡æ¡£\nä¹Ÿå¯ä»¥å°†document=æ‹¬å·é‡Œè¦æ’å…¥å†…å®¹ï¼Œç„¶åæ’å…¥documentå˜é‡ï¼Œæ•ˆæœä¸€æ ·ã€‚\n3.2ç‰ˆæœ¬æ–°åŠ  # db.collection.insertOne() #å‘æŒ‡å®šé›†åˆä¸­æ’å…¥ä¸€æ¡æ–‡æ¡£æ•°æ® db.collection.insertMany() #å‘æŒ‡å®šé›†åˆä¸­æ’å…¥å¤šæ¡æ–‡æ¡£æ•°æ® æ’å…¥å•æ¡æ•°æ® var document = db.collection.insertOne({\u0026quot;a\u0026quot;: 3}) document { \u0026ldquo;acknowledged\u0026rdquo; : true, \u0026ldquo;insertedId\u0026rdquo; : ObjectId(\u0026ldquo;571a218011a82a1d94c02333\u0026rdquo;) }\næ’å…¥å¤šæ¡æ•°æ® var res = db.collection.insertMany([{\u0026quot;b\u0026quot;: 3}, {'c': 4}]) res { \u0026ldquo;acknowledged\u0026rdquo; : true, \u0026ldquo;insertedIds\u0026rdquo; : [ ObjectId(\u0026ldquo;571a22a911a82a1d94c02337\u0026rdquo;), ObjectId(\u0026ldquo;571a22a911a82a1d94c02338\u0026rdquo;) ] }\næ›´æ–°ã€æ·»åŠ æ–‡æ¡£ # db.col.update({'title':'MongoDB æ•™ç¨‹'},{$set:{'title':'MongoDB'}}) #æ›´æ–°æ ‡é¢˜ db.collection.save( #é€šè¿‡ä¼ å…¥çš„æ–‡æ¡£æ¥æ›¿æ¢å·²æœ‰æ–‡æ¡£ \u0026lt;document\u0026gt;, { writeConcern: \u0026lt;document\u0026gt; }) å‚æ•°è¯´æ˜ï¼š document : æ–‡æ¡£æ•°æ®ã€‚ writeConcern : å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚\negï¼š å®ä¾‹ä¸­æ›¿æ¢äº† _id ä¸º 56064f89ade2f21f36b03136 çš„æ–‡æ¡£æ•°æ®ï¼š\ndb.col.save({ \u0026quot;_id\u0026quot; : ObjectId(\u0026quot;56064f89ade2f21f36b03136\u0026quot;), \u0026quot;title\u0026quot; : \u0026quot;MongoDB\u0026quot;, \u0026quot;description\u0026quot; : \u0026quot;MongoDB æ˜¯ä¸€ä¸ª Nosql æ•°æ®åº“\u0026quot;, \u0026quot;by\u0026quot; : \u0026quot;Runoob\u0026quot;, \u0026quot;url\u0026quot; : \u0026quot;http://www.runoob.com\u0026quot;, \u0026quot;tags\u0026quot; : [ \u0026quot;mongodb\u0026quot;, \u0026quot;NoSQL\u0026quot; ], \u0026quot;likes\u0026quot; : 110 })\nå¯¼å…¥csvæ–‡ä»¶ # mongoimport --db Trader_1Min_Db --collection Au(T+D) --type csv --file D:\\\\IFData\\\\md_Au(T+D)_20170101_20170531\\\\md_Au(T+D)_2017010301.csv --headerline --upsert --ignoreBlanks æ³¨æ„éœ€è¦å¦å¼€ä¸€ä¸ªå‘½ä»¤è¡Œï¼Œåœ¨å…¶ä¸­è¿è¡Œã€‚ 2017-10-25T08:43:40.917+0800 E QUERY [thread1] SyntaxError: missing ; before statement @(shell):1:16 å¦åˆ™å°±æ˜¯è¿™ä¸ªé”™è¯¯\n-d æŒ‡å®šæŠŠæ•°æ®å¯¼å…¥åˆ°å“ªä¸€ä¸ªæ•°æ®åº“ä¸­ -c æŒ‡å®šæŠŠæ•°æ®å¯¼å…¥åˆ°å“ªä¸€ä¸ªé›†åˆä¸­ --type æŒ‡å®šå¯¼å…¥çš„æ•°æ®ç±»å‹ csv/tsv é€—å·æˆ–è€…tabåˆ†å‰²å€¼ --file æŒ‡å®šä»å“ªä¸€ä¸ªæ–‡ä»¶ä¸­å¯¼å…¥æ•°æ® --headerline ä»…é€‚ç”¨äºå¯¼å…¥csv,tsvæ ¼å¼çš„æ•°æ®ï¼Œè¡¨ç¤ºæ–‡ä»¶ä¸­çš„ç¬¬ä¸€è¡Œä½œä¸ºæ•°æ®å¤´ --upsert ä»¥æ–°å¢æˆ–è€…æ›´æ–°çš„æ–¹å¼æ¥å¯¼å…¥æ•°æ® --f å¯¼å…¥å­—æ®µå --ignoreBlanks å¿½ç•¥ç©ºç™½ç¬¦ å¯¼å‡º # mongoexport -d test -c students -o students.dat connected to: 127.0.0.1 exported 9 records # æŒ‡æ˜å¯¼å‡ºæ ¼å¼ä¸ºcsv mongoexport -d test -c students --csv -f classid,name,age -o students_csv.dat connected to: 127.0.0.1 exported 9 records æ·»åŠ  # db.collectionName.update({}, {$set:{'key' : value}}, false, true); æ”¹ # .update æ›´æ”¹å­—æ®µåç§° # db.CollectionName.update({}, {$rename : {\u0026quot;OldName\u0026quot; : \u0026quot;NewName\u0026quot;}}, false, true) # falseä¸ºå¦‚ä¸å­˜åœ¨updateè®°å½•ï¼Œæ˜¯å¦æ’å…¥æ–°çš„çºªå½• # tureä½ç½®ä¸ºæ›´æ–°å…¨éƒ¨æ•°æ®ï¼Œå¦‚è®¾å®šfalse åˆ™ä¸ºåªæ›´æ–°ç¬¬ä¸€æ¡ # å¦å¤– æ²¡æœ‰è¾“å…¥åç§°æ—¶æ²¡æœ‰è¾“å…¨ï¼Œä¹Ÿä¼šæ˜¾ç¤ºæŸ¥æ‰¾ï¼Œä½†ä¸ä¼šæ‰§è¡Œæ›´æ”¹ ç»Ÿé… # db.CollectionName.update(\u0026lt;query\u0026gt;, \u0026lt;update\u0026gt;,{upsert : \u0026lt;boolean\u0026gt;, multi : \u0026lt;boolean\u0026gt;, writeConcern : \u0026lt;document\u0026gt;}) # query : update æŸ¥æ‰¾æ¡ä»¶ï¼Œç±»ä¼¼sql updateæŸ¥è¯¢å†…whereåé¢çš„ # update : updateçš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚$,$inc...ï¼‰ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºsql updateæŸ¥ #\u0026gt;è¯¢å†…setåé¢çš„ # upsert : å¯é€‰ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸å­˜åœ¨updateçš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥objNew,trueä¸ºæ’ #\u0026gt;å…¥ï¼Œé»˜è®¤æ˜¯falseï¼Œä¸æ’å…¥ã€‚ # multi : å¯é€‰ï¼Œmongodb é»˜è®¤æ˜¯false,åªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸ºtrue,å°±æŠŠ #\u0026gt;æŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°ã€‚ # writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚ eg # db.col.update({'title':'MongoDB'},{$set:{'title':'IamNewTitle'}}) åˆ é™¤æ–‡æ¡£ # remove()å‡½æ•°æ˜¯ç”¨æ¥ç§»é™¤é›†åˆä¸­çš„æ•°æ®ã€‚\ndb.collection.remove( \u0026lt;query\u0026gt;, \u0026lt;justOne\u0026gt; ) 2.6ç‰ˆä»¥å # db.collection.remove( \u0026lt;query\u0026gt;, { justOne: \u0026lt;boolean\u0026gt;, writeConcern: \u0026lt;document\u0026gt; }) å‚æ•°è¯´æ˜ï¼š query :ï¼ˆå¯é€‰ï¼‰åˆ é™¤çš„æ–‡æ¡£çš„æ¡ä»¶ã€‚ justOne : ï¼ˆå¯é€‰ï¼‰å¦‚æœè®¾ä¸º true æˆ– 1ï¼Œåˆ™åªåˆ é™¤ä¸€ä¸ªæ–‡æ¡£ã€‚ writeConcern :ï¼ˆå¯é€‰ï¼‰æŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚\ndb.col.remove({}) #åˆ é™¤æ‰€æœ‰ (å°±å¾ˆææ€–) æŸ¥è¯¢æ–‡æ¡£ # æ“ä½œ æ ¼å¼ èŒƒä¾‹ RDBMSä¸­çš„ç±»ä¼¼è¯­å¥ ç­‰äº {\u0026lt;key\u0026gt;:\u0026lt;value\u0026gt;} db.col.find({\u0026quot;by\u0026quot;:\u0026quot;æ•™ç¨‹\u0026quot;}).pretty() where by = 'æ•™ç¨‹' å°äº {\u0026lt;key\u0026gt;:{$lt:\u0026lt;value\u0026gt;}} db.col.find({\u0026quot;likes\u0026quot;:{$lt:50}}).pretty() where likes \u0026lt; 50 å°äºæˆ–ç­‰äº {\u0026lt;key\u0026gt;:{$lte:\u0026lt;value\u0026gt;}} db.col.find({\u0026quot;likes\u0026quot;:{$lte:50}}).pretty() \u0026hellip; å¤§äº {\u0026lt;key\u0026gt;:{$gt:\u0026lt;value\u0026gt;}} db.col.find({\u0026quot;likes\u0026quot;:{$gt:50}}).pretty() \u0026hellip; å¤§äºæˆ–ç­‰äº {\u0026lt;key\u0026gt;:{$gte:\u0026lt;value\u0026gt;}} db.col.find({\u0026quot;likes\u0026quot;:{$gte:50}}).pretty() \u0026hellip; ä¸ç­‰äº {\u0026lt;key\u0026gt;:{$ne:\u0026lt;value\u0026gt;}} db.col.find({\u0026quot;likes\u0026quot;:{$ne:50}}).pretty() where likes != 50 And # findå¯ä»¥ä¼ å…¥å¤šä¸ªé”®(key),é€—å·éš”å¼€ï¼š\ndb.col.find({key1:value1, key2:value2}).pretty() db.col.find({\u0026quot;by\u0026quot;:\u0026quot;æ•™ç¨‹\u0026quot;, \u0026quot;title\u0026quot;:\u0026quot;MongoDB \u0026quot;}).pretty() #ç±»ä¼¼äº WHERE by='æ•™ç¨‹' AND title='MongoDB ' Or # db.test.find({$[{key1:value1},(key2:value2)]}).pretty() #æ³¨æ„å°ä¸­å¤§æ‹¬å·ğŸ˜° db.col.find({\u0026quot;likes\u0026quot;: {$gt:50}, $or: [{\u0026quot;by\u0026quot;: \u0026quot;æ•™ç¨‹\u0026quot;},{\u0026quot;title\u0026quot;: \u0026quot;MongoDB \u0026quot;}]}) And ä¸ Or # db.col.find({\u0026quot;likes\u0026quot;: {$gt:50}, $or: [{\u0026quot;by\u0026quot;: \u0026quot;æ•™ç¨‹\u0026quot;},{\u0026quot;title\u0026quot;: \u0026quot;MongoDB \u0026quot;}]}) #ç±»ä¼¼äºï¼ˆå…¶ä¸­pretty()æ˜¯æ˜¾ç¤ºæ ·å¼ï¼‰ where likes\u0026gt;50 AND (by = 'æ•™ç¨‹' OR title = 'MongoDB â€˜ ç®€å†™è¯´æ˜ # $gt \u0026mdash;\u0026mdash;\u0026ndash; greater than \u0026gt; $gte \u0026mdash;\u0026mdash;\u0026mdash; gt equal \u0026gt;= $lt \u0026mdash;\u0026mdash;\u0026ndash; less than \u0026lt; $lte \u0026mdash;\u0026mdash;\u0026mdash; lt equal \u0026lt;= $ne \u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash; not equal != $eq \u0026mdash;\u0026mdash;\u0026ndash; equal = Type # db.col.find({\u0026quot;title\u0026quot; : {$type : 2}}) #è·å–â€œcolâ€é›†åˆä¸­titleä¸ºStringçš„æ•°æ® å¯¹ç…§è¡¨ï¼š\nç±»å‹ æ•°å­— å¤‡æ³¨ Double 1 String 2 Object 3 Array 4 Binary data 5 Undefined 6 å·²åºŸå¼ƒã€‚ Object id 7 Boolean 8 Date 9 Null 10 Regular Expression 11 JavaScript 13 Symbol 14 JavaScript (with scope) 15 32-bit integer 16 Timestamp 17 64-bit integer 18 Min key 255 Query with -1. Max key 127 Limit() Skip()æ–¹æ³• # db.col.find({},{\u0026quot;title\u0026quot;:1,_id:0}).limit(2) å‚æ•°è¯´æ˜ï¼š â€œtitleâ€å1ä¸ºåˆ¤æ–­è¯­å¥ï¼Œè¡¨ç¤ºæ˜¯å¦åªæŸ¥è¯¢â€œtitleâ€å†…å®¹0ä¸ºå¦ï¼Œæ˜¾ç¤ºè¿™æ¡çš„å…¨éƒ¨ä¿¡æ¯ã€‚_idçš„0äº¦ä¸ºåˆ¤æ–­è¡¨ç¤ºæ˜¯å¦æ˜¾ç¤ºâ€œ_idâ€å†…å®¹ã€‚limitä¸ºé™åˆ¶æœç´¢ä¿¡æ¯æ¡æ•°ã€‚\ndb.col.find({},{\u0026quot;title\u0026quot;:1,_id:0}).limit(1).skip(1) skip(NUMBER) #NUMBERä¸ºé˜¶è·ƒï¼Œå³æ¯éš”å‡ æ¡æ•°æ®æ¥æœç´¢ æ’åº # db.COLLECTION_NAME.find().sort({KEY:1}) #KEYåæ•°å­—å¯ä¸º1OR-1ï¼Œå‡åºORé™åº db.col.find({},{\u0026quot;title\u0026quot;:1,_id:0}).sort({\u0026quot;likes\u0026quot;:-1} #æŒ‰â€œlikesâ€é™åºæ’åº MongoDB ç´¢å¼• ï¼ˆå»ºç«‹ç´¢å¼•å¹²å˜›â€¦â€¦ï¼‰ # ensureIndex() æ–¹æ³• # db.COLLECTION_NAME.ensureIndex({KEY:1}) # Key å€¼ä¸ºè¦åˆ›å»ºçš„ç´¢å¼•å­—æ®µï¼Œ1ä¸ºæŒ‡å®šæŒ‰å‡åºåˆ›å»ºç´¢å¼•ï¼Œé™åº-1 èšåˆ # aggregate()æ–¹æ³• # db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION) db.mycol.aggregate([{$group : {_id : \u0026quot;$by_user\u0026quot;, num_tutorial : {$sum : 1}}}]) #ç±»ä¼¼äº select by_user, count(*) from mycol group by by_user è¾“å‡ºç»“æœï¼š { \u0026ldquo;_id\u0026rdquo; : \u0026ldquo;Neo4j\u0026rdquo;, \u0026ldquo;num_tutorial\u0026rdquo; : 1 } { \u0026ldquo;_id\u0026rdquo; : \u0026ldquo;runoob.com\u0026rdquo;, \u0026ldquo;num_tutorial\u0026rdquo; : 2 } { \u0026ldquo;_id\u0026rdquo; : null, \u0026ldquo;num_tutorial\u0026rdquo; : 1 }\nå‚æ•°è¯´æ˜ï¼šâ€œ$by_userâ€ å³ä¸ºåˆ†ç±»ä¾æ®ï¼Œå¹¶æ‰“å°å‡ºæ¥ï¼ˆå¦‚ä¸Šï¼‰ã€‚ num_tutorial ä»…ä¸ºæ˜¾ç¤ºæç¤ºï¼Œå¯ä»¥æ›´æ”¹ä¸ºä»»æ„æç¤ºç”šè‡³æ±‰å­—ã€‚ $sum : 1 å…¶ä¸­1ä¸ºæ¯æ¬¡è®¡æ•°å€¼ï¼Œå³é‡å¤ä¸€æ¬¡åŠ å‡ ã€‚1+1+1+1â€¦â€¦ ï¼šé‡å¤ä¸€æ¬¡åŠ 1ï¼›0.1+0.1+0.1â€¦â€¦é‡å¤ä¸€æ¬¡åŠ 0.1ã€‚è¿™ä¸ªæ„æ€\nè®¡ç®—ç¬¦ï¼š # è¡¨è¾¾å¼ æè¿° å®ä¾‹ $sum è®¡ç®—æ€»å’Œã€‚ db.mycol.aggregate([{$group : {_id : \u0026quot;$by_user\u0026quot;, num_tutorial : {$sum : \u0026quot;$likes\u0026quot;}}}]) $avg è®¡ç®—å¹³å‡å€¼ db.mycol.aggregate([{$group : {_id : \u0026quot;$by_user\u0026quot;, num_tutorial : {$avg : \u0026quot;$likes\u0026quot;}}}]) $min è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å°å€¼ã€‚ db.mycol.aggregate([{$group : {_id : \u0026quot;$by_user\u0026quot;, num_tutorial : {$min : \u0026quot;$likes\u0026quot;}}}]) $max è·å–é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£å¯¹åº”å€¼å¾—æœ€å¤§å€¼ã€‚ db.mycol.aggregate([{$group : {_id : \u0026quot;$by_user\u0026quot;, num_tutorial : {$max : \u0026quot;$likes\u0026quot;}}}]) $push åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ã€‚ db.mycol.aggregate([{$group : {_id : \u0026quot;$by_user\u0026quot;, url : {$push: \u0026quot;$url\u0026quot;}}}]) $addToSet åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½†ä¸åˆ›å»ºå‰¯æœ¬ã€‚ db.mycol.aggregate([{$group : {_id : \u0026quot;$by_user\u0026quot;, url : {$addToSet : \u0026quot;$url\u0026quot;}}}]) $first æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–ç¬¬ä¸€ä¸ªæ–‡æ¡£æ•°æ®ã€‚ db.mycol.aggregate([{$group : {_id : \u0026quot;$by_user\u0026quot;, first_url : {$first : \u0026quot;$url\u0026quot;}}}]) $last æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–æœ€åä¸€ä¸ªæ–‡æ¡£æ•°æ® db.mycol.aggregate([{$group : {_id : \u0026quot;$by_user\u0026quot;, last_url : {$last : \u0026quot;$url\u0026quot;}}}]) æ¡ä»¶æ“ä½œç¬¦ # $gt å¤§äº $lt å°äº $gte å¤§äºç­‰äº $lte å°äºç­‰äº egï¼š # db.col.find({likes : {$gte : 100}}) # æŸ¥è¯¢â€œcolâ€é›†åˆä¸­\u0026quot;likes\u0026quot;å¤§äº100çš„æ•°æ® # æ¯”è¾ƒä¸ `SQL Select * from col where likes \u0026gt;=100;` å–å‰næ¡æ•°æ® # .find().limit(n) æ‰§è¡Œé¡ºåº # skip(), limilt(), sort()ä¸‰ä¸ªæ”¾åœ¨ä¸€èµ·æ‰§è¡Œçš„æ—¶å€™ï¼Œæ‰§è¡Œçš„é¡ºåºæ˜¯å…ˆ sort(), ç„¶åæ˜¯ skip()ï¼Œæœ€åæ˜¯æ˜¾ç¤ºçš„ limit()ã€‚ æ•°æ®å¯¼å‡º # mongoexport -d *** -c *** -o *** # -d åä¸º dbName -c åä¸º collectionName -o åä¸º outputFileName å¯¼å‡ºæ–‡ä»¶å åå­—éƒ½ä¸ç”¨åŠ å¼•å·ï¼Œç›´æ¥ä¸Šçš„~ï¼Œ ç„¶åå¯¼å‡ºæ ¼å¼éƒ½æ˜¯json é‚£æ ·ï¼Œä¸ç®¡åç¼€æ˜¯ä»€ä¹ˆç”¨æ–‡æœ¬æ‰“å¼€éƒ½æ˜¯ä¸€ä¸ªæ ·å­â€”â€”éª—é¬¼ğŸ‘»\næ•°æ®å¯¼å…¥ # mongoimport -h 127.0.0.1 -p 27017 -d Trader_1Min_Db -c ag1806 --file /home/ian/Downloads/ag1806.json Linux ä¸‹ä½¿ç”¨Robo3Té”™è¯¯ # é”™è¯¯æœ€åå­—æ®µä¸ºï¼šå·²æ”¾å¼ƒ (æ ¸å¿ƒå·²è½¬å‚¨)\nmkdir ~/robo-backup mv robo3t-1.1.1-linux-x86_64-*/lib/libstdc++* ~/robo-backup/robo3t-1.1.1-linux-x86_64-*/bin/robo3t ç§»åŠ¨å¤‡ä»½ä¹‹åå³å¯è¿è¡Œ\nFor Python # PyMongo # from pymongo import MongoClient client = MongoClient(\u0026quot;localhost\u0026quot;, 27017) client.server_info() # æŸ¥çœ‹ä¿¡æ¯ï¼Œæ£€æµ‹æ˜¯å¦æˆåŠŸè¿æ¥ db = client[\u0026quot;someData\u0026quot;] collection = db.zn1801_30Min # ä¸¤ç§å‘½åæ–¹å¼ï¼Œä¸€ç§æ˜¯ç›´æ¥. ä¸€ç§æ˜¯ä½¿ç”¨â€œâ€ ä¹–ä¹–çš„ç”¨åŒå¼•å·ï¼Œå› ä¸ºï¼Œåœ¨è¿™é‡Œçš„å•åŒå¼•å·æ˜¯åŒºåˆ†çš„â€¦ æˆ‘ç°åœ¨ä¹Ÿæ‡’å¾—å»ç®¡å®ƒæ˜¯å­—ç¬¦å­—ç¬¦ä¸²çš„ä»€ä¹ˆé¬¼ã€‚â”â”›å¢“â”—â”“\u0026hellip;(((m -__-)m\ninsert # collection.insert( {\u0026quot;name\u0026quot;:\u0026quot;text\u0026quot; } ) find # d = {u'Volume':{'$gte':50353,'$lte':50355}} a = collection.find(d) æœ€å°ä¸æœ€å¤§ï¼Œå¦å¤–ï¼Œfindå‡ºæ¥çš„ä¸œè¥¿æ˜¯æ•°æ®åº“æŒ‡é’ˆï¼Œéœ€è¦ç”¨for...in...æ¥å¾ªç¯å–å‡ºå†…å®¹æ¥\næŸ¥è¯¢åº“å # from pymongo import MongoClient client = MongoClient('localhost', 27017) client.database_names() [u\u0026rsquo;Trader_1Min_Db\u0026rsquo;, u\u0026rsquo;Trader_30Min_Db\u0026rsquo;, u\u0026rsquo;Trader_Tick_Db\u0026rsquo;, u\u0026rsquo;VnTrader_Log_Db\u0026rsquo;, u\u0026rsquo;VnTrader_Position_Db\u0026rsquo;, u\u0026rsquo;admin\u0026rsquo;, u\u0026rsquo;local\u0026rsquo;, u\u0026rsquo;someData\u0026rsquo;, u\u0026rsquo;test']\næŸ¥è¯¢é›†åˆå # collectionNames = client[dbName].collection_names() print collectionNames ä½¿ç”¨ # å…¶è¯»å†™é€Ÿåº¦è¿˜æ˜¯å¯ä»¥çš„â€¦ äºŒåä¸‡æ¡æ•°æ®æŸ¥è¯¢çš„è¯ä¸åˆ°ä¸€ç§’ï¼Œç„¶è€Œâ€¦ é¢‘ç¹å¤šé‡çš„è¯»å–ï¼Œå†åŠ ä¸Šä¸æ–­åœ°å¾€å…¶ä¸­å†™å…¥å°±å‡ºé—®é¢˜äº†â€¦â€¦ å¡çš„ææ…¢â€¦ç®€ç›´ææ€–ï¼ˆæ•°ä¸ªå°æ—¶çš„å»¶è¿Ÿ æ€•ä¸æ€•ï¼‰ã€‚ï¼ˆå½“ç„¶ä»¥ä¸Šæƒ…å†µæ˜¯å®Œå…¨æ²¡æœ‰åšä»»ä½•ä¼˜åŒ–çš„æƒ…å†µï¼ˆç›´æ¥insert ã€findï¼‰ï¼Œä¸çŸ¥é“ä¼˜åŒ–ä¹‹åä¼šæ€æ ·ï¼‰ å¦å¤–ä¸çŸ¥é“ä¸å¢åŠ æ¡æ•°ï¼Œå»å¢åŠ å†…å®¹ä¼šæ€æ ·â€¦â€¦ emm æœç„¶è¿˜æ˜¯ç¼“å­˜æ¯”è¾ƒå¥½ç”¨â€¦åœ¨é«˜é€Ÿå¤šé‡å¤šé¢‘æ¬¡çš„æƒ…å†µä¸‹è¿˜æ˜¯ç”¨å†…å­˜é‡Œé¢ä¸å»æ‰‹åŠ¨åšä»»ä½•ä¿å­˜æ¯”è¾ƒå¥½ã€‚ ç­‰ç§¯æ”’å¤Ÿé‡ä¹‹åå†å»ä¿å­˜ï¼Œå°±å¥½æ¯”æ–‡ä»¶å‹ç¼©ä¸å»ä¸€ä¸ªä¸ªå°æ–‡ä»¶ä¼ è¾“ä¸€ä¸ªé“ç†ã€‚\n"},{"id":91,"href":"/docs/programmer/database/note-of-db-data-mysql/","title":"æ•°æ®åº“-MySQLç¯‡","section":"Database","content":" MySQLæ•°æ®åº“ ğŸ–¥ ğŸ“ŠğŸ–¥ # å®‰è£… # docker # podman run -d --name mysql-container -e MYSQL_ROOT_PASSWORD={my-secret-pw} -e MYSQL_TIME_ZONE=UTC -e MYSQL_CHARSET=utf8 -p 3306:3306 mysql:5.7 ä½¿ç”¨ # å¸¸ç”¨å‘½ä»¤ # CREATE DATABASE {database_name} DEFAULT CHARACTER SET utf8mb4 DEFAULT COLLATE utf8mb4_unicode_ci; æŒ‰å¤©ç»Ÿè®¡ # SELECT DATE(created_at) AS date, COUNT(*) AS count FROM `TABLE_NAME` WHERE created_at \u0026gt;= \u0026#34;2025-01-01\u0026#34; AND created_at \u0026lt; \u0026#34;2025-02-01\u0026#34; GROUP BY DATE(created_at) ORDER BY date LIMIT 100 è¿æ¥ # ä½¿ç”¨MySQLå‘½ä»¤è¡Œå·¥å…·è¿æ¥MySQLæ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥ï¼š\nå¯ç”¨å‹ç¼©ä¼ è¾“ # mysql --compress -u username -p å®Œæ•´å‘½ä»¤å¦‚ï¼š\nmysql --compress -u{username} -p{passwd} --host {host} {db name} 2024-05-27: ä½†æ˜¯å¾ˆå¯æƒœï¼Œå¾ˆå¤šç¬¬ä¸‰æ–¹è¿æ¥åº“éƒ½ä¸æ”¯æŒè¿™ä¸ªå‚æ•°ã€‚\nMySQL 8.0 # å› ä¸ºåœ¨æ›´æ–°8.0 ä¹‹åæ›´æ”¹äº†ç”¨æˆ·å¯†ç åŠ å¯†å½¢å¼æ‰€ä»¥åœ¨ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥çš„æ—¶å€™ä¼šå‡ºç°é”™è¯¯ï¼Œæ‰€ä»¥éœ€è¦\nALTER USER 'root'@'localhost' IDENTIFIED BY 'password' PASSWORD EXPIRE NEVER; #ä¿®æ”¹åŠ å¯†è§„åˆ™ ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'password'; #æ›´æ–°ç”¨æˆ·çš„å¯†ç  FLUSH PRIVILEGES; #åˆ·æ–°æƒé™ ç»æ­¤æ­¥éª¤ï¼Œå°±å¯ä»¥å°†å¯†ç åŠ å¯†å½¢å¼æ”¹ä¸ºå›¾å½¢åŒ–å®¢æˆ·ç«¯æ”¯æŒçš„åŠ å¯†å½¢å¼ï¼Œä¹Ÿæˆ–è€…æ›´å¾…å®¢æˆ·ç«¯è·Ÿç€æœåŠ¡ç«¯åŒæ­¥æ›´æ–°ã€‚\nå¦å¤–ï¼Œé…ç½®ä¹‹åˆï¼Œwindows ä¸­é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š\næ·»åŠ ç³»ç»Ÿç¯å¢ƒå˜é‡path ä¸ºMySQL/bin åˆå§‹åŒ– mysqld --initialize --user=mysql --console æ ¹æ®åˆå§‹åŒ–éšæœºç”Ÿæˆå¯†ç ç™»é™† ä¿®æ”¹å¯†ç  emm è¿™é‡Œè¯´çš„æ˜¯åœ¨å¤–éƒ¨ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨ä¿®æ”¹åŠ å¯†å½¢å¼çš„æ—¶å€™ä¸€å¹¶ä¿®æ”¹ ğŸ˜„ mysqladmin -u root -p password æ·»åŠ ç³»ç»ŸæœåŠ¡ mysqld -install å¯åŠ¨æœåŠ¡ net start mysql å¦å¤–åœ¨å›¾åƒåŒ–é‡Œé¢æ³¨æ„å¯†ç æ ¼å¼å‘¦ï¼Œè¿˜æœ‰ä½¿ç”¨navicatçš„è¯éœ€è¦æœ€æ–°ç‰ˆæœ¬ï¼Œå¦åˆ™æ— æ³•è®¾ç½®åŠ å¯†æ ¼å¼ï¼Œè¿˜å¾—ç”¨å‘½ä»¤è¡Œå»ä¿®æ”¹â€¦â€¦æœç„¶è¿˜æ˜¯å‘½ä»¤è¡Œæ°¸è¿œæœ€å¥½ç”¨\næ›´æ–° # MySQLçš„updateåœ¨è¢«æ›´æ–°æ•°å€¼å’Œæ›´æ–°ä¼ å…¥æ•°å€¼ç›¸åŒæ—¶ï¼Œæ‰§è¡Œé€Ÿåº¦ç›¸å½“çš„å¿«ï¼Œæ®è¯´æ˜¯mysqlå¹¶ä¸ä¼šæ‰§è¡Œæ›´æ–°åŠ¨ä½œä½†æ˜¯å®ƒæ™“å¾—æ›´æ–°åŠ¨ä½œçš„å‘ç”Ÿ\nåˆ é™¤ # åˆ é™¤é‡å¤æ•°æ® # é›¶:\n# åˆ é™¤æœ‰é‡å¤çš„æ•°æ®, ä¿ç•™æœ€å¤§ID SELECT id FROM playstore_pkg_info WHERE `id` NOT IN ( SELECT MAX(id) FROM playstore_pkg_info GROUP BY `packageName` HAVING COUNT(id) \u0026gt; 1 ) AND `packageName` IN ( SELECT `packageName` FROM playstore_pkg_info GROUP BY `packageName` HAVING COUNT(id) \u0026gt; 1 ) LIMIT 200 ä¸€:\ndelete from alarm_calendar where id not in (SELECT maxid from (SELECT MAX(id) as maxid, CONCAT(user_id,time,generic_name) as nameAndCode from alarm_calendar GROUP BY nameAndCode) t); æ ¹æ®user_id, time, generic_nameæ¥æ‰“åŒ…é‡å¤ï¼Œå°†é‡å¤æ•°æ®åˆ æ‰, ç•™ä¸‹maxï¼Œåœ¨è‡ªå¢é‡Œé¢å³ï¼šæœ€æ–°æ•°æ®\n**äºŒ: **\nSELECT pid, status FROM offer WHERE pid IN (SELECT pid FROM offer GROUP BY pid HAVING COUNT(id) \u0026gt; 1) ORDER BY `pid` asc LIMIT 100 MySQL ä¸­æ–‡ä¹±ç  # éœ€è¦åœ¨è¿æ¥æ—¶å°±æŒ‡å®šâœ±charsetâœ² è€Œä¸è¯¥ä¸€å‘³çº ç»“äºåœ¨ç¨‹åºåœ¨å­˜å‚¨æ—¶çš„æ•°æ®å‡†å¤‡ æ­¤å¤„ä½¿ç”¨çš„æ˜¯\ncharset='gb2312' å¦å¤–ï¼Œå¹²è„†å°±åœ¨æ•°æ®åº“ä¸­è®¾ç½®å­˜ä¸º blob æ ¼å¼\nè¿æ¥è¿œç¨‹ win æ•°æ®åº“ # å¼€å¯æŸç«¯å£çš„ç¤ºä¾‹ï¼š æ·»åŠ é˜²ç«å¢™ä¾‹å¤–ç«¯å£ ## å¯¼å‡ºè¡¨è®°å½• [^_^] 2021-04-22 çœ‹äº†ä¸Šé¢,æ·±è¡¨æƒ­æ„§... ```bash mysql -uuser -ppasswd -hhost -e \u0026#34;use db_name; select * from table_name where chat_id in (...);\u0026#34; \u0026gt;\u0026gt; hello2.csv åœ¨bashä¸­ç›´æ¥æ‰§è¡Œsqlè¯­å¥ï¼Œé‡å®šå‘ä¿å­˜\nå¥½å¤„ # å¯ä»¥è§„é¿ into outfile çš„æƒé™é—®é¢˜ï¼Œå¯¼å‡ºçš„ä¸œè¥¿ç”¨csvä¹Ÿæ˜¯å¯ä»¥çœ‹çš„ï¼Œåˆ†éš”ç¬¦å¾—ä»¥ä¿ç•™ï¼Œcsvå¯ä»¥æ­£å¸¸é˜…è§ˆ\næ³¨æ„ç‚¹ # åªä¸è¿‡æœ‰,æ—¶åˆ†éš”ç¬¦å¯èƒ½æœ‰äº›é—®é¢˜ï¼Œå…¨æ–‡æ›¿æ¢äº†å°±å¥½\nå…¥ç«™è§„åˆ™è®¾ç½® # ç¬¬ä¸€æ­¥ é€‰æ‹© å…¥ç«™è§„åˆ™ ç„¶å æ–°å»ºè§„åˆ™ï¼Œé€‰æ‹© ç«¯å£ï¼Œç„¶åä¸‹ä¸€æ­¥Â ç¬¬äºŒæ­¥ é€‰æ‹©TCP é€‰æ‹©ç‰¹å®šç«¯å£ ç„¶åè¾“å…¥ç«¯å£ï¼Œå¦‚æœ‰å¤šä¸ªç«¯å£éœ€è¦ç”¨é€—å·éš”å¼€äº† ä¾‹å¦‚: 3306 ç¬¬ä¸‰æ­¥ é€‰æ‹©å…è®¸è¿æ¥ ç¬¬å››æ­¥ é€‰æ‹©é…ç½®æ–‡ä»¶Â ç¬¬äº”æ­¥ è¾“å…¥è§„åˆ™åç§° mysqlport\nå‡ºç«™è§„åˆ™è®¾ç½® # ç¬¬ä¸€æ­¥ é€‰æ‹©å‡ºç«™è§„åˆ™ ç„¶å æ–°å»ºè§„åˆ™ï¼Œé€‰æ‹© ç«¯å£ï¼Œç„¶åä¸‹ä¸€æ­¥Â ç¬¬äºŒæ­¥ é€‰æ‹©TCP é€‰æ‹©ç‰¹å®šç«¯å£ ç„¶åè¾“å…¥ç«¯å£ï¼Œå¦‚æœ‰å¤šä¸ªç«¯å£éœ€è¦ç”¨é€—å·éš”å¼€äº† ä¾‹å¦‚: 3306 ç¬¬ä¸‰æ­¥ é€‰æ‹©å…è®¸è¿æ¥ ç¬¬å››æ­¥ é€‰æ‹©é…ç½®æ–‡ä»¶Â ç¬¬äº”æ­¥ è¾“å…¥è§„åˆ™åç§° mysqlportï¼ˆæˆ–è€…æ— ç‰¹æ®Šè¦æ±‚ä¸‹ç›´æ¥å…³é—­é˜²ç«å¢™ï¼‰ å­—ç¬¦ä¸²å­˜å‚¨ # 1ã€æ€»ä½“æ¥è¯´ï¼š 1ã€charï¼Œå­˜å®šé•¿ï¼Œé€Ÿåº¦å¿«ï¼Œå­˜åœ¨ç©ºé—´æµªè´¹çš„å¯èƒ½ï¼Œä¼šå¤„ç†å°¾éƒ¨ç©ºæ ¼ï¼Œä¸Šé™255ã€‚\n2ã€varcharï¼Œå­˜å˜é•¿ï¼Œé€Ÿåº¦æ…¢ï¼Œä¸å­˜åœ¨ç©ºé—´æµªè´¹ï¼Œä¸å¤„ç†å°¾éƒ¨ç©ºæ ¼ï¼Œä¸Šé™65535ï¼Œä½†æ˜¯æœ‰å­˜å‚¨é•¿åº¦å®é™…65532æœ€å¤§å¯ç”¨ã€‚\n3ã€textï¼Œå­˜å˜é•¿å¤§æ•°æ®ï¼Œé€Ÿåº¦æ…¢ï¼Œä¸å­˜åœ¨ç©ºé—´æµªè´¹ï¼Œä¸å¤„ç†å°¾éƒ¨ç©ºæ ¼ï¼Œä¸Šé™65535ï¼Œä¼šç”¨é¢å¤–ç©ºé—´å­˜æ”¾æ•°æ®é•¿åº¦ï¼Œé¡¾å¯ä»¥å…¨éƒ¨ä½¿ç”¨65535ã€‚\n2ã€åº”ç”¨åœºæ™¯çš„é—®é¢˜ï¼š å½“ varchar(n) åé¢çš„ n éå¸¸å¤§çš„æ—¶å€™,æˆ‘ä»¬æ˜¯ä½¿ç”¨ varchar å¥½ï¼Œè¿˜æ˜¯ text å¥½å‘¢ï¼Ÿ è¿™æ˜¯ä¸ªæ˜æ˜¾çš„é‡å˜å¼•å‘è´¨å˜çš„é—®é¢˜ã€‚æˆ‘ä»¬ä»2ä¸ªæ–¹é¢è€ƒè™‘ï¼Œç¬¬ä¸€æ˜¯ç©ºé—´ï¼Œç¬¬äºŒæ˜¯æ€§èƒ½ã€‚\nï¼ˆ1ï¼‰é¦–å…ˆä»ç©ºé—´æ–¹é¢ ä»å®˜æ–¹æ–‡æ¡£ä¸­æˆ‘ä»¬å¯ä»¥å¾—çŸ¥å½“varcharå¤§äºæŸäº›æ•°å€¼çš„æ—¶å€™ï¼Œå…¶ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºtextï¼Œå¤§æ¦‚è§„åˆ™å¦‚ä¸‹ï¼š\nå¤§äºvarcharï¼ˆ255ï¼‰å˜ä¸º tinytext å¤§äºvarcharï¼ˆ500ï¼‰å˜ä¸º text å¤§äºvarcharï¼ˆ20000ï¼‰å˜ä¸º mediumtext æ‰€ä»¥å¯¹äºè¿‡å¤§çš„å†…å®¹ä½¿ç”¨varcharå’Œtextæ²¡æœ‰å¤ªå¤šåŒºåˆ«ã€‚ ï¼ˆ2ï¼‰ä»æ€§èƒ½æ–¹é¢ ç´¢å¼•ä¼šæ˜¯å½±å“æ€§èƒ½çš„æœ€å…³é”®å› ç´ ï¼Œè€Œå¯¹äºtextæ¥è¯´ï¼Œåªèƒ½æ·»åŠ å‰ç¼€ç´¢å¼•ï¼Œå¹¶ä¸”å‰ç¼€ç´¢å¼•æœ€å¤§åªèƒ½è¾¾åˆ°1000å­—èŠ‚ã€‚ è€Œè²Œä¼¼varhcarå¯ä»¥æ·»åŠ å…¨éƒ¨ç´¢å¼•ï¼Œä½†æ˜¯ç»è¿‡æµ‹è¯•ï¼Œå…¶å®ä¹Ÿä¸æ˜¯ã€‚ç”±äºä¼šè¿›è¡Œå†…éƒ¨çš„è½¬æ¢ï¼Œæ‰€ä»¥long varcharå…¶å®ä¹Ÿåªèƒ½æ·»åŠ 1000å­—èŠ‚çš„ç´¢å¼•ï¼Œå¦‚æœè¶…é•¿äº†ä¼šè‡ªåŠ¨æˆªæ–­ã€‚ æˆ‘ä»¬è®¤ä¸ºå½“è¶…è¿‡255çš„é•¿åº¦ä¹‹åï¼Œä½¿ç”¨varcharå’Œtextæ²¡æœ‰æœ¬è´¨åŒºåˆ«ï¼Œåªéœ€è¦è€ƒè™‘ä¸€ä¸‹ä¸¤ä¸ªç±»å‹çš„ç‰¹æ€§å³å¯ã€‚ï¼ˆä¸»è¦è€ƒè™‘textæ²¡æœ‰é»˜è®¤å€¼çš„é—®é¢˜ï¼‰\næ•°æ®è¿ç§» # å› ä¸ºå·²æœ‰ä»æ•°æ®åº“ä¸­è¯»å–æ•°æ®è¿›è¡Œè¿”å›çš„å‡½æ•°ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦å†å»å†™è¯»å–æ•°æ®åº“çš„æ­¥éª¤ï¼ˆä¹Ÿæ²¡æ³•å†™ï¼Œå› ä¸ºæ•°æ®åº“è®¾è®¡æ··ä¹±ï¼Œåˆ†ä¸æ¸…å“ªå„¿æ˜¯å“ªå„¿åªæœ‰é€šè¿‡å…¶å¯¹å¤–å‡½æ•°æ‰èƒ½å–å¯¹ç›¸åº”æ•°æ®ï¼‰ ä½†å¯¹å¤–å…¶æ˜¯å°†ä¸€æ®µæ—¶é—´å†…æ•°æ®å…¨éƒ¨è¯»å–å¹¶ä¸”æ‰“åŒ…ä¸ºjsonè¿”å›ï¼Œæ‰€ä»¥ä¸€æ¬¡æ€§çš„è¯å°†æ˜¯æå¤§çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥è§£å†³æ–¹æ³•æœ‰ï¼š\né˜…è¯»å…¶ä¸­æºç ï¼Œè¿”å›ç›¸åº”æ•°æ®åº“æŒ‡é’ˆï¼Œä»¥æ­¤å–å‡ºä¸€ä¸ªè¿ç§»ä¸€ä¸ª ç¼–å†™åˆ†æ®µè¯»å–å‡½æ•°ï¼Œä¿è¯æ¯æ¬¡å–å‡ºçš„æ•°æ®ä¸å¤šï¼Œä¸€æ®µä¸€æ®µçš„è¿ç§» åæ­£æˆ‘æ˜¯é‡‡ç”¨ä¸€æ®µä¸€æ®µäº†ï¼Œæ¯•ç«Ÿæºç å¤ªâ€¦ å¦å¤–ï¼Œä¸€æ®µä¸€æ®µçš„è¯æ‰“å¥½æ—¥å¿—ï¼Œå‡ºç°é—®é¢˜åå¯ä»¥åˆ†æ®µçº æ­£ï¼Œä¹Ÿèƒ½é—´æ­‡è¿è¡Œï¼Œå¦å¤–ä¸‹è½½å¥½å†è¿ä¹Ÿä¿è¯äº†æ•°æ®emmï¼Œè€ƒè™‘å¦‚ä¸Š\nç®€å•æ€»ç»“ # æ•°æ®è¿ç§»ç¨‹åº æ•°æ®æ£€éªŒè¡¥å·®ç¨‹åº æ–­ç‚¹è¿è¡Œæœºåˆ¶ # åˆå§‹åŒ– 1. è¯»å–é…ç½®æ–‡ä»¶ï¼ˆå…¶ä¸­ä¿å­˜ * æ•°æ®è¿ç§»é¡ºåºâ€”â€”åˆ—è¡¨ï¼ˆå†…å…ƒç´ ä¸ºå­—å…¸keyä¸º* valueä¸ºç›¸åº”æ•°æ®åº“ã€è¡¨åï¼Œ æ—¶é—´èµ·æ­¢ï¼Œä¸€æ¬¡æ’å…¥çš„æ—¶é—´è·¨åº¦ï¼‰ ï¼‰ 2. æ ¹æ®ç§»æ¤é¡ºåºè¯»å–ç›®æ ‡æ•°æ®åº“ä¸­ç›¸åº”æ•°æ®çš„æœ€æ–°æ•°æ®æ—¥æœŸï¼ˆ * è‹¥ä¸ºç©ºå¼€å§‹åˆ™å¼€å§‹æ’å…¥ï¼‰ * åˆ é™¤æ­¤æ—¥æœŸçš„æ‰€æœ‰æ•°æ®ï¼Œ * æ ¹æ®ä¸€æ¬¡æ’å…¥çš„æ—¶é—´è·¨åº¦ä»¥åŠç»ˆç‚¹ç”Ÿæˆæ—¶é—´åŒºé—´ * æ ¹æ®æ—¶é—´åŒºé—´å»ç§»æ¤æ•°æ® 3. å½“æ­¤ç±»å‹æ•°æ®ç§»æ¤å®Œæ¯•ä¹‹ååˆ é™¤é…ç½®æ–‡ä»¶ä¸­åˆ—è¡¨çš„ç›¸åº”å…ƒç´  # æ‰§è¡ŒåŠ¨ä½œ æ˜¯ ## æ—¥å¿— å°†æ¯ä¸€æ­¥çš„é‡è¦ä¿¡æ¯éƒ½æ‰“å°~ å¸¸ç”¨å‘½ä»¤ # 1. å»ºç«‹å”¯ä¸€çº¦æŸ # ALTER TABLE app_platforms ADD CONSTRAINT unique_app_id_platform UNIQUE (app_id, platform) 2. åˆ é™¤é‡å¤æ•°æ® # app_id, platform é‡å¤\nDELETE FROM app_platforms WHERE id in (SELECT id from ( SELECT MIN(id) as id, app_id, platform, COUNT(*) as count FROM app_platforms GROUP BY app_id, platform HAVING count \u0026gt; 1 ) as keep_ids) 3. ç”¨ä¸´æ—¶è¡¨çš„æ–¹å¼åˆ é™¤é‡å¤æ•°æ® # -- åˆ›å»ºä¸€ä¸ªä¸´æ—¶è¡¨ä¿å­˜æœ€æ–°çš„è®°å½• CREATE TEMPORARY TABLE latest_pkg AS SELECT * FROM playstore_pkg_info p1 WHERE update_time = ( SELECT MAX(p2.update_time) FROM playstore_pkg_info p2 WHERE p2.packageName = p1.packageName ); -- åˆ é™¤åŸè¡¨ä¸­æ‰€æœ‰æ•°æ® DELETE FROM playstore_pkg_info; -- æ’å…¥å›ä¿ç•™çš„æœ€æ–°è®°å½• INSERT INTO playstore_pkg_info SELECT * FROM latest_pkg; "},{"id":92,"href":"/docs/programmer/platforms/os/freebsd/","title":"FreeBSD","section":"å¹³å°","content":" FreeBSD # æ¡Œé¢ # æ¢æº pkg install xorg xfce echo \u0026lsquo;dbus_enable=\u0026ldquo;YES\u0026rdquo;\u0026rsquo; \u0026raquo; /etc/rc.conf echo \u0026ldquo;/usr/local/etc/xdg/xfce4/xinitrc\u0026rdquo; \u0026gt; ~/.xinitrc startx ç™»å½•ç•Œé¢ # pkg install slim slim-themes echo \u0026lsquo;slim_enable=\u0026ldquo;YES\u0026rdquo;\u0026rsquo; \u0026raquo; /etc/rc.conf vbox(æ²¡æµ‹è¯•) # pkg install virtualbox-ose-additions å‘/etc/rc.confå†™å…¥ vboxguest_enable=\u0026#34;YES\u0026#34; vboxservice_enable=\u0026#34;YES\u0026#34; ä»…ä¾›å‚è€ƒçœ‹è¿™é‡Œ å› ä¸ºvboxæ˜¾å¡å¤ªå¼±å®‰è£…äº†vmwareåå°±ä¸€ç›´æ²¡ç”¨å›è¿‡vbox,æˆ‘è¿˜æ²¡æµ‹è¯•è¿‡\nvmware # pkg install open-vm-tools xf86-video-vmware xf86-input-vmmouse ç»§ç»­å‘/etc/rc.confä¸­å†™å…¥ hald_enable=\u0026#34;YES\u0026#34; moused_enable=\u0026#34;YES\u0026#34; # vmware_guest_vmblock_enable=\u0026#34;YES\u0026#34; # vmware_guest_vmhgfs_enable=\u0026#34;YES\u0026#34; # vmware_guest_vmmemctl_enable=\u0026#34;YES\u0026#34; # vmware_guest_vmxnet_enable=\u0026#34;YES\u0026#34; # vmware_guest_enable=\u0026#34;YES\u0026#34; ä¸‹é¢æ³¨é‡Šæ‰çš„æ˜¯å› ä¸ºåœ¨æµ‹è¯•ä¸­å¦‚æœæ‰“å¼€çš„è¯ä¼šæœ‰å„ç§é—®é¢˜\u0026hellip;.å°¤å…¶é¼ æ ‡ å…¶ä»–å¯è§è¿™é‡Œå‚è€ƒ =\u0026gt; è¯¥Blogä»…ä¾›å‚è€ƒ, è¿™é‡Œé¢çš„ä¸œè¥¿å¾ˆå¤šéƒ½æ˜¯æœ‰é—®é¢˜çš„.\næ¢æº # mkdir -p /usr/local/etc/pkg/repos vim /usr/local/etc/pkg/repos/bjtu.conf bjtu: { url: \u0026#34;pkg+http://mirror.bjtu.edu.cn/reverse/freebsd-pkg/${ABI}/quarterly\u0026#34;, mirror_type: \u0026#34;srv\u0026#34;, signature_type: \u0026#34;none\u0026#34;, fingerprints: \u0026#34;/usr/share/keys/pkg\u0026#34;, enabled: yes } FreeBSD: { enabled: no } pkg update é™„å½• # Ian æ•´ç†çš„å„ä¸ªè½¯ä»¶æ¢æºBlog\n"},{"id":93,"href":"/docs/programmer/basetc/editer/","title":"ç¼–è¾‘å™¨ä½¿ç”¨","section":"åŸºç¡€å·¥å…·å’Œé…ç½®","content":" Jupyter-Note # å±€åŸŸç½‘è®¿é—® # æ–¹æ³•1: ä½¿ç”¨jupyter notebook --generate-configç”Ÿæˆé…ç½®æ–‡ä»¶ ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­c.NotebookApp.allow_root(å› ä¸ºå®‰å“ç”¨çš„Termuxè·‘çš„,æ‰€ä»¥ä¼ªroot),c.NotebookApp.ipè¿™æ ·å°±èƒ½é€šè¿‡å±€åŸŸç½‘å’ŒTokenè®¿é—®äº† å¦‚æœæƒ³è¦ä½¿ç”¨å¯†ç (é•¿æœŸä½¿ç”¨å±€åŸŸç½‘çš„è¯),å¯ä»¥ä½¿ç”¨from notebook.auth import passwd;passwd()ç”ŸæˆåŠ å¯†å¯†ç ,é…ç½®åˆ°c.NotebookApp.password æ–¹æ³•2: å¦‚æœåªæ˜¯ä¸´æ—¶çš„,é‚£ä¼ å…¥è¿è¡Œå‘½ä»¤è‚¯å®šæœ€å¥½äº†,å¦‚ä¸‹å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ ¼å¼: jupyter-notebook --allow-root --ip=0.0.0.0 è‡ªåŠ¨è¡¥å…¨ # å®‰è£…æ’ä»¶: pip install jupyter_contrib_nbextensions -i https://pypi.tuna.tsinghua.edu.cn/simple(æ­¤å‘½ä»¤åŒ…å«ä»£ç†) åˆ°Nbextensionsä¸­å°†Disableæ”¹ä¸ºEnable å¼€å§‹ Vim # vim æŸ¥çœ‹æ—¥å¿—ä¸­æ–‡ä¹±ç (2021) # .bash_profile # export LC_ALL=en_US.utf-8 .vimrc # set fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936 set termencoding=utf-8 set encoding=utf-8 åŒç®¡é½ä¸‹, ä¸€ä¸ªè§£å†³ç³»ç»Ÿé…ç½®, ä¸€ä¸ªè§£å†³vimé…ç½®\nä¸­æ–‡ä¹±ç é—®é¢˜(2018) # åœ¨.bash_profileä¸­å¢åŠ \nexport LANG=zh_CN.utf8 export LC_ALL=zh_CN.utf8 å³å¯å¢åŠ ä¸­æ–‡æ”¯æŒã€‚ ä¸è¿‡ï¼Œè¿˜æ˜¯\nexport LANG=en_US.utf8 export LC_ALL=en_US.utf8 æ¯”è¾ƒé¦™ï¼Œå› ä¸ºä¸­æ–‡å­—ä½“è¿™é‡Œæ¸²æŸ“å‡ºæ¥å¾ˆéš¾çœ‹â€¦ ^_^: 2019å¹´5æœˆ5æ—¥19ç‚¹46åˆ†\nvscode vs code # venv # Python # Command Palette...(Ctrl+Shift+p)\n\u0026gt;Python: Select Interpreter ç„¶åé€‰æ‹©å°±å¥½äº†.\nå½“ç„¶ä¸ä¼šé‚£ä¹ˆå®‰é€¸(.vscode/launch.json) 2022-01-18 11ï¼š34\n.vscode/launch.jsoné…ç½®(å›¾å½¢åŒ–éƒ½æ˜¯éª—äººçš„) # { // Use IntelliSense to learn about possible attributes. // Hover to view descriptions of existing attributes. // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387 \u0026#34;version\u0026#34;: \u0026#34;0.2.0\u0026#34;, \u0026#34;configurations\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;Python: Current File\u0026#34;, // è‡ªå®šä¹‰åç§° \u0026#34;type\u0026#34;: \u0026#34;python\u0026#34;, \u0026#34;pythonPath\u0026#34;: \u0026#34;{é…ç½®pythonè§£é‡Šå™¨è·¯å¾„}\u0026#34;, //è°ƒè¯•ç¨‹åºæ—¶çš„å·¥ä½œç›®å½•ï¼Œä¸€èˆ¬ä¸º${workspaceRoot}å³ä»£ç æ‰€åœ¨ç›®å½• \u0026#34;cwd\u0026#34;: \u0026#34;${workspaceRoot}\u0026#34;, \u0026#34;request\u0026#34;: \u0026#34;launch\u0026#34;, \u0026#34;program\u0026#34;: \u0026#34;${file}\u0026#34;, // å¯ç›´æ¥æŒ‡å®šæ–‡ä»¶ \u0026#34;console\u0026#34;: \u0026#34;integratedTerminal\u0026#34; } ] } find + vim æŸ¥æ‰¾æ‰“å¼€ä¸€æ¡é¾™ # find * -name \u0026#34;*wd.csv\u0026#34; -exec vim {} \\; æ¥è‡ªfind --helpçš„è§£é‡Š: -exec COMMAND ; -exec COMMAND {} + -ok COMMAND ; -execå…¼å®¹å¤šæ¡å‘½ä»¤, bashç›‘æ§;,ä½†findä¹Ÿç”¨;ä¸­æ–­,æ‰€ä»¥åœ¨bashè¿è¡Œéœ€è¦è½¬ä¹‰ä¸€å±‚\u0026hellip;.ä¹Ÿå°±å˜æˆäº†\\;\nä¸‰å…„å¼Ÿã€grep sed awkã€ # æ¬è¿ -\u0026gt; [[æ–‡æœ¬ä¸‰å‰‘å®¢]]\n"},{"id":94,"href":"/docs/programmer/platforms/os/note-of-linux/","title":"Linux ç¬”è®°","section":"å¹³å°","content":"git fetch \u0026ndash;all git reset \u0026ndash;hard origin/master git pull äº¤æ¢åˆ†åŒº # å¤§å°æ¨è # ç‰©ç†å†…å­˜ äº¤æ¢åˆ†åŒºï¼ˆSWAPï¼‰ \u0026lt;= 4G è‡³å°‘4G 4~16G è‡³å°‘8G 16G~64G è‡³å°‘16G 64G~256G è‡³å°‘32G è°ƒèŠ‚æ“ä½œ # # æŸ¥çœ‹å‘½ä»¤ç›¸å…³ sudo swapo swapoff swapon # å…³é—­ç°æœ‰çš„äº¤æ¢åˆ†åŒº sudo swapoff /swapfile # æŸ¥çœ‹æ•ˆæœ htop # é¢„æ”¯å‡ºä¸€å—å„¿ç©ºåœ° sudo fallocate -l 16G /swapfile du -sh /swapfile # è®¾ç½®æƒé™ é˜²æ­¢è¯¯æ“ä½œ sudo chmod 600 /swapfile # æ•´ä¸Š sudo mkswap /swapfile mkswap: /swapfileï¼šè­¦å‘Šï¼Œå°†æ“¦é™¤æ—§çš„ swap ç­¾åã€‚ æ­£åœ¨è®¾ç½®äº¤æ¢ç©ºé—´ç‰ˆæœ¬ 1ï¼Œå¤§å° = 16 GiB (17179865088 ä¸ªå­—èŠ‚) æ— æ ‡ç­¾ï¼Œ UUID=6de8b5e1-bdc3-4e7b-98c9-6801126fcb0b # å¼€! sudo swapon /swapfile # æŸ¥çœ‹ swapon --show NAME TYPE SIZE USED PRIO /swapfile file 16G 535.3M -2 # å†™åˆ°fstabè‡ªåŠ¨æŒ‚è½½ sudo vim /etc/fstab fstabç¤ºä¾‹:\n# /etc/fstab: static file system information. # # Use \u0026#39;blkid\u0026#39; to print the universally unique identifier for a # device; this may be used with UUID= as a more robust way to name devices # that works even if disks are added and removed. See fstab(5). # # \u0026lt;file system\u0026gt; \u0026lt;mount point\u0026gt; \u0026lt;type\u0026gt; \u0026lt;options\u0026gt; \u0026lt;dump\u0026gt; \u0026lt;pass\u0026gt; # / was on /dev/nvme0n1p5 during installation UUID=a99e475d-766f-49db-85ce-5c1308beab58 / ext4 errors=remount-ro 0 1 # /boot/efi was on /dev/nvme0n1p1 during installation UUID=5C1D-5115 /boot/efi vfat umask=0077 0 1 /swapfile none swap sw 0 0 LABEL=Windows /mnt/Windows auto nosuid,nodev,nofail,x-gvfs-show,x-gvfs-name=Windows 0 0 é“ä»”æ˜¯/swapfile none swap sw 0 0\ntar æŒ‡å®šè§£å‹ç›®å½• # tar xvf test.tar.gz -C /data/ tree . â”œâ”€â”€ data â”‚Â â”œâ”€â”€ test Ubuntu22.04 åˆ‡æ¢wifi # # åˆ‡æ¢ sudo nmcli con up CMCC-XXXX-5G # ä½¿ç”¨showå¯ä»¥æŸ¥çœ‹ä¿å­˜wifi e # è¿æ¥wifi sudo nmcli dev wifi connect CMCC-XXXX password woshipassword123 # åˆ é™¤è®°å½• sudo nmcli con delete CMCC-YYYY # å¼€å…³wifi sudo nmcli radio wifi on sudo nmcli radio wifi off Ubuntu22.04 ä¾èµ–é¡¹æ•´ç† # vbox: libqt5opengl5 kate: konsole Qt5.12.12: mesa-common-dev, libgl1-mesa-dev OpenCV4.6.0: libgtk2.0-dev, pkg-config, libcanberra-gtk-module å¦‚æœæ²¡æœ‰å®‰è£…è¿™ä¿©ä¾èµ–ä¸ä¼šå½±å“ç¼–è¯‘ï¼Œä½†æ˜¯ç¼–è¯‘åä¼šæœ‰åŠŸèƒ½æŸå¤±ï¼Œè¡¥å……å®‰è£…åä¸ä¼šä¿®å¤ï¼› å¦‚æœæƒ³ä¿®å¤ï¼Œåªèƒ½å®‰è£…åå†ç¼–è¯‘ä¸€æ¬¡ï¼› dpkg .deb # Install # sudo dpkg -i file.deb\nc l r P L s # -cåˆ—å‡ºå†…å®¹ -læå–åŒ…ä¿¡æ¯ -rç§»é™¤ä¸€ä¸ªå·²å®‰è£…çš„åŒ… -På®Œå…¨æ¸…é™¤ä¸€ä¸ªå·²å®‰è£…åŒ… -Låˆ—å‡ºå®‰è£…æ‰€æœ‰æ–‡ä»¶æ¸…å• -sæ˜¾ç¤ºå·²å®‰è£…åŒ…ä¿¡æ¯ WSL # wslé—®é¢˜ å› ä¸ºåé¢ä¸å¤ªå–œæ¬¢è¿™ç§ä¸œè¥¿äº†,è¿˜æ˜¯ä¸Šäº†ç‰©ç†æœº. æ‰€ä»¥å°±ä¸ç²˜è´´è¿‡æ¥äº†.\nsudo apt upgrade # E: Sub-process /usr/bin/dpkg returned an error code (1)\nè§£å†³ # suduä¸‹\nå¤‡ä»½/var/lib/dpkg/info æ–°å»º/var/lib/dpkg/info é‡æ–°æ‰§è¡Œæ›´æ–° åˆå¹¶/var/lib/dpkg/info å’Œ å¤‡ä»½æ–‡ä»¶ å®Œ è¯´æ˜ # éåŸç†æ€§è§£å†³æ–¹æ¡ˆ, è‹¥è§£å†³ä¸äº†, å¦å¯»ä»–æ³•æˆ–è€…éœ€è¦ç›´å‡»çµé­‚.\nç£ç›˜æ“ä½œ # NTFS # ä¿®å¤æŒ‚è½½é—®é¢˜ # ntfsfix /dev/{disk name} ä¸€èˆ¬å‘è¡Œç‰ˆ # åœ¨æ­¤ä¸­å¯ä»¥ä½¿ç”¨ntfsfix, ä¸è¿‡åˆšæ‰çœ‹äº†ä¸€åœˆå„¿, å¥½åƒ, è¿™å·¥å…·å°±æ˜¯æ¥æºäºä¸‹é¢æ‰€ä»‹ç»çš„\næ ‘è“æ´¾ # å› ä¸ºæ²¡æœ‰é¢„è£…ntfsfix, æ‰€ä»¥\nå®‰è£… ntfs-3g å¾ˆä¹…è¿œçš„å·¥å…·: sudo apt install ntfs-3g (çœ‹3gå°±çŸ¥é“å¹´ä»£ä¹…è¿œ ğŸ˜„) å–æ¶ˆæŒ‚è½½, sudo umount /dev/sda{N} é‡æ–°æŒ‚è½½, mount â€“t ntfs /dev/sda{n} /media/pi å°±å¯ä»¥æœ‰è¯»å†™æƒé™äº†. ä¸ç„¶åªæœ‰è¯»çš„, æŒºä¸å¥½çš„.\nä¸è¿‡åœ¨windowsæ”¾äº†ç¼“å­˜åœ¨é‡Œé¢çš„è¯å°±æ²¡åŠæ³•æŒ‚è½½ä¸ºå¯å†™äº†ï¼Œ æ–¹æ³•æ˜¯å–æ¶ˆWinçš„å¿«é€Ÿå¯åŠ¨åŠŸèƒ½åå…³æœºï¼Œä¸ä½¿ç”¨ä¼‘çœ .\nç£ç›˜æŸ¥è¯¢å‘½ä»¤ # fdisk -l df -h LVMæ¦‚è¦ï¼ˆãŒã„ã‚ˆã†ï¼‰\nè‡ªå¼ã®ç†è§£ï¼š\nå°†é›¶æ•£çš„é›†åˆèµ·æ¥ï¼Œå†è¿›è¡ŒåŠ¨æ€åˆ†ç»„ã€‚ PV \u0026raquo; VG \u0026raquo; LV ã˜ã‚ƒã‚ä½œæˆï¼ˆã•ãã›ã„ï¼‰ï¼š # pvcreat disk1 disk2 di3 ...ã€€# é›†åˆ pvs|pvdisplay vgcreat é›†åˆname 1 2 3 ... # é›†åˆ vgs|vgdisplay lvcreat -n name -L size é›†name lvs|lvdisplay æ ¼å¼åŒ–ç£ç›˜: # mkfs.ext4 /dev/é›†name/name # æ ¼å¼åŒ–æ­¤ï¼ˆPSï¼šè·¯å¾„ä¸ºæ‰€ç¤ºï¼‰ æ³¨: ä¸è¿‡è¦é‡‡ç”¨è¿™ç§æ–¹æ³•æ¥ç»™Linuxæ‰©å®¹çš„è¯éœ€è¦ä¹‹å‰æ—¶å°±é€‰å®šLinuxç£ç›˜ç®¡ç†ä¸ºLVMï¼Œå¦åˆ™ä¸»ç›®å½•åœ¨ä¹‹åä¸èƒ½æ·»åŠ lvç»„ï¼Œä¹Ÿå°±è°ˆä¸ä¸Šæ·»åŠ ã€‚\nLVMã®å‰Šé™¤ï¼ˆã•ãã˜ã‚‡ï¼‰ï¼š # LV lvremove /dev/... VG vgremove é›†name PV(ç‰©ç†å·) pvremove /dev/... disk LVã®è¿½åŠ ï¼ˆã¤ã„ã‹ï¼‰ï¼š # lvexpend -L +1G /dev/é›†name/name # å¢åŠ äº†ç©ºç™½ç©ºé—´ resize2fs /dev/... æ›´æ–°æ–‡ä»¶ç³»ç»Ÿ ä½¿ç©ºç™½ç©ºé—´å¾—ä»¥æœ‰èº«ä»½ï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰ disk VGã®è¿½åŠ  # pvcreat /dev/sdd(new) vgexpend é›†name /dev/sdd ç½‘ç»œ # SSH è¿œç¨‹ç»ˆç«¯æ§åˆ¶ # ssh root(usrname)@192.168.^.^ (IP) è¾“å…¥å¯†ç é”™è¯¯ä¹‹åâ€”â€”å°±â€¦ä¹‹å‰è§£å†³è¿‡ï¼Œç„¶è€Œå¿˜äº†ä¸Šæ¬¡æ€ä¹ˆè§£å†³çš„äº†(äº¬ä¸œäº‘)åæ­£è¿™æ¬¡æ˜¯ç­‰ç€ç­‰ç€çªç„¶å°±èƒ½è¿æ¥äº†ã€‚ ä»¥åå¯å¾—æŠŠè§£å†³æ–¹æ¡ˆè®°å½•åˆ°è¿™å„¿ãƒ½(*ã€‚\u0026gt;Ğ”\u0026lt;)oã‚œ\nå¦å¤–ï¼Œsshå…¬é’¥ğŸ”‘è¿æ¥æ–¹å¼å¯ä»¥å‚è€ƒmakethingseasyä¸­çš„æå†™ã€‚\nping æµ‹è¯•è¿é€š # mtr æµ‹è¯•ç½‘ç»œ+æ¯ä¸ªè·¯ç”±ä¿¡æ¯ * + IP VNC æ¡Œé¢è¿œç¨‹ # Emmmm å½“æ—¶è¿˜å†™äº†è¿™ä¸ªï¼Ÿç°åœ¨å€’æ˜¯ç”¨è¿™ä¸ªåœ¨é“¾æ¥æ ‘è“æ´¾o(âˆ©âˆ©)o\u0026hellip;å“ˆå“ˆ(2021-04-22)\nå£“ç¸®æ‰“åŒ… # tar -zxvf **.tar.gz: .tar.gz tar -jxvf **.tar.bz2: .tar.bz2 tar # tar xvzf fileName.tar.gz tar cvzf fileName.tar.gz targerName x: è§£å‹ c : å‹ç¼©\nexclude # exclude åç›®å½•ä¸ç”¨å¸¦/, --excludeéœ€æ”¾åœ¨-cvfå‚æ•°ä¹‹å‰\ntar --exclude=\u0026#39;.*\u0026#39; --exclude=\u0026#39;.git\u0026#39; --exclude=\u0026#39;mysql*\u0026#39; -cvf xxx.tar xxx/ Ubuntu 16.04 å‡çº§ Ubuntu 18.04 # ___ ç»å°è¯•çœŸçš„ä¸å¦‚å¤‡ä»½è‡ªæˆ‘èµ„æ–™åé‡è£…â€¦â€¦å› ä¸ºå¤ªâ€¦æ…¢â€¦äº†â€¦ æ›´æ–°è¿˜ä¸ç¨³ã€‚\nå…¶å®è¿˜å¥½â€¦ å°±æ˜¯æ›´æ–°é€Ÿåº¦æ…¢äº†ç‚¹å„¿ã€‚æ—©ä¸åˆ°åç‚¹æ›´æ–°åˆ°äº†ä¸‹åˆ13ç‚¹38åˆ†ã€‚ä¸è¿‡åŸºäºæ˜¯ä¸€é”®å¼çš„æ‰€ä»¥è¿˜æ˜¯æœ‰å¤šç‚¹å„¿å¥½å¤„çš„ã€‚ æ›´æ–°å‘½ä»¤\nsudo do-release-upgrade # æç¤ºæ˜¯æ²¡æ³•æ‰¾åˆ°å¯ç”¨æ›´æ–°â€¦ # æ‰€ä»¥ ä¹‹åå¢åŠ äº† -c # è¿˜æ˜¯ä¸è¡Œ -d # å‚æ•°å®Œæˆæ›´æ–° ä½†æ˜¯pythonè¢«é‡è£…äº†ï¼ï¼ï¼ï¼ é‡Œé¢çš„åŒ…éƒ½æ²¡äº†â€¦ğŸaç®—äº†ï¼Œå¥½åœ¨è½¯ä»¶çº§åˆ«çš„ä¸œè¥¿éƒ½è¿˜åœ¨â€¦å¦å¤–pipä¹ŸæŸåäº†ï¼Œaptå®‰è£…ä¹Ÿå¤±è´¥ï¼Œåé¢æˆ‘å°±ç”¨äº†.pyè„šæœ¬é‡æ–°å®‰è£…ï¼Œæ‰€ä»¥aptå¸è½½å†é‡è£…æ²¡è¯•ï¼Œä¸çŸ¥é“è¡Œä¸è¡Œã€‚ æ”¶å›å‰é¢â€œè½¯ä»¶çº§åˆ«çš„éƒ½è¿˜åœ¨â€ï¼Œå…¶å®è½¯ä»¶çº§åˆ«çš„ä¹Ÿå¾…æµ‹ã€‚\nè®¾å®šç³»ç»Ÿå¸¸é‡ # åœ¨ç”¨æˆ·ç›®å½•ä¸‹profileæ–‡ä»¶ä¸­å¯é€šè¿‡export å¢åŠ (ä¸€èˆ¬æ¥è¯´æ˜¯å¢åŠ è·¯å¾„)\nexport IAN=/mnt/c/Users/ian sourse ~/.profile ä¹‹åä¾¿å¯é€šè¿‡cd $IAN æ¥è®¿é—®winä¸‹çš„ç”¨æˆ·ç›®å½•ã€‚å½“ç„¶ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨æ·»åŠ GoPathæ—¶æ³¨æ„åˆ°çš„ã€‚\nemm å…¶å®åœ¨/etc/profile æ–‡ä»¶ä¸‹æ‰æ˜¯ç³»ç»Ÿç‹é“\nps # ä»Šå¹´é¢è¯•è¿˜ç¢°åˆ°ä¸ªé—®è¿™ä¸ªé—®é¢˜ï¼Œè¯´ä»€ä¹ˆæ˜¯å˜é‡\u0026hellip;.. æŠŠæˆ‘ç»™æ•´è’™äº†\u0026hellip;.. ç»“æœä¸€ç•ªé—®ä¸‹æ‰å‘ç°ä»–æƒ³é—®çš„å°±æ˜¯æ”¾åœ¨/etc/profileå’Œ~/.profileé‡Œæœ‰å•¥åŒºåˆ«ï¼Œ\nå•¥æ˜¯ç³»ç»Ÿ,ç”¨æˆ·,ä¼šè¯çº§å˜é‡.å”‰.. æœ‰æ—¶å€™çªç„¶å¬åˆ°åŸºæœ¬é—®é¢˜å°±è§‰å¾—å¯¹æ–¹æ˜¯ä¸æ˜¯æœ‰ä»€ä¹ˆæ·±æ„\u0026hellip;\ntmux è™šæ‹Ÿå¤šç»ˆç«¯ # ç±»ä¼¼äºvimå¤šçª—å£ç¼–è¾‘ä¸€ç±»çš„ä¸œè¥¿ï¼Œemm æˆ–è€…è¯´å›¾å½¢åŒ–ubuntuä½¿ç”¨ctrl+alt+tå«å‡ºæ¥çš„ä¸œè¥¿ã€‚è¿™ä¹ˆä¸€å¯¹æ¯”çš„è¯å°±æ˜¯æ— ç•Œé¢åŒ–çš„è™šæ‹Ÿç»ˆç«¯â€”â€”é‚£ä¸ªæ˜¯ç•Œé¢é‡Œçš„è™šæ‹Ÿç»ˆç«¯å˜›ã€‚ ç”¨äºè§£å†³sshè¿æ¥è¿œç¨‹å¼€å¯åº”ç”¨ï¼Œæ–­å¼€åä¸å…³é—­è¿›ç¨‹çš„æ–¹æ¡ˆã€‚å› ä¸ºnohupå¥½åƒå¹¶ä¸ç¨³å®šçš„æ ·å­â€¦â€¦ ä¸è¿‡ç”¨èµ·æ¥â€¦ ä¸å¤ªäº†è§£æ€ä¹ˆè¿™å°±èƒ½å¤ŸæŒä¹…åŒ–äº†â€¦å› ä¸ºæ¯•ç«Ÿæ˜¯è™šæ‹Ÿçª—å£ï¼Œé—´makethingseasyä¸­ï¼Œå…¶å®â€¦å¥½åƒâ€¦å¤§æ¦‚â€¦æ²¡ä»€ä¹ˆå…³ç³»å§ã€‚è¿™ä¸¤è€…ã€‚\næœ€å¤§æ–‡ä»¶æ•°/å•è¿›ç¨‹æœ€å¤§æ–‡ä»¶æ•° # bump fs.nr_open + fs.max-file to their largest possible values\ncat /proc/sys/fs/file-max cat /proc/sys/fs/nr_open ä»Šå¤©(2021-04-22)çœ‹epollçš„æ—¶å€™å¥½å¥‡çœ‹äº†ä¸€ä¸‹,å‘ç°æˆ‘çš„fs/file-maxå±…ç„¶æœ‰9223372036854775807éœ‡æƒŠä¸€ä¸‹.\næŸ¥çœ‹æŸè¿›ç¨‹é™åˆ¶ # æœ‰æ—¶å€™æŸè¿›ç¨‹çš„è¿œè¿œå°äºä¸Šè¿°ä¸¤ä¸ªçš„è®¾å®šå€¼\ncat /proc/21975/limits | grep \u0026#34;Max open files\u0026#34; ä¿®æ”¹ # vim /etc/sysctl.conf # ä¿®æ”¹/æ·»åŠ : fs.file-max = 1048576 sysctl -p æŸ¥çœ‹å±€åŸŸç½‘å†…è®¾å¤‡IP # arp -a bash æŸ¥çœ‹å½“å‰unixæ—¶é—´ # åœ¨ Bash ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ date å‘½ä»¤æ¥æŸ¥çœ‹å½“å‰çš„ Unix æ—¶é—´ï¼ˆå³ä» 1970 å¹´ 1 æœˆ 1 æ—¥ 00:00:00 UTC åˆ°ç°åœ¨çš„ç§’æ•°ï¼‰ã€‚å…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š\ndate +%s è¿™ä¸ªå‘½ä»¤ä¼šè¾“å‡ºå½“å‰çš„ Unix æ—¶é—´æˆ³ã€‚ä¾‹å¦‚ï¼š\n1697049600 å¦‚æœä½ éœ€è¦æ¯«ç§’çº§çš„ Unix æ—¶é—´ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\ndate +%s%3N è¿™ä¸ªå‘½ä»¤ä¼šè¾“å‡ºå½“å‰çš„ Unix æ—¶é—´æˆ³ï¼Œç²¾ç¡®åˆ°æ¯«ç§’ã€‚ä¾‹å¦‚ï¼š\n1697049600123 "},{"id":95,"href":"/docs/programmer/basetc/bash/","title":"Bash","section":"åŸºç¡€å·¥å…·å’Œé…ç½®","content":" Bash # Auther: Ian\nè‡ªåŠ¨è¡¥å…¨ # linuxä¸­ä½¿ç”¨bash_completionå·¥å…·è¿›è¡Œè‡ªåŠ¨ä¸å…¨ï¼Œåœ¨æŸäº›å‘è¡Œç‰ˆæˆ–è€…ç‰ˆæœ¬ä¸­makeæˆ–è€…gitæ²¡æœ‰Tabè‡ªåŠ¨è¡¥å…¨ï¼Œè¿™æ—¶åœ¨Githubä¸Šæ‰¾ä¸€ä¸ªbash_completionæ–‡ä»¶æ”¾åœ¨ç›¸åº”ä½ç½®å°±å¯ä»¥äº†ã€‚\nsudo cp bash_completion /usr/share/bash-completion/bash_completion source /usr/share/bash-completion/bash_completion Powershell # å‘½ä»¤å†å²å­˜å‚¨åœ¨: C:\\Users\\{USERNAME}\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadLineä¸‹ ConsoleHost_history.txtæ–‡ä»¶\n"},{"id":96,"href":"/docs/programmer/basetc/gitbook/","title":"Gitbook","section":"åŸºç¡€å·¥å…·å’Œé…ç½®","content":" Gitbook # Author: Ian\nå®‰è£… # å®˜æ–¹æ–‡æ¡£ Github Gitbook æ‰“é€ çš„ Gitbook è¯´æ˜æ–‡æ¡£ ä½¿ç”¨npmè¿›è¡Œå®‰è£…, å®‰è£…npm (v4.0.0 and above is recommended) npm install gitbook-cli -g éœ€è¦sudoæƒé™ å®é™…åœ¨æ‰§è¡Œgitbook -Våæ‰ç®—æ˜¯å®‰è£…å®Œæˆ é—®é¢˜ # TypeError: cb.apply is not a function # npm å®‰è£…è½¯ä»¶ä¸å‡ºç‚¹å„¿é—®é¢˜è²Œä¼¼éƒ½ä¸æ˜¯å¾ˆåˆé€‚, è¯¥é—®é¢˜ä»£ç çº§é—®é¢˜æ˜¯å› ä¸ºåœ¨é€‚é…æŸäº›å¯èƒ½æœ¬æœºä¸Šå¹¶æ²¡æœ‰å®‰è£…çš„npmç‰ˆæœ¬æ—¶å†™äº†bugï¼Œå¯¼è‡´æ‰§è¡Œå‡ºé”™.\næ‰€ä»¥æ³¨é‡Šæ‰ç›¸å…³ä»£ç å³å¯ï¼Œæˆ–è€…ç›´æ¥åˆ é™¤ã€‚åˆ é™¤çš„å¥½å¤„æ˜¯ä¸ä¼šå› ä¸ºç¼–è¾‘å™¨çš„åŸå› è§¦å‘npmçš„æŸäº›ç¼©è¿›é—®é¢˜ã€‚\n62. // fs.stat = statFix(fs.stat) 63. // fs.fstat = statFix(fs.fstat) 64. // fs.lstat = statFix(fs.lstat) å›ºç„¶å¯ä»¥é€šè¿‡å®‰è£…ç›¸åŒ¹é…ç‰ˆæœ¬è¿›è¡Œé€‚é…ï¼Œä¸è¿‡\u0026hellip;Ianæ€•å¯¼è‡´æœ¬æœºä¸Šçš„hexoå†å‡ºç°ç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜ã€‚ ä½¿ç”¨ # åŠŸèƒ½ ç¤ºä¾‹ ä¸ªäººä½¿ç”¨ä¹ æƒ¯(Ian) æ–°å»ºbook gitbook init gitbook init gitbooks/Architecture ç¼–è¯‘å’Œè¿è¡ŒæœåŠ¡ gitbook serve ç¼–è¯‘ gitbook serve pdf # å‚è€ƒè‡ª ç è°±\nå®‰è£…calibre sudo apt install calibre gitbook pdf \u0026lt;gitbook-folder-location\u0026gt; \u0026lt;pdf-location\u0026gt;.pdf æ–°ç‰ˆçš„gitbookï¼Œå®˜æ–¹å·²ç»ä¸æ”¯æŒå¯¼å‡ºpdfç­‰ç”µå­ä¹¦æ ¼å¼ï¼Œå®˜æ–¹çš„è§£è¯»å¦‚ä¸‹ï¼š\nPDF and other ebook formats exports ï¼Ÿ The new version of GitBook no longer supports exporting to PDF and other ebooks format. A lot of rich-content does not translate well from the Web to PDF. GitBook will expose a developer API for people to consume and extend their content. It is not excluded that someone build a PDF export tool using the API, but it will not be officially supported. See the section about offline access if this is the part you cared about. æ”¾åˆ°Blogä¸­ # hexo ä¸ºä¾‹\nå°†gitbookä½œä¸ºè‡ªé¡¹ç›®æ·»åŠ åˆ°å½“å‰é¡¹ç›®ä¸­ git submodule add git@github.com:IanVzs/book_architecture.git gitbooks/book_architecture build gitbookå’Œhexo å†å°†ä¸¤è€…é™æ€æ–‡ä»¶æ”¾åœ¨ä¸€èµ· cd gitbooks/book_architecture/ \u0026amp;\u0026amp; gitbook build hexo build cp -r gitbooks/book_architecture/_book/ public/book_architecture ä½¿ç”¨https://ianvzs.github.io | localhost:4000è®¿é—®åŸBlogï¼Œå¢åŠ uri/book_architectureè®¿é—®gitbook "},{"id":97,"href":"/docs/programmer/basetc/vim/","title":"Vim","section":"åŸºç¡€å·¥å…·å’Œé…ç½®","content":" Vim ä½¿ç”¨ # Auther: Ian\næ³¨é‡Š # # æ³¨é‡Š 1ï¼Œ 12s/^/#/g --- # å–æ¶ˆæ³¨é‡Š 1ï¼Œ 12s/^#//g å…¶å® æ˜¯vimä¸­çš„ :sæ›¿æ¢å‘½ä»¤â€¦ ä¸‹æ–¹è§£é‡Š\næˆ–è€…ï¼Œä½¿ç”¨åˆ—ç¼–è¾‘çš„æ¨¡å¼:\nvã€é€‰æ‹©åŒºåŸŸã€ctrl qç½®è¡Œé¦–ã€Iæ’å…¥#ã€Escåº”ç”¨åˆ°å…¨åˆ— ctrl vã€Iã€#ã€Esc å› ä¸ºæœ‰çš„ctrl qæˆ–è€…ctrl v ä¸èƒ½ç”¨â€¦â€¦ å–æ¶ˆï¼Œå³ä½¿ç”¨ä¸Šè¿°æ–¹æ³•é€‰ä¸­è¡Œé¦–ï¼Œåˆ é™¤ç¬¬ä¸€ä¸ªå­—èŠ‚å³å¯äº† æ›¿æ¢ # :s/oldWords/newWords/g g : ä»£è¡¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œã€‚\nç”±æ­¤å¯çŸ¥: # ^è¡¨è¡Œé¦–æ ‡è¯†ç¬¦ã€‚ /^/è¡¨ç¤ºè¡Œé¦–çš„ç©ºå­—ç¬¦ã€‚ è€Œå–æ¶ˆæ³¨é‡Šä¸­çš„/^#/å³è¡¨ç¤ºè¡Œé¦–çš„#ï¼Œè¢«//ç©ºå­—ç¬¦æ‰€æ›¿æ¢ã€‚\næŸ¥æ‰¾é«˜äº® # set hlsearch set nohlsearch åˆ†å± # å®ç° # åœ¨å¤–éƒ¨ä½¿ç”¨-o or -Oå‚æ•° å†…éƒ¨split or vsplit æ“ä½œ # ç§»åŠ¨å…‰æ ‡ Ctrl + w hjkl ç§»åŠ¨åˆ†åŒºCtrl + w HJKL ç»Ÿä¸€é«˜åº¦Ctrl + w = æ”¹å˜é«˜åº¦Ctrl + w +- # and less é˜…è¯»å™¨~~~ å› ä¸ºç»å¸¸è¯»å¤§æ–‡ä»¶å‘ç°äº†è¿™ä¸¤ä¸ªçš„æ— æ•Œå¥½å¤„â€”â€”å¿«ã€‚\nä½¿ç”¨å‘½ä»¤ # cat cat -b # æŸ¥çœ‹ä¸”æ ‡æ³¨è¡Œå· -n # åŒä¸Šï¼Œä½†ä¹Ÿä¼šæ˜¾ç¤ºç©ºè¡Œè¡Œå· more # - space å‘ä¸‹ç¿»é¡µ # - Ctrl+F åŒä¸Š # - b back è¿”å›ä¸€é¡µæ˜¾ç¤º # - Ctrl+B åŒä¸Š # - Enter å‘ä¸‹nè¡Œ,é»˜è®¤1 # - = è¾“å‡ºå½“å‰è¡Œå· # - v è°ƒç”¨vi/vim # - !å‘½ä»¤ è°ƒç”¨shell æ‰§è¡Œå‘½ä»¤ # - q é€€å‡º less Vi \u0026amp;\u0026amp; Vim # ä¸‰ä¸ªæ¨¡å¼:\nå‘½ä»¤æ¨¡å¼ æ’å…¥æ¨¡å¼ Exæ¨¡å¼ para : è¯´æ˜ o : åœ¨å½“å‰è¡Œä¸‹é¢æ’å…¥æ–°ç©ºç™½è¡Œ dd : åˆ é™¤å½“å‰ä¸€è¡Œã€‚ u : æ’¤é”€ä¸€æ­¥æ“ä½œ yy : å½“å‰è¡Œ-\u0026gt;ç¼“å†²åŒº p : ç¼“å†²åŒº-\u0026gt;å…‰æ ‡ä¹‹åæ’å…¥ n+ y å½“å‰åŠæ¥ä¸‹æ¥nè¡Œ-\u0026gt;ç¼“å†²åŒº r : æ›¿æ¢å½“å‰å­—ç¬¦ / : æŸ¥æ‰¾å…³é”®å­—â€”â€”æ”¯æŒæ±‰å­—å‘ï¼éš¾å¾— n : ä¸Šå‘½ä»¤ä¸‹åˆ‡æ¢ next Exä¸‹: # set number: æ˜¾ç¤ºè¡Œå·ã€‚ï¼ˆä¸è¿‡æˆ‘å·²ç»æ”¹äº†é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤æ˜¾ç¤ºï¼‰ ï¼+å‘½ä»¤ ä»£ç†æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚å¦‚ls cd sh æŒ‚ä¸‹ç¼–è¾‘ æ˜¾ç¤ºç³»ç»Ÿå‘½ä»¤è¡Œã€‚ ctrl+dè¿”å›ï¼ˆPS:å‘½ä»¤è¡Œä¸‹ï¼Œè¿™æ˜¯å…³é—­è™šæ‹Ÿç»ˆç«¯å¿«æ·é”®ï¼‰ tip:tail head ç­‰æŸ¥çœ‹å‘½ä»¤å¯ä»¥å’Œ \u0026raquo; å‘½ä»¤åˆç”¨ï¼Œå°†æ–‡ä»¶çš„é¦–è¡Œæˆ–è€…ç»“å°¾å­—æ·»åŠ åˆ°å¦ä¸€ä¸ªæ–‡æ¡£ï½ "},{"id":98,"href":"/docs/programmer/cloudnative/k8s/argo-workflow%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%92%8C%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%88%86%E6%9E%90/","title":"Argo Workflowæ€§èƒ½æµ‹è¯•å’Œä½¿ç”¨åœºæ™¯åˆ†æ","section":"k8s","content":"Github: https://github.com/argoproj\nä¸€ã€ç®€ä»‹ # Argo Workflow æ˜¯ä¸€ä¸ªå¼€æºçš„ã€åŸºäº Kubernetes çš„å·¥ä½œæµå¼•æ“ï¼Œç”¨äºç¼–æ’å’Œè¿è¡Œå®¹å™¨åŒ–åº”ç”¨çš„å·¥ä½œæµç¨‹ã€‚å®ƒä½¿ç”¨ YAML æ–‡ä»¶æ¥å®šä¹‰å·¥ä½œæµã€ä¾èµ–å…³ç³»å’Œå‚æ•°ã€‚\nArgo Workflow è¿˜æ”¯æŒä»»åŠ¡çš„é‡è¯•ã€è·³è¿‡ã€å¹¶è¡Œæ‰§è¡Œå’Œå¤±è´¥å¤„ç†ç­‰åŠŸèƒ½ã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„å·¥ä½œæµæ§åˆ¶å’Œç›‘æ§åŠŸèƒ½ï¼Œå¯ä»¥æŸ¥çœ‹å·¥ä½œæµçš„çŠ¶æ€ã€æ—¥å¿—å’Œæ‰§è¡Œå†å²ï¼Œå¹¶æ”¯æŒè‡ªå®šä¹‰çš„äº‹ä»¶è§¦å‘å’Œé€šçŸ¥æœºåˆ¶ã€‚\nç›®å‰Argoå›¢é˜Ÿä¸‹ä¸­æœ‰å¦‚ä¸‹å‡ ä¸ªå­é¡¹ç›®ï¼š\nargoproj Common project repo for all Argo Projects gitops-engine Public Democratizing GitOps argo-workflows Workflow engine for Kubernetes argo-cd Declarative continuous deployment for Kubernetes. argo-events Event-driven automation framework argo-rollouts Progressive Delivery for Kubernetes cdå’Œrolloutsä¸€ä¸ªæ˜¯æŒç»­äº¤ä»˜å·¥å…·ï¼Œä¸€ä¸ªæ˜¯æ¸è¿›å¼å‘å¸ƒå·¥å…·ã€‚ workflowså’Œeventsä¸€ä¸ªæ˜¯åŸºäºå®¹å™¨çš„ä»»åŠ¡ç¼–æ’å·¥å…·ï¼Œä¸€ä¸ªæ˜¯äº‹ä»¶é©±åŠ¨æ¡†æ¶ã€‚è¿™ä¸¤è€…æ­é…å¯ä»¥è®¾è®¡å‡ºä¸€ä¸ªç”±æ–°å»ºä»»åŠ¡äº‹ä»¶è§¦å‘ä»è€Œå¯åŠ¨å·¥ä½œæµçš„æ–¹æ¡ˆã€‚\næµç¨‹å¦‚ä¸‹ï¼š ![[content/docs/programmer/base/argo_events_workfows.png]] sensorä½œç”¨ # ä½¿äº‹ä»¶è½¬å‘å’Œå¤„ç†æ¾è€¦åˆ Triggeräº‹ä»¶çš„å‚æ•°åŒ–ï¼Œæ¯”å¦‚æ ¹æ®äº‹ä»¶å†…å®¹åŠ¨æ€ç”Ÿæˆ äºŒã€Argo Workflowç¼–æ’ç¤ºä¾‹ # ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ‰”ç¡¬å¸å’Œæ‰“å°ç»“æœçš„ç¤ºä¾‹ï¼Œå€Ÿæ­¤å¯ä»¥ç†Ÿæ‚‰ä¸€ä¸‹Workflowçš„ç¼–æ’è¯­æ³•\napiVersion: argoproj.io/v1alpha1 kind: Workflow metadata: generateName: coinflip-recursive- spec: entrypoint: coinflip templates: - name: coinflip steps: - - name: flip-coin template: flip-coin - - name: heads template: heads when: \u0026#34;{{steps.flip-coin.outputs.result}} == heads\u0026#34; - name: tails template: coinflip when: \u0026#34;{{steps.flip-coin.outputs.result}} == tails\u0026#34; - name: flip-coin script: image: python:alpine3.6 command: [python] source: | import random result = \u0026#34;heads\u0026#34; if random.randint(0,1) == 0 else \u0026#34;tails\u0026#34; print(result) - name: heads container: image: alpine:3.6 command: [sh, -c] args: [\u0026#34;echo \\\u0026#34;it was heads\\\u0026#34;\u0026#34;] è‡³äºéƒ¨ç½²Argoçš„æ­¥éª¤ç½‘ä¸Šéƒ½æœ‰ï¼Œä¸ºäº†ç²¾ç®€æ–‡ç« å°±ä¸åœ¨æ­¤èµ˜è¿°ã€‚ä¸‹é¢å…³äºä¸€äº›åœ¨ä½¿ç”¨ä¸­éœ€è¦æ³¨æ„çš„é‡è¦é—®é¢˜è¿›è¡Œä¸€äº›è¯´æ˜ã€‚\nä¸‰ã€ç©ºé—´å’Œæ€§èƒ½ # ETCDå ç”¨ # å› ä¸ºArgoæ˜¯åŸºäºKubernetesçš„ï¼Œæ‰€ä»¥ç©ºé—´é—®é¢˜ä¸€èˆ¬ä¸éœ€è¦æ€ä¹ˆå…³æ³¨ï¼Œä½†å¦‚æœåœ¨ä½¿ç”¨åœºæ™¯ä¸­éœ€è¦é¢‘ç¹åˆ›å»ºå·¥ä½œæµï¼Œè¿˜æ˜¯éœ€è¦å…³æ³¨ä¸€ä¸‹etcdçš„ç©ºé—´æƒ…å†µã€‚å› ä¸ºKubernetesé›†ç¾¤ä¸­çš„é…ç½®ã€è¿è¡ŒçŠ¶æ€å’Œå…¶ä»–å„é¡¹å…³é”®ä¿¡æ¯éƒ½å­˜å‚¨åœ¨etcdï¼Œåœ¨é¢‘ç¹åˆ›å»ºå·¥ä½œæµã€ä¸”å·¥ä½œæµå¾ˆé•¿æ—¶ï¼Œè¿™ç±»ä¿¡æ¯ä¼šå æ®å¤§é‡ç©ºé—´ï¼š\nETCDCTL_API=3 etcdctl --cacert /etc/kubernetes/pki/etcd/ca.crt --cert /etc/kubernetes/pki/etcd/healthcheck-client.crt --key /etc/kubernetes/pki/etcd/healthcheck-client.key --write-out=table endpoint status ENDPOINT ID VERSION DB SIZE IS LEADER IS LEARNER RAFT TERM RAFT INDEX RAFT APPLIED INDEX ERRORS 127.0.0.1:2379 871f72e4ab5a28e8 3.5.0 104 MB true false 35 348058564 348058564 æ ¹æ®æä¾›çš„ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹è§£é‡Šï¼š\nVERSION: etcdçš„ç‰ˆæœ¬ä¸º3.5.0ã€‚ DB SIZE: etcdæ•°æ®åº“å½“å‰å ç”¨çš„ç©ºé—´å¤§å°ä¸º104 MBã€‚ RAFT APPLIED INDEX: å½“å‰etcdé›†ç¾¤å·²åº”ç”¨çš„Raft Indexä¸º348058564ã€‚ ERRORS: æ²¡æœ‰æ˜¾ç¤ºä»»ä½•é”™è¯¯ä¿¡æ¯ã€‚ æ€»ä½“ä¸Šï¼Œè¿™äº›ä¿¡æ¯å±•ç¤ºäº†etcdé›†ç¾¤çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬èŠ‚ç‚¹è§’è‰²ã€ç‰ˆæœ¬ã€æ•°æ®åº“å¤§å°ç­‰ï¼Œç»è¿‡æµ‹è¯•ï¼Œåˆ›å»º100ä¸ªåæ­¥å·¦å³çš„å·¥ä½œæµéœ€è¦å ç”¨20mbç©ºé—´ã€‚ æ€§èƒ½ # ä»¥ä¸‹æµ‹è¯•å…¨éƒ¨æ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªæ¦‚ç‡æ€§å¤±è´¥å’Œé‡è¯•çš„workflowæµ‹è¯•è€Œæ¥ï¼š\nå®ƒæ€»å…±åŒ…æ‹¬ä¸‰æ­¥(ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥å¹¶è¡Œæ‰§è¡Œ) æ¯ä¸€æ­¥éƒ½æœ‰ä¸€å®šçš„å‡ ç‡å¤±è´¥ï¼Œå¤±è´¥åæ¯ä¸€æ­¥æœ€å¤šé‡è¯•10æ¬¡ï¼Œä¸€æ—¦æˆåŠŸåè¿›å…¥ä¸‹ä¸€æ­¥ å¯ä»¥é€šè¿‡è°ƒèŠ‚å¤±è´¥å‡ ç‡æ¨¡æ‹Ÿå‡ºåœ¨å®é™…ç¯å¢ƒä¸­å„ä¸ªworkflowåˆ†åˆ«å¤„äºä¸åŒè¿›åº¦çš„æƒ…å†µ ä¸‹å›¾ä¸­ç¬¬ä¸€æ­¥ä¸€å…±é‡è¯•äº†å››æ¬¡ï¼Œå¤±è´¥ä¸‰æ¬¡ï¼Œç¬¬å››æ¬¡æ—¶æˆåŠŸï¼Œéšå2bå…¨éƒ¨å¤±è´¥ï¼Œ2aç¬¬ä¸‰æ­¥æˆåŠŸï¼Œæ•´ä¸ªå·¥ä½œæµè€—æ—¶4åˆ†é’Ÿ ![[ä¸‰æ­¥éšæœºå‡ºé”™workflow.png]] åœ¨å¹¶å‘å¯åŠ¨åäº”ä¸ªå·¥ä½œæµæ—¶ï¼Œå¹¶ä¸”æ¯ä¸€æ­¥éƒ½ä¿è¯100%æˆåŠŸï¼Œæ•´ä¸ªæµç¨‹èŠ±è´¹2minå·¦å³ï¼Œä¸‰ä¸ªå­æ­¥éª¤åˆ†åˆ«èŠ±è´¹50-60ç§’ã€‚ ![[å…¨éƒ¨æˆåŠŸçš„æ ‘çŠ¶å›¾.png]] ![[å…¨æˆåŠŸworkflowè€—æ—¶.png]] ![[å…¨æˆåŠŸçš„stepè€—æ—¶.png]]\nåœ¨å…¨éƒ¨é”™è¯¯æ—¶ï¼Œå¹¶ä¸”æ¯ä¸€æ­¥éƒ½ä¿è¯100%å¤±è´¥ï¼Œæ€»è®¡ç»å†11æ¬¡å°è¯•ï¼Œæ•´ä¸ªæµç¨‹èŠ±è´¹10åˆ†é’Ÿå·¦å³ï¼Œ11ä¸ªå­æ­¥éª¤åˆ†åˆ«èŠ±è´¹60ç§’å·¦å³ ![[å…¨éƒ¨å¤±è´¥çš„æ ‘çŠ¶å›¾.png]] ![[å…¨é”™è¯¯workflowè€—æ—¶.png]] ![[å…¨é”™è¯¯çš„stepè€—æ—¶.png]]\nå¯è§æ¯ä¸€æ­¥æˆåŠŸä¸å¦ï¼Œä¸æ‰§è¡ŒèŠ±è´¹æ— å…³ã€‚ä¸ä¼šå‡ºç°é”™è¯¯é‡è¯•é¿è®©æˆåŠŸå·¥ä½œæµçš„ç°è±¡ã€‚\nä½¿ç”¨argo submit retry_template.yaml -n websafe --watch å’Œ kubectl get pod -n {NAMESPACE} | grep workflowæŸ¥çœ‹å·¥ä½œæµè¿è¡ŒçŠ¶æ€ï¼Œå¯çŸ¥åœ¨å·¥ä½œæµçš„æ¯ä¸€æ­¥æ‰§è¡Œæ—¶éƒ½æ˜¯å®æ—¶åˆå§‹åŒ–podï¼Œæ‰€ä»¥ä»¥ä¸ŠèŠ±è´¹çº¦ç­‰äºæ¯ä¸€æ­¥åˆå§‹åŒ–podæ‰€ç”¨çš„æ—¶é—´ã€‚å³ä»¥ä¸Šæ—¶é—´æ˜¯åœ¨è¿è¡Œé€»è¾‘ä¹‹å¤–æ— æ³•ä¼˜åŒ–çš„å›ºå®šæ—¶é—´èŠ±è´¹ã€‚ ![[watch_workflow.png]] ![[work_flow_pod.png]]\næ€»ç»“ # ç”±ä»¥ä¸Šä¿¡æ¯å¯è§Argo WorkFlowæœ‰åŸºäº Kubernetesçš„ç®€å•ã€æ˜“ç”¨ã€ä¾¿äºè¿ç§»çš„ä¼˜ç‚¹ï¼Œä½†åŒæ—¶æœ‰å¯åŠ¨é€Ÿåº¦æ…¢ï¼Œæ‰§è¡Œå·¥ä½œæµçš„æ¯ä¸€æ­¥æ—¶éƒ½å…·æœ‰é¢å¤–æ¶ˆè€—çš„ç¼ºç‚¹ã€‚\næ‰€ä»¥å®ƒé€‚ç”¨äºä¸å…³æ³¨å®æ—¶æ€§çš„ä¸šåŠ¡ï¼Œæœ¬èº«æ‰§è¡Œæ—¶é—´é•¿çš„ä»»åŠ¡ã€‚ä¾‹å¦‚AIä¸­çš„æ¨¡å‹è®­ç»ƒï¼Œå¯ä»¥ä»¤æ¯æ¬¡è®­ç»ƒéƒ½æ— éœ€å…³æ³¨ç¯å¢ƒé…ç½®ï¼Œå¯ä»¥åšåˆ°è‡ªåŠ¨èµ„æºã€åŸ‹ç‚¹åˆ†æå’Œç”ŸæˆæŠ¥è¡¨ã€‚ä¾‹å¦‚åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ï¼š ![[ai_model_workflow.png]] è®­ç»ƒäººå‘˜å¯ä»¥é€šè¿‡yamlæ–‡ä»¶è‡ªç”±æ›´æ¢è®­ç»ƒã€æµ‹è¯•æ•°æ®ï¼Œé€‰æ‹©è¾“å‡ºæ¨¡å‹å‘å¸ƒæ–¹æ¡ˆã€‚å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŸ¥çœ‹æ¯ä¸€é˜¶æ®µä¿¡æ¯ï¼Œä¸”ä¸ç”¨ç¼–å†™ä»£ç å…³æ³¨è¿è¡Œç¯å¢ƒã€‚Â è¿›äº†å·¥ä½œæµç¨‹ä¸­æ­¥éª¤ä¹‹é—´çš„æ¾è€¦åˆï¼Œå¹¶å¼€è¾Ÿäº†åœ¨æœªæ¥å·¥ä½œæµä¸­é‡ç”¨ç»„ä»¶çš„å¯èƒ½æ€§ã€‚\n"},{"id":99,"href":"/docs/programmer/cloudnative/k8s/argo-%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/","title":"Argo ä½¿ç”¨è®°å½•","section":"k8s","content":"Github: https://github.com/argoproj\nä¸€ã€ç®€ä»‹ # ç›®å‰Argoé¡¹ç›®ä¸­æœ‰å¦‚ä¸‹å‡ ä¸ªå­é¡¹ç›®ï¼š\nargoproj Common project repo for all Argo Projects\ngitops-engine Public Democratizing GitOps\nargo-workflows Workflow engine for Kubernetes\nargo-cd Declarative continuous deployment for Kubernetes.\nargo-events Event-driven automation framework\nargo-rollouts Progressive Delivery for Kubernetes\ncdå’Œrolloutsä¸€ä¸ªæ˜¯æŒç»­äº¤ä»˜å·¥å…·ï¼Œä¸€ä¸ªæ˜¯æ¸è¿›å¼å‘å¸ƒå·¥å…·ï¼Œä¸åŸå­èƒ½åŠ›å…³ç³»ä¸å¤§ã€‚ workflowså’Œeventsä¸€ä¸ªæ˜¯åŸºäºå®¹å™¨çš„ä»»åŠ¡ç¼–æ’å·¥å…·ï¼Œä¸€ä¸ªæ˜¯äº‹ä»¶é©±åŠ¨æ¡†æ¶ã€‚éƒ½ä¸æœ¬æ¬¡åŸå­èƒ½åŠ›ç›¸å…³ã€‚\nè¿™æ ·ï¼Œå°±å¯ä»¥è®¾è®¡å‡ºä¸€ä¸ªç”±æ–°å»ºæ‰«æä»»åŠ¡äº‹ä»¶è§¦å‘ï¼Œå®ä¾‹åŒ–ç»è¿‡ç¼–æ’å¯å®ç°æ‰«æå…¨æµç¨‹çš„æ–¹æ¡ˆã€‚\næµç¨‹å¦‚ä¸‹ï¼š![[book_architecture/content/docs/programmer/base/argo_events_workfows.png]]\nsensorä½œç”¨ # ä½¿äº‹ä»¶è½¬å‘å’Œå¤„ç†æ¾è€¦åˆ Triggeräº‹ä»¶çš„å‚æ•°åŒ–ï¼Œæ¯”å¦‚æ ¹æ®äº‹ä»¶å†…å®¹åŠ¨æ€ç”Ÿæˆ äºŒã€Argo Workflowç¼–æ’ # name: flip-coin script: image: python:alpine3.6 command: [python] source: | import random result = \u0026ldquo;heads\u0026rdquo; if random.randint(0,1) == 0 else \u0026ldquo;tails\u0026rdquo; print(result)\nname: heads container: image: alpine:3.6 command: [sh, -c] args: [\u0026ldquo;echo \u0026quot;it was heads\u0026quot;\u0026rdquo;] ä¸‰ã€Argo Eventsä½¿ç”¨ # å®šä¹‰ä¸€ä¸ªwebhook(åç§°: webhook_example)è·¯å¾„/webhook, ç«¯å£12000, æ¥æ”¶ POST æ–¹æ³•. apiVersion: argoproj.io/v1alpha1 kind: EventSource metadata: name: webhook spec: service: ports: - port: 12000 targetPort: 12000 webhook: webhook_example: port: \u0026#34;12000\u0026#34; endpoint: /webhook method: POST å®šä¹‰Sensor æŒ‡å®šè¡Œä¸º Yamlè¯´æ˜: i. å®šä¹‰äº†è®¢é˜…çš„EventSourceä»¥åŠå…·ä½“çš„Webhook(ä¸€ä¸ªEventSourceå¯ä»¥å®šä¹‰å¤šä¸ªWebhook,å› æ­¤æŒ‡å®šä¿©å‚æ•°) ii. Triggerä¸­å®šä¹‰äº†å¯¹åº”Action åˆ›å»ºä¸€ä¸ªwerkflow, workflowçš„specåœ¨respirceä¸­é…ç½® iii. parameterså®šä¹‰äº†workfolwçš„å‚æ•°,ä»eventä¸­è·å–,å¦‚ä¸Šå°†æ•´ä¸ªeventéƒ½ä½œä¸ºinput(åªè·å–bodyéƒ¨åˆ†å¯é€šè¿‡: dataKey: body.message) iv: æ­¤æ—¶ curl -X POST -d '{\u0026quot;message\u0026quot;: \u0026quot;Hello\u0026quot;}' 127.0.0.1:12000/webhook,å¯è§argo workflowä¸­åˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹. å¦‚ä¼ å…¥æ•´ä¸ªè¯·æ±‚,è·å¾—çš„æ•°æ®å¯èƒ½ç»ç”±base64ç¼–ç çš„,éœ€è¦è§£ç åä½¿ç”¨{\u0026quot;context\u0026quot;: \u0026quot;\u0026quot;, \u0026quot;data\u0026quot;: \u0026quot;åŒ…å«headerå’Œbody\u0026quot;} v: å…¶ä»–ç”¨æ³•æŸ¥çœ‹: è¿™é‡Œ\néœ€éªŒè¯çš„é—®é¢˜ # workflowå¹¶è¡Œå¤„ç†å¤šä¸ªä¸åŒå‚æ•°çš„ç›¸åŒä»»åŠ¡æ•ˆç‡éœ€è¦éªŒè¯ å››ã€éƒ¨ç½² # 1. è¿ç»´å‘½ä»¤ # argo submit hello-world.yaml # submit a workflow spec to Kubernetes argo list # list current workflows argo get hello-world-xxx # get info about a specific workflow argo logs hello-world-xxx # print the logs from a workflow argo delete hello-world-xxx # delete workflow 2. å®‰è£…å’Œå¯åŠ¨ # kubectl create namespace argo kubectl apply -f https://raw.githubusercontent.com/argoproj/argo-workflows/master/manifests/quick-start-postgres.yaml # æœ€å…¨-ç²¾ç®€å®‰è£…çœ‹åˆ«çš„ # æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ kubectl get pods -n argo kubectl get svc -n argo # å°†svcæ”¹ä¸ºnodeportæ–¹ä¾¿è®¿é—®Web UI kubectl edit svc -n argo argo-workflow-argo-workflows-server # æˆ–è€…argo-server åå­—ä¼šå˜ä½†æ˜¯å·®ä¸å¤šè¿™æ„æ€ è¿›å»æ‰‹åŠ¨å°†ClusterIPæ”¹ä¸ºNodePort # æŸ¥çœ‹argo server podåœ¨å“ªä¸ªnodeä¸Šè¿è¡Œ ç«¯å£æ˜ å°„åˆ°äº†nodeå“ªä¸ªç«¯å£ kubectl get pods -n argo -o wide # æŸ¥çœ‹è¯¥node IP kubectl get node -o wide # http//nodeip:nodePortè®¿é—® # æäº¤ä»»åŠ¡ argo submit https://github.com/argoproj/argo-workflows/blob/master/examples/coinflip.yaml --watch -n argo # å°†yamlä¸‹è½½ä¸‹è½½æ‰§è¡Œä¸ºä½³ æƒé™é—®é¢˜ # User \u0026#34;system:serviceaccount:argo:default\u0026#34; cannot patch resource \u0026#34;pods\u0026#34; in API group \u0026#34;\u0026#34; in the namespace \u0026#34;argo\u0026#34;: RBAC: role.rbac.authorization.k8s.io \u0026#34;argo-workflow\u0026#34; not found Confusing, possibly erroneous RBAC warnings (\u0026#34;Failed to get pod\u0026#34;) å¯è§: argo-workflows Issues\nETCD # å› ä¸ºk8sçŠ¶æ€éƒ½åœ¨etcdé›†ç¾¤ä¸­ï¼Œæ‰€ä»¥éœ€è¦å…³æ³¨ä¸€ä¸‹å¤§é‡workflowä¼šä¸ä¼šå ç”¨è¿‡å¤šçš„å®¹é‡èµ„æº\nETCDCTL_API=3 etcdctl --cacert /etc/kubernetes/pki/etcd/ca.crt --cert /etc/kubernetes/pki/etcd/healthcheck-client.crt --key /etc/kubernetes/pki/etcd/healthcheck-client.key --write-out=table endpoint status +----------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+ | ENDPOINT | ID | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS | +----------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+ | 127.0.0.1:2379 | 871f72e4ab5a28e8 | 3.5.0 | 104 MB | true | false | 35 | 348058564 | 348058564 | | +----------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+ æ ¹æ®æä¾›çš„ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹è§£é‡Šï¼š\nENDPOINT: etcdé›†ç¾¤çš„åœ°å€ä¸º127.0.0.1:2379ã€‚ ID: etcdé›†ç¾¤çš„å”¯ä¸€æ ‡è¯†ä¸º871f72e4ab5a28e8ã€‚ VERSION: etcdçš„ç‰ˆæœ¬ä¸º3.5.0ã€‚ DB SIZE: etcdæ•°æ®åº“å½“å‰å ç”¨çš„ç©ºé—´å¤§å°ä¸º104 MBã€‚ IS LEADER: å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºetcdé›†ç¾¤çš„LeaderèŠ‚ç‚¹ï¼Œè¿™é‡Œæ˜¾ç¤ºä¸ºtrueã€‚ IS LEARNER: å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºetcdé›†ç¾¤çš„LearnerèŠ‚ç‚¹ï¼Œè¿™é‡Œæ˜¾ç¤ºä¸ºfalseã€‚ RAFT TERM: å½“å‰etcdé›†ç¾¤çš„Raft Termä¸º35ã€‚ RAFT INDEX: å½“å‰etcdé›†ç¾¤çš„Raft Indexä¸º348058564ã€‚ RAFT APPLIED INDEX: å½“å‰etcdé›†ç¾¤å·²åº”ç”¨çš„Raft Indexä¸º348058564ã€‚ ERRORS: æ²¡æœ‰æ˜¾ç¤ºä»»ä½•é”™è¯¯ä¿¡æ¯ã€‚ æ€»ä½“ä¸Šï¼Œè¿™äº›ä¿¡æ¯å±•ç¤ºäº†etcdé›†ç¾¤çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬èŠ‚ç‚¹è§’è‰²ã€ç‰ˆæœ¬ã€æ•°æ®åº“å¤§å°ç­‰ã€‚ å¤§é‡Workflowsä¼˜åŒ–å»ºè®® # You have at least 230 completed workflows. Reducing the total number of workflows will reduce your costs. Learn more at https://argoproj.github.io/argo-workflows/cost-optimisation/\nåˆ›å»ºæ—¶ç¼ºå°‘å®‰å…¨ä¸Šä¸‹æ–‡é—®é¢˜ # This workflow does not have security context set. You can run your workflow pods more securely by setting it. Learn more at https://argoproj.github.io/argo-workflows/workflow-pod-security-context/\nä¿®æ”¹æ‰§è¡Œå™¨ # "},{"id":100,"href":"/docs/programmer/cloudnative/middleware/kafka-%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/","title":"Kafka å®‰è£…å’Œä½¿ç”¨","section":"ä¸­é—´ä»¶","content":" å¸¸ç”¨å‘½ä»¤ # åˆ›å»ºtopic # sh kafka-console-producer.sh --create --topic scanner_device_log --bootstrap-server localhost:9092 --partitions 0 --replication-factor 1 å‘é€æ¥æ”¶æµ‹è¯• # sh kafka-console-producer.sh --broker-list localhost:9092 --topic test sh kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test å•æœºéƒ¨ç½² # æœ¬æ–‡é“¾æ¥ğŸ”— Kafkaæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼æ¶ˆæ¯å¼•æ“/æ¶ˆæ¯ä¸­é—´ä»¶ï¼ŒåŒæ—¶Kafkaä¹Ÿæ˜¯ä¸€ä¸ªæµå¤„ç†å¹³å°ã€‚Kakfaæ”¯æŒä»¥å‘å¸ƒ/è®¢é˜…çš„æ–¹å¼åœ¨åº”ç”¨é—´ä¼ é€’æ¶ˆæ¯ï¼ŒåŒæ—¶å¹¶åŸºäºæ¶ˆæ¯åŠŸèƒ½æ·»åŠ äº†Kafka Connectã€Kafka Streamsä»¥æ”¯æŒè¿æ¥å…¶ä»–ç³»ç»Ÿçš„æ•°æ®(Elasticsearchã€Hadoopç­‰) Kafkaåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨é€šå¸¸æ˜¯é›†ç¾¤åŒ–éƒ¨ç½²çš„ï¼ŒåŒæ—¶ä¹Ÿè¦ä¾èµ–ZooKeeperé›†ç¾¤ï¼Œè¿™å¯¹å¼€å‘æµ‹è¯•ç¯å¢ƒæ¥è¯´æ¯”è¾ƒé‡ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡Dockerä¾¿æ·Kafkaå•æœºçš„æ–¹å¼ï¼ŒèŠ‚çœéƒ¨ç½²æ—¶é—´ä»¥åŠæœºå™¨èµ„æº\n1ã€æœ¬æ–‡ä¸»è¦å†…å®¹ # é€šè¿‡Dockeræ‰‹åŠ¨éƒ¨ç½²ZooKeeper\u0026amp;Kafka é€šè¿‡Docker Composeå¿«æ·éƒ¨ç½²ZooKeeper\u0026amp;Kafka Kafkaå‘é€ã€æ¥æ”¶æ¶ˆæ¯æµ‹è¯• 2ã€æœ¬æ–‡ç¯å¢ƒä¿¡æ¯ # å·¥å…· è¯´æ˜ é€‚é… Docker Docker CE 23.0.5 Docker CE Docker Desktop 4.19.0 4.0.x ZooKeeper zookeeper:3.8ï¼ˆDocker Image ï¼‰ zookeeper:3.xï¼ˆDocker Image ï¼‰ Kafka wurstmeister/kafka:2.13-2.8.1ï¼ˆDocker Imageï¼‰ wurstmeister/kafka:2.xï¼ˆDocker Imageï¼‰ äºŒã€æ‰‹åŠ¨éƒ¨ç½²Kafka # 1ã€æ‹‰å–é•œåƒ # å…ˆé€šè¿‡docker pull å‘½ä»¤æŠŠé•œåƒæ‹‰å–ä¸‹æ¥ï¼Œæ–¹ä¾¿åç»­æ“ä½œ\ndocker pull zookeeper:3.8 docker pull wurstmeister/kafka:2.13-2.8.1 2ã€åˆ›å»ºæ•°æ®å· # åˆ›å»ºæ•°æ®å·ï¼Œæ–¹ä¾¿æ•°æ®æŒä¹…åŒ–\ndocker volume create zookeeper_vol docker volume create kafka_vol 3ã€åˆ›å»ºZooKeeperå®¹å™¨ # åˆ›å»ºzookeeper-testå®¹å™¨ï¼ŒåŒæ—¶æŒ‚è½½æ•°æ®å·å’Œå¹¶æŒ‡å®šç«¯å£æ˜ å°„ï¼ˆ2181ï¼‰\ndocker run -d --name zookeeper-test -p 2181:2181 \\ --env ZOO_MY_ID=1 \\ -v zookeeper_vol:/data \\ -v zookeeper_vol:/datalog \\ -v zookeeper_vol:/logs \\ zookeeper 4ã€åˆ›å»ºKafkaå®¹å™¨ # åˆ›å»ºkafka-testå®¹å™¨ï¼ŒåŒæ—¶æŒ‚è½½æ•°æ®å·å’Œå¹¶æŒ‡å®šç«¯å£æ˜ å°„ï¼ˆ9092ï¼‰ï¼Œå¹¶å°†zookeeper-testé“¾æ¥åˆ°è¯¥å®¹å™¨ï¼Œä½¿Kafkaå¯ä»¥æˆåŠŸè®¿é—®åˆ°zookeeper-testï¼ŒKafkaç›¸å…³å‚æ•°é€šè¿‡ç¯å¢ƒå˜é‡ï¼ˆâ€”envï¼‰è®¾ç½®\ndocker run -d --name kafka-test -p 9092:9092 \\ --link zookeeper-test \\ --env KAFKA_ZOOKEEPER_CONNECT=zookeeper-test:2181 \\ --env KAFKA_ADVERTISED_HOST_NAME=localhost \\ --env KAFKA_ADVERTISED_PORT=9092 \\ --env KAFKA_LOG_DIRS=/kafka/logs \\ -v kafka_vol:/kafka \\ wurstmeister/kafka é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥æŒæ¡æ•´ä¸ªéƒ¨ç½²è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥è¾¾æˆZooKeeperçš„å¤ç”¨ï¼Œä¸è¿‡ç¨æ˜¾ç¹ç\nä¸‰ã€Docker Composeéƒ¨ç½²Kafka # 1ã€åˆ›å»ºDocker Composeé…ç½®æ–‡ä»¶ # ä½¿ç”¨Docker Composeå¯ä»¥å°†ä¸€ç³»åˆ—åˆ›å»ºåŠæ˜ å°„èµ„æºï¼ˆç½‘ç»œã€æ•°æ®å·ç­‰ï¼‰æ“ä½œæ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡depends_onå‚æ•°æŒ‡å®šå®¹å™¨çš„å¯åŠ¨é¡ºåºï¼Œé€šè¿‡environmentå‚æ•°æŒ‡å®šKafkaéœ€è¦çš„åŸºæœ¬å‚æ•°ä¿¡æ¯ åˆ›å»ºkafka-group.ymlï¼Œä¿å­˜ä»¥ä¸‹ä¿¡æ¯\nversion: \u0026#39;3\u0026#39; name: kafka-group services: zookeeper-test: image: zookeeper ports: - \u0026#34;2181:2181\u0026#34; volumes: - zookeeper_vol:/data - zookeeper_vol:/datalog - zookeeper_vol:/logs container_name: zookeeper-test kafka-test: image: wurstmeister/kafka ports: - \u0026#34;9092:9092\u0026#34; environment: KAFKA_ADVERTISED_HOST_NAME: \u0026#34;localhost\u0026#34; KAFKA_ZOOKEEPER_CONNECT: \u0026#34;zookeeper-test:2181\u0026#34; KAFKA_LOG_DIRS: \u0026#34;/kafka/logs\u0026#34; volumes: - kafka_vol:/kafka depends_on: - zookeeper-test container_name: kafka-test volumes: zookeeper_vol: {} kafka_vol: {} 2ã€å¯åŠ¨å®¹å™¨ç»„ # # å¯åŠ¨Kafkaå®¹å™¨ç»„ docker compose -f kafa-group.yml up -d # è¾“å‡ºç¤ºä¾‹ âœ” Network kafka-group_default Created âœ” Volume \u0026#34;kafka-group_zookeeper_vol\u0026#34; Created âœ” Volume \u0026#34;kafka-group_kafka_vol\u0026#34; Created âœ” Container zookeeper-test Started âœ” Container kafka-test Started å››ã€Kafkaæ¶ˆæ¯æµ‹è¯• # 1ã€å¯åŠ¨Kafka Producer # æ–°å¼€ä¸€ä¸ªå‘½ä»¤åçª—å£ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯åŠ¨Kafka Producerï¼Œå‡†å¤‡å¾€topic:testå‘é€æ¶ˆæ¯\n# è¿›å…¥å®¹å™¨ docker exec -it kafka-test /bin/bash # è¿›å…¥Kafka binç›®å½• cd /opt/kafka/bin # å¯åŠ¨Producer sh kafka-console-producer.sh --broker-list localhost:9092 --topic test 2ã€å¯åŠ¨Kafka Consumer # æ–°å¼€ä¸€ä¸ªå‘½ä»¤åçª—å£ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¯åŠ¨Kafka Consumerï¼Œè®¢é˜…æ¥è‡ªtopic:testçš„æ¶ˆæ¯\n# è¿›å…¥å®¹å™¨ docker exec -it kafka-test /bin/bash # è¿›å…¥Kafka binç›®å½• cd /opt/kafka/bin # å¯åŠ¨Consumer sh kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test 3ã€æ”¶å‘æ¶ˆæ¯æµ‹è¯• # åœ¨Producerå‘½ä»¤è¡Œçª—å£è¾“å…¥å†…å®¹ï¼Œç„¶åå›è½¦å³å¯å‘é€æ¶ˆæ¯ ç„¶åå†Consumerå‘½ä»¤è¡Œçª—å£å¯ä»¥çœ‹åˆ°æ”¶åˆ°çš„æ¶ˆæ¯\n![[kafkaæµ‹è¯•æ•ˆæœå›¾.png]]\näº”ã€å¤‡æ³¨ # 1ã€å¯èƒ½ç¢°åˆ°çš„é—®é¢˜ # å¦‚æœä½ ç¢°åˆ°ZooKeeperã€Kafkaå®¹å™¨æ— æ³•æ­£å¸¸å¯åŠ¨ï¼Œå¯ä»¥åˆ é™¤æ•°æ®å·ä»¥åŠå®¹å™¨åè¿›è¡Œåˆ›å»º\n# åœç”¨\u0026amp;åˆ é™¤å®¹å™¨ docker stop zookeeper-test kafka-test docker rm zookeeper-test kafka-test # åˆ é™¤æ•°æ®å· docker volume rm zookeeper_vol kafka_vol docker volume rm kafka-group_kafka_vol kafka-group_zookeeper_vol 2ã€ç›¸å…³é˜…è¯» # https://ken.io/note/zookeeper-cluster-deploy-guide https://ken.io/note/kafka-cluster-deploy-guide https://hub.docker.com/_/zookeeper https://hub.docker.com/r/wurstmeister/kafka å…­ã€ç«¯åˆ°ç«¯å»¶è¿Ÿ # æ¥è‡ª: ä¸€æ–‡ç†è§£kafkaç«¯åˆ°ç«¯çš„å»¶è¿Ÿ\nç†è§£åˆ°ç«¯çš„å»¶è¿Ÿ(end-to-end latency) # ç«¯åˆ°ç«¯å»¶æ—¶æ˜¯æŒ‡åº”ç”¨é€»è¾‘è°ƒç”¨KafkaProducer.send()ç”Ÿäº§æ¶ˆæ¯åˆ°è¯¥æ¶ˆæ¯è¢«åº”ç”¨é€»è¾‘é€šè¿‡KafkaConsumer.poll()æ¶ˆè´¹åˆ°ä¹‹é—´çš„æ—¶é—´ã€‚\nå› æ­¤ï¼Œç«¯åˆ°ç«¯çš„å»¶è¿Ÿä¸»è¦ä¼šç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆ: # Produce time: å†…éƒ¨Kafka producerå¤„ç†æ¶ˆæ¯å¹¶å°†æ¶ˆæ¯æ‰“åŒ…çš„æ—¶é—´ Publish time: producerå‘é€åˆ°brokerå¹¶å†™å…¥åˆ°leaderå‰¯æœ¬logçš„æ—¶é—´ Commit time: followerå‰¯æœ¬å¤‡ä»½æ¶ˆæ¯çš„æ—¶é—´ Catch-up time: æ¶ˆè´¹è€…è¿½èµ¶æ¶ˆè´¹è¿›åº¦ï¼Œæ¶ˆè´¹åˆ°è¯¥æ¶ˆæ¯ä½ç§»å€¼å‰æ‰€èŠ±è´¹çš„æ—¶é—´ Fetch time: ä»brokerè¯»å–è¯¥æ¶ˆæ¯çš„æ—¶é—´ ![[kafkaç«¯åˆ°ç«¯.webp]]\n![[ç«¯åˆ°ç«¯å»¶è¿Ÿå›¾.jpg]]\n"},{"id":101,"href":"/docs/programmer/cloudnative/sonar-%E4%BB%A3%E7%A0%81%E9%9D%99%E6%80%81%E6%A3%80%E6%9F%A5/","title":"Sonar ä»£ç é™æ€æ£€æŸ¥","section":"äº‘åŸç”Ÿ","content":"å¹³å°åœ°å€ éœ€è¦è‡ªå»º\nåœ¨å¹³å°æ–°å»ºé¡¹ç›®ï¼Œæ–°å»ºtokenåå¯ä»¥è‡ªåŠ¨ç”Ÿæˆæ‰«æå‘½ä»¤(æ‹‰ä»£ç , cdè¿›å»ååœ¨é¡¹ç›®ä»£ç /è·¯å¾„ä¸‹æ‰§è¡Œ)ï¼š\nsonar-scanner \\ -Dsonar.projectKey=scancenter \\ -Dsonar.sources=. \\ -Dsonar.host.url=https://sonar-xa.inone.nsfocus.com \\ -Dsonar.login=3e569f7abcfd8a64067d790f038c57a6a6b73207 å¦‚æœä½¿ç”¨çš„æ˜¯ä»–äººçš„tokenï¼Œéœ€è¦ç»™æˆæƒã€‚\n"},{"id":102,"href":"/docs/programmer/gui/example/hidden/","title":"Hidden","section":"Blog æ„å»º","content":" This page is hidden in menu # Quondam non pater est dignior ille Eurotas # Latent te facies # Lorem markdownum arma ignoscas vocavit quoque ille texit mandata mentis ultimus, frementes, qui in vel. Hippotades Peleus pennas conscia cuiquam Caeneus quas.\nPater demittere evincitque reddunt Maxime adhuc pressit huc Danaas quid freta Soror ego Luctus linguam saxa ultroque prior Tatiumque inquit Saepe liquitur subita superata dederat Anius sudor Cum honorum Latona # O fallor in sustinui iussorum equidem. Nymphae operi oris alii fronde parens dumque, in auro ait mox ingenti proxima iamdudum maius?\nreality(burnDocking(apache_nanometer), pad.property_data_programming.sectorBrowserPpga(dataMask, 37, recycleRup)); intellectualVaporwareUser += -5 * 4; traceroute_key_upnp /= lag_optical(android.smb(thyristorTftp)); surge_host_golden = mca_compact_device(dual_dpi_opengl, 33, commerce_add_ppc); if (lun_ipv) { verticalExtranet(1, thumbnail_ttl, 3); bar_graphics_jpeg(chipset - sector_xmp_beta); } Fronde cetera dextrae sequens pennis voce muneris # Acta cretus diem restet utque; move integer, oscula non inspirat, noctisque scelus! Nantemque in suas vobis quamvis, et labori!\nvar runtimeDiskCompiler = home - array_ad_software; if (internic \u0026gt; disk) { emoticonLockCron += 37 + bps - 4; wan_ansi_honeypot.cardGigaflops = artificialStorageCgi; simplex -= downloadAccess; } var volumeHardeningAndroid = pixel + tftp + onProcessorUnmount; sector(memory(firewire + interlaced, wired)); "},{"id":103,"href":"/docs/programmer/gui/example/shortcodes/","title":"Shortcodes","section":"Blog æ„å»º","content":" Button # Columnns # Details # Expand # Hints # Tabs # "},{"id":104,"href":"/docs/programmer/gui/example/shortcodes/buttons/","title":"Buttons","section":"Shortcodes","content":" Buttons # Buttons are styled links that can lead to local page or external link.\nExample # {{\u0026lt; button relref=\u0026#34;/\u0026#34; [class=\u0026#34;...\u0026#34;] \u0026gt;}}Get Home{{\u0026lt; /button \u0026gt;}} {{\u0026lt; button href=\u0026#34;https://github.com/alex-shpak/hugo-book\u0026#34; \u0026gt;}}Contribute{{\u0026lt; /button \u0026gt;}} Get Home Contribute "},{"id":105,"href":"/docs/programmer/gui/example/shortcodes/columns/","title":"Columns","section":"Shortcodes","content":" Columns # Columns help organize shorter pieces of content horizontally for readability.\n{{\u0026lt; columns \u0026gt;}} \u0026lt;!-- begin columns block --\u0026gt; # Left Content Lorem markdownum insigne... \u0026lt;---\u0026gt; \u0026lt;!-- magic separator, between columns --\u0026gt; # Mid Content Lorem markdownum insigne... \u0026lt;---\u0026gt; \u0026lt;!-- magic separator, between columns --\u0026gt; # Right Content Lorem markdownum insigne... {{\u0026lt; /columns \u0026gt;}} Example # Left Content # Lorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\nMid Content # Lorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter!\nRight Content # Lorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\n"},{"id":106,"href":"/docs/programmer/gui/example/shortcodes/details/","title":"Details","section":"Shortcodes","content":" Details # Details shortcode is a helper for details html5 element. It is going to replace expand shortcode.\nExample # {{\u0026lt; details \u0026#34;Title\u0026#34; [open] \u0026gt;}} ## Markdown content Lorem markdownum insigne... {{\u0026lt; /details \u0026gt;}} {{\u0026lt; details title=\u0026#34;Title\u0026#34; open=true \u0026gt;}} ## Markdown content Lorem markdownum insigne... {{\u0026lt; /details \u0026gt;}} Title Markdown content # Lorem markdownum insigne\u0026hellip;\n"},{"id":107,"href":"/docs/programmer/gui/example/shortcodes/expand/","title":"Expand","section":"Shortcodes","content":" Expand # Expand shortcode can help to decrease clutter on screen by hiding part of text. Expand content by clicking on it.\nExample # Default # {{\u0026lt; expand \u0026gt;}} ## Markdown content Lorem markdownum insigne... {{\u0026lt; /expand \u0026gt;}} Expand â†• Markdown content # Lorem markdownum insigne\u0026hellip;\nWith Custom Label # {{\u0026lt; expand \u0026#34;Custom Label\u0026#34; \u0026#34;...\u0026#34; \u0026gt;}} ## Markdown content Lorem markdownum insigne... {{\u0026lt; /expand \u0026gt;}} Custom Label ... Markdown content # Lorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\n"},{"id":108,"href":"/docs/programmer/gui/example/shortcodes/hints/","title":"Hints","section":"Shortcodes","content":" Hints # Hint shortcode can be used as hint/alerts/notification block.\nThere are 3 colors to choose: info, warning and danger.\n{{\u0026lt; hint [info|warning|danger] \u0026gt;}} **Markdown content** Lorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa {{\u0026lt; /hint \u0026gt;}} Example # Markdown content\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa Markdown content\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa Markdown content\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa "},{"id":109,"href":"/docs/programmer/gui/example/shortcodes/section/","title":"Section","section":"Shortcodes","content":" Section # Section renders pages in section as definition list, using title and description.\nExample # {{\u0026lt; section \u0026gt;}} First Page First page # Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Second Page Second Page # Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "},{"id":110,"href":"/docs/programmer/gui/example/shortcodes/section/first-page/","title":"First Page","section":"Section","content":" First page # Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\nDuis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n"},{"id":111,"href":"/docs/programmer/gui/example/shortcodes/section/second-page/","title":"Second Page","section":"Section","content":" Second Page # Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\nDuis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n"},{"id":112,"href":"/docs/programmer/gui/example/shortcodes/tabs/","title":"Tabs","section":"Shortcodes","content":" Tabs # Tabs let you organize content by context, for example installation instructions for each supported platform.\n{{\u0026lt; tabs \u0026#34;uniqueid\u0026#34; \u0026gt;}} {{\u0026lt; tab \u0026#34;MacOS\u0026#34; \u0026gt;}} # MacOS Content {{\u0026lt; /tab \u0026gt;}} {{\u0026lt; tab \u0026#34;Linux\u0026#34; \u0026gt;}} # Linux Content {{\u0026lt; /tab \u0026gt;}} {{\u0026lt; tab \u0026#34;Windows\u0026#34; \u0026gt;}} # Windows Content {{\u0026lt; /tab \u0026gt;}} {{\u0026lt; /tabs \u0026gt;}} Example # MacOS MacOS # This is tab MacOS content.\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\nLinux Linux # This is tab Linux content.\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\nWindows Windows # This is tab Windows content.\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\n"},{"id":113,"href":"/docs/programmer/hardware/raspberrypi/","title":"Raspberry Pi","section":"ç¡¬ä»¶","content":" æ ‘è“æ´¾ # è¯¦ç»†æ–‡æ¡£ # å‚è€ƒCloud Atlas\nå¾ˆè¯¦ç»†çš„ç½—åˆ—äº†æ ‘è“æ´¾å„ä¸ªç‰ˆæœ¬çš„å‚æ•°ä»¥åŠIO\u0026amp;å…¶ä»–å‚æ•°çš„æ±‡æ€»ï¼Œå±äºå¯¹å®˜æ–¹æ–‡æ¡£çš„ç¿»è¯‘ä»¥åŠè¡¥å……ï¼ŒåŸºäºå®è·µçš„è¡¥å……ï¼Œå¾ˆæœ‰ç”¨ã€‚\n"},{"id":114,"href":"/docs/programmer/hardware/screen/","title":"Screen","section":"ç¡¬ä»¶","content":" ä¾¿æºå±å¹• # æŸæ—¥å…¥å¾—4Kä¾¿æºå±å¹•ä¸€ä¸ª, ç”šæ˜¯æ¬¢å–œã€‚æ— è®ºæ‰‹æœºã€NSã€PCç”¨ä¹‹çš†çˆ½.ç„¶NS 1080P ç¼©æ”¾è‡³ 4k ç•¥ç³Šï¼Œåªå¯è¿œè§‚ã€‚\næŸæ—¥å› å‹äº†ä¸ªé”®ç›˜å’Œä¹¦ï¼Œæ¬ï¼Œå±å¹•è£‚ï¼Œå±èŠ±ä¹‹ã€‚æ–¹çŸ¥å¹³æ—¶å±å¹•æ“¦ç°æ—¶ï¼Œç¨åŠ ç”¨åŠ›å°±ä¼šç ´ç¢æ„Ÿä¸æ˜¯è™šå¦„ï¼Œè€Œæ˜¯ç¡®å®ã€‚å¯è§è´¨é‡ç”šæ˜¯ä¸è¡Œï¼Œå¼ƒã€‚\n"},{"id":115,"href":"/docs/programmer/langs/python/paramiko-%E4%BD%BF%E7%94%A8-sshsftp/","title":"Paramiko ä½¿ç”¨ Ssh\u0026sftp","section":"Python","content":" åŸºç¡€ç”¨æ³•-ssh å’Œ sftpæ–‡ä»¶ä¼ è¾“ # import os import gzip import shutil import paramiko import multiprocessing from pathlib import Path from loguru import logger from config import globalconf class SSHConnection(object): def __init__(self, host=None, port=None, username=None, pwd=None, pk_path=None): \u0026#34;\u0026#34;\u0026#34; :param host: æœåŠ¡å™¨ip :param port: æ¥å£ :param username: ç™»å½•å :param pwd: å¯†ç  \u0026#34;\u0026#34;\u0026#34; self.host = host self.port = port self.username = username self.pwd = pwd self.pk_path = pk_path def __enter__(self): self.connect() return self def __exit__(self, exc_type, exc_val, exc_tb): self.close() return True def connect(self): transport = paramiko.Transport((self.host, self.port)) # transport.connect(username=self.username, password=self.pwd) pk = paramiko.RSAKey.from_private_key_file(self.pk_path) transport.connect(username=self.username, pkey=pk) self.__transport = transport self.sftp = paramiko.SFTPClient.from_transport(self.__transport) def close(self): self.__transport.close() self.sftp.close() def upload(self, local_path, target_path): self.sftp.put(local_path, target_path) def download(self, remote_path, local_path): sftp = paramiko.SFTPClient.from_transport(self.__transport) sftp.get(remote_path, local_path) def listdir(self, path): return self.sftp.listdir(path=path) def listdir_attr(self, path): return self.sftp.listdir_attr(path=path) def download_slowly(self, remote_path, local_path): sftp = paramiko.SFTPClient.from_transport(self.__transport) # # æ—§æ–¹æ³•ä¸‹è½½å¤§æ–‡ä»¶ä¼šå‡ºç°Server connection dropped # sftp.get(remote_path, local_path) # æ–°æ–¹æ³•ä¸‹è½½å¤§æ–‡ä»¶æˆåŠŸ # è¿™å°†é¿å…Paramikoé¢„å–ç¼“å­˜ï¼Œå¹¶å…è®¸æ‚¨ä¸‹è½½æ–‡ä»¶ï¼Œå³ä½¿å®ƒä¸æ˜¯å¾ˆå¿« with sftp.open(remote_path, \u0026#39;rb\u0026#39;) as fp: shutil.copyfileobj(fp, open(local_path, \u0026#39;wb\u0026#39;)) def cmd(self, command): ssh = paramiko.SSHClient() # æ‰§è¡Œå‘½ä»¤ stdin, stdout, stderr = ssh.exec_command(command) # è·å–å‘½ä»¤ç»“æœ result = stdout.read() result = str(result, encoding=\u0026#39;utf-8\u0026#39;) return result class SSHConnectionManager(object): def __init__(self, host, port, username, pwd, pk_path): self.ssh_args = { \u0026#34;host\u0026#34;: host, \u0026#34;port\u0026#34;: port, \u0026#34;username\u0026#34;: username, \u0026#34;pk_path\u0026#34;: pk_path, \u0026#34;pwd\u0026#34;: pwd } def __enter__(self): self.ssh = SSHConnection(**self.ssh_args) self.ssh.connect() return self.ssh def __exit__(self, exc_type, exc_val, exc_tb): self.ssh.close() return True def clear_dir(path): \u0026#34;\u0026#34;\u0026#34; æ¸…ç©ºæ–‡ä»¶å¤¹ï¼šå¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨å°±åˆ›å»ºï¼Œå¦‚æœæ–‡ä»¶å­˜åœ¨å°±æ¸…ç©ºï¼ :param path: æ–‡ä»¶å¤¹è·¯å¾„ :return: \u0026#34;\u0026#34;\u0026#34; import os import shutil try: if not os.path.exists(path): os.makedirs(path) else: shutil.rmtree(path) os.makedirs(path) return True except: return False def decompress_gz(gz_file): with gzip.GzipFile(gz_file) as file: for i in file: yield i def get_file_sftp(tar_path): temp_path = os.path.join(globalconf.SFTP_TEMP_PATH, os.path.split(tar_path)[-1]) try: with SSHConnection( host=globalconf.SFTP_SERVER_HOST, port=globalconf.SFTP_SERVER_PORT, username=globalconf.SFTP_USERNAME, pwd=\u0026#34;\u0026#34;, pk_path=globalconf.SFTP_KEY_PATH ) as sftp: sftp.download_slowly(tar_path, temp_path) except Exception as err: logger.error(f\u0026#34;sftp ä¸‹è½½æ–‡ä»¶å‡ºé”™: {err}\u0026#34;) return temp_path def format_file_list(file_list): root_dir = os.path.dirname(file_list[0]) sub_files = set([os.path.basename(file) for file in file_list]) return root_dir, sub_files def is_sftp_file_exists(task_id, path): exists = False if isinstance(path, str) and path: path = [path] rootdir, _ = format_file_list(path) try: with SSHConnection( host=globalconf.SFTP_SERVER_HOST, port=globalconf.SFTP_SERVER_PORT, username=globalconf.SFTP_USERNAME, pwd=\u0026#34;\u0026#34;, pk_path=globalconf.SFTP_KEY_PATH ) as sftp: list_file_names = sftp.listdir(rootdir) if str(task_id) in str(list_file_names): exists = True except Exception as err: logger.error(f\u0026#34;sftp è·å–æ–‡ä»¶åˆ—è¡¨é”™è¯¯: {err}\u0026#34;) return exists class SFTPFileManager_Tool(object): def __init__(self, host, port, username, pwd, pk_path): \u0026#34;\u0026#34;\u0026#34; init :param host: ip :param port: ç«¯å£ :param username: ç”¨æˆ·å :param pwd: å¯†ç  \u0026#34;\u0026#34;\u0026#34; self.ssh_args = {\u0026#34;host\u0026#34;: host, \u0026#34;port\u0026#34;: port, \u0026#34;username\u0026#34;: username, \u0026#34;pwd\u0026#34;: pwd, \u0026#34;pk_path\u0026#34;: pk_path} def exists(self, path): \u0026#34;\u0026#34;\u0026#34; åˆ¤æ–­è·¯å¾„æ˜¯å¦å­˜åœ¨ :param path: :return: \u0026#34;\u0026#34;\u0026#34; is_exists = False with SSHConnectionManager(**self.ssh_args) as ssh: result = ssh.cmd(f\u0026#34;find {path}\u0026#34;) if result: is_exists = True return is_exists def is_file(self, path): \u0026#34;\u0026#34;\u0026#34; åˆ¤æ–­è·¯å¾„æ˜¯å¦æ˜¯æ–‡ä»¶ :param path: :return: \u0026#34;\u0026#34;\u0026#34; if self.exists(path): with SSHConnectionManager(**self.ssh_args) as ssh: prefix = ssh.cmd(f\u0026#34;ls -ld {path}\u0026#34;)[0] if prefix == \u0026#39;-\u0026#39;: return True else: return False else: return False def is_dir(self, path): \u0026#34;\u0026#34;\u0026#34; åˆ¤æ–­è·¯å¾„æ˜¯å¦æ˜¯ç›®å½• :param path: :return: \u0026#34;\u0026#34;\u0026#34; if self.exists(path): with SSHConnectionManager(**self.ssh_args) as ssh: prefix = ssh.cmd(f\u0026#34;ls -ld {path}\u0026#34;)[0] if prefix == \u0026#39;d\u0026#39;: return True else: return False else: return False def download_file(self, remote_path, local_path): \u0026#34;\u0026#34;\u0026#34; ä¸‹è½½æ–‡ä»¶ :param remote_path: è¿œç¨‹æ–‡ä»¶è·¯å¾„ :param local_path: æœ¬åœ°æ–‡ä»¶è·¯å¾„ :return: \u0026#34;\u0026#34;\u0026#34; print(f\u0026#34;æ­£ä¸‹è½½æ–‡ä»¶{remote_path}...\u0026#34;) with SSHConnectionManager(**self.ssh_args) as ssh: if not Path(local_path).parent.exists(): Path(local_path).parent.mkdir(parents=True) ssh.download_slowly(remote_path=remote_path, local_path=local_path) def download_folder(self, remote_folder, local_folder): \u0026#34;\u0026#34;\u0026#34; ä¸‹è½½æ–‡ä»¶å¤¹ :param remote_folder: è¿œç¨‹æ–‡ä»¶å¤¹ç›®å½• :param local_folder: æœ¬åœ°æ–‡ä»¶å¤¹ç›®å½• :return: \u0026#34;\u0026#34;\u0026#34; with SSHConnectionManager(**self.ssh_args) as ssh: dst_folder = Path(local_folder) if not dst_folder.exists(): dst_folder.mkdir(parents=True) clear_dir(str(dst_folder)) files_list = ssh.cmd(\u0026#34;ls {}\u0026#34;.format(remote_folder)) files_list = files_list.split(\u0026#39;\\n\u0026#39;) files_list = [x for x in files_list if x] # å¤šè¿›ç¨‹ä¸‹è½½æ–‡ä»¶ cpu_count = multiprocessing.cpu_count() // 2 if cpu_count == 0: cpu_count = 1 pool = multiprocessing.Pool(cpu_count) for file in files_list: remote_path = remote_folder + \u0026#34;/\u0026#34; + file local_path = dst_folder.joinpath(file) pool.apply_async(func=self.download_file, args=(remote_path, local_path)) pool.close() pool.join() # ä¸»è¿›ç¨‹ä¸‹è½½æ–‡ä»¶ # for file in files_list: # remote_path = remote_folder + \u0026#34;/\u0026#34; + file # local_path = dst_folder.joinpath(file) # print(f\u0026#34;æ­£ä¸‹è½½{remote_path}...\u0026#34;) # ssh.download_slowly(remote_path=remote_path, local_path=local_path) if __name__ == \u0026#34;__main__\u0026#34;: a = SFTPFileManager_Tool(host=\u0026#34;1.1.1.1\u0026#34;, port=5050, username=\u0026#34;sftpuser\u0026#34;, pwd=\u0026#34;\u0026#34;, pk_path=\u0026#34;/root/.ssh/id_rsa\u0026#34;) b = a.is_dir(\u0026#34;/hello/\u0026#34;) print(b) ç«¯å£æ˜ å°„ # å°†è¿œç¨‹æœºå™¨ä¸Šçš„ç«¯å£è½¬å‘åˆ°æœ¬æœº # import socket import select from socket import AF_INET, SOCK_STREAM import paramiko ssh_client = paramiko.SSHClient() ssh_client.set_missing_host_key_policy(paramiko.AutoAddPolicy()) ssh_client.connect(\u0026#34;{remote_host}\u0026#34;,port={remote_port}}, username=\u0026#34;{username}\u0026#34;,password=\u0026#34;{passwd}\u0026#34;, look_for_keys=False, allow_agent=False) transport = ssh_client.get_transport() channel = transport.open_channel(\u0026#39;direct-tcpip\u0026#39;, (\u0026#34;{remote_host}\u0026#34;, {remote_port}), (\u0026#34;localhost\u0026#34;, {local_port})) local_socket = socket.socket(AF_INET, SOCK_STREAM) local_socket.bind((\u0026#39;localhost\u0026#39;, 5555)) local_socket.listen(1) client_socket, client_address = local_socket.accept() while True: # ä½¿ç”¨selectæ¥ç›‘æ§socketæ˜¯å¦æœ‰æ•°æ®å¯è¯» r, w, e = select.select([client_socket, channel], [], []) if client_socket in r: data = client_socket.recv(4096) if not data: break channel.send(data) if channel in r: data = channel.recv(4096) if not data: break client_socket.send(data) "},{"id":116,"href":"/excalidraw/hello-drawing-2024-04-25-16.45.19/","title":"Hello Drawing 2024 04 25 16.45.19","section":"Excalidraws","content":"==âš  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. âš ==\nText Elements # %%\nDrawing # { \u0026#34;type\u0026#34;: \u0026#34;excalidraw\u0026#34;, \u0026#34;version\u0026#34;: 2, \u0026#34;source\u0026#34;: \u0026#34;https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/2.1.6\u0026#34;, \u0026#34;elements\u0026#34;: [ { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 13, \u0026#34;versionNonce\u0026#34;: 1245203698, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;u1jPM8UifU2dBaIDVmGcI\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -697.75, \u0026#34;y\u0026#34;: 691.984375, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 21, \u0026#34;height\u0026#34;: 27, \u0026#34;seed\u0026#34;: 1090511178, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ 0, 0.5 ], [ 0, 1 ], [ 0, 5.5 ], [ -3.5, 10 ], [ -9, 16.5 ], [ -15.5, 22.5 ], [ -21, 27 ], [ -21, 27 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0, 0.1447928547859192, 0.14517433941364288, 0.14517433941364288, 0.1444266438484192, 0.12252994626760483, 0.0796368345618248, 0.011474784463644028, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 15, \u0026#34;versionNonce\u0026#34;: 1307882286, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;jzQyjYxa-e4ohqXOq3uM3\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -709.75, \u0026#34;y\u0026#34;: 716.484375, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 4.5, \u0026#34;height\u0026#34;: 24.5, \u0026#34;seed\u0026#34;: 1585491146, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ 0.5, 0 ], [ 1.5, 0 ], [ 2.5, 0.5 ], [ 3.5, 4 ], [ 4.5, 8.5 ], [ 4.5, 13.5 ], [ 3.5, 18.5 ], [ 1.5, 23.5 ], [ 0.5, 24.5 ], [ 0.5, 24.5 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0, 0.07551690191030502, 0.10849164426326752, 0.1421988308429718, 0.15429922938346863, 0.1597619652748108, 0.1570153385400772, 0.1273975670337677, 0.037140458822250366, 0.0009765774011611938, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 51, \u0026#34;versionNonce\u0026#34;: 1061543602, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;KJ0D8NQz0c076KGRb68DR\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -673.75, \u0026#34;y\u0026#34;: 688.984375, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 51.5, \u0026#34;height\u0026#34;: 56, \u0026#34;seed\u0026#34;: 725290442, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ 1.5, -1 ], [ 3, -2 ], [ 3.5, -2 ], [ 3.5, -1.5 ], [ 1, 2.5 ], [ -4, 7 ], [ -8.5, 11 ], [ -11.5, 13.5 ], [ -12.5, 15 ], [ -11, 15 ], [ -8, 14.5 ], [ 1, 11 ], [ 8.5, 8.5 ], [ 16.5, 6 ], [ 20, 5.5 ], [ 24.5, 4.5 ], [ 25.5, 5.5 ], [ 24.5, 8.5 ], [ 22, 11.5 ], [ 19, 15.5 ], [ 13, 20.5 ], [ 10.5, 22 ], [ 9, 22 ], [ 7.5, 20.5 ], [ 7, 19 ], [ 7, 18.5 ], [ 7, 19 ], [ 7.5, 20.5 ], [ 8, 25.5 ], [ 8.5, 30 ], [ 8.5, 35.5 ], [ 8, 40.5 ], [ 7.5, 43.5 ], [ 6.5, 44.5 ], [ 3.5, 44 ], [ -1, 42 ], [ -5, 39 ], [ -9, 35 ], [ -10, 34.5 ], [ -10, 35 ], [ -10, 37.5 ], [ -13.5, 44 ], [ -19, 49 ], [ -24, 53 ], [ -26, 54 ], [ -26, 54 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0, 0.09900053590536118, 0.10817120969295502, 0.11374074965715408, 0.11407645046710968, 0.10370030999183655, 0.09350728988647461, 0.09350728988647461, 0.09350728988647461, 0.08934157341718674, 0.09170672297477722, 0.09654383361339569, 0.11441214382648468, 0.1253070831298828, 0.1270466148853302, 0.12495613098144531, 0.10817120969295502, 0.10370030999183655, 0.09111162275075912, 0.0801861584186554, 0.05592431500554085, 0.020187685266137123, 0.013794155791401863, 0.007736324332654476, 0.02859540656208992, 0.08413824439048767, 0.1111009418964386, 0.13379110395908356, 0.13923858106136322, 0.1421988308429718, 0.14517433941364288, 0.15161363780498505, 0.15161363780498505, 0.1280994862318039, 0.09381246566772461, 0.012222476303577423, 0.012222476303577423, 0.003082322422415018, 0.027450980618596077, 0.06918440759181976, 0.11340504884719849, 0.11944762617349625, 0.11340504884719849, 0.09837491065263748, 0.06890974193811417, 0.0023651483934372663, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 13, \u0026#34;versionNonce\u0026#34;: 663887214, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;qGIhFg6MQyCLnE0wmopzt\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -668.25, \u0026#34;y\u0026#34;: 728.984375, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 39.5, \u0026#34;height\u0026#34;: 11, \u0026#34;seed\u0026#34;: 1585811914, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ 1, 0 ], [ 3.5, -0.5 ], [ 14, -2 ], [ 28, -1.5 ], [ 33.5, 2 ], [ 38, 6.5 ], [ 39.5, 9 ], [ 39.5, 9 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0, 0.08642710000276566, 0.10817120969295502, 0.1574120670557022, 0.19926756620407104, 0.19621576368808746, 0.08671702444553375, 0.0013122758828103542, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 21, \u0026#34;versionNonce\u0026#34;: 1748711538, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;tkLtaZZ9elghcrgTezozF\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -570.25, \u0026#34;y\u0026#34;: 674.984375, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 30.5, \u0026#34;height\u0026#34;: 47.5, \u0026#34;seed\u0026#34;: 478540106, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ 0.5, 0 ], [ 0.5, -0.5 ], [ 0, 1 ], [ -3, 4.5 ], [ -8, 10 ], [ -12.5, 15 ], [ -16, 22.5 ], [ -15, 26 ], [ -12, 28.5 ], [ -7.5, 31.5 ], [ 1.5, 36.5 ], [ 6.5, 40 ], [ 10.5, 43.5 ], [ 13, 46 ], [ 14.5, 47 ], [ 14.5, 47 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0, 0.11944762617349625, 0.13093766570091248, 0.1270466148853302, 0.1111009418964386, 0.09869535267353058, 0.09869535267353058, 0.10559242963790894, 0.11944762617349625, 0.1418173462152481, 0.16932936012744904, 0.18252842128276825, 0.18252842128276825, 0.1425650417804718, 0.08242923766374588, 0.0010070954449474812, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 14, \u0026#34;versionNonce\u0026#34;: 914898862, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;LGSPphzKSM10F8Q0mNgzA\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -558.75, \u0026#34;y\u0026#34;: 702.984375, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 30, \u0026#34;height\u0026#34;: 24, \u0026#34;seed\u0026#34;: 1039258314, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ -0.5, 0 ], [ -0.5, -0.5 ], [ -2, -0.5 ], [ -5, 1 ], [ -9.5, 5.5 ], [ -15.5, 12 ], [ -22, 17.5 ], [ -30, 23.5 ], [ -30, 23.5 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0, 0.12184329330921173, 0.1425650417804718, 0.14743266999721527, 0.1418173462152481, 0.13669031858444214, 0.12184329330921173, 0.09111162275075912, 0.0120088504627347, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 12, \u0026#34;versionNonce\u0026#34;: 81746482, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;Hewyqe3H3M7ZWFQg54651\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -605.75, \u0026#34;y\u0026#34;: 707.484375, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 36.5, \u0026#34;height\u0026#34;: 11, \u0026#34;seed\u0026#34;: 1398826250, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ 0, -0.5 ], [ 2, -1.5 ], [ 6.5, -4 ], [ 13, -6.5 ], [ 21.5, -8.5 ], [ 36.5, -11 ], [ 36.5, -11 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0, 0.09170672297477722, 0.11340504884719849, 0.11979857832193375, 0.11911192536354065, 0.11641107499599457, 0.003524834057316184, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 34, \u0026#34;versionNonce\u0026#34;: 1056971246, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;05q113RV-Z_XZPDjvOCk4\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -546.25, \u0026#34;y\u0026#34;: 684.984375, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 18.5, \u0026#34;height\u0026#34;: 49.5, \u0026#34;seed\u0026#34;: 1358645706, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ -0.5, -1 ], [ 0, -3 ], [ 1.5, -4 ], [ 6, -5.5 ], [ 10.5, -6.5 ], [ 15, -7 ], [ 17, -7 ], [ 18, -7 ], [ 17, -6.5 ], [ 14, -5 ], [ 11.5, -3.5 ], [ 10.5, -3 ], [ 10, -1 ], [ 11.5, -0.5 ], [ 13.5, 0.5 ], [ 15.5, 2.5 ], [ 17, 8 ], [ 17.5, 13 ], [ 17.5, 19 ], [ 18, 25 ], [ 18, 30.5 ], [ 17.5, 37.5 ], [ 16.5, 40.5 ], [ 15, 42 ], [ 13.5, 42.5 ], [ 9, 41 ], [ 5.5, 38.5 ], [ 4, 36.5 ], [ 4, 36.5 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0, 0.043442435562610626, 0.059464409947395325, 0.07551690191030502, 0.09320210665464401, 0.09654383361339569, 0.09350728988647461, 0.06559853255748749, 0.05339131876826286, 0.03434805944561958, 0.02859540656208992, 0.0313267707824707, 0.0316624715924263, 0.03289845213294029, 0.035828184336423874, 0.04303044080734253, 0.051590751856565475, 0.062867172062397, 0.06509498506784439, 0.061142899096012115, 0.06535439193248749, 0.07364004105329514, 0.08876173198223114, 0.10054169595241547, 0.1114366352558136, 0.10849164426326752, 0.06970321387052536, 0.017868313938379288, 0, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 14, \u0026#34;versionNonce\u0026#34;: 1142506482, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;qL1ERJpzu7sSWIX1gi0v9\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -547.75, \u0026#34;y\u0026#34;: 701.984375, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 48.5, \u0026#34;height\u0026#34;: 9.5, \u0026#34;seed\u0026#34;: 1253217034, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ 2, -1 ], [ 6, -2.5 ], [ 12.5, -3 ], [ 25.5, -4.5 ], [ 33, -6 ], [ 40, -7.5 ], [ 46, -9.5 ], [ 48.5, -9.5 ], [ 48.5, -9.5 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0, 0.06890974193811417, 0.09837491065263748, 0.11340504884719849, 0.11641107499599457, 0.10882734507322311, 0.05545128509402275, 0.008270390331745148, 0.0007782101165503263, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 30, \u0026#34;versionNonce\u0026#34;: 402828334, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;WAJWdzheRT8_nINwPWsrP\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -769.1329867867925, \u0026#34;y\u0026#34;: 800.8721458770551, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 53.408205136530114, \u0026#34;height\u0026#34;: 106.93125967739161, \u0026#34;seed\u0026#34;: 1634857433, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ -0.9652247719864135, 1.2952284342079565 ], [ -2.5902883221559705, 4.207152592510056 ], [ -5.881778657549376, 9.482729840439333 ], [ -21.80655475211711, 31.27972702817658 ], [ -36.29864798035919, 50.38351361592947 ], [ -45.67397419535621, 62.47228589657391 ], [ -50.087506725760136, 66.91925007333543 ], [ -50.82533284980582, 68.29680839821742 ], [ -46.066974500802985, 66.11367826733226 ], [ -37.776074921421355, 61.64359350951918 ], [ -29.427522606698858, 56.31289172014624 ], [ -22.116501409421176, 51.05924531496396 ], [ -16.04321454278454, 47.97020878105957 ], [ -13.295642816768577, 46.59776633088711 ], [ -12.567493230933223, 46.83876765344314 ], [ -14.705710740822042, 51.49453090265126 ], [ -20.820816908863208, 59.974430326194806 ], [ -28.992673256389935, 71.45013045851044 ], [ -37.27104092563047, 82.9988012068377 ], [ -44.58626586491755, 92.0515992819602 ], [ -50.61595873717863, 98.41110744121124 ], [ -53.408205136530114, 103.1286181084248 ], [ -51.92482950394526, 106.16177659995947 ], [ -49.50519922708952, 106.93125967739161 ], [ -49.50519922708952, 106.93125967739161 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0.6630000472068787, 0.6630000472068787, 0.6460000276565552, 0.6460000276565552, 0.6290000081062317, 0.6290000081062317, 0.6460000276565552, 0.6460000276565552, 0.6290000081062317, 0.6290000081062317, 0.6630000472068787, 0.6800000667572021, 0.6630000472068787, 0.6460000276565552, 0.6460000276565552, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6460000276565552, 0.6460000276565552, 0.6460000276565552, 0.6290000081062317, 0.6630000472068787, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 14, \u0026#34;versionNonce\u0026#34;: 1609561522, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;vP-i4iDHY0aHOazObFwhj\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -799.1661357629309, \u0026#34;y\u0026#34;: 902.1927979999593, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 4.950520914157551, \u0026#34;height\u0026#34;: 49.835163231367574, \u0026#34;seed\u0026#34;: 1497586041, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ -0.4889626141937242, 0 ], [ -0.6303233537446431, 0.6303233537446431 ], [ -0.9668408331833689, 3.183977650606721 ], [ -1.605066032167315, 13.582488721992945 ], [ -3.2393996266264367, 29.565829684601454 ], [ -4.577765988859596, 41.551332680411974 ], [ -4.950520914157551, 49.53027296185769 ], [ -4.950520914157551, 49.835163231367574 ], [ -4.950520914157551, 49.835163231367574 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0.6290000081062317, 0.6460000276565552, 0.6460000276565552, 0.6460000276565552, 0.6460000276565552, 0.6630000472068787, 0.6460000276565552, 0.6460000276565552, 0.6630000472068787, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 92, \u0026#34;versionNonce\u0026#34;: 1333327470, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;bR5Dw4li_gbYfCkRBLIlC\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -752.9612705926319, \u0026#34;y\u0026#34;: 828.5950709279261, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 41.41873634637113, \u0026#34;height\u0026#34;: 50.769266432204404, \u0026#34;seed\u0026#34;: 419125017, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ 1.604005182179094, -1.5809242590711392 ], [ 3.2357510958257762, -3.2357709247976345 ], [ 6.129789521616317, -5.827933084783126 ], [ 18.607011358692716, -14.513696892955409 ], [ 29.612685544828537, -17.76580689046864 ], [ 37.60177825980634, -15.671748500649983 ], [ 41.41873634637113, -10.232304630242197 ], [ 40.977442580245906, -1.388702207001188 ], [ 36.51128395883791, 9.155988044069431 ], [ 30.698837300985474, 19.242668705835968 ], [ 24.68835870234261, 28.959578702551994 ], [ 22.442331073090827, 33.003459541735765 ], [ 22.442331073090827, 33.003459541735765 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6460000276565552, 0.6290000081062317, 0.6290000081062317, 0.6460000276565552, 0.6290000081062317, 0.6290000081062317, 0.6460000276565552, 0.5950000286102295, 0.5950000286102295, 0.6290000081062317, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 21, \u0026#34;versionNonce\u0026#34;: 965373810, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;atasocP0lxRDGvWWkGAe-\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -746.6906160557581, \u0026#34;y\u0026#34;: 843.4466138414269, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 18.28861755942637, \u0026#34;height\u0026#34;: 38.26011995062288, \u0026#34;seed\u0026#34;: 887518265, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ 0, -0.41232363840958897 ], [ 0.6358556368608106, -0.9658692135679985 ], [ 2.2380167246678866, -1.9561280623790935 ], [ 5.181012881690208, -2.3102734976968122 ], [ 11.81533076031792, -1.3943732929193402 ], [ 17.652504145932994, 1.8592437064462501 ], [ 17.55052374426225, 7.0259995574537015 ], [ 14.347054214433001, 15.174517205239681 ], [ 9.15083251141641, 24.332805410031256 ], [ 4.140229812879738, 31.122047044881697 ], [ 0.7685312867885159, 34.54524141058755 ], [ -0.6361134134933764, 35.94984645292607 ], [ -0.04852149385339999, 34.42063615215886 ], [ 4.671646255573592, 27.46566397148615 ], [ 8.580908205598803, 22.112317496383525 ], [ 8.580908205598803, 22.112317496383525 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0.6460000276565552, 0.6460000276565552, 0.6460000276565552, 0.6460000276565552, 0.6460000276565552, 0.612000048160553, 0.612000048160553, 0.578000009059906, 0.5950000286102295, 0.612000048160553, 0.612000048160553, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 36, \u0026#34;versionNonce\u0026#34;: 1311504558, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;jFml7yXhOJTaVgF_lzmh0\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -747.350702696088, \u0026#34;y\u0026#34;: 847.4070543675191, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 92.40970059714039, \u0026#34;height\u0026#34;: 114.5219883500663, \u0026#34;seed\u0026#34;: 365946873, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ -0.29975456582849347, 0.9295425373361468 ], [ -2.2098397558220313, 4.16491688269889 ], [ -4.828037355705305, 9.680583320484061 ], [ -14.180371877967104, 35.30651529371846 ], [ -19.650243305513413, 57.936408610519834 ], [ -21.122207364860515, 74.0034674918245 ], [ -19.879486047826276, 86.33462912304697 ], [ -16.325955850858122, 93.85417178716682 ], [ -12.671347470433602, 96.95217101629873 ], [ -8.767161737174433, 96.44994282000948 ], [ -2.890687329566049, 90.7050138109397 ], [ 4.008109374160654, 79.06167955151454 ], [ 13.186127405835805, 63.93391906164322 ], [ 21.810619691324177, 49.01793198997984 ], [ 26.893439504946514, 39.87035142992909 ], [ 29.303472559478905, 35.736605690809256 ], [ 29.727019395894672, 34.983659975810156 ], [ 25.91478060460463, 38.13650614078131 ], [ 19.40883548903662, 44.617883160360634 ], [ 10.888227186506128, 51.868663941485124 ], [ 3.238209888321876, 57.58555478451137 ], [ -0.8579996072899121, 61.280762984578246 ], [ -1.6501670283952308, 64.55345545476007 ], [ 2.37939729319055, 69.04638318802029 ], [ 11.169382176840372, 77.50629500804746 ], [ 24.213395342198964, 86.75167205673131 ], [ 38.96660638482979, 95.67970624165105 ], [ 54.80709943500676, 104.57839354839223 ], [ 70.50405055874114, 114.03229206391813 ], [ 71.28749323227987, 114.5219883500663 ], [ 71.28749323227987, 114.5219883500663 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0.5100000500679016, 0.5100000500679016, 0.5100000500679016, 0.5270000100135803, 0.5440000295639038, 0.578000009059906, 0.578000009059906, 0.578000009059906, 0.5950000286102295, 0.5610000491142273, 0.5440000295639038, 0.5610000491142273, 0.5610000491142273, 0.5610000491142273, 0.5440000295639038, 0.5100000500679016, 0.5100000500679016, 0.5270000100135803, 0.5100000500679016, 0.4930000305175781, 0.5270000100135803, 0.5610000491142273, 0.578000009059906, 0.5950000286102295, 0.5950000286102295, 0.5950000286102295, 0.612000048160553, 0.612000048160553, 0.578000009059906, 0.578000009059906, 0.5950000286102295, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 13, \u0026#34;versionNonce\u0026#34;: 1966059826, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;9Uh28vijL439zgP-6gUhb\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -664.1819672014187, \u0026#34;y\u0026#34;: 855.9879229151745, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 44.554688227417955, \u0026#34;height\u0026#34;: 20.462110810044805, \u0026#34;seed\u0026#34;: 53730521, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ 0.3110967376651388, -0.33003340567904615 ], [ 2.5164749748452095, -1.2581879149933002 ], [ 10.908829488146466, -3.756043485372402 ], [ 24.23205440460856, -8.068646549608047 ], [ 35.54216279390414, -13.63297328404883 ], [ 44.235521098253685, -20.142983338824024 ], [ 44.554688227417955, -20.462110810044805 ], [ 44.554688227417955, -20.462110810044805 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0.6290000081062317, 0.612000048160553, 0.612000048160553, 0.612000048160553, 0.612000048160553, 0.5950000286102295, 0.5950000286102295, 0.612000048160553, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 22, \u0026#34;versionNonce\u0026#34;: 2076488430, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;e_c40gmlFXTH4hSqfnKX4\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -631.8385348130976, \u0026#34;y\u0026#34;: 812.0933213280864, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 34.60351875853826, \u0026#34;height\u0026#34;: 111.2217732671063, \u0026#34;seed\u0026#34;: 308040089, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ -0.49506993749025696, 0 ], [ -1.2930869052596563, -0.6330200939014503 ], [ -2.5857375731410457, -0.6601064693015815 ], [ -4.206220630838061, 0.5758333393968087 ], [ -5.8473059901753, 4.402705911832754 ], [ -12.321465264040398, 20.79265976898921 ], [ -17.343806713848608, 36.396355238619435 ], [ -19.091909033679258, 51.89888329442044 ], [ -18.530788791315217, 66.12997768210437 ], [ -15.966982060921168, 79.6971980958557 ], [ -11.756914609565001, 90.67820504114411 ], [ -6.179520582746022, 98.71845650321711 ], [ 0.6918328240892606, 105.03699800684853 ], [ 7.950227930362871, 109.44624747935609 ], [ 15.2221067374212, 110.56166679780472 ], [ 15.511609724859, 110.56166679780472 ], [ 15.511609724859, 110.56166679780472 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0.6630000472068787, 0.6630000472068787, 0.6630000472068787, 0.6630000472068787, 0.6630000472068787, 0.6460000276565552, 0.6460000276565552, 0.6460000276565552, 0.6460000276565552, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.612000048160553, 0.5950000286102295, 0.578000009059906, 0.578000009059906, 0.5950000286102295, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 14, \u0026#34;versionNonce\u0026#34;: 373734130, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;ct_Oe4tGwupE9yKvYF3yT\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -610.7163373627229, \u0026#34;y\u0026#34;: 878.4302738172371, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 54.45573005573294, \u0026#34;height\u0026#34;: 68.97729905047004, \u0026#34;seed\u0026#34;: 1704073785, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ 0, 0.49501045057502324 ], [ -0.9675150182226844, 1.9124250086590564 ], [ -3.512841146952951, 6.1060939003842805 ], [ -13.254795134979304, 21.190190994479053 ], [ -29.450365582145878, 45.38899221347572 ], [ -44.32471181315054, 62.44864976225699 ], [ -52.276367429478796, 68.8445242556835 ], [ -54.45573005573294, 68.97729905047004 ], [ -54.45573005573294, 68.97729905047004 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0.5270000100135803, 0.5440000295639038, 0.5610000491142273, 0.578000009059906, 0.578000009059906, 0.5950000286102295, 0.578000009059906, 0.5610000491142273, 0.578000009059906, 0 ] }, { \u0026#34;type\u0026#34;: \u0026#34;freedraw\u0026#34;, \u0026#34;version\u0026#34;: 38, \u0026#34;versionNonce\u0026#34;: 1657546030, \u0026#34;isDeleted\u0026#34;: false, \u0026#34;id\u0026#34;: \u0026#34;vRKUz8mw6V_Yo2EmZzCj9\u0026#34;, \u0026#34;fillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;strokeWidth\u0026#34;: 2, \u0026#34;strokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;roughness\u0026#34;: 1, \u0026#34;opacity\u0026#34;: 100, \u0026#34;angle\u0026#34;: 0, \u0026#34;x\u0026#34;: -612.696557625769, \u0026#34;y\u0026#34;: 818.694029099611, \u0026#34;strokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;backgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;width\u0026#34;: 79.53838786117149, \u0026#34;height\u0026#34;: 99.57621816284609, \u0026#34;seed\u0026#34;: 1855721433, \u0026#34;groupIds\u0026#34;: [], \u0026#34;frameId\u0026#34;: null, \u0026#34;roundness\u0026#34;: null, \u0026#34;boundElements\u0026#34;: [], \u0026#34;updated\u0026#34;: 1722333884462, \u0026#34;link\u0026#34;: null, \u0026#34;locked\u0026#34;: false, \u0026#34;points\u0026#34;: [ [ 0, 0 ], [ 0.6288163518922829, -1.8864093977331322 ], [ 1.899476690111328, -4.1828026152104485 ], [ 4.184448419865021, -6.191160189158836 ], [ 7.752870174611644, -7.562849138404999 ], [ 19.03666551840513, -9.87383647908473 ], [ 26.129845632121715, -7.424561889474262 ], [ 31.492630697773734, -2.5283128709753555 ], [ 34.878308648943175, 4.6607601500870715 ], [ 36.5800310038685, 11.888261718386161 ], [ 36.00098537104941, 18.237260522613838 ], [ 35.67099162331385, 24.50730036136349 ], [ 35.313752868404436, 29.44261245419466 ], [ 35.93947590070479, 35.33475174947944 ], [ 37.545226032397295, 42.28579779374718 ], [ 39.499093591997735, 49.850034960174185 ], [ 40.872289543096485, 57.469912221310096 ], [ 42.21831980290813, 65.36334997660299 ], [ 41.63554632340151, 73.59522862159372 ], [ 38.738652525680095, 81.87969369964503 ], [ 34.49112814670275, 87.29165461521791 ], [ 29.221777195900586, 89.70238168376136 ], [ 22.670007326636096, 87.88025781241674 ], [ 16.05966267484473, 82.06648261345754 ], [ 9.79105052206046, 73.55370675476536 ], [ 4.7791391113887585, 65.92617551053684 ], [ 2.353560143010327, 58.96267687201498 ], [ 5.7588291182612465, 50.79076103757302 ], [ 17.260981098881075, 40.07649342016214 ], [ 32.58171714174853, 29.524188843942625 ], [ 50.83499947353016, 22.32139417443443 ], [ 70.24022608970972, 22.343404333068406 ], [ 79.53838786117149, 26.732824833833774 ], [ 79.53838786117149, 26.732824833833774 ] ], \u0026#34;lastCommittedPoint\u0026#34;: null, \u0026#34;simulatePressure\u0026#34;: false, \u0026#34;pressures\u0026#34;: [ 0.578000009059906, 0.612000048160553, 0.6290000081062317, 0.6290000081062317, 0.6460000276565552, 0.6460000276565552, 0.6460000276565552, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6460000276565552, 0.6290000081062317, 0.612000048160553, 0.612000048160553, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6290000081062317, 0.6460000276565552, 0.6460000276565552, 0.6460000276565552, 0.6460000276565552, 0.6460000276565552, 0.6460000276565552, 0 ] } ], \u0026#34;appState\u0026#34;: { \u0026#34;theme\u0026#34;: \u0026#34;light\u0026#34;, \u0026#34;viewBackgroundColor\u0026#34;: \u0026#34;#ffffff\u0026#34;, \u0026#34;currentItemStrokeColor\u0026#34;: \u0026#34;#1e1e1e\u0026#34;, \u0026#34;currentItemBackgroundColor\u0026#34;: \u0026#34;transparent\u0026#34;, \u0026#34;currentItemFillStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;currentItemStrokeWidth\u0026#34;: 2, \u0026#34;currentItemStrokeStyle\u0026#34;: \u0026#34;solid\u0026#34;, \u0026#34;currentItemRoughness\u0026#34;: 1, \u0026#34;currentItemOpacity\u0026#34;: 100, \u0026#34;currentItemFontFamily\u0026#34;: 1, \u0026#34;currentItemFontSize\u0026#34;: 20, \u0026#34;currentItemTextAlign\u0026#34;: \u0026#34;left\u0026#34;, \u0026#34;currentItemStartArrowhead\u0026#34;: null, \u0026#34;currentItemEndArrowhead\u0026#34;: \u0026#34;arrow\u0026#34;, \u0026#34;scrollX\u0026#34;: 900.0205959616612, \u0026#34;scrollY\u0026#34;: -645.6988963587927, \u0026#34;zoom\u0026#34;: { \u0026#34;value\u0026#34;: 2 }, \u0026#34;currentItemRoundness\u0026#34;: \u0026#34;round\u0026#34;, \u0026#34;gridSize\u0026#34;: null, \u0026#34;gridColor\u0026#34;: { \u0026#34;Bold\u0026#34;: \u0026#34;#C9C9C9FF\u0026#34;, \u0026#34;Regular\u0026#34;: \u0026#34;#EDEDEDFF\u0026#34; }, \u0026#34;currentStrokeOptions\u0026#34;: null, \u0026#34;previousGridSize\u0026#34;: null, \u0026#34;frameRendering\u0026#34;: { \u0026#34;enabled\u0026#34;: true, \u0026#34;clip\u0026#34;: true, \u0026#34;name\u0026#34;: true, \u0026#34;outline\u0026#34;: true }, \u0026#34;objectsSnapModeEnabled\u0026#34;: false }, \u0026#34;files\u0026#34;: {} } %%\n"},{"id":117,"href":"/posts/capital-incasion/","title":"Capital Incasion","section":"Blog","content":" è°ˆèµ„æœ¬å…¥ä¾µ # èµ„æœ¬å¹¶éå•æŒ‡é‡‘é’±ï¼Œè€Œæ˜¯åŒ…å«æŠ€æœ¯ã€èµ„é‡‘ã€æ•™è‚²ã€åª’ä½“å®£ä¼ ã€ä»·å€¼è§‚å¿µä¹ƒè‡³ç¤¾ä¼šæ¶æ„ä»¥åŠè¿è¡Œä½“ç³»çš„ç»¼åˆäº§ç‰©ã€‚\nèµ„æœ¬ä¼šæµåŠ¨ï¼Œä¼šå‘æœ€æœ‰åˆ©å¯å›¾çš„åœ°æ–¹å¤§è§„æ¨¡èšé›†ã€‚è€Œå®ƒçš„æºå¤´ï¼Œå°±æ˜¯èµ„æœ¬è¿‡å‰©åœ°æ–¹ã€‚\nèµ„æœ¬æ¶Œå…¥å½“åœ°ï¼Œä½¿ç”¨å³å·²æˆå‹çš„æŠ€æœ¯å»ºå‚ï¼Œä»æœ¬æºåœ°è½¬æ¥è¿‡å‰©çš„äº§å“ã€‚åŒæ—¶å¼€åŠ¨æ”¿æ²»èµ„æœ¬ã€è¯è¯­èµ„æœ¬(åª’ä½“)ä¸ºæ‹›å·¥ã€é”€å”®é“ºå¹³é“è·¯ã€‚\nå®ƒä»¬å…¶å®æ— éœ€åœ¨æ„å¼€å‡ºçš„å·¥èµ„ã€‚äºæ˜¯ç»™å‡ºæå…·è¯±æƒ‘çš„è–ªé…¬ï¼Œå¹¶é€æ­¥æ¸—å…¥æ•™è‚²ã€æœ€å¤§åŒ–åˆ©ç”¨å½“åœ°èµ„æºä¸ºè‡ªå·±ä¸‹æ¸¸äº§ä¸šç”Ÿäº§çº¿åŸ¹å…»ä¸“ç§‘äººæ‰ã€‚\nèµ„æºèµ„æœ¬åŒ– # å½“äººåœ¨ä¸€å¤„èšé›†ï¼Œæœ‰äº†å¯è§‚çš„æ”¶å…¥ã€æš´å¯Œæ‰€äº§ç”Ÿçš„æ¶ˆè´¹æ¬²å¿«é€Ÿè†¨èƒ€ã€‚æ— è®ºæ˜¯è¢«åŠ¨çš„è¿˜æ˜¯ä¸»åŠ¨çš„ï¼Œå¿«æ¶ˆå“ã€å¥¢é¥°å“ã€è¿½æ±‚æ„Ÿå®˜åˆºæ¿€çš„ä½“éªŒæ¶ˆè´¹ï¼Œå®Œå…¨é¢ è¦†ä»¥å¾€ç”Ÿæ´»æ‰€å½¢æˆçš„è®¤çŸ¥è§‚å¿µã€‚è€Œè¿™äº›æ¶ˆè´¹ä¸ºèµ„æœ¬å¸¦æ¥ç¬¬ä¸€è½®çš„å…ˆæœŸæ”¶å‰²å¤–ï¼Œè¿˜å°†è¢«è¯è¯­åª’ä½“èµ„æœ¬çš„åŠ©åŠ›ä¸‹å……æ–¥åˆ°å„å¤„æ¬ èµ„æœ¬åœ°åŒºï¼Œå¸çº³æ›´å¤šçš„äººå‰æ¥ã€‚\nè€Œæˆ‘ä»¬å»äº†ï¼Œé¦–å…ˆè¦åšå¯¹çš„å°±æ˜¯æ¥å—ç®¡ç†ã€‚ä»–ä»¬ä¼šå‘Šè¯‰æˆ‘ä»¬ä»€ä¹ˆå«åšâ€œé«˜æ•ˆâ€ï¼Œâ€œå…ˆè¿›â€ï¼Œè¯¸å¦‚æ­¤ç±»è¯æ±‡ï¼Œä½†æ— ä¸€ä¾‹å¤–çš„éƒ½æ˜¯å°†ç®¡ç†æˆæœ¬å‘åŠ³åŠ¨è€…è½¬å«ã€‚\nâ€œè¿›åŸæ‰“å·¥æ½®â€ä¸€æ—¦å½¢æˆï¼Œå„åœ°ä¸ºäº†ä¿ƒè¿›å½“åœ°å‘å±•ä»¥åŠæŒ½ç•™åŠ³åŠ¨åŠ›ï¼Œä¸å¾—ä¸å®æ–½â€œäº²èµ„æœ¬â€çš„æ”¿ç­–ã€‚ä»æ”¿ç­–é¢é¼“åŠ±ï¼Œä»¥ä½å»‰çš„æ–¹å¼åˆ’å‡ºå·¥ä¸šç”¨åœ°ã€‚ï¼ˆç”±æ­¤ï¼ŒåŸå¸‚ä¸­åœŸåœ°æ”¿ç­–å®½æ¾ï¼Œä¹¡æ‘åœŸåœ°ä½¿ç”¨æ”¿ç­–æ”¶ç´§ã€‚èµ„æœ¬å‘¨è¾¹å¤§é¢ç§¯å¾ç”¨å†œæ°‘åœŸåœ°ã€æ‹†è¿é—®é¢˜ä¸€å®šä¼šå‡ºç°ã€‚å€Ÿè´·å’Œç¨æ”¶æ”¿ç­–ä¹Ÿä¸€å®šä¼šåœ¨ä¸¤åœ°ä¹‹é—´å½¢æˆå·®å¼‚ï¼‰\u0026ndash;å¤–æ¥èµ„æœ¬å®Œæˆå¯¹å½“åœ°äººåŠ›èµ„æºã€æ”¿åºœèµ„æºã€åœŸåœ°èµ„æºçš„å»‰ä»·å¾ç”¨ï¼Œå…¨éƒ¨æœåŠ¡äºæœ¬èµ„æœ¬åœ¨â€œä¹°å…¨çƒã€å–å…¨çƒâ€çš„äº§å“åˆ¶é€ ã€‚\nèµ„æºæ†ç»‘åŒ– # å½“èµ„æœ¬è¾“å…¥åœ°åŸä½æ°‘åˆ†æ‰¹å¾—åˆ©æ¶ˆè´¹ç†å¿µé€æ­¥å†·é™\u0026ndash;å½“ç„¶è¿™å¹¶éä¸ªä½“ç»å¯¹ã€‚ç§¯è“„å¼€å§‹éšæ—¶é—´ç´¯ç§¯ï¼ŒåŠ³åŠ¨å¯†é›†å‹çš„äº§ä¸šå¸¦æ¥çš„å·¥ä¼¤å¯†é›†å†²å‡»ç€åŠ³åŠ¨è€…èº«ä½“ç´ è´¨ã€‚\næ—¶é—´è·¨åº¦é€æ­¥æ‹‰é•¿ï¼ŒåŸä½æ°‘å¯¹äºè“¬å‹ƒå‘å±•çš„â€œåŸå¸‚â€çš„é•¿ä¹…ç¹è£çš„ä¿¡å¿ƒä¹Ÿåœ¨ç´¯ç§¯ã€‚åŒ»ç–—ã€æ•™è‚²å’Œä½æˆ¿éœ€æ±‚å¼€å§‹æµ®ç°ã€‚ç§¯è“„å˜å¾—é‡è¦ï¼Œç†è´¢ä¹Ÿå˜å¾—é‡è¦ã€‚\nè¿™å°†æ˜¯èµ„æœ¬çš„ç¬¬äºŒè½®æ”»åŠ¿ã€‚å‡­å€Ÿâ€œä¸»åœºä¼˜åŠ¿â€ï¼Œå…¶æ›´æ˜“äºæ²»ç–—å…¶æ‰€å¸¦æ¥çš„å·¥ä¼¤ã€‚èµ„æœ¬çš„åŸ¹å…»ä½“ç³»ä¹Ÿæ›´å®¹æ˜“ä¸ºè‡ªå·±ä½“ç³»å†…éƒ¨åŸ¹å…»äººåŠ›èµ„æœ¬ã€‚å€Ÿæ­¤ä¼˜åŠ¿å°†æ•™è‚²ä¸åŒ»ç–—èµ„æºé›†ä¸­ï¼Œè¾¹ç¼˜åŒ–è¾“å…¥åœ°åŸæœ‰åŒ»ç–—å’Œæ•™è‚²ä½“ç³»ï¼Œå½¢æˆè¶Šå¥½æ›´å¥½ï¼Œè¶Šå·®æ›´å·®çš„è¶‹å‘ã€‚å‡ ä¹ç†æ‰€å½“ç„¶çš„å¤§è§„æ¨¡å¤§æ¯”ä¾‹å ç”¨ç¤¾ä¼šèµ„é‡‘ï¼Œå®Œæˆäº†äººåŠ›èµ„æœ¬åŸ¹å…»ï¼ŒäººåŠ›èµ„æœ¬ä¿®å¤çš„ä»£ä»·å‘å¤–è½¬å«ï¼Œä¸”ä»£ä»·ä¹Ÿåœ¨ä¸ºè‡ªå·±æä¾›æ”¶ç›Šã€‚\næ‘˜å–æœå® # å¦‚æœè¯´åˆ›é€ å°±ä¸šæ˜¯æ’­ä¸‹äº†ç§å­ï¼Œå¿«æ¶ˆã€å¥¢ä¾ˆã€ä½“éªŒå‹æ¶ˆè´¹æ»¡è¶³äº†ç§å­å„ç§å„æ ·çš„å¹»æƒ³ã€‚åŒ»ç–—å’Œæ•™è‚²çš„æ†ç»‘æ— æ—¶æ— åˆ»åœ¨æ»‹å…»ç€ç§å­æˆé•¿ã€‚é‚£èƒœåˆ©çš„æœå®å°±æ˜¯æˆ¿åœ°äº§å’Œåšå›ºçš„é‡‘èã€‚\nè‡ªå¤ä»¥æ¥ï¼Œç´¯ç§¯ç§¯è“„ã€è´­ç½®ç”°äº§æ˜¯ç¹è£ç¤¾ä¼šä¸­å¿…ç„¶è¿›è¡Œçš„æ´»åŠ¨ã€‚ä½†åœ¨å…¬æœ‰åˆ¶ä¸‹ä¹¡æ‘ä¹‹ä¸­ï¼Œåœ°æ˜¯é›†ä½“çš„ï¼Œä¸”åœ¨å‰å·²ç»è¯´è¿‡ï¼šä¹¡æ‘ä¸­åœŸåœ°æ”¿ç­–æ˜¯å¿…ç„¶æ”¶ç´§çš„ã€‚æ‰€ä»¥æ›¿ä»£ç‰©å®ƒå¿…é¡»å‡ºç°ï¼Œåœ¨èµ„æœ¬çš„æ“çºµä¸‹ï¼Œå®ƒå¿…ç„¶å‡ºç°åœ¨åŸå¸‚ã€‚ä¸¤ä¸ªä¸€è¾ˆå­åœ¨ä¹¡æ‘åŠ¡å†œçš„è€å†œï¼Œå…¶å„¿å¥³ç”Ÿå…»åœ¨ä¹¡æ‘ï¼Œä½†æˆå©šå‰å¿…é¡»åœ¨åŸä¸­ä¹°æˆ¿ï¼Œä¸ºä»€ä¹ˆï¼Ÿ\nå› ä¸ºåŸä¸­æˆ¿è‡ªèµ„æœ¬å…´å»ºçš„ä¸€å¼€å§‹ï¼Œå°±ç»ä¸æ˜¯ä»¥è§£å†³å…¥åŸäººä½å®¿é—®é¢˜è€Œäº§ç”Ÿçš„ã€‚å®ƒè‡ªä¸€å¼€å§‹å°±è£¹æŒŸç€å„é¡¹èµ„æºå’Œç‰¹æƒã€‚å½“â€œæ–°å¢äººå£æ°¸ä¸åˆ†åœ°â€å†™å…¥æ³•å¾‹ï¼Œä¸€é¢æ˜¯å…ˆè¡Œè€…å¾—åˆ©ï¼Œä¸€é¢æ˜¯é“œå¢™é“å£ã€‚å¤§åŠ¿æ‰€è¶‹ã€‚\nä¸æ˜¯é£é™©åŒæ¶å‹çš„èµ„æœ¬ä¸æ˜¯å¥½èµ„æœ¬ # ç”¨è‡ªå·±çš„é’±å»å»ºæˆ¿ï¼Œé£é™©å…¨æ˜¯è‡ªå·±çš„\u0026ndash;è¿™è‚¯å®šä¸è¡Œï¼›æ‹‰é“¶è¡Œä¸€èµ·ï¼Œâ€œåè´¦â€é£é™©æ˜¯é“¶è¡Œçš„\u0026ndash;è¿™ç¨å¾®è¿›æ­¥äº†ä¸€ç‚¹ï¼›å†æŠŠè´­æˆ¿è€…æ‹‰ä¸Šï¼Œå…ˆæ”¶ä¸€æ³¢å›æ¬¾\u0026ndash;é£é™©åˆ°è¿™å„¿åŸºæœ¬åˆ†æ‹…å®Œäº†ï¼›ä½†æ”¶å¾—æ˜¯å…¨æ¬¾ï¼ŒèŠ±æ˜¯æ…¢æ…¢èŠ±ï¼Œé‚£æŠŠé—²çš„é’±å†å»æ’¬åŠ¨æ›´å¤šèµ„é‡‘å‘¢ï¼Ÿ\u0026ndash;è¿™ç®€ç›´ç»ä½³ã€‚\né“¶è¡Œä¹Ÿæ˜¯å¥½èµ„æœ¬ã€‚â€œåè´¦â€é£é™©ä¸€å®šè¦è½¬å«å‡ºå»\u0026ndash;åŒ…è£…æˆâ€œé‡‘èäº§å“â€äº¤ç”±ç¤¾ä¼šä¸Šçš„â€œé—²é’±â€å…±åŠ›æ‰¿æ‹…ã€‚\nåœ¨è¿™æ ·çš„ä½“ç³»ä¸­ï¼Œç”±èµ„æœ¬ä¸€å¼€å§‹æ¨åŠ¨çš„å·¨è½®æ»šæ»šå‘å‰ã€‚èµ„æœ¬å·²ç»æ— éœ€å†æŠ•å…¥ï¼Œåœ¨ç¤¾ä¼šæ‰¿æ‹…æ‰€æœ‰é£é™©çš„ä¿è¯ä¸‹ï¼Œåœ¨ç¤¾ä¼šçš„è¿‡å¾€åŠ³åŠ¨ï¼ˆç§¯è“„ï¼‰ã€ç°å®åŠ³åŠ¨ã€æœªæ¥åŠ³åŠ¨ï¼ˆè´Ÿå€ºï¼‰ä¸­å¤§å£å¤§å£è·å–å‰©ä½™ã€‚è€Œè¿™ä¸ªç¤¾ä¼šç»ˆå°†èµ°å‘æ— åŠ›æ¶ˆè´¹ï¼Œèµ„æœ¬ç»ˆå°†å†æ— å‰©ä½™å¯ä»¥æ¦¨å–ï¼Œå®ƒä»¬å¿…é¡»å¥”å‘å‘å¦å¤–ä¸€ç‰‡æ²ƒåœŸã€‚è€Œé‚£ä¸ªåœ°æ–¹ï¼Œåœ¨ç°åœ¨æˆ–è®¸å·²ç»è¿›åŒ–æˆæ— éœ€æ˜¯ä¸€ä¸ªç°å®å­˜åœ¨çš„åœ°æ–¹ã€‚\né€ƒä¸èµ°çš„äººæ€ä¹ˆåŠ # ç•™ä¸‹çš„äºº\u0026ndash;è¢«æŠ›å¼ƒçš„äººåªå‰©ä¸‹ä¸¤ä¸ªé€‰é¡¹ï¼š\næƒ³æ–¹è®¾æ³•æ— è®ºå¦‚ä½•ä¹Ÿè¦å¯»æ±‚èµ„æœ¬çš„è®¤åŒï¼Œä¹æ±‚å¸¦ä¸Šä»–ä¸€èµ·ç© æ‰¿æ‹…èµ„æœ¬æµå‡ºåè½¬å«åœ¨è‡ªå·±èº«ä¸Šçš„é£é™© ç¬¬ä¸€ä¸ªä¸è®¨è®ºï¼Œæœ‰ä¸€ä¸ªæ”¶ç¼–æµç¨‹å·²ç»è¿è¡Œäº†æ•°åƒå¹´ï¼Œå¯æƒœè¿‘ä»£è¢«åºŸäº†ã€‚\né‚£èµ„æœ¬æ’¤å‡ºä¸€å®šä¼šå¯¼è‡´é£é™©çˆ†å‘å—ï¼Ÿ # è¿™ä¸ªé—®é¢˜ä¸å¯¹ï¼Œæˆ–è€…æ˜¯è¯´åäº†ã€‚åœ¨èµ„æœ¬å·²ç»ä¸é™äºå‹æ¦¨ç°æœ‰åŠ³åŠ¨å‰©ä½™ï¼Œå¯¹äººåŠ›èµ„æºè¿›è¡Œè¿‡å¾€ã€æœªæ¥å°½æ•°å‹æ¦¨çš„æœºåˆ¶ä¸‹ï¼Œå¸‚åœºå·²ç»å†æ— æ½œåŠ›å’Œæ´»åŠ›ã€‚èµ„æœ¬å·²é¢„æ–™åˆ°ä¼šæœ‰é£é™©çˆ†å‘ï¼Œæ‰€ä»¥æ‰ä¸»åŠ¨æ’¤å‡ºï¼Œå»å¯»æ±‚æ–°çš„åœ°æ–¹ã€‚å¦åˆ™æ–°å…´èµ„æœ¬å®¶å¿…ç„¶ä¼šååˆ¶ä¼ ç»Ÿèµ„æœ¬å®¶ï¼Œä¸€å¦‚ä¸€å¼€å§‹å®ƒä»¬æ¶Œå…¥æ­¤åœ°æ—¶æ‰€åšçš„é‚£æ ·ã€‚å½“èµ„æœ¬æ‰€å¸¦æ¥çš„å°±ä¸šè¡Œä¸šè½¬å…¥ç”Ÿäº§è¿‡å‰©ï¼Œèµ„æœ¬å¸¦æ¥çš„æ ¸å¿ƒæŠ€æœ¯è½¬ç§»æˆ–æ–­ä¾›ã€‚è€Œä¸ºèµ„æœ¬ä¸­é—´ç¯èŠ‚åŸ¹å…»ã€è€Œéä¸ºå½“åœ°ç¤¾ä¼šåŸ¹å…»äººæˆä¸ºæ— ç”¨ä¹‹æ‰ã€‚æ—©æœŸæ—¢å¾—åˆ©ç›Šè€…ä¹Ÿæ— åŠ›å®Œæˆäº§ä¸šå‡çº§ï¼Œè¿˜è¦å¿™ç€ç¬¬1æ¡çº¿è·¯ã€‚\nå·¥äººä¸‹å²—ï¼Œå·¦è„šè¸å³è„šä¸€é£å†²å¤©çš„æœ€åŸå§‹é©±åŠ¨åŠ›æ— åŠ›æŠµæŠ—ä¸€ç¯æ‰£ä¸€ç¯çš„é£é™©æ‰€å¸¦æ¥çš„é˜»åŠ›ã€‚\n"},{"id":118,"href":"/docs/programmer/platforms/android/adb/","title":"adb","section":"å¹³å°","content":" å¸¸è§„ # adb connect 127.0.0.1:34534 adb devices adb -s 192.168.240.112:5555 shell\nappæ“ä½œ # æŸ¥çœ‹å·²ç»å®‰è£…çš„app # adb shell pm list packages\næ‰“å¼€æŸapp # adb shell monkey -p com.example.myapp -c android.intent.category.LAUNCHER 1 é€šè¿‡adbè¾“å…¥æ–‡å­— # åœ¨ç•Œé¢é€‰ä¸­çš„è¾“å…¥æ¡†å†…è¾“å…¥æ–‡å­—\ninput text \u0026#34;{è¾“å…¥æ–‡å­—}\u0026#34; "},{"id":119,"href":"/docs/programmer/ml/yolo/","title":"Demo Testé¡¹ç›®ä¸­çš„ä¸€äº›ä¸œè¥¿","section":"æœºå™¨å­¦ä¹ ","content":"\nyolov5 # ä½¿ç”¨è‡ªå·±çš„ç´ æè¿›è¡Œç›®æ ‡è¯†åˆ«è®­ç»ƒ\nä¹‹å‰ä½¿ç”¨ä¸ªä½æ•°æ ·æœ¬è¯†åˆ«Vmonç»“æœè´¥çš„ä¸€å¡Œç³Šæ¶‚ ç°åœ¨ç”¨æ¥æ£€æµ‹å¡ç‰‡å€’æ˜¯å¾—å¿ƒåº”æ‰‹ 9ä¸ªè®­ç»ƒå¡ç‰‡,å‡†ç¡®ç‡å¯ä»¥åˆ°50å¤š,è‡ªæˆ‘æ„Ÿè§‰è¿˜è¡Œ ä½¿ç”¨æ–¹æ³•: åœ¨æ­¤\n"},{"id":120,"href":"/docs/programmer/langs/python/fastapi/","title":"FastAPI","section":"Python","content":" FastAPI ä½¿ç”¨ç¬”è®° # ä¸Šä¼ æ–‡ä»¶ # pip install python-multipart from fastapi import FastAPI, UploadFile, File import pandas as pd from io import StringIO from pydantic import BaseModel app = FastAPI() # å®šä¹‰å“åº”æ¨¡å‹ class RespAction(BaseModel): status: dict # è§£æä¸Šä¼ çš„æ–‡ä»¶ # è§£æä¸Šä¼ çš„æ–‡ä»¶ async def __parse_file(file: UploadFile): contents = await file.read() # å°†å­—èŠ‚å†…å®¹è½¬æ¢ä¸ºå­—ç¬¦ä¸² data = StringIO(contents.decode(\u0026#39;utf-8\u0026#39;)) # æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©è§£ææ–¹å¼ if file.filename.endswith(\u0026#39;.csv\u0026#39;): df = pd.read_csv(data) elif file.filename.endswith(\u0026#39;.txt\u0026#39;): df = pd.read_csv(data, delimiter=\u0026#39;\\t\u0026#39;) # å‡è®¾ TXT æ–‡ä»¶ä»¥åˆ¶è¡¨ç¬¦åˆ†éš” else: raise ValueError(\u0026#34;Unsupported file type. Please upload a CSV or TXT file.\u0026#34;) return df # ä¸Šä¼ è´¦å·çš„è·¯ç”± @app.post(\u0026#34;/upload/accounts/\u0026#34;, description=\u0026#34;ä¸Šä¼ è´¦å·csv/txtæ–‡ä»¶è¿›è¡Œè§£æå…¥åº“å­˜å‚¨\u0026#34;) async def upload_accounts(file: UploadFile = File(...)) -\u0026gt; RespAction: rst = RespAction(status={\u0026#34;code\u0026#34;: 0, \u0026#34;msg\u0026#34;: \u0026#34;\u0026#34;}) try: # è§£ææ–‡ä»¶ df = await parse_file(file) pass except: pass return rst "},{"id":121,"href":"/docs/programmer/platforms/git/","title":"Git","section":"å¹³å°","content":" Git # 1. åŒæ­¥è¿œç«¯æ”¾å¼ƒæœ¬åœ° # git fetch --all git reset --hard origin/master git pull Windowsä¸‹é—®é¢˜ # [[Problem of Windows#Windowsä¸‹Gité—®é¢˜]]\n2. git é¡¹ç›®ç”± Ext4 -\u0026gt; NTFS å¤åˆ¶å # æ–‡ä»¶æƒé™å‘ç”Ÿå˜åŒ–, Gitè¿½è¸ªæ–‡ä»¶æƒé™çš„è¯ä¼šæ ‡è®°æ‰€æœ‰æ–‡ä»¶éƒ½éœ€è¦ä¿®æ”¹ å› ä¸ºåœ¨Linux ä¸‹æ–‡ä»¶æƒé™ä¸º -rw-r--r--ï¼ˆæ‰€æœ‰è€…å¯è¯»å†™ï¼Œå…¶ä»–ç”¨æˆ·åªè¯»ï¼‰,ä½†æ˜¯Linuxä¸‹æŒ‚è½½NTFSæ–‡ä»¶æƒé™ä¸º -rwxr-xr-xï¼ˆæ‰€æœ‰è€…å¯è¯»ã€å†™ã€æ‰§è¡Œï¼Œå…¶ä»–ç”¨æˆ·å¯è¯»ã€æ‰§è¡Œï¼‰å°±å¾ˆéš¾å—\ngit config core.filemode false # å…³é—­githubç›‘æ§æ–‡ä»¶æƒé™ # git config core.filemode false --global è‡ªå·±çš„å°ä»“åº“ - Gogs ç®€ä»‹ # Gogs (Go Git Service) æ˜¯ä¸€ä¸ªç”¨ Go è¯­è¨€ç¼–å†™çš„è‡ªæ‰˜ç®¡ Git æœåŠ¡ï¼Œç±»ä¼¼äº GitHub Gitlab Giteeã€‚å®ƒè½»é‡ã€å¿«é€Ÿä¸”æ˜“äºå®‰è£…ï¼Œé€‚åˆä¸ªäººæˆ–å°å›¢é˜Ÿä½¿ç”¨ã€‚Gogs æä¾›äº†åŸºæœ¬çš„ Git ä»“åº“ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä»£ç æ‰˜ç®¡ã€é—®é¢˜è·Ÿè¸ªã€Pull Request ç­‰ã€‚\næºç å®‰è£… # å®‰è£…ä¾èµ–ï¼š\nç¡®ä¿å·²å®‰è£… Go è¯­è¨€ç¯å¢ƒï¼ˆ1.13 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ã€‚ å®‰è£… Git å’Œ MySQL/PostgreSQL/SQLite3 æ•°æ®åº“ã€‚ ä¸‹è½½æºç ï¼š\ngit clone https://github.com/gogs/gogs.git cd gogs ç¼–è¯‘å¹¶è¿è¡Œï¼š\ngo build -o gogs ./gogs web è®¿é—®å¹¶é…ç½®ï¼š æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:3000ï¼ŒæŒ‰ç…§æç¤ºå®Œæˆåˆå§‹é…ç½®ã€‚ Docker å®‰è£… # æ‹‰å–é•œåƒï¼š\ndocker pull gogs/gogs è¿è¡Œå®¹å™¨ï¼š\ndocker run -d --name=gogs -p 10022:22 -p 10080:3000 -v /var/gogs:/data gogs/gogs è®¿é—®å¹¶é…ç½®ï¼š\næ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:10080ï¼ŒæŒ‰ç…§æç¤ºå®Œæˆåˆå§‹é…ç½®ã€‚ å‚è€ƒé“¾æ¥ # Gogs å®˜æ–¹æ–‡æ¡£ Gogs GitHub ä»“åº“ "},{"id":122,"href":"/docs/programmer/ml/python-%E5%9B%BE%E8%A1%A8/","title":"Python å›¾è¡¨","section":"æœºå™¨å­¦ä¹ ","content":" Python å›¾è¡¨ # ä¸»è¦ç”¨: matplotlib import matplotlib.pyplot as plt\nå †å å›¾ # summery_one_offer_dict_by_install_date, install_datas_by_install_date_dict = await rc.calculate_offer_do_status(offer_id=offer_id) # è®¡ç®—éœ€è¦çš„è¡Œæ•°å’Œåˆ—æ•°ï¼ˆæ¯è¡Œ4ä¸ªå›¾è¡¨ï¼‰ num_offers = len(summery_one_offer_dict_by_install_date.keys()) num_cols = 3 num_rows = math.ceil(num_offers / num_cols) # åˆ›å»ºä¸€ä¸ªå›¾å½¢å’Œå­å›¾æ•°ç»„ fig, axs = plt.subplots(num_rows, num_cols, figsize=(45, num_rows * 3)) if num_offers == 1: axs = [axs] # Flatten the axs array for easy iteration else: axs = axs.flatten() for ax, (install_date, data) in zip(axs, summery_one_offer_dict_by_install_date.items()): # æ’åºå’Œå¤„ç†æ•°æ® data = data.list_reten_info data.sort(key=lambda x: x.doreten_day) dates = [f\u0026#34;{entry.reten_day}/{entry.expect_rate}\u0026#34; for entry in data] reten_counts = [entry.count for entry in data] wait_counts = [entry.waitcount for entry in data] # ç»˜åˆ¶å †å æ¡å½¢å›¾ ax.bar(dates, reten_counts, label=\u0026#39;Done\u0026amp;Run\u0026#39;) ax.bar(dates, wait_counts, bottom=reten_counts, label=\u0026#39;Wait\u0026#39;) # è®¾ç½®æ ‡é¢˜å’Œæ ‡ç­¾ ax.set_title(f\u0026#39;Reten for {install_date.strftime(\u0026#34;%Y-%m-%d\u0026#34;)}\u0026#39;) ax.set_xlabel(\u0026#39;Need Count\u0026#39;) ax.set_ylabel(\u0026#39;Plan Count\u0026#39;) ax.legend() # è°ƒæ•´xè½´æ ‡ç­¾é—´è· ticks = range(len(dates)) # æ ¹æ®å®é™…çš„åˆ»åº¦ä½ç½®ç”Ÿæˆåˆ»åº¦åˆ—è¡¨ ax.set_xticks(ticks) ax.set_xticklabels(dates, rotation=60, ha=\u0026#39;right\u0026#39;) # è®¾ç½®xè½´æ ‡ç­¾å¹¶æ—‹è½¬ # # è‡ªåŠ¨æ ¼å¼åŒ–xè½´æ—¥æœŸæ ‡ç­¾ # fig.autofmt_xdate() # éšè—å¤šä½™çš„å­å›¾ï¼ˆå¦‚æœæœ‰ï¼‰ for i in range(num_offers, len(axs)): axs[i].axis(\u0026#39;off\u0026#39;) # è°ƒæ•´å¸ƒå±€ plt.tight_layout() img_path = f\u0026#34;reten_status_{offer_id}_plot.png\u0026#34; plt.savefig(img_path, dpi=300) plt.close() logger.info(f\u0026#34;img save to {img_path}\u0026#34;) "},{"id":123,"href":"/docs/programmer/langs/python/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%A4%9A%E8%BF%9B%E7%A8%8B/","title":"Python å¤šçº¿ç¨‹å¤šè¿›ç¨‹","section":"Python","content":" ä¸€ä¸ªåç¨‹ç¤ºä¾‹ï¼š import asyncio async def my_coroutine(): # è¿™é‡Œæ˜¯åç¨‹çš„ä»£ç  await asyncio.sleep(1) print(\u0026#34;Coroutine is done\u0026#34;) async def main(): # åˆ›å»ºä¸€ä¸ªä»»åŠ¡å¯¹è±¡ task = asyncio.create_task(my_coroutine()) # ç­‰å¾…ä»»åŠ¡å®Œæˆ await task # è¿è¡Œä¸»åç¨‹ asyncio.run(main()) ä¸€ä¸ªçº¿ç¨‹ç¤ºä¾‹ï¼š import threading # å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåœ¨çº¿ç¨‹ä¸­æ‰§è¡Œ def thread_function(name): print(f\u0026#34;Thread {name}: starting\u0026#34;) # åœ¨è¿™é‡Œæ‰§è¡Œä¸€äº›æ“ä½œ print(f\u0026#34;Thread {name}: finishing\u0026#34;) # åˆ›å»ºçº¿ç¨‹çš„å®ä¾‹ thread = threading.Thread(target=thread_function, args=(1,)) # å¯åŠ¨çº¿ç¨‹ thread.start() # ç­‰å¾…çº¿ç¨‹ç»“æŸ thread.join() print(\u0026#34;Main thread is done\u0026#34;) ä¸€ä¸ªloop tipï¼š self.loop = asyncio.get_event_loop() self.queue.set_loop(loop=self.loop) await self.af.set_loop(loop=self.loop) await self.adjust.set_loop(loop=self.loop) ä¸ºä»€ä¹ˆè¿™é‡Œä½¿ç”¨åŒä¸€ä¸ªloop ? --- åœ¨ Python çš„ `asyncio` æ¡†æ¶ä¸­ï¼Œäº‹ä»¶å¾ªç¯ï¼ˆevent loopï¼‰æ˜¯å¤„ç†å¼‚æ­¥ä»»åŠ¡çš„æ ¸å¿ƒã€‚æ¯ä¸ªå¼‚æ­¥åº”ç”¨ç¨‹åºé€šå¸¸åªéœ€è¦ä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œæ‰€æœ‰çš„å¼‚æ­¥ä»»åŠ¡éƒ½åº”è¯¥åœ¨è¿™ä¸ªäº‹ä»¶å¾ªç¯ä¸­è¿è¡Œã€‚ä½¿ç”¨åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯çš„å¥½å¤„åŒ…æ‹¬ï¼š 1. **ç»Ÿä¸€ç®¡ç†**ï¼šæ‰€æœ‰å¼‚æ­¥ä»»åŠ¡éƒ½åœ¨åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­è¿è¡Œï¼Œè¿™æ ·å¯ä»¥æ›´æ–¹ä¾¿åœ°ç®¡ç†å’Œç›‘æ§å®ƒä»¬ã€‚ 2. **é¿å…å†²çª**ï¼šå¦‚æœä¸ºä¸åŒçš„ä»»åŠ¡åˆ›å»ºå¤šä¸ªäº‹ä»¶å¾ªç¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´èµ„æºç«äº‰æˆ–å†²çªï¼Œå°¤å…¶æ˜¯åœ¨å…±äº«èµ„æºæˆ–æ‰§è¡ŒI/Oæ“ä½œæ—¶ã€‚ 3. **ä¿æŒä¸Šä¸‹æ–‡ä¸€è‡´æ€§**ï¼šä½¿ç”¨åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯å¯ä»¥ç¡®ä¿æ‰€æœ‰ä»»åŠ¡éƒ½åœ¨ç›¸åŒçš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼Œè¿™æœ‰åŠ©äºç»´æŠ¤çŠ¶æ€çš„ä¸€è‡´æ€§ã€‚ åœ¨ä½ æä¾›çš„ä»£ç ç‰‡æ®µä¸­ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯ç¡®ä¿æ‰€æœ‰è¿™äº›ç»„ä»¶éƒ½åœ¨åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­è¿è¡Œï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥æ­£ç¡®åœ°ååŒå·¥ä½œã€‚ å¦‚æœè¿™äº›ç»„ä»¶æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä¸”éœ€è¦ä¸äº‹ä»¶å¾ªç¯äº¤äº’ï¼Œé‚£ä¹ˆå®ƒä»¬éœ€è¦çŸ¥é“ä½¿ç”¨å“ªä¸ªäº‹ä»¶å¾ªç¯ã€‚é€šè¿‡è¿™ç§æ–¹å¼è®¾ç½®äº‹ä»¶å¾ªç¯ï¼Œå¯ä»¥ç¡®ä¿ç»„ä»¶åœ¨æ‰§è¡Œå¼‚æ­¥æ“ä½œæ—¶èƒ½å¤Ÿæ­£ç¡®åœ°åœ¨äº‹ä»¶å¾ªç¯ä¸­æ³¨å†Œå’Œå¤„ç†ã€‚ æ€»ä¹‹ï¼Œä½¿ç”¨åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯æœ‰åŠ©äºä¿æŒä»£ç çš„æ•´æ´å’Œåè°ƒï¼Œé¿å…æ½œåœ¨çš„é—®é¢˜ï¼Œå¹¶ç¡®ä¿æ•´ä¸ªåº”ç”¨ç¨‹åºçš„å¼‚æ­¥æ“ä½œèƒ½å¤Ÿé¡ºåˆ©åœ°è¿›è¡Œã€‚ å¤šè¿›ç¨‹ # å¤šè¿›ç¨‹é€šä¿¡æ‰“æ—¥å¿— # from multiprocessing import Process, Queue from loguru import logger import sys import time # é…ç½®æ—¥å¿—å¤„ç†å‡½æ•° def configure_logger(queue): logger.remove() # ç§»é™¤é»˜è®¤æ—¥å¿—å¤„ç† logger.add(sys.stdout, format=\u0026#34;{message}\u0026#34;) logger.add(\u0026#34;logfile.log\u0026#34;, format=\u0026#34;{message}\u0026#34;, rotation=\u0026#34;1 MB\u0026#34;) while True: try: record = queue.get() if record is None: break # None è¡¨ç¤ºæ—¥å¿—è®°å½•ç»“æŸ # ä½¿ç”¨ log æ–¹æ³•è®°å½•æ—¥å¿— logger.log(record[\u0026#34;level\u0026#34;], record[\u0026#34;message\u0026#34;]) except Exception: logger.exception(\u0026#34;Failed to process log record\u0026#34;) # é…ç½®å·¥ä½œè¿›ç¨‹ def worker_process(name, queue): logger.remove() # ç§»é™¤é»˜è®¤æ—¥å¿—å¤„ç† def enqueue_log_message(message): # print(\u0026#39;message.record[\u0026#34;level\u0026#34;].name:\u0026#39;, message.record[\u0026#34;level\u0026#34;].name) # print(\u0026#39;message.record[\u0026#34;function\u0026#34;]:\u0026#39;, message.record[\u0026#34;function\u0026#34;]) # print(\u0026#39;message.record[\u0026#34;line\u0026#34;]:\u0026#39;, message.record[\u0026#34;line\u0026#34;]) # print(\u0026#39;message.record.keys:\u0026#39;, message.record.keys()) queue.put({ \u0026#34;line\u0026#34;: message.record[\u0026#34;line\u0026#34;], \u0026#34;function\u0026#34;: message.record[\u0026#34;function\u0026#34;], \u0026#34;level\u0026#34;: message.record[\u0026#34;level\u0026#34;].name, \u0026#34;message\u0026#34;: message.strip() }) logger.add(enqueue_log_message) for i in range(5): time.sleep(0.01) logger.info(f\u0026#34;Worker {name} is logging iteration {i}\u0026#34;) if __name__ == \u0026#34;__main__\u0026#34;: log_queue = Queue() # å¯åŠ¨æ—¥å¿—å¤„ç†è¿›ç¨‹ log_process = Process(target=configure_logger, args=(log_queue,)) log_process.start() # å¯åŠ¨å·¥ä½œè¿›ç¨‹ processes = [] for i in range(5): process = Process(target=worker_process, args=(f\u0026#34;Process-{i}\u0026#34;, log_queue)) processes.append(process) process.start() # ç­‰å¾…æ‰€æœ‰å·¥ä½œè¿›ç¨‹å®Œæˆ for process in processes: process.join() # ç»ˆæ­¢æ—¥å¿—å¤„ç†è¿›ç¨‹ log_queue.put(None) log_process.join() "},{"id":124,"href":"/docs/programmer/langs/python/notespython/","title":"Python å¸¸ç”¨åº“","section":"Python","content":"\npydantic # æ¥è‡ªç±» # from pydantic import BaseModel class User(BaseModel): name: str age: int class Config: from_attributes = True # å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ™®é€šçš„ Python å¯¹è±¡ï¼Œå®ƒå…·æœ‰ä¸æ¨¡å‹å­—æ®µç›¸åŒçš„å±æ€§å class OrdinaryObject: def __init__(self, name, age): self.name = name self.age = age # åˆ›å»ºä¸€ä¸ª OrdinaryObject å®ä¾‹ ordinary_object = OrdinaryObject(name=\u0026#39;Alice\u0026#39;, age=30) # ç°åœ¨æˆ‘ä»¬å¯ä»¥ç›´æ¥å°† ordinary_object ä¼ é€’ç»™ User æ¨¡å‹çš„æ„é€ å‡½æ•° user_model = User(ordinary_object) # è¾“å‡ºæ¨¡å‹çš„å­—æ®µå€¼ print(user_model.dict()) # è¾“å‡º: {\u0026#39;name\u0026#39;: \u0026#39;Alice\u0026#39;, \u0026#39;age\u0026#39;: 30} è‡ªå®šä¹‰å­—æ®µ # class User(BaseModel): id: int is_active: bool wx_infos: List[str] = [] class Config: arbitrary_types_allowed = True # å…è®¸ä»»æ„ç±»å‹ Tupleå®šä¹‰é—®é¢˜ # from typing import List, Tuple class Task(BaseModel): launch_count_today: int launch_groups: List[Tuple[str, ...]] @property def launch_groups_count(self) -\u0026gt; int: return len(self.launch_groups) wrong tuple length, expected 1 (type=value_error.tuple.length; actual_length=5; expected_length=1) # from typing import List, Tuple class Task(BaseModel): launch_count_today: int launch_groups: List[Tuple[str]] # è¿™æ ·å®šä¹‰å°±ä¼štupleé™åˆ¶é•¿åº¦ @property def launch_groups_count(self) -\u0026gt; int: return len(self.launch_groups) random # æœ‰æƒé‡çš„éšæœº # import random # å‡è®¾æœ‰ä¸€ä¸ªå­—å…¸ my_dict = {\u0026#39;a\u0026#39;: 1, \u0026#39;b\u0026#39;: 2, \u0026#39;c\u0026#39;: 3} # å°†å­—å…¸çš„é”®å’Œå€¼åˆ†åˆ«ä¿å­˜åœ¨ä¸¤ä¸ªåˆ—è¡¨ä¸­ keys = list(my_dict.keys()) weights = list(my_dict.values()) # ä½¿ç”¨ random.choices() å‡½æ•°è¿›è¡Œå¸¦æœ‰æƒé‡çš„éšæœºé€‰æ‹© å–12ä¸ªå€¼ random_choice = random.choices(keys, weights, k=12) print(\u0026#34;éšæœºé€‰æ‹©çš„é”®:\u0026#34;, random_choice) loguru # from multiprocessing import Process, Queue from loguru import logger import sys import time # é…ç½®æ—¥å¿—å¤„ç†å‡½æ•° def configure_logger(queue): logger.remove() # ç§»é™¤é»˜è®¤æ—¥å¿—å¤„ç† logger.add(sys.stdout, format=\u0026#34;{message}\u0026#34;) logger.add(\u0026#34;logfile.log\u0026#34;, format=\u0026#34;{message}\u0026#34;, rotation=\u0026#34;1 MB\u0026#34;) while True: try: record = queue.get() if record is None: break # None è¡¨ç¤ºæ—¥å¿—è®°å½•ç»“æŸ # ä½¿ç”¨ log æ–¹æ³•è®°å½•æ—¥å¿— logger.log(record[\u0026#34;level\u0026#34;], record[\u0026#34;message\u0026#34;]) except Exception: logger.exception(\u0026#34;Failed to process log record\u0026#34;) # é…ç½®å·¥ä½œè¿›ç¨‹ def worker_process(name, queue): logger.remove() # ç§»é™¤é»˜è®¤æ—¥å¿—å¤„ç† def enqueue_log_message(message): # print(\u0026#39;message.record[\u0026#34;level\u0026#34;].name:\u0026#39;, message.record[\u0026#34;level\u0026#34;].name) # print(\u0026#39;message.record[\u0026#34;function\u0026#34;]:\u0026#39;, message.record[\u0026#34;function\u0026#34;]) # print(\u0026#39;message.record[\u0026#34;line\u0026#34;]:\u0026#39;, message.record[\u0026#34;line\u0026#34;]) # print(\u0026#39;message.record.keys:\u0026#39;, message.record.keys()) queue.put({ \u0026#34;line\u0026#34;: message.record[\u0026#34;line\u0026#34;], \u0026#34;function\u0026#34;: message.record[\u0026#34;function\u0026#34;], \u0026#34;level\u0026#34;: message.record[\u0026#34;level\u0026#34;].name, \u0026#34;message\u0026#34;: message.strip() }) logger.add(enqueue_log_message) for i in range(5): time.sleep(0.01) logger.info(f\u0026#34;Worker {name} is logging iteration {i}\u0026#34;) if __name__ == \u0026#34;__main__\u0026#34;: log_queue = Queue() # å¯åŠ¨æ—¥å¿—å¤„ç†è¿›ç¨‹ log_process = Process(target=configure_logger, args=(log_queue,)) log_process.start() # å¯åŠ¨å·¥ä½œè¿›ç¨‹ processes = [] for i in range(5): process = Process(target=worker_process, args=(f\u0026#34;Process-{i}\u0026#34;, log_queue)) processes.append(process) process.start() # ç­‰å¾…æ‰€æœ‰å·¥ä½œè¿›ç¨‹å®Œæˆ for process in processes: process.join() # ç»ˆæ­¢æ—¥å¿—å¤„ç†è¿›ç¨‹ log_queue.put(None) log_process.join() "},{"id":125,"href":"/docs/programmer/langs/python/notespython/","title":"Python ç¬”è®°","section":"Python","content":"\npip cache ç›®å½• # echo $PIP_CACHE_DIR ç‰¹æ®Šå‡½æ•°è°ƒç”¨ property # ä½¿ç”¨å­—æ®µçš„æ–¹å¼è°ƒç”¨å‡½æ•°\nfrom datetime import datetime from pydantic import BaseModel class InstallCountInfo(BaseModel): count: int total: int @property def done_rate(self): return round(self.count / self.total, 4) class InstallCount(BaseModel): pass_day: int install_day: datetime info: InstallCountInfo å½»åº•æ‘†è„±to_dictå’Œfrom_dict # ä½¿ç”¨ pydantic # BaseModelç±»å‹æ”¯æŒ:\nb = BattleAxiePositionInfo.parse_obj(DICT_DATA) b.json() b.dict() parse_file parse_raw from pydantic import BaseModel class PositionInfo(BaseModel): error: int = -1 # æ”¶é›†é”™è¯¯ none: int = 0 # è¿˜æ²¡å¼€å§‹ clicked: int = 1 # åœ¨client èµ‹æ­¤å€¼ done: int = 2 # åœ¨server èµ‹æ­¤å€¼ xy: List[int] = [0, 0] status: int = 0 # clicked or done or none or error class BattleAxiePositionInfo(BaseModel): our: List[PositionInfo] = [PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo()] enemy: List[PositionInfo] = [PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo(), PositionInfo()] pp = BattleAxiePositionInfo() print(f\u0026#34;pp json: {pp.json()}\u0026#34;) dict_pp = pp.dict() pp = BattleAxiePositionInfo.parse_obj(dict_pp) pp json: {\u0026ldquo;our\u0026rdquo;: [{\u0026ldquo;error\u0026rdquo;: -1, \u0026ldquo;none\u0026rdquo;: 0, \u0026ldquo;clicked\u0026rdquo;: 1, \u0026ldquo;done\u0026rdquo;: 2, \u0026ldquo;xy\u0026rdquo;: [0, 0], \u0026ldquo;status\u0026rdquo;: 0}, {\u0026ldquo;error\u0026rdquo;: -1, \u0026ldquo;none\u0026rdquo;: 0, \u0026ldquo;clicked\u0026rdquo;: 1, \u0026ldquo;done\u0026rdquo;: 2, \u0026ldquo;xy\u0026rdquo;: [0, 0], \u0026ldquo;status\u0026rdquo;: 0}, {\u0026ldquo;error\u0026rdquo;: -1, \u0026ldquo;none\u0026rdquo;: 0, \u0026ldquo;clicked\u0026rdquo;: 1, \u0026ldquo;done\u0026rdquo;: 2, \u0026ldquo;xy\u0026rdquo;: [0, 0], \u0026ldquo;status\u0026rdquo;: 0}, {\u0026ldquo;error\u0026rdquo;: -1, \u0026ldquo;none\u0026rdquo;: 0, \u0026ldquo;clicked\u0026rdquo;: 1, \u0026ldquo;done\u0026rdquo;: 2, \u0026ldquo;xy\u0026rdquo;: [0, 0], \u0026ldquo;status\u0026rdquo;: 0}, {\u0026ldquo;error\u0026rdquo;: -1, \u0026ldquo;none\u0026rdquo;: 0, \u0026ldquo;clicked\u0026rdquo;: 1, \u0026ldquo;done\u0026rdquo;: 2, \u0026ldquo;xy\u0026rdquo;: [0, 0], \u0026ldquo;status\u0026rdquo;: 0}, {\u0026ldquo;error\u0026rdquo;: -1, \u0026ldquo;none\u0026rdquo;: 0, \u0026ldquo;clicked\u0026rdquo;: 1, \u0026ldquo;done\u0026rdquo;: 2, \u0026ldquo;xy\u0026rdquo;: [0, 0], \u0026ldquo;status\u0026rdquo;: 0}], \u0026ldquo;enemy\u0026rdquo;: [{\u0026ldquo;error\u0026rdquo;: -1, \u0026ldquo;none\u0026rdquo;: 0, \u0026ldquo;clicked\u0026rdquo;: 1, \u0026ldquo;done\u0026rdquo;: 2, \u0026ldquo;xy\u0026rdquo;: [0, 0], \u0026ldquo;status\u0026rdquo;: 0}, {\u0026ldquo;error\u0026rdquo;: -1, \u0026ldquo;none\u0026rdquo;: 0, \u0026ldquo;clicked\u0026rdquo;: 1, \u0026ldquo;done\u0026rdquo;: 2, \u0026ldquo;xy\u0026rdquo;: [0, 0], \u0026ldquo;status\u0026rdquo;: 0}, {\u0026ldquo;error\u0026rdquo;: -1, \u0026ldquo;none\u0026rdquo;: 0, \u0026ldquo;clicked\u0026rdquo;: 1, \u0026ldquo;done\u0026rdquo;: 2, \u0026ldquo;xy\u0026rdquo;: [0, 0], \u0026ldquo;status\u0026rdquo;: 0}, {\u0026ldquo;error\u0026rdquo;: -1, \u0026ldquo;none\u0026rdquo;: 0, \u0026ldquo;clicked\u0026rdquo;: 1, \u0026ldquo;done\u0026rdquo;: 2, \u0026ldquo;xy\u0026rdquo;: [0, 0], \u0026ldquo;status\u0026rdquo;: 0}, {\u0026ldquo;error\u0026rdquo;: -1, \u0026ldquo;none\u0026rdquo;: 0, \u0026ldquo;clicked\u0026rdquo;: 1, \u0026ldquo;done\u0026rdquo;: 2, \u0026ldquo;xy\u0026rdquo;: [0, 0], \u0026ldquo;status\u0026rdquo;: 0}, {\u0026ldquo;error\u0026rdquo;: -1, \u0026ldquo;none\u0026rdquo;: 0, \u0026ldquo;clicked\u0026rdquo;: 1, \u0026ldquo;done\u0026rdquo;: 2, \u0026ldquo;xy\u0026rdquo;: [0, 0], \u0026ldquo;status\u0026rdquo;: 0}]}\nå¤šä¸ªç±»å±æ€§ä¸€æ¬¡èµ‹å€¼ # No:\nself.a = a self.b = b Yes:\nself.__dict__.update({\u0026#34;a\u0026#34;: a, \u0026#34;b\u0026#34;: b}) åˆ—è¡¨è¡¨è¾¾å¼ äºŒç»´æ•°ç»„è¾¹ä¸€ç»´ å–å­—å…¸å†…å˜ä¸€ç»´ # knowninfo = {\u0026#39;axie_id3\u0026#39;: {\u0026#39;init_cards\u0026#39;: [\u0026#39;Sunder Claw\u0026#39;, \u0026#39;October Treat\u0026#39;, \u0026#39;Gas Unleash\u0026#39;, \u0026#39;Disguise\u0026#39;], \u0026#39;sort\u0026#39;: 4}} [vv for _,v in knowninfo.items() for vv in v[\u0026#34;init_cards\u0026#34;]] # [\u0026#39;Sunder Claw\u0026#39;, \u0026#39;October Treat\u0026#39;, \u0026#39;Gas Unleash\u0026#39;, \u0026#39;Disguise\u0026#39;] PiP Not Found Issue # ä½¿ç”¨pipå®‰è£…æŸåŒ…æ—¶ï¼Œ æç¤ºè®©æ›´æ–°ï¼Œ æŒ‰æç¤ºæ“ä½œæ›´æ–°æ²¡æ•ˆæœæ²¡ååº”å†ç”¨å°±æç¤ºModuleNotFoundError: No module named 'pip' (Ë‰â–½Ë‰ï¼›)\u0026hellip;\nModuleNotFoundError: No module named \u0026lsquo;pip\u0026rsquo; # å‡çº§PiPæ—¶å‡ºç°é—®é¢˜å¯ç”±ä¸‹æ–¹å‘½ä»¤ä¿®å¤ # python -m ensurepip python -m pip install --upgrade pip SSLæ ¡éªŒ # å®‰è£…EasyOCRæ—¶, reader = easyocr.Reader(['ch_sim','en']) ä¸‹è½½åˆ°æ¥è¿‘90,ç»“æœæŠ¥é”™äº†\u0026hellip;. ä¼°è®¡æ˜¯SSLé—®é¢˜åŠ å…¥ä»¥ä¸‹ä¸¤æ¡,ä¸çŸ¥å¦‚ä½•.\nimport ssl ssl._create_default_https_context = ssl._create_unverified_context from http.client To revert to the previous, unverified, behavior ssl._create_unverified_context() can be passed to the context parameter.\nä½¿ç”¨å›½å†…é•œåƒä¸‹è½½Python # pip install --index https://pypi.mirrors.ustc.edu.cn/simple/ dlib(numpyç­‰åŒ…å) # ä¸€é”®æ›´æ–°pip åŒ…èµ„æº(åˆ©ç”¨ç®¡é“grepä¼ è¾“æŸ¥è¯¢åˆ°çš„éœ€è¦æ›´æ–°åŒ…åï¼Œä¼ è¾“åˆ°installå‘½ä»¤) pip3 freeze --local | grep -v \u0026#39;^\\-e\u0026#39; | cut -d = -f 1 | xargs -n1 pip3 install -U # æƒé™ä¸å¤Ÿçš„è¯å°±åœ¨`pip3 install` ä¹‹å‰åŠ `sudo`åæ­£æˆ‘ä¸ä¹ æƒ¯ç”¨`root` å£°æ˜å‚æ•°ç±»å‹ # python3 åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™å¯ä»¥å£°æ˜å‡½æ•°ç±»å‹å•¦ï¼šè™½ç„¶ä¸åšé™åˆ¶ï¼Œä½†ä½œä¸ºlabelè¿˜æ˜¯è›®å¥½çš„ã€‚\nimport io def add(x:int, y:int) -\u0026gt; int: return x + y def write(f: io.BytesIO, data: bytes) -\u0026gt; bool: try: f.write(data) except IOError: return False else: return True ç»ˆäºä¸ä¼šä¹‹åå†™çš„å¿˜äº†ï¼Œè¦è°ƒç”¨å‡½æ•°è¿˜å¾—çœ‹åŠå¤©è¿™ä¸ªå‡½æ•°åº”è¯¥æ€ä¹ˆç”¨â€¦\næ—¶é—´å¤„ç† # ä»¥ä¸‹å¯ä»¥åšå‘¨ã€æœˆçš„åŠ å‡å¤„ç† relativedelta examples Letâ€™s begin our trip:\nfrom datetime import *; from dateutil.relativedelta import * import calendar Store some values: # NOW = datetime.now() TODAY = date.today() NOW datetime.datetime(2003, 9, 17, 20, 54, 47, 282310)\nTODAY datetime.date(2003, 9, 17)\nNext month # NOW+relativedelta(months=+1)\ndatetime.datetime(2003, 10, 17, 20, 54, 47, 282310) åˆå¹¶å­—å…¸ # a = {} b = {\u0026#39;a\u0026#39;: 1} c = {**a, **b} keyé‡å¤bä¸­è¦†ç›–a, å¦åˆ™å•çº¯åˆå¹¶ã€‚\nèŠèƒœäºæ— çš„å°ç©æ„ preety tools # å½©è‰²è¾“å‡º # æ¨¡å—åå„¿å¿˜äº†ï¼Œä»¥åè´´2019.03.01 03:08 one minute later: pip3 install ansicolors\nfrom colors import red, green, blue print(red(\u0026#39;This is red\u0026#39;)) print(green(\u0026#39;This is green\u0026#39;)) print(blue(\u0026#39;This is blue\u0026#39;)) from colors import color for i in range(256): print(color(\u0026#39;Color #%d\u0026#39; % i, fg=i)) ä»¥ä¸Šç¨‹åºåªèƒ½å†™åœ¨.pyæ–‡ä»¶ä¸­,è¿è¡Œï¼Œè€Œä¸èƒ½åœ¨â€¦â€˜å·æ‡’æ¨¡å¼â€˜ä¸­ã€‚\nPython3 ThreadPoolExecutor çº¿ç¨‹æ± å†…åº“ # åœ¨python3ä¹‹åä¸ä¹…ï¼Œæœ‰å…³çº¿ç¨‹æ± çš„ä½¿ç”¨å°±è¢«é›†æˆåˆ°å†…åº“ä¹‹ä¸­ã€‚ from concurrent.futures import ThreadPoolExecutor ä½¿ç”¨æ–¹æ³•ï¼š\nThreadPoolExecutor(max_workers=12) # è®¾ç½®çº¿ç¨‹æ± å¤§å° .submit(func_name, (para)) # æäº¤ä»»åŠ¡ .done() # æŸ¥çœ‹ä»»åŠ¡æ˜¯å¦å®Œæˆ .cancel() # æ²¡æœ‰è¢«æ”¾å…¥çº¿ç¨‹æ± ä¸­æ‰èƒ½ç”Ÿæ•ˆ .result() # è·å–è¯¥ä»»åŠ¡è¿”å›å€¼ from concurrent.futures import as_completed # ç”¨äºå–å‡ºæ‰€æœ‰ä»»åŠ¡ç»“æœï¼Œçœå»ä¸€ç›´ç”¨.doneå»æŸ¥çœ‹çš„ç¹çã€‚ä½†è¯¥æ–¹æ³• # æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œæ‰€ä»¥ä»»åŠ¡æœªå®Œæˆä¼šé˜»å¡ã€‚ è¿˜æœ‰ wait map ç­‰ç”¨æ³•å°±å»çœ‹æ–‡æ¡£å§ã€‚ å®‰è£…é”™è¯¯ï¼Ÿ # å±…ç„¶æœ‰pip3 install XXçš„é”™è¯¯â€¦è¿™ä¹Ÿæ˜¯å› ä¸ºæœ‰æ—§ç‰ˆpip3å­˜ç•™ã€‚éœ€è¦\n$bash -d pip3 $bash -r pip3 æ¥æ¸…ç†shellä¸­æ—§ç‰ˆpipç¼“å­˜ã€‚\nIDE? # å…¶å®è¦ä¸è¦IDEéƒ½æ— æ‰€ä¸ºï¼Œå› ä¸ºæœ¬å°±æ˜¯è„šæœ¬ï¼Œè¦IDEåªèƒ½è¯´æ‰“å¼€ä¸€ä¸ªé™Œç”Ÿé¡¹ç›®æŸ¥çœ‹æ—¶èƒ½å¤Ÿè·³è½¬å‡½æ•°ã€‚è‡³äºvimå¤§æ¦‚ä¸èƒ½è·³è½¬å§ï¼Œæ¯•ç«Ÿè·³è½¬éœ€è¦æŠŠæ–‡ä»¶éƒ½åŠ è½½æ‰èƒ½å®ç°ã€‚emm æ¥æ¥ï¼ŒIDEçš„è¯å°±PyCharmé™¤äº†ç¼–ç¨‹é¡µé¢é¢œè‰²éš¾çœ‹ä¹‹å¤–å…¶ä»–åŠŸèƒ½éƒ½ä¸é”™ï¼Œå¦å¤–ä¸æ”¯æŒä¸­æ–‡è·¯å¾„ï¼Œä¸è¿‡åº”è¯¥ä¸æ˜¯ç”±äºPythonè¯­è¨€é€ æˆçš„ï¼Œå› ä¸ºèŸ’è›‡è„šæœ¬æ˜¯å¯ä»¥åœ¨ä¸­æ–‡è·¯å¾„ä¸‹è¿è¡Œdidate:2018å¹´5æœˆ28æ—¥17ç‚¹16åˆ†\nprintè¯­å¥ï¼š å«æœ‰è‡ªåŠ¨æ¢è¡Œï¼Œæ‰€ä»¥è¦æƒ³ä¸æ¢è¡Œçš„è¯éœ€è¦åœ¨ç»“å°¾åŠ ä¸€ä¸ª\u0026quot;,\u0026ldquo;å¦‚ï¼š # for i in range(0,5): print i, è€ŒPython3ç‰ˆæœ¬åˆ™åº”è¯¥ä¹Ÿå¯ä»¥ print(a,b,c);ç„¶è€ŒPython2.7ä¸è¡Œ\næ ¹æ®å­—å…¸ä¸­å€¼å¤§å°æ’åˆ—ï¼š # sorted(dict2.iteritems(),key=lambda item:item[1],reverse=True) # item[0]å³æ ¹æ®é”®æ¥æ’åˆ—[1]ä¸ºæ ¹æ®å¯¹åº”å€¼ formatï¼šå¦‚: # print('my name is{0},and my age is{1}'.format('song',18)) or: # url = 'http://www.google.com/page={}/' newsurl = url.format(i) # æ—‹å³å…¶åå†…å®¹åˆ™ä»£æ›¿{}ä½ç½® å¦ï¼Œåœ¨{a}{b}{c}å¯é€šéformat(a=1,b=2,c=3)ä¾†è³¦å€¼\nBeautifulSoup # selectè¯­å¥ï¼šåœ¨å†…å®¹å‰åŠ \u0026rsquo;#\u0026lsquo;å¯ä»¥è·å¾—å…¶å†…å®¹ï¼Œå¦‚ï¼š # soup.select('artibodyTitle')[0].text select().contents \u0026quot;\u0026quot;\u0026quot; æŠŠæ ‡ç­¾å˜æˆä¸åŒlistï¼ŒåŒListä¸­çš„ä¸åŒå…ƒç´  ç„¶åç”¨[0]å¯å–å¾—ç¬¬ä¸€ä¸ªå…ƒç´ å†…å®¹ï¼Œè€Œä¸ä¸åæ–¹çš„å†…å®¹åˆåˆ°ä¸€èµ· *.strip()å¯å°†å–å‡ºçš„â€˜\\t\\tâ€™ç§»é™¤ \u0026quot;\u0026quot;\u0026quot; .select('time-source span a') # ä»time-sourceä¸­çš„\u0026lt;spanä¸‹\u0026lt;aä¸‹å–å¾—å†…å®¹e .select('.productPrice')[0].text # ç²å–class=\u0026quot;productPrice\u0026quot;ä¸‹åƒ¹æ ¼å…§å®¹ é›¶ç¢ # å­—ç¬¦ä¸²å¤„ç† # startswith .isdecimal() datetimeå­—ç¬¦ä¸²è½¬æ—¶é—´ æ—¶é—´è½¬å­—ç¬¦ä¸²: # from datetime import datetime dt = datetime.strptime(timesource,'%Yå¹´%mæœˆ%dæ—¥%H:%M')(****å¹´*æœˆ*æ—¥*22:03) dt.strftime('%Y-%m-%d') ä¿å­˜æ•¸æ“šåˆ°xlsxï¼Œsqlite3ã€csvï¼š # .to_excel('name.xlsx')ï¼šè¾“å‡ºä¸ºexcleæ–‡ä»¶ import sqlite3 #ä¿å­˜åˆ°æ•°æ®åº“ with sqlite3.connect('name.sqlite') as db: df.to_sql('name',con = db) ä»æ•°æ®åº“å–å‡º # with sqlite3.connect('name.sqlite') as db: df2 = pandas.read_sql_query('SELECT' * FROM name',con = db) é¡å‹éŒ¯èª¤ TypeError: a bytes-like object is required, not \u0026lsquo;str\u0026rsquo; # csv_file = open(\u0026quot;rent.csv\u0026quot;,\u0026quot;wb\u0026quot;) csv_writer = csv.writer(csv_file, delimiter=',') #åˆ›å»ºwriterå¯¹è±¡ï¼ŒæŒ‡å®šæ–‡ä»¶ä¸åˆ†éš”ç¬¦ writer.writerow(['title', 'summary', 'year', 'id', 'count', 'link']) Python2.7 è½‰åˆ° 3.5ä¸‹æ™‚æç¤ºç”±æ­¤éŒ¯èª¤ï¼Œä»£ç¢¼çˆ²\nåŸå› ï¼Œè§£æ±ºæ–¹æ³•ï¼š # å› çˆ²Python3.5 å°æ–¼strèˆ‡bytesé¡å‹å€åˆ†è®Šå¾—æ•æ„Ÿï¼Œæ‰€ä»¥åŸæœ¬åœ¨2.7ä¸‹æ­£å¸¸çš„ä»£ç¢¼ä¸èƒ½æ­£å¸¸é‹è¡Œã€‚ é›–ç„¶ï¼Œåˆ©ç”¨str.encode() æˆ–è€… str = bytes(str, encoding = 'utf-8')å¯ä»¥è½‰æ›æ ¼å¼ ç„¶è€ŒéŒ¯èª¤ä¾ç„¶æœ‰â€¦â€¦è§£æ±ºè¾¦æ³•å‰‡æ˜¯æ”¾æ£„è«–å£‡è£çš„èªªæ³•ï¼Œæ‰¾åˆ°å®˜ç¶²Demo æ›´æ”¹å¦‚ä¸‹ï¼š # csvfile = open(\u0026#39;goodsList.csv\u0026#39;, \u0026#39;w\u0026#39;, newline=\u0026#39;\u0026#39;) spamwriter = csv.writer(csvfile, delimiter=\u0026#39;,\u0026#39;) spamwriter.writerow([productTitle, productPrice, productShop]) ç´°ç¯€åœ¨æ–¼ï¼Œåœ¨æ‰“é–‹æ–‡ä»¶çš„æ™‚å€™å»é™¤wbè£é¢çš„bå³ä¸ç”¨äºŒé€²åˆ¶æ¨¡å¼æ‰“é–‹ã€‚\nå›¾ç‰‡ä¿¡æ¯ï¼š # è·å–å›¾åƒåˆ†è¾¨ç‡ï¼š\nim = Image.open(0.0) width = im.size[0] height = im.size[1] Pandas: # box = pd.read_csv(\u0026#34;filename.csv, index_col=\u0026#34;Date\u0026#34;, parse_dates=Ture) #è¯»å…¥æ–‡ä»¶ï¼Œè®²Dateä½œä¸ºæ—¥æœŸ box.columns = [\u0026#39;\u0026#39;,\u0026#39;\u0026#39;] # æ›´æ”¹åˆ—å box[\u0026#39;new\u0026#39;] = box[\u0026#39;1\u0026#39;]+box[\u0026#39;2\u0026#39;] # æ–°å¢ä¸€åˆ—ä¸º1ä¸2ä¹‹å’Œ box.resample(\u0026#39;d\u0026#39;, \u0026#39;sum\u0026#39;) # é‡æ–°æŒ‰ç…§â€˜dâ€™:æ¯å¤©ï¼Œè¿›è¡Œé‡‡æ · æ–¹å¼ä¸ºå–å’Œ(\u0026#39;w\u0026#39;,\u0026#39;sum\u0026#39;)æ‰€æœ‰æ•°æ®åœ¨ä¸€å‘¨å†…è¿›è¡Œå–å’Œ é—²è¯­ï¼š # while Trueä¸while 1çš„åŒºåˆ«ï¼š # åœ¨Python2 ä¸­ï¼Œå¾ªç¯åˆ¤æ–­ä¸€äº¿æ¬¡ï¼Œæˆ‘çš„å°ç”µè„‘çš„æ‰§è¡Œé€Ÿåº¦æ˜¯\nwhile one: 9.97739481926 while_true: 18.8063299656 while 1 ä»¥å‹å€’æ€§èƒœåˆ©ã€‚ åˆ°äº†Python3ä¸­ï¼Œåˆ™æˆäº†\nwhile one: 16.101972927001043 while_true: 16.25536527499935 å—¯ï¼Œä¸é”™ï¼Œä¸åˆ†ä¼¯ä»²â€”â€”ä¸ªé¬¼å•Šã€‚æ•´ä½“å˜å·®äº†å¥½å§ã€‚0.0 åŸå› å¾…æ˜ã€‚\nPython å°è®° ğŸ“– # å…ˆè´´ä¸€ä¸ªå®¢è§‚çš„æ•™ç¨‹æ–‡æ¡£ç½‘ç«™http://www.runoob.com/python/python-tutorial.html\nWindows ä¸‹æ·»åŠ ç¯å¢ƒå˜é‡ï¼ŒCMDä¸­Python2 ä¸Python3 å…±å­˜ # Windows ä¸‹ æŠŠpython2 è·¯å¾„åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œå†ä¿®æ”¹python2.exeå¯ä»¥å’Œpython3åŒºåˆ†æ–¹ä¾¿åœ¨CMDä¸­è°ƒç”¨ï¼Œä½†ä»£ä»·å°±æ˜¯ç»å¸¸å‘½ä»¤æŠ¥é”™â€¦â€¦\nä¸è¿‡ä¹Ÿå¯ä»¥ä½¿ç”¨py -2æ¥åŒºåˆ†ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¸æ”¹åå­—äº†å§ Windows ä¸‹ ç”¨py -2 -m pip install ***ä»¥åŠpy -3 -m pip install ***æ¥åŒºåˆ†å®‰è£…åˆ°python2 æˆ–è€… python3.\nå˜é‡ # ç±»ä¸‹ç›´æ¥å®šä¹‰çš„å˜é‡å¯ä»¥ç»§æ‰¿ï¼Œç„¶è€Œå¹¶ä¸èƒ½è¢«è‡ªå·±çš„å‡½æ•°æ‰€è°ƒç”¨ï¼Œæ„ä¹‰ä¸æ˜â€¦\nè¢«ç»§æ‰¿çš„ç±»å¯ä»¥è°ƒç”¨ç»§æ‰¿ç±»ä¸­å®šä¹‰çš„self.* å˜é‡ï¼Œä¿ºè®¤ä¸ºè¿™æ˜¯å› ä¸ºå®ƒä»¬åœ¨å®ä¾‹æ—¶éƒ½è¢«å½“æˆäº†self æœ¬èº«ã€‚å¦å¤–ï¼Œä¼˜å…ˆè°ƒç”¨è‡ªå·±ä¸­çš„selfå˜é‡ï¼Œæ²¡æœ‰ï¼Œæ‰ä¼šå»è¢«ç»§æ‰¿ç±»ä¸­å»æŸ¥æ‰¾ï¼ˆå…ˆåé¡ºåºå¯å¾—å‰æ–¹è§£ç­”ï¼‰ã€‚\nå˜æ¢æ•°æ®ç±»å‹ # Python åœ¨ä»æœåŠ¡å™¨æ¥æ”¶æˆ–è€…å‘é€æ•°æ®æ—¶éœ€è¦å­—ç¬¦ç±»å‹è½¬æ¢ï¼Œ\u0026lsquo;\u0026lsquo;\u0026lsquo;struct\u0026rsquo;\u0026lsquo;\u0026lsquo;ä¾¿æ˜¯ä¸ºæ­¤è€Œå·¥ä½œ\nstruct.pack # import struct a = 20 b = 400 str = struct.pack(\u0026#34;ii\u0026#34;, a, b) #è½¬æ¢åçš„strè™½ç„¶æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä½†ç›¸å½“äºå…¶ä»–è¯­è¨€ä¸­çš„å­—èŠ‚æµï¼ˆå­—èŠ‚æ•°ç»„ï¼‰ï¼Œå¯ä»¥åœ¨ç½‘ç»œ #ä¸Šä¼ è¾“ print \u0026#39;length:\u0026#39;, len(str) print str print repr(str) \u0026mdash;- result length: 8\n\u0026mdash;-è¿™é‡Œæ˜¯ä¹±ç  # \u0026lsquo;/x14/x00/x00/x00/x90/x01/x00/x00\u0026rsquo;\næ ¼å¼ç¬¦â€iâ€è¡¨ç¤ºè½¬æ¢ä¸ºintï¼Œâ€™iiâ€™è¡¨ç¤ºæœ‰ä¸¤ä¸ªintå˜é‡ã€‚è¿›è¡Œè½¬æ¢åçš„ç»“æœé•¿åº¦ä¸º8ä¸ªå­—èŠ‚ï¼ˆintç±»å‹å ç”¨4ä¸ªå­—èŠ‚ï¼Œä¸¤ä¸ªintä¸º8ä¸ªå­—èŠ‚ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºçš„ç»“æœæ˜¯ä¹±ç ï¼Œå› ä¸ºç»“æœæ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œæ‰€ä»¥æ˜¾ç¤ºä¸ºä¹±ç ã€‚å¯ä»¥ä½¿ç”¨pythonçš„å†…ç½®å‡½æ•°repræ¥è·å–å¯è¯†åˆ«çš„å­—ç¬¦ä¸²ï¼Œå…¶ä¸­åå…­è¿›åˆ¶çš„0x00000014, 0x00001009åˆ†åˆ«è¡¨ç¤º20å’Œ400ã€‚\nstruct.unpack # str = struct.pack(\u0026#34;ii\u0026#34;, 20, 400) a1, a2 = struct.unpack(\u0026#34;ii\u0026#34;, str) print \u0026#39;a1:\u0026#39;, a1 print \u0026#39;a2:\u0026#39;, a2 \u0026mdash;- result: a1: 20 a2: 400\nstruct.unpackåšçš„å·¥ä½œåˆšå¥½ä¸struct.packç›¸åï¼Œç”¨äºå°†å­—èŠ‚æµè½¬æ¢æˆpythonæ•°æ®ç±»å‹ã€‚å®ƒçš„å‡½æ•°åŸå‹ä¸ºï¼šstruct.unpack(fmt, string)ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªå…ƒç»„ã€‚\nstruct.calcsize # struct.calcsize(\u0026#39;i\u0026#39;) struct.calcsize(\u0026#39;ii\u0026#39;) struct.calcsize(\u0026#39;iic\u0026#39;) struct.calcsize(\u0026#39;iicd\u0026#39;) 4 8 9 24\nstruct.calcsizeç”¨äºè®¡ç®—æ ¼å¼å­—ç¬¦ä¸²æ‰€å¯¹åº”çš„ç»“æœçš„é•¿åº¦ï¼Œå¦‚ï¼šstruct.calcsize(â€˜iiâ€™)ï¼Œè¿”å›8ã€‚å› ä¸ºä¸¤ä¸ªintç±»å‹æ‰€å ç”¨çš„é•¿åº¦æ˜¯8ä¸ªå­—èŠ‚ã€‚\nstruct.pack_into, struct.unpack_from # import struct from ctypes import create_string_buffer buf = create_string_buffer(12) print repr(buf.raw) struct.pack_into(\u0026#34;iii\u0026#34;, buf, 0, 1, 2, -1) print repr(buf.raw) print struct.unpack_from(\u0026#39;iii\u0026#39;, buf, 0) \u0026mdash;- result \u0026rsquo;/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00\u0026rsquo; \u0026rsquo;/x01/x00/x00/x00/x02/x00/x00/x00/xff/xff/xff/xff\u0026rsquo; (1, 2, -1)\nPython3 # åœ¨Python3ä¸­ï¼Œè½¬æ¢å­—ç¬¦ä¸²æ—¶ï¼Œä¸èƒ½ç›´æ¥pack('8s', 'i am str'), éœ€è¦å°†å­—ç¬¦ä¸²è½¬æ¢æˆäºŒè¿›åˆ¶æ‰€ä»¥åœ¨è¯­æ³•ä¸­æ ‡è®°pack('8s', b'i am str')ä½¿ç”¨'b'æ¥è¿›è¡Œæ ‡è®°\nä»¥ä¸Šæ¥è‡ªDarkbull è¿™æ˜¯è½¬è´´åœ°å€ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘çœ‹çš„è½¬è´´æŒ‚çš„åŸå¸–åœ°å€å¤±æ•ˆäº† ğŸ˜°\nä¸€ä¸å°å¿ƒå‘ç°çš„è¯­æ³• # py2.7\nwhile 'a' in a or b: break # æ²¡é”™ï¼Œæ„æ€å°±æ˜¯å¦‚æœaæˆ–è€…æ˜¯båŒ…å«â€˜aâ€™çš„è¯â€¦ * ä¸ ** æ–¹æ³•: # å‘ƒï¼ŒåŸæ¥*åœ¨MarkDowné‡Œé¢æ˜¯æ–œä½“çš„æ„æ€å•Šâ€”â€”éœ€è¦æ–œä½“æ˜¾ç¤ºçš„å‰åå„ä¸€ä¸ªæ˜Ÿå·\ndef a(* a, **b): balabala è¿™é‡Œçš„*aï¼Œ aåœ¨å‡½æ•°ä¸­è¢«èµ‹å€¼ä¸ºä¸€ä¸ªå…ƒç»„ï¼Œbè¢«èµ‹å€¼ä¸ºä¸€ä¸ªå­—å…¸ã€‚æ‰€ä»¥åœ¨è°ƒç”¨çš„æ—¶å€™å˜ï¼Œåªèƒ½æŠŠèƒ½å¾€ä¸€ä¸ªå…ƒç»„é‡Œå¡çš„æ”¾åœ¨å‰é¢ï¼Œè€Œèƒ½å¤Ÿç”Ÿæˆå­—å…¸çš„æ”¾åœ¨åé¢\na(1,2,3,4,5,6,7,8,9,a:'a',b:1,c:'nihao') å°±åƒè¿™ä¹ˆä¸€æ ·æ¥è°ƒç”¨ã€‚ å¦å¤–ï¼Œdef a()å‡½æ•°ä¸­è¿˜èƒ½åœ¨å‰æ–¹å†æ–°åŠ ä¸€ä¸ªè¾“å…¥\ndef aa(jiushishuowo, *a, **b): pass è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨çš„æ—¶å€™ç¬¬ä¸€ä¸ªé€—å·å‰é¢çš„å†…å®¹ä¼šèµ‹å€¼ç»™å®ƒã€‚overï¼Œå›å»æ‹¿å¿«é€’äº†~~~\nğŸ¶ å¹´å‡å‰å†æ¥è¡¥å……ä¸€ä¸‹ï¼šçº¦å®šå*args, **kwargs\nè·å–æ–‡ä»¶è·¯å¾„ # path = os.path.abspath(os.path.dirname(__file__)) # è·å–å½“å‰è¿è¡Œæ–‡ä»¶çš„è·¯å¾„ã€‚éœ€åœ¨æœ¬åœ°æœ‰æ­¤æ–‡ä»¶ï¼Œåœ¨å‘½ä»¤è¡Œä¸­å‡ºé”™ for root, subdirs, files in os.walk(path): # éå†æ‰€æœ‰pathä¸‹æ–‡ä»¶ pathä¸ºè¦éå†çš„è·¯å¾„ åŒè·å–è·¯å¾„ # os.path.abspath('./') os.path.abspath('Deskop') os.path.abspath('Deskop') + os.path.sep \u0026lsquo;C:\\Users\\Administrator\u0026rsquo;\n\u0026lsquo;C:\\Users\\Administrator\\Deskop\u0026rsquo;\n\u0026lsquo;C:\\Users\\Administrator\\Deskop\\\u0026rsquo;\nè·å–æŒ‡å®šç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ååˆ—è¡¨ # os.listdir('D\\IFData') _dict_ # class Province: country = 'China' def __init__(self, name, count): self.name = name self.count = count def func(self, *args, **kwargs): print 'func' print Province.__dict__ # ç±»è¾“å‡º obj1 = Province('HuBei', 100) print obj1.__dict__ # å¯¹è±¡1 obj2 = Province('hulala', 3888) print obj2.__dict__ # å¯¹è±¡2 {'country': 'China', '__module__': '__main__', 'func': \u0026lt;function func at 0x049EF470\u0026gt;, '__init__': \u0026lt;function __init__ at 0x049EF4F0\u0026gt;, '__doc__': None}\n{'count': 100, 'name': 'HuBei'}\n{'count': 3888, 'name': 'hulala'}\nç±»è¾“å‡ºçš„æ˜¯å…¨å±€çš„å‡½æ•°ï¼Œå˜é‡ç­‰ä¿¡æ¯ã€‚ å¯¹è±¡è¾“å‡ºçš„åªæ˜¯å¯¹è±¡æ‹¥æœ‰çš„æ™®é€šå˜é‡è€Œå·²\nå‘ƒ(âŠ™ï¹âŠ™)ï¼Œç­‰ä¸‹å†å»æ‹¿å§â€¦ å·®ç‚¹å¿˜äº†è¯´ï¼Œè¿™ä¸ª__dict__ä¸å­—å…¸ç›¸é…åˆæ¥å›èµ‹å€¼ç®€ç›´èˆ’æœâ€¦ æ­¥éª¤ä¸ºï¼šå°†æŸä¸ªå˜é‡=ä¸€ä¸ªç±»ï¼ˆæ•°æ®ç±»ï¼ˆå°±æ˜¯èƒ½å¤Ÿa.bè¿™ä¹ˆè°ƒç”¨çš„æ•°å€¼ï¼‰ï¼‰ç„¶åè¿™ä¸ªå˜é‡å°±èƒ½a.bçš„è¿™ä¹ˆä½¿ç”¨äº†ã€‚ è€Œåä¹Ÿèƒ½é€šè¿‡a.dictï¼ˆè¿™æ˜¯ä¸€ä¸ªå­—å…¸ï¼‰å†å°†æ‰€éœ€è¦çš„æ•°å€¼å–å‡ºæ¥ï¼Œè½¬èµ‹å€¼ä¸ºåˆ«çš„ä¸œè¥¿ã€‚ åæ­£æˆ‘æ˜¯ç”¨åˆ°äº†â€¦ åœ¨æƒ³è¦å®ç°ä¸€ä¸ªå‡½æ•°æ¥ä¿å­˜ä¸€ä¸ªå˜é‡çš„æŸäº›å±æ€§çš„æ—¶å€™ã€‚ï¼ˆå‘ƒ(âŠ™ï¹âŠ™)ç”¨çˆ±å»ç†è§£æˆ‘æ‰€æè¿°çš„åœºåˆå§ã€‚ï¼‰\nIF ELSE # # æ‰§è¡Œæ—¶ä¼šå°†IFå‰é¢æ•´ä¸ªè¡¨è¾¾å¼ä½œä¸ºåˆ¤æ–­ç»“æœåçš„æ‰§è¡Œå¯¹è±¡ï¼Œ # è€Œä¸æ˜¯ä»…ä»…æ›¿æ¢æŸä¸€ä¸ªæ•°å­—æˆ–è€…å˜é‡ã€‚ å³ ä¸‹æ–¹è¡¨è¾¾å¼è¿ç®—ç»“æœ # ä¸æ˜¯ `4` å’Œ `5` è€Œæ˜¯å¦‚ä¸‹æ‰€ç¤º a = 1 + 3 if 1 == 2 else 2 + 1 a a = 1 + 3 if 1 == 1 else 2 + 1 a 3\n4\nPython 2 ä¸­çš„objectæ–°å¼ç±»å’Œç»å…¸ç±» # # ä½œè€…ï¼šé‚¹å†² # é“¾æ¥ï¼šhttps://www.zhihu.com/question/19754936/answer/202650790 class A: def foo(self): print('called A.foo()') class B(A): pass class C(A): def foo(self): print('called C.foo()') class D(B, C): pass if __name__ == '__main__': d = D() d.foo() Bã€C æ˜¯ A çš„å­ç±»ï¼ŒD å¤šç»§æ‰¿äº† Bã€C ä¸¤ä¸ªç±»ï¼Œå…¶ä¸­ C é‡å†™äº† A ä¸­çš„ foo() æ–¹æ³•ã€‚\nå¦‚æœ A æ˜¯ç»å…¸ç±»ï¼ˆå¦‚ä¸Šä»£ç ï¼‰ï¼Œå½“è°ƒç”¨ D çš„å®ä¾‹çš„ foo() æ–¹æ³•æ—¶ï¼ŒPython ä¼šæŒ‰ç…§æ·±åº¦ä¼˜å…ˆçš„æ–¹æ³•å»æœç´¢ foo() ï¼Œè·¯å¾„æ˜¯ B-A-C ï¼Œæ‰§è¡Œçš„æ˜¯ A ä¸­çš„ foo() ï¼›\nå¦‚æœ A æ˜¯æ–°å¼ç±»ï¼Œå½“è°ƒç”¨ D çš„å®ä¾‹çš„ foo() æ–¹æ³•æ—¶ï¼ŒPython ä¼šæŒ‰ç…§å¹¿åº¦ä¼˜å…ˆçš„æ–¹æ³•å»æœç´¢ foo() ï¼Œè·¯å¾„æ˜¯ B-C-A ï¼Œæ‰§è¡Œçš„æ˜¯ C ä¸­çš„ foo() ã€‚\nå› ä¸º D æ˜¯ç›´æ¥ç»§æ‰¿ C çš„ï¼Œä»é€»è¾‘ä¸Šè¯´ï¼Œæ‰§è¡Œ C ä¸­çš„ foo() æ›´åŠ åˆç†ï¼Œå› æ­¤æ–°å¼ç±»å¯¹å¤šç»§æ‰¿çš„å¤„ç†æ›´ä¸ºåˆä¹é€»è¾‘ã€‚\nåœ¨ Python 3.x ä¸­çš„æ–°å¼ç±»è²Œä¼¼å·²ç»å…¼å®¹äº†ç»å…¸ç±»ï¼Œæ— è®º A æ˜¯å¦ç»§æ‰¿ object ç±»ï¼Œ D å®ä¾‹ä¸­çš„ foo() éƒ½ä¼šæ‰§è¡Œ C ä¸­çš„ foo() ã€‚ä½†æ˜¯åœ¨ Python 2.7 ä¸­è¿™ç§å·®å¼‚ä»ç„¶å­˜åœ¨ï¼Œå› æ­¤è¿˜æ˜¯æ¨èä½¿ç”¨æ–°å¼ç±»ï¼Œè¦ç»§æ‰¿ object ç±»ã€‚\n.items() # ä¸€ä¸ªå­—å…¸ aï¼Œå…¶a.items()ä¸ºå°†æ¯å¯¹å¯¹åº”å€¼ç»„ä¸ºä¸€ä¸ªå…ƒç»„ã€‚å³ä½¿é”®å€¼ä¹Ÿä¸ºä¸€ä¸ªå­—å…¸ä¹Ÿæ˜¯å°†æ­¤å­—å…¸ä½œä¸ºå…ƒç»„å…ƒç´ ã€‚(ï¿£â–½ï¿£)\u0026rdquo; emm\nQueue # é˜Ÿåˆ—ï¼Œå…ˆè¿›å…ˆå‡ºå‹ã€‚å¯å­˜æ•°å­—ã€å­—ç¬¦â€¦å˜›ï¼ŒPythoné‡Œå•¥éƒ½ä¸€æ ·ã€‚æ‰€ä»¥å•¥éƒ½èƒ½å­˜ã€‚ç”¨äºäº‹ä»¶æŒ‰é¡ºåºæ‰§è¡Œã€‚ç¤ºä¾‹å¦‚~ï¼š\nimport Queue mqueue = Queue.Queue(maxsize = 3) mqueue.put(10) mqueue.put(15) mqueue.put(12) # æ­¤æ—¶å¦‚æœå†å¾€é‡Œå­˜å‘¢ï¼Œå°±ä¼šå¡ä½â€¦ æŒç»­ç­‰å¾…æœ‰ç©ºä½ç½® # æ‰€ä»¥ mqueue.get() #å–å‡ºç¬¬ä¸€ä¸ªå­˜å…¥ mqueue.put('14sas4') #ç»§ç»­å­˜ ## åœ¨æ¥è§¦çš„é¡¹ç›®ä¸­ï¼Œæ˜¯å€Ÿç”¨å­—å…¸ï¼Œæ¥å°†å¤„ç†å‡½æ•°ä½œä¸ºValueï¼Œå°†Keysï¼Œputåˆ°é˜Ÿ åˆ—ä¸­ï¼Œå†è¿›è¡Œå–å‡ºæ‰§è¡Œã€‚ å¦‚æœé˜Ÿåˆ—ä¸­æ²¡æœ‰æ•°å€¼ä¹‹åå†getä¹Ÿä¼šå¡ä½â€¦â€¦ æ‰€ä»¥ä»¥ä¸‹ä¸œè¥¿å°±æ˜¾å¾—æ¯”è¾ƒé‡è¦äº†ï¼š\nserieså’Œdataframe # å…ˆè´´æ¥æºï¼šhttp://blog.csdn.net/ly_ysys629/article/details/54944153\nå±æ€§ # series ï¼š.index, .values, .name, .index.name dataframe ï¼š.columns, .index, .values series: # ä¸€ç»„æ•°ç»„ï¼ˆåˆ—è¡¨æˆ–å…ƒç»„ï¼‰ï¼Œseriesé™¤äº†ä¸€ç»„æ•°æ®å¤–è¿˜åŒ…æ‹¬ä¸€ç»„ç´¢å¼•ï¼ˆå³åªæœ‰è¡Œç´¢å¼•ï¼‰ï¼Œç´¢å¼•å¯è‡ªè¡Œå®šä¹‰ä¹Ÿå¯åˆ©ç”¨Series(),è‡ªåŠ¨ç”Ÿæˆç´¢å¼•;\ndataframe: # æ˜¯è¡¨æ ¼å‹æ•°æ®ï¼Œæ—¢æœ‰è¡Œç´¢å¼•åˆæœ‰åˆ—ç´¢å¼•ï¼Œæ¯åˆ—æ•°æ®å¯ä»¥ä¸ºä¸åŒç±»å‹æ•°æ®ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å‹å€¼ï¼‰ï¼Œå¯åˆ©ç”¨DataFrameï¼ˆå…¶ä»–æ•°æ®ï¼Œdataframeå±æ€§)æŒ‡å®šdataframeçš„å±æ€§åˆ›å»ºdataframeã€‚\nå®ä¾‹ # series # #åˆ›å»ºseries import pandas as pd obj_list=[1,2,3,4] obj_tuple=(4,5,6,7) obj_dict={'a':[1,2],'b':[2,3],'c':[3,4],'d':[4,5]} obj_series_list=pd.Series(obj_list)#é€šè¿‡åˆ—è¡¨åˆ›å»ºseries obj_series_tuple=pd.Series(obj_tuple,index=list('abcd')) #é€šè¿‡å…ƒç»„åˆ›å»ºseries obj_series_dict=pd.Series(obj_dict)#é€šè¿‡å­—å…¸åˆ›å»ºseries #å®šä¹‰å±æ€§ obj_series_list.index.name='zimu' obj_series_list.name='data' print \u0026quot;#é€šè¿‡åˆ—è¡¨åˆ›å»ºseries\u0026quot; print obj_series_list print \u0026quot;#é€šè¿‡å…ƒç»„åˆ›å»ºseries\u0026quot; print obj_series_tuple print \u0026quot;#é€šè¿‡å­—å…¸åˆ›å»ºseries\u0026quot; print obj_series_dict #æ˜¾ç¤ºseriesç±»å‹åŠå±æ€§ print type(obj_series_list),obj_series_list.dtype print obj_series_list.index,obj_series_list.index.name print obj_series_list.values,obj_series_list.name é€šè¿‡åˆ—è¡¨åˆ›å»ºseries # zimu\n0 1\n1 2\n2 3\n3 4\nName: data, dtype: int64\né€šè¿‡å…ƒç»„åˆ›å»ºseries # a 4 b 5 c 6 d 7 dtype: int32 é€šè¿‡å­—å…¸åˆ›å»ºseries # a [1, 2] b [2, 3] c [3, 4] d [4, 5] dtype: object \u0026lt;class 'pandas.core.series.Series'\u0026gt; int64 RangeIndex(start=0, stop=4, step=1, name=u'zimu') zimu [1 2 3 4] data dataframe # #åˆ›å»ºdataframe import pandas as pd import numpy as np obj_dict={'a':[1,2],'b':[2,3],'c':[3,4],'d':[4,5]} obj_array=np.array([[1,2,3,4],[3,4,5,6]]) obj_series_1=pd.Series([11,12,13,14]) obj_series_2=pd.Series([21,22,23,24]) obj_dataframe_dict=pd.DataFrame(obj_dict) #é€šè¿‡å­—å…¸åˆ›å»ºdataframe obj_dataframe_array=pd.DataFrame(obj_array,index=['one','two']) #é€šè¿‡çŸ©é˜µåˆ›å»ºdataframe obj_dataframe_series=pd.DataFrame([obj_series_1,obj_series_2]) #é€šè¿‡seriesåˆ›å»ºdataframe obj_dataframe_dataframe=pd.DataFrame(obj_dataframe_series,index= [0,1,'one'],columns=[0,1,2,'a']) #é€šè¿‡å…¶ä»–dataframeåˆ›å»ºdataframe print \u0026quot;#é€šè¿‡å­—å…¸åˆ›å»ºdataframe\u0026quot; print obj_dataframe_dict print \u0026quot;#é€šè¿‡çŸ©é˜µåˆ›å»ºdataframe\u0026quot; print obj_dataframe_array print \u0026quot;#é€šè¿‡seriesåˆ›å»ºdataframe\u0026quot; print obj_dataframe_series print \u0026quot;#é€šè¿‡å…¶ä»–dataframeåˆ›å»ºdataframe\u0026quot; print obj_dataframe_dataframe #dataframeå±æ€§ print obj_dataframe_dataframe.dtypes print obj_dataframe_dataframe.values print obj_dataframe_dataframe.columns print obj_dataframe_dataframe.index è¾“å‡ºç»“æœä¸ºï¼š #é€šè¿‡å­—å…¸åˆ›å»ºdataframe a b c d 0 1 2 3 4 1 2 3 4 5 #é€šè¿‡çŸ©é˜µåˆ›å»ºdataframe 0 1 2 3 one 1 2 3 4 two 3 4 5 6 #é€šè¿‡seriesåˆ›å»ºdataframe 0 1 2 3 0 11 12 13 14 1 21 22 23 24 #é€šè¿‡å…¶ä»–dataframeåˆ›å»ºdataframe 0 1 2 a 0 11.0 12.0 13.0 NaN 1 21.0 22.0 23.0 NaN one NaN NaN NaN NaN 0 float64 1 float64 2 float64 a float64 dtype: object [[ 11. 12. 13. nan] [ 21. 22. 23. nan] [ nan nan nan nan]] Index([0, 1, 2, u\u0026rsquo;a\u0026rsquo;], dtype=\u0026lsquo;object\u0026rsquo;) Index([0, 1, u\u0026rsquo;one\u0026rsquo;], dtype=\u0026lsquo;object\u0026rsquo;) å–æ•°æ®çš„è¯ï¼Œä¾¿æ˜¯obj_dataframe_dict['a'][0]å–å‡ºæ•°å€¼å³ä¸º1\nè‡ªå‘½ååˆ›å»ºæ–¹å¼ # df4 = pd.DataFrame(np.random.randn(6, 4), index=[u'ç¬¬äºŒ', 4, 3, 2, 1, 0], columns=[u'ç¬¬ä¸€',5,4,1]) #è¡Œä¸ºï¼š ç¬¬ä¸€ï¼Œ 5ï¼Œ 4ï¼Œ 1 #åˆ—ä¸ºï¼šç¬¬äºŒ -0.091305 ... # 4 ... # 3 # 2 # 1 # 0 ... æŸ¥çœ‹ # .dtypes æŸ¥çœ‹å„è¡Œæ•°æ®æ ¼å¼ .head() æŸ¥çœ‹å‰å‡ è¡Œï¼ˆé»˜è®¤5ï¼‰ .tail() æŸ¥çœ‹åå‡ è¡Œ .index æŸ¥çœ‹æ•°æ®æ¡†å¼•ç´¢ .columns æŸ¥çœ‹åˆ—å .values æ•°æ®å€¼ .T è½¬ç½® .sort æ’åº .sort(columns = '***')æ ¹æ®***åˆ—æ•°æ®è¿›è¡Œæ’åº å–æ•°æ®æ–¹æ³•è§ä¸Š # zip å’Œ æ•°ç»„å˜å­—å…¸ # a = [1,2,3] b = [4,5,6] c = [4,5,6,7,8] zipped = zip(a,b) [(1, 4), (2, 5), (3, 6)]\nzip(a,c) [(1, 4), (2, 5), (3, 6)]\nzip(*zipped) [(1, 2, 3), (4, 5, 6)]\nzip ä¹Ÿå¯ä»¥äºŒç»´çŸ©é˜µå˜æ¢ï¼ˆçŸ©é˜µçš„è¡Œåˆ—äº’æ¢ï¼‰ å› ä¸ºå…¶ä½œç”¨ä¸ºæŒ‰åºå·é‡ç»„æ•°ç»„ã€‚ï¼ˆå…¶è‹±è¯­ç¿»è¯‘ä¸ºæ‹‰é“¾â€¦â€¦ï¼‰\næ•°ç»„å˜å­—å…¸~ï¼š # dic(zip(a, b)) # aä¸­å€¼ä¸ºkey bä¸­å€¼ä¸ºvalues å­—å…¸æ“ä½œ # dict= sorted(dic.items(), key=lambda d:d[0]) # å°†å­—å…¸æŒ‰ç…§é”®å€¼å‡åºæ’åˆ— # dï¼š æ— æ‰€è°“çš„å‚æ•° # d[0]ï¼š0ä¸ºå‡åºï¼Œ1ä¸ºé™åº # å¦‚æœæ˜¯å­—ç¬¦å‹ï¼Œé‚£ä¹ˆâ€˜1â€™â€˜10â€™â€˜12â€™â€¦ æ‰æ˜¯â€˜2â€™â€™20â€˜ï¼Œå› ä¸ºPythonçš„æ¯”è¾ƒæ˜¯æŒ‰ç…§ # æŒ‰åºæå–ç¬¬ä¸€ä¸ªå­—ç¬¦è¿›è¡Œæ¯”è¾ƒã€‚æ‰€ä»¥è¦æ’åºï¼Œè¿˜æ˜¯å¾—ç”¨int # æ’åºä¹‹åè¢«è½¬æ¢ä¸ºlistç±»å‹ã€‚ for i in orderIDic: spamwriter.writerow(orderIDic[i]) # å˜ä¸º for i in orderIDic: spamwriter.writerow(i[1]) namedtuple # import collections person = collections.namedtuple('P', 'name age gender') # P: ç±»å åé¢ç©ºæ ¼éš”å¼€çš„ä¸ºå˜é‡åç§° bob = person(name = 'B', age = 30, gender = 'male') jane = Person(name = 'J', age = 29, gender = 'female') for people in [bob, jane]: print (\u0026quot;%s is %d years old %s\u0026quot; % people) å…ƒç»„çš„å‘½åâ€”â€” å‘½åä¹‹åå¯ä»¥ç”±bob.name æ¥è°ƒç”¨ ï¼ˆçœ‹äº†é‚£ä¸ªPythoné¢å‘å¯¹è±¡è¿›é˜¶ï¼Œ è€å¤š__hahah__()å‡½æ•°ä¹‹åï¼Œæ‰€ä»¥è¿™æ˜æ˜¾æ˜¯å½“æˆåŸºæœ¬ç±»çš„å˜é‡åœ¨ç”¨äº†ã€‚ emm è¿™ä¹ˆä¹ˆè¯´ä¹Ÿä¸è´´åˆ‡ ğŸ˜” æœç„¶ç†è§£ç¨‹åº¦è¿˜æ˜¯è·Ÿä¸ä¸Šçš„â€¦ emm ç°åœ¨éœ€è¦è·Ÿè¿›çš„ä¸æ˜¯æ€ä¹ˆç”¨Pythonäº†ï¼Œè€Œæ˜¯pythonçš„ç”¨æ³•äº†ï¼Œèµ°èµ·~ ç»§ç»­å†™futureç¬”è®°å»äº†â€”â€” è¿™ä¸ªå¾—çœ‹çš„æ˜ç™½ç‚¹å„¿ğŸ˜„ï¼‰\nCSV # è¯»å– # import csv reader = csv.reader(open('test.csv', 'rb')) for item in reader: print item å®˜æ–¹æ˜¯è¿™ä¹ˆæ•™ä½ çš„ # #æˆ‘è®°å¾—æˆ‘å†™è¿‡ä¸€æ¬¡ï¼Œæ€ä¹ˆä¸è§äº†â€¦ import csv with open('names.csv') as csvfile: reader = csv.DictReader(csvfilr) for row in reader: print (row['first_name'], row['last_name']) å†™å…¥ # import csv writer = csv.writer(open('test2.csv', 'wb')) writer.writerow(['col1', 'col2', 'col3']) data = [range(3) for i in range(3)] for item in data: writer.writerow(item) å®˜æ–¹æ•™ä½ è¿™ä¹ˆå†™ # import csv with open('names.csv') as csvfile: fieldnames = ['first_name', 'last_name'] writer = csv.DictWriter(csvfile, fieldnames = fieldnames) writer.writeheader() writer.writerow('first_name' : 'Naled', 'last_name' : 'Beans') é¡»æ³¨æ„ä¹‹å¤„ï¼šwriter.writerow()æ–¹æ³•ä¸­çš„å‚æ•°æ˜¯listç±»å‹ï¼Œå¦‚æœä½ æƒ³åœ¨A1åˆ—å†™å…¥\u0026rsquo;hello\u0026rsquo;ï¼Œåˆ™å¿…é¡»æ˜¯writer.writerow(\u0026lsquo;hello\u0026rsquo;)ï¼Œä¸ç„¶\u0026rsquo;hello\u0026rsquo;ä¼šè¢«çœ‹æˆæ˜¯ä¸ªlistä»è€Œè¢«åˆ†å†™å…¥5åˆ—ã€‚å†™å…¥CSVæ—¶ï¼ŒCSVæ–‡ä»¶çš„åˆ›å»ºå¿…é¡»åŠ ä¸Š\u0026rsquo;b\u0026rsquo;å‚æ•°ï¼Œå³csv.writer(open(\u0026rsquo;test.csv\u0026rsquo;, \u0026lsquo;wb\u0026rsquo;))ï¼Œä¸ç„¶ä¼šå‡ºç°éš”è¡Œçš„ç°è±¡ã€‚ç½‘ä¸Šæœåˆ°çš„è§£é‡Šæ˜¯ï¼špythonæ­£å¸¸å†™å…¥æ–‡ä»¶çš„æ—¶å€™ï¼Œæ¯è¡Œçš„ç»“æŸé»˜è®¤æ·»åŠ \u0026rsquo;\\nâ€™ï¼Œå³0x0Dï¼Œè€Œwriterowå‘½ä»¤çš„ç»“æŸä¼šå†å¢åŠ ä¸€ä¸ª0x0D0Aï¼Œå› æ­¤å¯¹äºwindowsç³»ç»Ÿæ¥è¯´ï¼Œå°±æ˜¯ä¸¤è¡Œï¼Œè€Œé‡‡ç”¨â€™b\u0026rsquo;å‚æ•°ï¼Œç”¨äºŒè¿›åˆ¶è¿›è¡Œæ–‡ä»¶å†™å…¥ï¼Œç³»ç»Ÿé»˜è®¤æ˜¯ä¸æ·»åŠ 0x0Dçš„ã€‚\nå…³é—­ # csvfile.close() å€¼å¾—æ³¨æ„çš„æ˜¯ä¸Šé¢çš„æ–‡æ¡£æ˜¯è¦†ç›–å‹åˆ›å»ºï¼Œå³ï¼Œå†™æ•°æ®åªèƒ½åœ¨å…³é—­æ–‡æ¡£ä¹‹å‰å®Œæˆï¼Œä¹‹åå†æ‰“å¼€æ–‡ä»¶ï¼Œå†å†™å°±ä¼šè¦†ç›–æ‰ä¹‹å‰ï¼ˆæ¸…ç©ºå†å†™ï¼‰ ä¸‹é¢çš„txt mode = 'a' å°±å±äºæ·»åŠ å‹å†™å…¥äº†ï¼Œå†å…³é—­ä¹‹åå†æ‰“å¼€ä¼šåœ¨æœ€åä¸€æ¡å¼€å§‹ç»§ç»­æ·»åŠ ã€‚ç„¶åå°†csvä¸­çš„\u0026rsquo;w\u0026rsquo;æ›¿æ¢æˆâ€˜aâ€™å°±è¡Œäº†ã€‚è®°å¾—å¸¦ä¸Š\u0026rsquo;b\u0026rsquo;è¦ä¸ä¼šå‡ºç°æ•°æ®éš”è¡Œâ€¦éš”è¡Œæ˜¾ç¤º\nå®˜æ–¹è¿˜å«ä½ è¿™ä¹ˆå†™å˜ # with open('na1me.csv', 'ab') as csvfile: spamwriter = csv.writer(csvfile, delimiter = ',') spamwriter.writerow(['adasd', 'w.c.w', 'lol']) txtä¿å­˜ # # åŸºæœ¬ä¸CSVä¸€è‡´ï¼Œemmå…¶å®éƒ½æ˜¯ä¿å­˜ä¸ºæ–‡æ¡£ï¼Œå°±åªæœ‰ä¸ªåç¼€åŒºåˆ«â€¦ def text_save(content,filename,mode='a'): # Try to save a list variable in txt file. file = open(filename,mode) file.write(str(content)+'\\n') file.close() text_save(np.mean(self.trueRange[start: ]), 'atr.txt') å…³äºä¿å­˜è·¯å¾„å‘¢ï¼Œwindows ä¸‹å¿…é¡»?ç”¨ â€˜.\\.\\..â€™æ²¡é”™ï¼Œå½“å‰è·¯å¾„ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰å’Œç»å¯¹è·¯å¾„éƒ½æ˜¯è¿™æ ·ç”¨çš„\nmode bä»£è¡¨äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€ï¼Œè€Œaå°±æœ‰ç”¨äº†ï¼Œè¡¨ç¤ºæœ‰æ­¤æ–‡ä»¶å°±æ‰“å¼€ï¼Œæ²¡çš„è¯å°±åˆ›å»ºã€‚\njson # å’Œä¸Šè¿°txtæ–‡ä»¶ä¿å­˜å·®ä¸è¿‡ï¼Œå—¯åº”è¯¥è¯´å®Œå…¨ä¸€æ ·ã€‚å› ä¸ºæˆ‘æ˜¯ç”¨çš„æ˜¯`json.dumps` dumpsã€loads # è¿™ä¸¤ä¸ªè¯­å¥å‰è€…æ˜¯å°†å­—å…¸è½¬åŒ–ä¸ºstræ ¼å¼ï¼Œåè€…æ˜¯å°†strè½¬æ¢ä¸ºå­—å…¸ã€‚æ‰€ä»¥ä¿ å­˜åˆ°æ–‡ä»¶ä¹Ÿä¸è¿‡æ˜¯ å­—å…¸ -\u0026gt; str -\u0026gt;(ç”¨`write`å†™å…¥)-\u0026gt; æœ¬åœ°æ–‡ä»¶ï¼Œ åä¹‹ã€‚ ä¸ä¹‹ç›¸å¯¹æ¯”çš„æ˜¯`dump`å’Œ`load`è¿™ä¸ªæ˜¯ç›´æ¥ä¿å­˜è‡³æ–‡ä»¶ï¼Œä½†`s`å¤šå¥½ç”¨ éœ€æ³¨æ„çš„æ˜¯`dumps`æœ‰`indent`å‚æ•°å¯ç”¨æ¥æŒ‡æ˜è½¬æ¢ä¸º`str`ä¹‹åçš„ç¼©è¿›å‚ æ•°ã€‚ä¸€èˆ¬`4`ï¼ˆæ‰€ä»¥è¯´è¿™é‡Œè¯´çš„æ˜¯ç©ºæ ¼æ•°ï¼Ÿï¼‰ã€‚ å“¦ï¼Œ`loads`ç›´æ¥åŠ è½½æ–‡ä»¶ä¹Ÿ è¡Œï¼Œä¸ç”¨è¯»å‡ºæ¥`str`å†å»è½¬æ¢ Shelve # å¯¹è±¡çš„æŒä¹…åŒ–å­˜å‚¨â€”â€” ç›®çš„ï¼šShelveæ¨¡å—ä¸ºä»»æ„èƒ½å¤Ÿpickleçš„Pythonå¯¹è±¡å®ç°æŒä¹…åŒ–å­˜å‚¨ï¼Œå¹¶æä¾›ä¸€ä¸ªç±»ä¼¼å­—å…¸çš„ æ¥å£ã€‚ # åˆ—è¡¨List # éœ€æå‰å®šä¹‰ï¼Œä¸èƒ½åƒå˜é‡ä¸€æ ·éšç”¨éšå†™â€¦\nä»¥ä¸‹æ¥è‡ªäº Python åˆ—è¡¨(List)æ“ä½œæ–¹æ³•è¯¦è§£\nåˆ—è¡¨æ“ä½œåŒ…å«ä»¥ä¸‹å‡½æ•°: # cmp(list1, list2) # æ¯”è¾ƒä¸¤ä¸ªåˆ—è¡¨çš„å…ƒç´  len(list) # åˆ—è¡¨å…ƒç´ ä¸ªæ•° max(list) # è¿”å›åˆ—è¡¨å…ƒç´ æœ€å¤§å€¼ min(list) # è¿”å›åˆ—è¡¨å…ƒç´ æœ€å°å€¼ list(seq) # å°†å…ƒç»„è½¬æ¢ä¸ºåˆ—è¡¨ åˆ—è¡¨æ“ä½œåŒ…å«ä»¥ä¸‹æ–¹æ³•: # list.append(obj) # åœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ æ–°çš„å¯¹è±¡ list.count(obj) # ç»Ÿè®¡æŸä¸ªå…ƒç´ åœ¨åˆ—è¡¨ä¸­å‡ºç°çš„æ¬¡æ•° list.extend(seq) # åœ¨åˆ—è¡¨æœ«å°¾ä¸€æ¬¡æ€§ # è¿½åŠ å¦ä¸€ä¸ªåºåˆ—ä¸­çš„å¤šä¸ªå€¼ï¼ˆç”¨æ–°åˆ—è¡¨æ‰©å±•åŸæ¥çš„åˆ—è¡¨ï¼‰ list.index(obj) # ä»åˆ—è¡¨ä¸­æ‰¾å‡ºæŸä¸ªå€¼ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ç´¢å¼•ä½ç½® list.insert(index, obj) # å°†å¯¹è±¡æ’å…¥åˆ—è¡¨ list.pop(obj=list[-1]) #ç§»é™¤åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼ˆé»˜è®¤æœ€åä¸€ä¸ªå…ƒç´ ï¼‰ #ï¼Œå¹¶ä¸”è¿”å›è¯¥å…ƒç´ çš„å€¼ list.remove(obj) # ç§»é™¤åˆ—è¡¨ä¸­æŸä¸ªå€¼çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ list.reverse() # åå‘åˆ—è¡¨ä¸­å…ƒç´  list.sort([func]) # å¯¹åŸåˆ—è¡¨è¿›è¡Œæ’åº å­—ç¬¦ä¸²è¿æ¥ # æ¥è‡ªhttp://www.cnblogs.com/chenjingyi/p/5741901.html\næ–¹æ³•ä¸€ # website = 'python' + 'tab' + '.com' æ–¹æ³•äºŒ # listStr = ['python', 'tab', '.com'] website = ''.join(listStr) æ–¹æ³•ä¸‰ # website = '%s%s%s' % ('python', 'tab', '.com') ç»“è®ºï¼š è¿æ¥ä¸ªæ•°å°‘ä½¿ç”¨ä¸€ï¼Œä¸ªæ•°å¤šä½¿ç”¨äºŒã€‚ æ¨èï¼Œä½¿ç”¨ä¸‰ ~ ï¼Œ~\næ‰‹åŠ¨ç¼–è¯‘Pyæ–‡ä»¶ # import compileall compileall.compile_dir(ç›®å½•) æ—¶é—´ # datetime # from datetime import datetime a = datetime.now().replace(hour=0, minute=0, second=0, microsecond=0) a.year a.hour #int å‹å˜é‡ 2017\n0\nè·å–å½“å‰æœ¬æœºç”µè„‘ğŸ’»æ—¶é—´ï¼Œreplaceä¸ºè‡ªå®šä¹‰æŸä¸ªæ•°å€¼ã€‚å•ç‹¬è°ƒç”¨æŸä¸ªä¿¡æ¯å¦‚a.yearã€a.hour\ndatetime ç±»å‹å˜é‡å¯ç›´æ¥ç›¸å‡è·å¾—é—´éš”æ—¥ # a = datetime.datetime.now() # datetime.datetime(2017, 10, 18, 8, 52, 27, 5000) b = datetime(2005, 2, 6) # datetime.datetime(2005, 2, 6, 0, 0) c = a - b # datetime.timedelta(4637, 31947, 5000) c.days # int å‹ 4637\ntimedelta # timedeltaä¸ºdatetimeç±»å‹ç›¸å‡è€Œæ¥ï¼ˆdatetimeä¸èƒ½ç›¸åŠ â€¦ï¼‰ï¼Œç„¶åå˜ï¼Œdatetime.timedelta(1,35340)è¿™æ˜¯å®ƒçš„æ ·å­ï¼Œå‰æ˜¯å¤©æ•°ï¼Œåæ˜¯ç§’æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰ç›¸å‡å°±æ˜¯å‘Šè¯‰ä½ ç›¸è·å¤šå°‘å¤©é›¶å¤šå°‘ç§’ï¼Œéƒ½æ˜¯æ ‡å‡†å•ä½ï¼ˆè¯¯ï¼‰ã€‚è¦å–å‡ºå¯ .days å’Œ `seconds``\næ ¼å¼åŒ–è¾“å‡ºå½“å‰æ—¶é—´ # import time print time.strftime('%Y-%m-%d %H:%M:%S',time.localtime(time.time())) 2017-08-21 10:54:31\ntime # import time time.time() # è¿”å›å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³ï¼ˆ1970çºªå…ƒåç»è¿‡çš„æµ®ç‚¹ç§’æ•°ï¼‰ # è¿”å›å€¼ä¸ºfloat å¯ç›´æ¥æ‹¿æ¥è¿ç®—ï¼Œè¿˜æ˜¯å¾ˆèˆ’æœçš„ã€‚ çº¿ç¨‹ threading # ç”¨äºå®ç°å®šæ—¶å™¨ # import threading def hel(): print \u0026quot;so you sucsessful to kill 5 seconde\u0026quot; time = threading.Timer(5, hel) time.start() so you sucsessful to kill 5 seconde åœ¨å‘½ä»¤è¡Œä¸­æŒ‰ä¸‹å›è½¦åæ¶ˆå¤±ï¼Œå¾ˆæœ‰æ„æ€ï¼Œå¹¶ä¸”å½“ç¬¬äºŒè°ƒç”¨æ—¶time.start()æ—¶å°±ä¼šâ€”â€”\nRuntimeError: threads can only be started once\nå¾ªç¯è°ƒç”¨ # ä»¥ä¸Šçš„ä¸èƒ½å¾ªç¯è°ƒç”¨çš„è¯å°±æ²¡å•¥ä»·å€¼äº†ï¼Œæ‰€ä»¥ä¸‹é¢æœ‰ä¸ªå¦–è‰³ç”¨æ³•ä¸ºï¼š\ndef fun(): print \u0026quot;So jian\u0026quot; global timer timer = threading.Timer(5.5, fun) timer.start() timer = threading.Timer(1, fun) timer.start() # é€šè¿‡è‡ªè°ƒè‡ªçš„æ–¹æ³•å¾ªç¯åˆ›å»ºæ—¶é—´çº¿ç¨‹ï¼Œå¦å¤–ï¼Œtimer.cancel()å¯åœæ­¢å®šæ—¶å™¨å·¥ä½œã€‚ # å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢ä¸å¾ªç¯è°ƒç”¨çš„ åœ¨æ‰§è¡Œå®Œå‡½æ•°ä¹‹åä¾ç„¶ä¼šæŒç»­è¿è¡Œ # æ‰€ä»¥å¾—è®°å¾—å…³é—­ã€‚ æ¯”æ–¹è¯´è¿™ä¸ªå¦–è‰³â€¦â€¦å‘ƒ æœ¬æ¥æ‰“ç®—åœ¨è°ƒç”¨å‡½æ•°é‡Œå†™ä¸Šcancelä½†æ˜¯â€¦ä¾ç„¶ä¹‹åä¸èƒ½å†æ¬¡start()\nçº¿ç¨‹æ±  # è‡ªå®ç°æˆ–è€…ä½¿ç”¨threadpool.ThreadPool:\nimport time import threadpool def sayhello(str): print \u0026#34;Hello \u0026#34;,str time.sleep(2) name_list =[\u0026#39;dd\u0026#39;,\u0026#39;aa\u0026#39;,\u0026#39;bb\u0026#39;,\u0026#39;cc\u0026#39;] start_time = time.time() pool = threadpool.ThreadPool(10) requests = threadpool.makeRequests(sayhello, name_list) for req in requests: pool.putRequest(req) pool.wait() print \u0026#39;%d second\u0026#39;% (time.time()-start_time) Math åº“ # import math æ•°å€¼å–æ•´ # ceilã€floor è¿˜æœ‰ä¸€ä¸ªä¸æ˜¯æ­¤åº“ä¸­çš„round æ‰¾æ¥ç¿»è¯‘å°±æ˜¯ ï¼š å°åŒºã€åœ°æ¿ã€å›åˆâ€¦â€¦â€¦â€¦ å¥½å§ï¼Œæ˜¯ï¼ˆæŠ¹ç°æ³¥è£…é•¶æ¿ã€æœ€ä½çš„ï¼Œæœ€å°çš„ã€å‘¨å›´ï¼Œå›´ç»•ï¼‰\n# ä½¿ç”¨æ–¹æ³•ä¸ºï¼š math.ceil(3.12) math.floor(3.24) round(3.51) round(3.10999999999, 10) #å–å€¼æ—¶çš„å‚è€ƒæ­¥é•¿ï¼Œå¥½åƒï¼ˆğŸ˜­ï¼‰æ˜¯10å°±æ˜¯æœ€å¤§æ­¥é•¿äº†ï¼Œå†å¤§æ²¡æ„ä¹‰ # æ‰‹åŠ¨èµ‹å€¼è¶…è¿‡9ä½ä¹Ÿå°±æ˜¯10ä½å°æ•°çš„æ—¶å€™åœ¨PyCharmé‡Œç›´æ¥èµ‹å€¼è°ƒè¯•å°±è‡ªå·±çº¦äº†ï¼Œ # è€Œä¸€èˆ¬äº§ç”Ÿç²¾åº¦æ¼‚ç§»éƒ½æ˜¯åå‡ ä½å°æ•°å¼€å¤–çš„ã€‚emm å°±è¿™ä¹ˆè¡¨è¾¾äº†ï¼Œçœ‹å¾—æ‡‚ 4.0\n3.0\n4.0\n3.11\nä»¤ç¨‹åºæœ‰åºæ‰§è¡Œçš„æ–¹æ³• # å¯¹è±¡ï¼ˆä¼ªç±»ï¼‰é—´å˜é‡ä¼ é€’ # Like Thisï¼š\nclass A(object): \u0026quot;\u0026quot;\u0026quot;docstring for A\u0026quot;\u0026quot;\u0026quot; def __init__(self, name): super(A, self).__init__() self.name = name self.a = 0 def da(self): print self.name print self.a a = A('I am A') a.da() class B(object): \u0026quot;\u0026quot;\u0026quot;docstring for B\u0026quot;\u0026quot;\u0026quot; def __init__(self, aclass): super(B, self).__init__() self.aclass = aclass self.aclass.a += 1 def dada(self): self.aclass.da() b = B(a) b.dada() class C(object): \u0026quot;\u0026quot;\u0026quot;docstring for B\u0026quot;\u0026quot;\u0026quot; def __init__(self, aclass): super(C, self).__init__() self.aclass = aclass self.aclass.a += 1 def dada(self): self.aclass.da() c = C(a) c.dada() I am A\n0\nI am A\n1\nI am A\n2\nBä¸Cåˆ†åˆ«åœ¨å»æ”¹å˜è¯»å–åœ¨Aä¸­å®šä¹‰çš„æ•°å€¼ã€‚ å—¯ï¼Œæ²¡é”™ï¼Œè¿™ä¹ˆçœ‹çš„ç”»ç¡®å®æ—¶PythonåŸºç¡€â€¦â€¦æ‰€ä»¥æ²¡æœ‰è¿™ä¸ªåŸºç¡€çš„æˆ‘çœ‹èµ·æ¥å‰æœŸè¿˜æŒºè´¹åŠ²ã€‚å½“ç„¶ï¼Œç†è§£å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯åœ¨å®ç°æ–¹æ³•ä¸Šä¸çŸ¥åŸç†çš„è¯å°±å¾ˆéš¾è¿‡ã€‚æœ€ä¸»è¦çš„æ˜¯ï¼ŒçŸ¥é“äº†åŸç†åœ¨è‡ªå·±ç¼–å†™çš„æ—¶å€™å¯ä»¥çš„å¿ƒç”¨æ‰‹ï¼Œä¿¡æ‰‹æ‹ˆæ¥ã€‚å—¯~ o(ï¿£â–½ï¿£)oå°±æ˜¯è¿™ä¹ˆå†™æ„å’Œæƒ¬æ„ã€‚åœ¨VN.PYä¸­æœ‰è®°å½•ï¼Œä¸è¿‡è¿˜æ˜¯æ‹¿è¿‡æ¥å§ï¼Œæ¯•ç«Ÿpythonç”¨æ³•\nå­—å…¸ä¸­å»ºç«‹å‡½æ•°æ˜ å°„ï¼Œæ–¹ä¾¿è°ƒç”¨~ # def add(x, y): return x + y def sub(x, y): return x - y a = {'add':add, 'sub':sub} a a['add'](1, 2) a['sub'](1, 2) {\u0026lsquo;add\u0026rsquo;: \u0026lt;function add at 0x02D162B0\u0026gt;, \u0026lsquo;sub\u0026rsquo;: \u0026lt;function sub at 0x02D16530\u0026gt;}\n3\n-1\ncollections æ¨¡å— # namedtuple # ç»™å…ƒç»„å…ƒç´ å‘½åï¼ˆè²Œä¼¼å†™è¿‡è¿™ä¸ªç¬”è®°æ¬¸ï¼Œä¸è¿‡ç°åœ¨æ‰å‘ç°è¿™å‡ ä¸ªéƒ½æ˜¯åœ¨ä¸€ä¸ªæ¨¡å—ä¸‹çš„ï¼‰ deque # #åŒç«¯é˜Ÿåˆ— å¿«é€Ÿæ’å…¥ ä»¥åŠå–å‡º l.insert(0, v) l.pop(0) l.popleft() l.appendleft() # æ•°æ®é‡å¤§æ—¶ï¼Œé€Ÿåº¦ä¼˜äºåŸç”Ÿlist a Game: # import sys import time from collections import deque fancy_loading = deque('\u0026gt;--------------------') while True: print '\\r%s' % ''.join(fancy_loading), fancy_loading.rotate(1) sys.stdout.flush() time.sleep(0.08) Result: # ä¸€ä¸ªæ— å°½å¾ªç¯çš„è·‘é©¬ç¯ Counter # # è®¡æ•°å™¨ from collections import Counter s = '''A Counter is a dict subclass for counting hashable objects. It is an unordered collection where elements are stored as dictionary keys and their counts are stored as dictionary values. Counts are allowed to be any integer value including zero or negative counts. The Counter class is similar to bags or multisets in other languages.'''.lower() c = Counter(s) print c.most_common(5) [(\u0026rsquo; \u0026lsquo;, 54), (\u0026rsquo;e\u0026rsquo;, 32), (\u0026rsquo;s\u0026rsquo;, 25), (\u0026lsquo;a\u0026rsquo;, 24), (\u0026rsquo;t\u0026rsquo;, 24)]\nOrderDict # # æœ‰åºå­—å…¸ï¼šè®°å½•äº†æ•°æ®å­˜å…¥æ—¶çš„å…ˆåé¡ºåº # ä¸è¿‡å‘ç°ä¸€ä¸ªéªšæ“ä½œï¼š defaultdict # # é»˜è®¤å­—å…¸ï¼š å½“keyä¸å­˜åœ¨æ—¶ï¼Œè¿”å›æ­¤ç»“æœ çº¿ç¨‹ # åˆ›å»ºçº¿ç¨‹ï¼š ä½¿ç”¨Threadingæ¨¡å—åˆ›å»ºï¼Œä»threading.Threadç»§æ‰¿ï¼Œç„¶åé‡å†™__init__ å’Œrun æ–¹æ³• import threading import time exitFlag = 0 class myThread (threading.Thread): #ç»§æ‰¿çˆ¶ç±»threading.Thread def __init__(self, threadID, name, counter): threading.Thread.__init__(self) self.threadID = threadID self.name = name self.counter = counter def run(self): #æŠŠè¦æ‰§è¡Œçš„ä»£ç å†™åˆ°runå‡½æ•°é‡Œé¢ çº¿ç¨‹åœ¨åˆ›å»ºåä¼šç›´æ¥è¿è¡Œrunå‡½æ•° print \u0026#34;Starting \u0026#34; + self.name å†™åˆ°è¿™å„¿ print \u0026#34;Exiting \u0026#34; + self.name thread1 = myThread(1, \u0026#34;Thread - 1\u0026#34; , 1) thread1 = myThread(2, \u0026#34;Thread - 2\u0026#34; , 2) # å¼€å¯ thread1.start() thread2.start() çº¿ç¨‹åŒæ­¥ # ä¸åŒçº¿ç¨‹å¯¹æŸä¸ªæ•°æ®åŒæ—¶ä¿®æ”¹å°±å¾ˆåˆºæ¿€ï¼Œæ‰€ä»¥éœ€è¦åŒæ­¥ã€‚ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©ä¸ï¼‰ å…¶å®ä¹Ÿç®€å•ï¼Œå¦‚ä¸‹ï¼š\nimport threading threadingLock = threading.Lock() # ä»è¿™å„¿é¢†ä¸€æŠŠé” # ç„¶ååœ¨ run()å‡½æ•°ä¸­ï¼Œâ€œå†™åˆ°è¿™å„¿â€”â€”ä¹Ÿå°±æ˜¯å·¥ä½œå‡½æ•°ä¹‹å‰ï¼Œå†™ä¸Š threadingLock.acquire() # éšååœ¨å·¥ä½œå‡½æ•°ä¹‹å # threadingLock.release() ç„¶åæ‹¿åˆ°å°é”å­çš„å‡½æ•°å°±èƒ½è¿è¡Œï¼Œè¿è¡Œå®Œäº†æŠŠå°é”å­é‡Šæ”¾æ‰ã€‚ä¸ºå•¥ä¸æ˜¯é’¥åŒ™ğŸ”‘â€¦â€¦å¥½å§ã€‚æˆ‘å°±ç§°å‘¼å®ƒæˆ‘å°±ç§°å‘¼å®ƒæ¢­å­å§â€”â€”\né˜Ÿåˆ— # çº¿ç¨‹ä¼˜å…ˆçº§é˜Ÿåˆ— Queue.qsize()\tè¿”å›é˜Ÿåˆ—çš„é‡Œç«™äº†å‡ ä¸ª Queue.empty() å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å›True,åä¹‹False Queue.full() å¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼Œè¿”å›True,åä¹‹False Queue.full ä¸ maxsize å¤§å°å¯¹åº” Queue.get([block[, timeout]]) è·å–é˜Ÿåˆ—,timeout`ç­‰å¾…æ—¶é—´ Queue.get_nowait() ç›¸å½“ Queue.get(False) Queue.put(item) å†™å…¥é˜Ÿåˆ—ï¼Œtimeout ç­‰å¾…æ—¶é—´ Queue.put_nowait(item) ç›¸å½“ Queue.put(item, False) Queue.task_done() åœ¨å®Œæˆä¸€é¡¹å·¥ä½œä¹‹åï¼Œ Queue.task_done() å‡½æ•°å‘ä»»åŠ¡å·²ç»å®Œæˆçš„é˜Ÿåˆ—å‘é€ä¸€ä¸ªä¿¡å· Queue.join() å®é™…ä¸Šæ„å‘³ç€ç­‰åˆ°é˜Ÿåˆ—ä¸ºç©ºï¼Œå†æ‰§è¡Œåˆ«çš„æ“ä½œ æ¥æ®µå„¿ç¤ºä¾‹ï¼šæ¥è‡ªè¿™å„¿\n#!/usr/bin/python # -*- coding: UTF-8 -*- import Queue import threading import time exitFlag = 0 class myThread (threading.Thread): def __init__(self, threadID, name, q): threading.Thread.__init__(self) self.threadID = threadID self.name = name self.q = q def run(self): print \u0026#34;Starting \u0026#34; + self.name process_data(self.name, self.q) print \u0026#34;Exiting \u0026#34; + self.name def process_data(threadName, q): while not exitFlag: queueLock.acquire() if not workQueue.empty(): data = q.get() queueLock.release() print \u0026#34;%s processing %s\u0026#34; % (threadName, data) else: queueLock.release() time.sleep(1) threadList = [\u0026#34;Thread-1\u0026#34;, \u0026#34;Thread-2\u0026#34;, \u0026#34;Thread-3\u0026#34;] nameList = [\u0026#34;One\u0026#34;, \u0026#34;Two\u0026#34;, \u0026#34;Three\u0026#34;, \u0026#34;Four\u0026#34;, \u0026#34;Five\u0026#34;] queueLock = threading.Lock() workQueue = Queue.Queue(10) threads = [] threadID = 1 # åˆ›å»ºæ–°çº¿ç¨‹ for tName in threadList: thread = myThread(threadID, tName, workQueue) thread.start() threads.append(thread) threadID += 1 # å¡«å……é˜Ÿåˆ— queueLock.acquire() for word in nameList: workQueue.put(word) queueLock.release() # ç­‰å¾…é˜Ÿåˆ—æ¸…ç©º while not workQueue.empty(): pass # é€šçŸ¥çº¿ç¨‹æ˜¯æ—¶å€™é€€å‡º exitFlag = 1 # ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ for t in threads: t.join() print \u0026#34;Exiting Main Thread\u0026#34; Starting Thread-1\nStarting Thread-2\nStarting Thread-3\nThread-1 processing One\nThread-2 processing Two\nThread-3 processing Three\nThread-1 processing Four\nThread-2 processing Five\nExiting Thread-3\nExiting Thread-1\nExiting Thread-2\nExiting Main Thread\nå‘ƒï¼Œ ä»¥ä¸Šå°±æ˜¯æˆ‘ç°çŸ¥é“çš„ç»ˆæç”¨æ³•ï¼Œå½“ç„¶å…¶åŸºç¡€äºï¼š\nworkQueue = Queue.Queue(10) # åˆ›å»º+è®¾å®šé˜Ÿåˆ—é•¿åº¦ï¼ˆemm å°å¿ƒå¡æ­»å°±æ˜¯äº†ï¼‰ # åªè¦æ»¡äº†å†å¾€é‡Œå¡ç»å¯¹æ­»ï¼Œæ— æ„å¤–â€¦â€¦(lllï¿¢Ï‰ï¿¢) workQueue.put(word) # å¾€é‡Œå¡ã€‚ åŸºç¡€å°±æ˜¯å¡ä¸ªæ•°å­—ï¼Œé«˜çº§å°±æ˜¯å¡ä¸ªçº¿ç¨‹ workQueue.get() # é¡ºåºå¾€å¤–å– # æ‹¬å·é‡Œé‡Œé¢å¯ä»¥å†™è¿›å‚æ•°ï¼Œç„¶è€Œï¼Œä¾ç„¶æŒ‰ç…§é¡ºåºå¾€å¤–å–ï¼Œæ’é˜ŸåŠç†å•¥çš„ä¸å­˜åœ¨ # å¦å¤–ï¼Œé˜Ÿåˆ—ç©ºçš„è¯å–ä¾ç„¶ä¼šæ­»â€¦â€¦ ä¸€äº›æ–¹æ³• # q = queue.Queue(maxsize=0) q.qsize() #æŸ¥çœ‹é˜Ÿåˆ—å¤§å° q.empty() #åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º q.full() #å¦‚æœmaxsizeè®¾ç½®äº†å¤§å°(eg:2)ï¼Œå¦‚æœq.put()äº†2ä¸ªå…ƒç´ ï¼Œåˆ™è¿”å›çœŸï¼Œåä¹‹ï¼Œåˆ™ä¸ºå‡ q.get_nowait() # å¦‚æœé˜Ÿåˆ—ä¸­æ²¡æœ‰å…ƒç´ äº†ï¼Œåªç”¨q.get() ï¼ˆå½“ç„¶ï¼Œå¯ä»¥è®¾ç½®`q.get(block=Falseï¼‰`ï¼‰ä¼šä½¿ç¨‹åºå¡ä½ï¼Œç”¨q.get_nowait()åˆ™ä¼šæŠ¥é”™è€Œä¸å¡ä½ q.put_nowait() # å¦‚æœmaxsizeè®¾ç½®äº†å¤§å°ï¼Œç”¨q.put()è¶…è¿‡èŒƒå›´åˆ™ä¼šå¡ä½ï¼ˆå½“ç„¶ # å¯ä»¥è®¾ç½®å±æ€§q.put(block=False)ï¼‰ã€‚ç”¨q.put_nowait()åˆ™ä¼šæŠ¥é”™è€Œä¸å¡ä½ è€å¤«çš„Demo # æ¶ˆè´¹ç”Ÿäº§è€…å…³ç³»\nimport threading import queue import threadpool import time pool = threadpool.ThreadPool(2) que = queue.Queue() dataList = [1,2,3,4,5,6,7,8,9,0] dataList1 = [1,2,3,\u0026#39;a\u0026#39;, \u0026#39;b\u0026#39;] dataList2 = [4,5,6] dataList3 = [7,8,9,0] printLock = threading.Lock() workList = [dataList1, dataList2, dataList3] def worker(): ## æ¶ˆè´¹è€… #printLock.acquire() aaa = que.get() print(aaa) for i in aaa: print (i) #printLock.release() time.sleep(5) def geter(task): ## ç”Ÿäº§è€… print(\u0026#34;emm, put in_:\u0026#34;, task) time.sleep(1) que.put(task) a = threading.Thread(target=worker) a.start() for i in workList: geter(i) è¿›ç¨‹ # import multiprocessing import time def worker_1(interval, lock, low): print (\u0026#34;worker_1\u0026#34;) print (time.time()) lock.acquire() time.sleep(0.1) print(\u0026#34;I got the lock\u0026#34;) time.sleep(interval) print(low) print (\u0026#34;end worker_1\u0026#34;) lock.release() def worker_2(interval, lock): print (\u0026#34;worker_2\u0026#34;) print (time.time()) lock.acquire() print(\u0026#34;I got the lock\u0026#34;) time.sleep(interval) print (\u0026#34;end worker_2\u0026#34;) lock.release() def worker_3(interval, lock): print (\u0026#34;worker_3\u0026#34;) print (time.time()) lock.acquire() print(\u0026#34;I got the lock\u0026#34;) time.sleep(interval) print (\u0026#34;end worker_3\u0026#34;) lock.release() if __name__ == \u0026#34;__main__\u0026#34;: printLock = multiprocessing.Lock() # ğŸ”’ æ¥è‡ªå…³çˆ±çš„å°é”å­ p1 = multiprocessing.Process(target = worker_1, args = (2, printLock, [\u0026#34;asd\u0026#34;, {\u0026#39;s\u0026#39;:1}, [1,2,3]])).start() p2 = multiprocessing.Process(target = worker_2, args = (3, printLock)).start() p3 = multiprocessing.Process(target = worker_3, args = (4, printLock)).start() w = {\u0026#39;a\u0026#39;:p1, \u0026#39;b\u0026#39;:p2, \u0026#39;c\u0026#39;:p3} # åˆ›å»ºä¸‰ä¸ªè¿›ç¨‹å»è¿è¡Œè¿™ä¸‰ä¸ªå‡½æ•° #p1.start() #p2.start() #p3.start() #for i in w: # w[i].start() # å¯åŠ¨è¿›ç¨‹ print(\u0026#34;The number of CPU is:\u0026#34; + str(multiprocessing.cpu_count())) for p in multiprocessing.active_children(): print(\u0026#34;child p.name:\u0026#34; + p.name + \u0026#34;\\tp.id\u0026#34; + str(p.pid)) print (\u0026#34;Main All Done\u0026#34;) # dt 2018å¹´5æœˆ18æ—¥11ç‚¹22åˆ† worker_1 1526613489.1864893 worker_2 1526613489.1932006 The number of CPU is:4 child p.name:Process-3 p.id208 child p.name:Process-1 p.id206 child p.name:Process-2 p.id207 Main All Done worker_3 1526613489.1968668 I got the lock [\u0026lsquo;asd\u0026rsquo;, {\u0026rsquo;s\u0026rsquo;: 1}, [1, 2, 3]] end worker_1 I got the lock\nend worker_2 I got the lock end worker_3\næ’ä¸€å¥è¯ çº¿ç¨‹å’Œè¿›ç¨‹çš„å…³ç³»ï¼Œè²Œä¼¼ä¸ç”µè„‘åŒç³»ç»Ÿå’Œç³»ç»Ÿå†å¼€è™šæ‹Ÿæœºçš„å…³ç³»emm å¯¹äºèµ„æºåˆ©ç”¨çš„è§’åº¦ä¸Šã€‚\næ²¡æœ‰ä¼ å‚çš„è¿›ç¨‹ # import multiprocessing def sayHello(): print(\u0026#39;hello~ I can see you\u0026#39;) if __name__ == \u0026#39;__main__\u0026#39;: p1 = multiprocessing.Process(target=sayHello) p2 = multiprocessing.Process(target=sayHello) p3 = multiprocessing.Process(target=sayHello) p1.start() p2.start() p3.start() å¦‚æœåªæ˜¯å•çº¯è¿è¡Œï¼Œè¿™æ ·å°±å¯ä»¥äº†ï¼Œä¹‹æ‰€ä»¥åšè¿™ä¸ªæµ‹è¯•æ˜¯å› ä¸ºæˆ‘å¿Œæƒ®äºé‚£ä¸ªargsçš„ä¼ å‚ï¼Œæ¯•ç«Ÿ()é‡Œé¢è‹¥æœ‰å…ƒç´ å­˜åœ¨å°±å¿…é¡»è¦æœ‰é€—å·â€¦ çœ‹æ¥æ²¡æœ‰ä¼ å‚çš„è¯å°±ä¸éœ€è¦äº† ä¸€ä¸ªå‚æ•°açš„æ—¶å€™: (a, )emmmğŸ¤”\nå°†è¿›ç¨‹å®šä¹‰ä¸ºç±» # import multiprocessing import time class ClockProcess(multiprocessing.Process): def __init__(self, interval): multiprocessing.Process.__init__(self) self.interval = interval def run(self): n = 5 while n \u0026gt; 0: print(\u0026quot;the time is {0}\u0026quot;.format(time.ctime())) time.sleep(self.interval) n -= 1 if __name__ == '__main__': p = ClockProcess(3) p.start() ä»¥ä¸Šï¼Œp.start()è¢«è°ƒç”¨æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨run() å¦å¤–æ—¶é—´æˆ³éƒ½æ˜¯çæˆ³çš„ï¼Œæ‰€ä»¥â€¦ emm è¿™éƒ½ä¸€å¹´ä¹‹å‰çš„ä¸œè¥¿äº†ï¼Œç°åœ¨æ‰æƒ³èµ·æ¥æˆ³æ—¶é—´æœ‰ç‚¹å„¿çºªå¿µæ„ä¹‰(âŠ™ï¹âŠ™) 2018å¹´5æœˆ18æ—¥\nå±æ€§ # daemon ï¼šæ˜¯å¦ä¼´éšä¸»ç¨‹åºç»“æŸè€Œç»“æŸ Lock: é”ï¼šï¼ˆå¦‚ä¸‹ï¼Œ é˜²æ­¢è®¿é—®å…±äº«èµ„æºæ—¶å†²çªï¼Œå¦‚ä»¥ä¸Šæ‰“å°æ—¶é—´æ—¶å‡ºç°çš„ä¸è¿ç»­æ‰“å°ğŸ˜°ï¼‰ def worker(lock, var): try: *** finally: lock.release() lock = multiprocessing.Lock() var = 'æˆ‘æ˜¯å˜é‡' p = multiptocessing.Process(target = worker, args = (lock, var)) è­¦ä¸ªå‘Š # åˆ›å»ºè¿›ç¨‹åˆ†æ”¯çš„å‡½æ•°é€‰æ‹©åªèƒ½éš¶å±äº__main__ä¸‹æˆ–è€…æ˜¯éš¶å±ä¸åˆ›å»ºè¿›ç¨‹çš„å‡½æ•°çº§åˆ«ç›¸åŒçš„çº§åˆ«ï¼Œä¾‹å¦‚ä»Šå¤©åœ¨mainä¸‹ä¸€ä¸ªå‡½æ•°ä¸­é€‰æ‹©ç›®æ ‡å‡½æ•°ä¸ºæ­¤å‡½æ•°çš„å‡½æ•°å°±ä¸å¯ä»¥â€¦ å¦‚ä¸‹ï¼š\ndef a(): def c(para): pass *(target=b, args=(1,)) ğŸŒ¹ *(target=c, args=(1,)) âŒ def b(para): pass emmï¼Œä¸Šè¿°è¡¨è¿°çš„å¾ˆæ˜ç¡®ï¼Œä½†æ˜¯æ˜¨å¤©åˆé‡æ–°çŠ¯äº†è¿™ä¸ªé—®é¢˜â€¦ è¿›ç¨‹çš„æ‰§è¡Œè€…æ”¾åˆ°äº†ç±»ä¸­çš„æŸä¸ªå‡½æ•°ï¼Œç„¶ååˆæå‡ºåˆ°__main__ ä¸­å‡½æ•°ï¼Œæ‰€ä»¥éƒ½ä¸èƒ½æ‰§è¡Œï¼Œæœ€ç»ˆæ”¾åˆ°`main``å¤–ï¼Œä¸å®ƒåŒçº§ï¼Œä¹Ÿå°±æ˜¯def å‰æ— ç©ºæ ¼ã€‚ æ‰èƒ½â€œå—å‘½â€ã€‚\né€šè¿‡é˜Ÿåˆ—æ¥å­˜å‚¨ä¸åŒè¿›ç¨‹äº§ç”Ÿçš„ç»“æœ # {æ¥è‡ª}(https://blog.csdn.net/u014556057/article/details/66974452)\n# -*- coding:utf-8 -*- from multiprocessing import Process, Queue, Lock L = [1, 2, 3] def add(q, lock, a, b): lock.acquire() # åŠ é”é¿å…å†™å…¥æ—¶å‡ºç°ä¸å¯é¢„çŸ¥çš„é”™è¯¯ L1 = range(a, b) lock.release() q.put(L1) print L1 if __name__ == \u0026#39;__main__\u0026#39;: q = Queue() lock = Lock() p1 = Process(target=add, args=(q, lock, 20, 30)) p2 = Process(target=add, args=(q, lock, 30, 40)) p1.start() p2.start() p1.join() p2.join() L += q.get() + q.get() print L [20, 21, 22, 23, 24, 25, 26, 27, 28, 29] [30, 31, 32, 33, 34, 35, 36, 37, 38, 39] [1, 2, 3, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39]\nå†åŠ ä¸€ä¸ªåç¨‹ # åŸºç¡€å®ç°ï¼š # # yield def creatAor(): mylist = range(3) for i in mylist: yield i*i mygenerator = creatAor() # ç”Ÿæˆä¸€ä¸ªç”Ÿæˆå™¨ print (mygenerator) for i in mygenerator: print (i) \u0026lt;generator object creatAor at 0x7f54ed368f10\u0026gt; 0 1 4\nå½“è°ƒç”¨å‡½æ•°æ—¶ï¼Œå…¶è¿”å›å¹¶ä¸ç«‹é©¬æ‰§è¡Œï¼ˆæ˜¾ç¤ºï¼‰â€”â€”emm ç»è¿‡åå‡ åˆ†é’ŸğŸ˜°çš„è§‚å¯ŸğŸ‘€è¯´é‚£ä¹ˆç„ä¹ï¼Œ.å…¶å®å°±æ˜¯åœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œåœ¨yieldå¤„æŠŠåé¢ç´§æ¥çš„ä¸œè¥¿è®°å½•ä¸‹æ¥ï¼Œä¹‹åæœ€åç”Ÿæˆä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ã€‚ æ‰€ä»¥ç½‘ä¸Šè¯´æ—¶ç”Ÿæˆå™¨ä¹Ÿä¸å¯åšéï¼Œä½†è¡¨è¾¾çœŸçš„æ˜¯â€¦â€¦ä¸è¿‡è²Œä¼¼.ä¸ä»…ä»…æ˜¯è®°å½•åé¢ç´§è·Ÿçš„ä¸œè¥¿â€¦\n$ vim def creatAor(): mylist = range(3) print(\u0026#34;so jia nei?\u0026#34;) for i in mylist: print(\u0026#34;pre a hou ga\u0026#34;) yield i*i print (\u0026#34;nihoua\u0026#34;) print (\u0026#34;2333333\u0026#34;) mygenerator = creatAor() print (mygenerator) for i in mygenerator: print (i) \u0026lt;generator object creatAor at 0x7fe2585a8f10\u0026gt; so jia nei? pre a hou ga 0 nihoua pre a hou ga 1 nihoua pre a hou ga 4 nihoua 2333333\næ‰€ä»¥çœ‹è¿™è‹—å¤´åƒæ˜¯é‡æ–°æ‰§è¡Œäº†ä¸€æ¬¡å‡½æ•°ï¼Œä½†æ˜¯å°†åé¢ç´§è·Ÿçš„ä¸œè¥¿ä¹Ÿè¿›è¡Œäº†è®°å½•\nåº”ç”¨åˆ°åç¨‹ä¸­ï¼Œä¾¿æ˜¯ï¼š\nimport time def consumer(): r = \u0026#39;\u0026#39; while True: n = yield r if not n: return print(\u0026#39;[CONSUMER] Consuming %s....\u0026#39; % n) time.sleep(1) r = \u0026#39;200 OK\u0026#39; def produce(c): c.next() n = 0 while n \u0026lt; 5: n = n + 1 print(\u0026#39;[PRODUCER] Producing %s...\u0026#39; % n) r = c.send(n) print(\u0026#39;[PRODUCER] Consumer return: %s\\n\u0026#39; % r) c.close() if __name__==\u0026#39;__main__\u0026#39;: c = consumer() produce(c) for i in c: print(i) [PRODUCER] Producing 1\u0026hellip; [CONSUMER] Consuming 1\u0026hellip;. [PRODUCER] Consumer return: 200 OK\n[PRODUCER] Producing 2\u0026hellip; [CONSUMER] Consuming 2\u0026hellip;. [PRODUCER] Consumer return: 200 OK\n[PRODUCER] Producing 3\u0026hellip; [CONSUMER] Consuming 3\u0026hellip;. [PRODUCER] Consumer return: 200 OK \u0026hellip; \u0026hellip;\né‚£ä¹ˆï¼Œæ˜¯ä»€ä¹ˆé“ç†å‘¢ï¼Ÿ\nsend next æ–¹æ³•çš„èƒŒåä»Šç”Ÿ # def my(): value = yield 1 value = yield value print(\u0026#39;finally: \u0026#39;, value) ge = my() print(ge.next()) print(ge.send(2)) print(ge.send(3)) \u0026gt; 1 \u0026gt; 2 \u0026gt; (\u0026#39;finally: \u0026#39;, 3) \u0026gt; Traceback (most recent call last): \u0026gt; File \u0026#34;yield_emm3.py\u0026#34;, line 8, in \u0026lt;module\u0026gt; \u0026gt; print(ge.send(3)) \u0026gt; StopIteration å¯çŸ¥ï¼š å½“nextæ—¶ï¼ŒyieldæŒ‚èµ·ï¼Œä½†å°†ä¹‹åçš„1è¿”å›ã€‚è€Œåsendæ¿€æ´»äº†ä¹‹å‰æŒ‚èµ·èµ‹å€¼åŠ¨ä½œï¼Œä½†æ­¤æ—¶yield 1è¢«æ›¿æ¢ä¸ºsendæ¥çš„2æ‰€ä»¥valueè¢«ç½®ä¸º2. å†ç¬¬ä¸‰æ¬¡è°ƒç”¨ï¼Œå®Œæˆèµ‹å€¼åŠ¨ä½œä¹‹åï¼Œç”±äºåªè¢«æŒ‚èµ·ä¸¤æ¬¡åŠ¨ä½œï¼Œè€Œè¿™é‡Œè°ƒå–äº†ä¸‰æ¬¡ï¼Œæ‰€ä»¥æŠ¥é”™ åœæ­¢é€’å½’ ã€‚è‹¥ç›´æ¥é€’å½’åˆ™å¾—åˆ°1 å’Œ None.\næ‰€ä»¥ nextä¸sendéƒ½æ˜¯ç”¨æ¥æ¿€æ´»æŒ‚èµ·åŠ¨ä½œè€Œä½¿ç”¨çš„ï¼Œä½†sendå¥½åœ¨å¯ä»¥ä¸ä¹‹äº¤äº’ã€‚ åœ¨send``ä¹‹å‰éœ€å…ˆnextå¦åˆ™æç¤ºcan\u0026rsquo;t send * to a just-started generator`(âŠ™ï¹âŠ™) æˆ‘ä¸Šé¢é˜è¿°çš„æŒ‚èµ·ï¼Œæ¿€æ´»ï¼Œæ˜¯ä¸æ˜¯å‡ºç°äº†ä»€ä¹ˆåå·®â€¦\n2018å¹´5æœˆ18æ—¥16ç‚¹30åˆ†\nè¾ƒå®Œå–„æ–¹æ¡ˆï¼š # # 1 import gevent def f(n): for i in range(n): print gevent.getcurrent(), i g2 = gevent.spawn(f, 5) g3 = gevent.spawn(f, 5) g1.join() g3.join() # 2 import gevent from gevent import monkey; monkey.patch_all() import urllib2 def f(url): print \u0026#39;GET: %s\u0026#39; % url resp = urllib2.urlopen(url) data = resp.read() print \u0026#39;[%d] bytes received from %s\\n\u0026#39; %(len(data), url) gevent.joinall([ gevent.spawn(f, \u0026#39;http://www.cnblogs.com/kaituorensheng/\u0026#39;), gevent.spawn(f, \u0026#39;https://www.python.org/\u0026#39;), gevent.spawn(f, \u0026#39;https://www.baidu.com\u0026#39;), ]) # 3 from gevent import monkey monkey.patch_all() import gevent from gevent import Greenlet class Task(Greenlet): def __init__(self, name): Greenlet.__init__(self) self.name = name def _run(self): print \u0026#34;Task %s: some task...\u0026#34; % self.name t1 = Task(\u0026#34;task1\u0026#34;) t2 = Task(\u0026#34;task2\u0026#34;) t1.start() t2.start() # here we are waiting all tasks gevent.joinall([t1,t2]) å’Œçº¿ç¨‹ è¿›ç¨‹ å·®ä¸å¤šä¸€ä¸ªç”¨æ³•ï¼Œåªä¸è¿‡æ²¡é”ï¼Œä¹Ÿä¸éœ€è¦é”ã€‚\nfutures # futures.ThreadPoolExecutor # with futures.ThreadPoolExecutor(16) as executor: executor.map(run, urls) # è¿™é‡Œæ˜¯ä¸ªçˆ¬è™«ï¼Œurlså°±æ˜¯ä¸€ä¸ªå‰æ–¹runå‡½æ•°çš„è¾“å…¥å˜é‡ çˆ¶ç±»ä¸­çš„å˜é‡ä¸ç±»ä¸­å˜é‡ # åœ¨ä½¿ç”¨self.a çš„æ—¶å€™â€”â€”å‘ƒå…¶å®æ˜¯å®ä¾‹åŒ–ä¹‹åa.aæ—¶ï¼Œä¼šåªåœ¨çˆ¶ç±»ä¸­å¯»æ‰¾ç›¸å…³å˜é‡ï¼Œè€Œè§£å†³åŠæ³•å±…ç„¶æ˜¯å°†super(A, self).__init__(CtaEngine, setting)ç§»åŠ¨åˆ°å˜é‡å®šä¹‰ä¹‹åï¼Œæ‰€ä»¥è°è¯´è¿™ç©æ„æ”¾å‰é¢å’Œæ”¾åé¢æ²¡æœ‰åŒºåˆ«çš„ï¼ï¼ˆæ¬¸?ğŸ˜˜ è¿™ä¸ªä¹‹åæœ‰è¿‡è¯´æ˜ï¼Œä¸è¿‡å¿˜è®°å†™åœ¨å“ªå„¿äº†ï¼Œå†è¯´ä¸€ä¸‹ï¼Œå°±æ˜¯super\u0026hellip;.è¡¨ç¤ºçˆ¶ç±»çš„åˆå§‹åŒ–åŠ¨ä½œï¼Œ__init__å› ä¸ºè¿™ä¸ªå‡½æ•°åå­çˆ¶ç›¸åŒä¸ä¼šé‡å†™ï¼Œä¼šåˆå¹¶ã€‚ï¼‰\nåˆ—è¡¨çš„å¢åˆ æ·» # append # åœ¨æœ€åæ·»åŠ ä¸€å…ƒç´  extend # c.extend(a) å°†åˆ—è¡¨aä¸­å…ƒç´ åŠ åˆ°cä¸­å»ã€‚å¯è‡ªåŠ  + # è¿æ¥ä¸¤æ–¹æ•°ç»„å…ƒç´  c = a + c ç„¶è€Œåˆ›å»ºæ–°å¯¹è±¡ï¼Œè€—å†…å­˜â€¦ æ‰€ä»¥æ²¡å•¥ ç”¨\ndel # åˆ é™¤å¯¹åº”ä¸‹æ ‡å…ƒç´  del c[0] åˆ é™¤cåˆ—è¡¨ç¬¬ä¸€ä½å…ƒç´  pop # c.pop() åˆ é™¤æœ€åä¸€ä½å…ƒç´  remove # åˆ é™¤æŒ‡å®šå€¼å…ƒç´ ï¼Œæœ‰ç›¸åŒå€¼æ—¶åªä¼šåˆ é™¤ç¬¬ä¸€ä½ [ : ] # ä½¿ç”¨åˆ‡ç‰‡è¿›è¡Œåˆ é™¤ insert # c.insert(0, 1)å°†1æ’å…¥åˆ°cçš„æœ€å‰æ–¹ï¼Œå¯æ’åˆ—è¡¨ï¼Œæ’å…¥è¿˜æ˜¯åˆ—è¡¨ ä¸€ä¸ªå‡½æ•°çš„æœ‰æ•ˆæ–¹å¼åªåœ¨å¾ªç¯ä¸­æ‰§è¡Œä¸€æ¬¡ - ä»£ç æ—¥å¿— # è¿™æ˜¯åŸé“¾æ¥ emm ä»£ç åæ­£ç…§ç€è¾“å…¥æ˜¯ä¸ä¼šæœ‰ç»“æœçš„ï¼Œä½†æ„Ÿè§‰æŒºæœ‰æˆå…ˆä¿ç•™ï¼Œä»¥åæŠ€æœ¯æå‡å†æ¥çœ‹\nè‡ªå·±çš„æ–¹æ³• # è‡ªå·±çš„æ–¹æ³•å¾ˆç®€å•ï¼Œå¾ˆæš´åŠ›ï¼Œå°±æ˜¯ç”¨å­—å…¸å•Šâ€”â€” å½“æ‰§è¡Œè¿‡ä¸€æ¬¡ä¹‹åç›´æ¥æŠŠè°ƒç”¨å…³ç³»æ‰­åˆ°åˆ«çš„åœ°æ–¹ï¼Œåæ­£åªè¦æ˜¯çŸ¥é“ç»“æœçš„åˆ¤æ–­éƒ½å¯ä»¥ç”¨å­—å…¸æ¥ä»£æ›¿ä¹ˆã€‚\nå‡½æ•°è°ƒç”¨å‡½æ•° and è¯­æ³•ç³– @ # import time def timehel(hell): def wrapper(): start = time.clock() hell() end =time.clock() print 'used:', end - start return wrapper @timehel def foo(): print \u0026lsquo;a ho ga\u0026rsquo;\na ho ga\nused: 0.000489465229975\nå…¶ä¸Š@timehel å’Œ foo = timehel(foo)ç­‰ä»·ï¼ˆæ„Ÿè°¢è¢«é—å¿˜çš„åšå®¢ï¼‰â€¦ å°±æ˜¯æŠŠä¸‹æ–¹å‡½æ•°å½“æˆè¾“å…¥ï¼Œç„¶åæ‰§è¡Œé€šä¿—æ¥ç¿»è¯‘å°±æ˜¯ï¼š\n@ï¼šå‘¼å«timehel æ¥æ‰§è¡Œä¸‹é¢è¿™å­™å­ã€‚ è¿™é‡Œæ˜¯å®˜æ–¹æ•™ä½ æ€ä¹ˆç”¨ï¼š https://wiki.python.org/moin/PythonDecoratorLibrary\nå…¶ä¸­ å‡½æ•°ä¸­å®šä¹‰å‡½æ•°å°±ç±»ä¼¼äºâ€œçˆ¶å­å…³ç³»â€ï¼Œä¹Ÿæˆ–è€…å«å¦è¾Ÿç©ºé—´ã€‚æ¯æ¬¡æ‰§è¡Œçˆ¶å‡½æ•°æ—¶ï¼Œå­å‡½æ•°ä¼šæœ‰ä¹Ÿå°½åœ¨æ­¤æ—¶ä¼šæœ‰è¢«æ‰§è¡Œçš„æœºä¼šï¼Œä¼šä¸ä¼šè¢«æ‰§è¡Œï¼Œå°±çœ‹å…¶åœ¨å…¶çˆ¶äº²é¢å‰çš„è¡¨ç°äº†ï¼ˆä»–çˆ¸æœ‰æ²¡æœ‰å«ä»–ï¼ˆæœ‰æ²¡æœ‰è°ƒç”¨â€¦ï¼‰ï¼‰ã€‚\nå˜é‡ä½œç”¨åŸŸ # å› ä¸ºä»è¿™ä¸ª@ è¿™å„¿å­¦åˆ°çš„ï¼Œæ‰€ä»¥ï¼š\ndef hel(x): def inner(): print x return inner p1 = hel(1) p1 = hel(1) p1() 1\np2() 2\né—­åŒ…â€”â€”å¦‚æœæ²¡æœ‰innerè¿™ä¸œè¥¿ï¼Œä¸‹é¢ç»ä¸ä¼šè¾“å‡ºä¸œè¥¿ï¼Œåè€Œä¼šæŠ¥é”™ã€‚ ç›´æ¥p1,p2åˆä¸ä¼šå†è¾“å‡ºä»»ä½•ä¸œè¥¿ï¼Œåªæœ‰åœ¨å®šä¹‰æ—¶ä¼šè¿è¡Œä¸€æ¬¡ã€‚ å¯¹æ¯”äºdef hel(x): print x å…¶ä¸­å†…å±‚åŸå›  å…ˆä¸æ·±ç©¶ï¼Œå°±è„‘è¡¥æˆå¤–å±‚éœ€è¿è¡Œæ—¶æ‰èƒ½å»æ‰¾é‚£äº›å˜é‡ï¼Œè€Œå…¶ä¸­çš„å‡½æ•°ä¼šä¸»åŠ¨å»å¤–å›´æ‰¾æ‰€éœ€çš„å˜é‡ã€‚\nåº”ç”¨æ¡ˆä¾‹ # import time def coseTime(func): print func def inner(*args, **kwargs): print args, kwargs start = time.clock() func(*args, **kwargs) end = time.clock() print args, kwargs print ('Running time: %s Seconds' % (end-start)) return inner @coseTime def hel(x): print ('hello~') hel(12) \u0026lt;function hel at 0x02BC5070\u0026gt; (12,) {} hello~ (12,) {} Running time: 0.000446197317167 Seconds\nç”¨æ¥æ— è§†å˜é‡æ¥è®°å½• å‡½æ•°è¿è¡Œæ‰€éœ€æ—¶é—´çš„â€”â€”åŒæ—¶è¾“å‡ºå…¶åœ¨è¿è¡Œæ—¶æ¥å…¥çš„å˜é‡\nfunctools # å°±å§‘ä¸”æ”¾è¿™å„¿å§ï¼Œæ¯•ç«Ÿä¹Ÿç®—æ˜¯ä¸ºäº†æœ‰åºæ‰§è¡Œè€Œæ¥è§¦åˆ°çš„\npartial # import functools def add(a, b): print a, b return a, b addplus = functools.partial(add, 3) addplus(7) 3 7\naddplus(add, b = 6) addplus(7) 7 6\nè¿™å‡½æ•°ä½œç”¨æ˜¯ æå‰ç»™å®šå‡½æ•°ä¸€ä¸ªå˜é‡å€¼â€¦The functools module is for higher-order functions: functions that act on or return other functions. In general, any callable object can be treated as a function for the purposes of this module.\næˆ‘çš„æ¥è§¦åœºæ™¯æ˜¯åœ¨PyQt ä¸­ä¿¡å·æ§½å¾ªç¯è¿æ¥æ—¶ï¼Œç”¨äº†partialåœ¨connectä¹‹å.connect(partial(self.start, i))å»å”¯ä¸€åŒ–ç›¸åŒåŠŸèƒ½çš„å¤ç”¨ã€‚ä¸è¿‡æˆ‘ä¹‹å‰ä¹Ÿåº”è¯¥å†™è¿‡ç±»ä¼¼çš„ï¼Œé‚£æ—¶æˆ‘æ‰¾çš„è§£å†³åŠæ³•æ—¶åœ¨è¿æ¥è°ƒç”¨æ—¶ä¼ å‚(åœ¨Python GUIé‡Œé¢åº”è¯¥ä¼šå†™æœ‰å§ï¼Œå‡å¦‚ä¸¤ä¸‰ä¸ªæœˆå‰æˆ‘æ²¡è„‘å­çŸ­æœŸæ€§å¤±å¿†çš„è¯ğŸ˜­)ã€‚emmé‚£ä¸ªä¼ å‚æ˜¯åˆ©ç”¨Qtæœºåˆ¶ ä¸çŸ¥é“å­°ä¼˜å­°åŠ£ğŸ˜„\nè¿æ°”å¥½ï¼Œç›´æ¥ç¿»åˆ°ï¼š â€”â€”é‚£é‡Œçš„åº”ç”¨åœºæ™¯æ˜¯åœ¨é¼ æ ‡ç‚¹å‡»æŒ‰é’®æ•è·ç‚¹å‡»äº‹ä»¶clickæ—¶ä¼ é€’çš„å‚æ•°~ lambda # ä½¿ç”¨æ–¹æ³•ä¸ºï¼š\nfunc = lambda x:x*x # :å‰xè¡¨ç¤ºå‡½æ•°è¾“å…¥ï¼Œ:åä¸ºè¿”å›å€¼ï¼Œx*xæ˜¯è¿™ä¸ªå‡½æ•°æ”¶åˆ°è¾“å…¥åæ‰€æ‰§è¡Œçš„åŠ¨ä½œ w = lambda x:func(x) ç½‘ç»œç¼–ç¨‹ # socket # import socket # æœåŠ¡ç«¯ s = socket.socket() host = socket.gethostname() port = 12345 s.bind((host, port)) s.listen(5) while True: c, addr = s.accept() print \u0026quot;link address is\u0026quot;, addr c.send('welcome here') c.close() # å®¢æˆ·ç«¯ s = socket.socket() host = socket.gethostname() port = 12345 s.connect((host, port)) # æ­¤æ—¶æœåŠ¡ç«¯ä¾¿å¼¹å‡º link address isï¼š('192.168.*.*', 64*5) print s.recv(1024) # å®¢æˆ·ç«¯æ˜¾ç¤ºwelcome here select : ä¸Socketé…åˆçš„è·¨å¹³å°çš„å¼‚æ­¥ioæ¨¡å‹ # import select import socket import Queue #create a socket server = socket.socket(socket.AF_INET,socket.SOCK_STREAM) server.setblocking(False) #set option reused server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR , 1) server_address= (\u0026#39;192.168.1.102\u0026#39;,10001) server.bind(server_address) server.listen(10) #sockets from which we except to read inputs = [server] #sockets from which we expect to write outputs = [] #Outgoing message queues (socket:Queue) message_queues = {} #A optional parameter for select is TIMEOUT timeout = 20 while inputs: print \u0026#34;waiting for next event\u0026#34; readable , writable , exceptional = select.select(inputs, outputs, inputs, timeout) # When timeout reached , select return three empty lists if not (readable or writable or exceptional) : print \u0026#34;Time out ! \u0026#34; break; for s in readable : if s is server: # A \u0026#34;readable\u0026#34; socket is ready to accept a connection connection, client_address = s.accept() print \u0026#34; connection from \u0026#34;, client_address connection.setblocking(0) inputs.append(connection) message_queues[connection] = Queue.Queue() else: data = s.recv(1024) if data : print \u0026#34; received \u0026#34; , data , \u0026#34;from \u0026#34;,s.getpeername() message_queues[s].put(data) # Add output channel for response if s not in outputs: outputs.append(s) else: #Interpret empty result as closed connection print \u0026#34; closing\u0026#34;, client_address if s in outputs : outputs.remove(s) inputs.remove(s) s.close() #remove message queue del message_queues[s] for s in writable: try: next_msg = message_queues[s].get_nowait() except Queue.Empty: print \u0026#34; \u0026#34; , s.getpeername() , \u0026#39;queue empty\u0026#39; outputs.remove(s) else: print \u0026#34; sending \u0026#34; , next_msg , \u0026#34; to \u0026#34;, s.getpeername() s.send(next_msg) for s in exceptional: print \u0026#34; exception condition on \u0026#34;, s.getpeername() #stop listening for input on the connection inputs.remove(s) if s in outputs: outputs.remove(s) s.close() #Remove message queue del message_queues[s] ç³–æ‹Œå’¸é±¼ - è®°å½•å­¦ä¹ çš„ç‚¹ç‚¹æ»´æ»´~\nç®€å•æ¥è¯´ä¸€ä¸‹selectçš„ä½œç”¨ï¼š è¿”å›å€¼ï¼šä¸‰ä¸ªåˆ—è¡¨ selectæ–¹æ³•ç”¨æ¥ç›‘è§†æ–‡ä»¶æè¿°ç¬¦(å½“æ–‡ä»¶æè¿°ç¬¦æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œselectä¼šé˜»å¡)ï¼Œå½“æŸä¸ªæ–‡ä»¶æè¿°ç¬¦çŠ¶æ€æ”¹å˜åï¼Œä¼šè¿”å›ä¸‰ä¸ªåˆ—è¡¨ 1ã€å½“å‚æ•°1 åºåˆ—ä¸­çš„fdæ»¡è¶³â€œå¯è¯»â€æ¡ä»¶æ—¶ï¼Œåˆ™è·å–å‘ç”Ÿå˜åŒ–çš„fdå¹¶æ·»åŠ åˆ°fd_r_listä¸­ 2ã€å½“å‚æ•°2 åºåˆ—ä¸­å«æœ‰fdæ—¶ï¼Œåˆ™å°†è¯¥åºåˆ—ä¸­æ‰€æœ‰çš„fdæ·»åŠ åˆ° fd_w_listä¸­ 3ã€å½“å‚æ•°3 åºåˆ—ä¸­çš„fdå‘ç”Ÿé”™è¯¯æ—¶ï¼Œåˆ™å°†è¯¥å‘ç”Ÿé”™è¯¯çš„fdæ·»åŠ åˆ° fd_e_listä¸­ 4ã€å½“è¶…æ—¶æ—¶é—´ä¸ºç©ºï¼Œåˆ™selectä¼šä¸€ç›´é˜»å¡ï¼Œç›´åˆ°ç›‘å¬çš„å¥æŸ„å‘ç”Ÿå˜åŒ– å½“è¶…æ—¶æ—¶é—´ ï¼ n(æ­£æ•´æ•°)æ—¶ï¼Œé‚£ä¹ˆå¦‚æœç›‘å¬çš„å¥æŸ„å‡æ— ä»»ä½•å˜åŒ–ï¼Œåˆ™selectä¼šé˜»å¡nç§’ï¼Œä¹‹åè¿”å›ä¸‰ä¸ªç©ºåˆ—è¡¨ï¼Œå¦‚æœç›‘å¬çš„å¥æŸ„æœ‰å˜åŒ–ï¼Œåˆ™ç›´æ¥æ‰§è¡Œã€‚ epollå¾ˆå¥½çš„æ”¹è¿›äº†select å…·ä½“è¯·çœ‹(æ·±å…¥ç†è§£pythonä¸­çš„selectæ¨¡å—)[http://blog.csdn.net/songfreeman/article/details/51179213]\nå¼•ç”¨æ¨¡å— # action.pyä¸­å¼•ç”¨model.pyä¸ºä¾‹\nåŒä¸€æ–‡ä»¶å¤¹ä¸‹ # from model import * # or import model å…¶ä¸‹çº§æ–‡ä»¶\u0026quot;here\u0026quot;ä¸‹ # # åœ¨model.py æ–‡ä»¶ä¸­åˆ›å»º__init__.pyç©ºæ–‡ä»¶ from here import model # or form here.model import * åœ¨ä¸Šçº§æ–‡ä»¶ä¸‹ # import sys sys.path.append(\u0026quot;..\u0026quot;) # æ·»åŠ ä¸Šçº§æ–‡ä»¶ è·¯å¾„ # import model åœ¨ä¸Šçº§æ–‡ä»¶çš„ä¸‹çº§æ–‡ä»¶ä¸­ï¼ˆä¹Ÿå°±æ˜¯åœ¨éš”å£â€œwangâ€æ–‡ä»¶ä¸­ï¼‰ # # éœ€è¦åˆ›å»º__init__.pyç©ºæ–‡ä»¶ # æ·»åŠ ä¸Šçº§æ–‡ä»¶è·¯å¾„ import wang.model è§£å†³ç¼–ç é—®é¢˜ # import sys reload(sys) sys.setdefaultencoding('utf8') # è¿™æ®µç›´æ¥å¡å®ƒå˜´é‡Œ è¾“å‡ºæç¤ºæ‰“å°ä¹±ç  # #coding: utf-8 n=raw_input(unicode('è¯·è¾“å…¥æ–‡å­—','utf-8').encode('gbk')) print n å†…å­˜å¼‚å¸¸å ç”¨ # import sys v = 1 sys.getsizeof(v) # å¯ä»¥è¯»å‡º æ­¤å˜é‡emm æˆ–è€…è¯´ å¯¹è±¡çš„å†…å­˜å ç”¨å¤§å° å¼‚å¸¸ # plan1 ï¼š # try: #æ­£å¸¸çš„æ“ä½œ except: #å‘ç”Ÿå¼‚å¸¸ï¼Œæ‰§è¡Œè¿™å—ä»£ç  else: #å¦‚æœæ²¡æœ‰å¼‚å¸¸æ‰§è¡Œè¿™å—ä»£ç (åœ¨æ‰§è¡Œå®Œtryä¸‹å‡½æ•°æ²¡æœ‰å¼‚å¸¸å‘ç”Ÿ) åˆ—è¡¨çš„å‘ # å½“a ä¸ºä¸€ä¸ªåˆ—è¡¨ a = [1, 2, 3] b = a c = a d = a b.append(4)\nè¿™æ—¶ï¼Œabcdå››ä¸ªåˆ—è¡¨éƒ½å˜æˆ[1, 2, 3, 4]ï¼Œemmâ€¦ æ‰€ä»¥ç›´æ¥ä»¥åä¸è¦æŠŠä¸€ä¸ªåˆ—è¡¨èµ‹å€¼ç»™ä¸¤ä¸ªå˜é‡â€¦é™¤éä¸æ¶‰åŠä¿®æ”¹ï¼Œæ…é‡æ…é‡ã€‚ã€‚ä¸è¿‡pythonä¸­åˆ—è¡¨æœ‰copyä¸€è¯´ï¼Œä¸è¿‡è¿˜æ²¡è¯•è¿‡\n@staticmethod # å®šä¹‰ç±»ä¸­çš„çš„è¿™ä¸ªæ–¹æ³•ä¸ºé™æ€æ–¹æ³•ï¼ŒåŒç†çš„è¿˜æœ‰`@classmethod`ç±»æ–¹æ³•ã€‚ å¸¸è§å¼‚å¸¸ # 1.AssertionErrorï¼šå½“assertæ–­è¨€æ¡ä»¶ä¸ºå‡çš„æ—¶å€™æŠ›å‡ºçš„å¼‚å¸¸ 2.AttributeErrorï¼šå½“è®¿é—®çš„å¯¹è±¡å±æ€§ä¸å­˜åœ¨çš„æ—¶å€™æŠ›å‡ºçš„å¼‚å¸¸ 3.IndexErrorï¼šè¶…å‡ºå¯¹è±¡ç´¢å¼•çš„èŒƒå›´æ—¶æŠ›å‡ºçš„å¼‚å¸¸ 4.KeyErrorï¼šåœ¨å­—å…¸ä¸­æŸ¥æ‰¾ä¸€ä¸ªä¸å­˜åœ¨çš„keyæŠ›å‡ºçš„å¼‚å¸¸ 5.NameErrorï¼šè®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„å˜é‡æ—¶æŠ›å‡ºçš„å¼‚å¸¸ 6.OSErrorï¼šæ“ä½œç³»ç»Ÿäº§ç”Ÿçš„å¼‚å¸¸ 7.SyntaxErrorï¼šè¯­æ³•é”™è¯¯æ—¶ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ 8.TypeErrorï¼šç±»å‹é”™è¯¯ï¼Œé€šå¸¸æ˜¯ä¸é€šç±»å‹ä¹‹é—´çš„æ“ä½œä¼šå‡ºç°æ­¤å¼‚å¸¸ 9.ZeroDivisionErrorï¼šè¿›è¡Œæ•°å­¦è¿ç®—æ—¶é™¤æ•°ä¸º0æ—¶ä¼šå‡ºç°æ­¤å¼‚å¸¸Â·Â· äº‹ä»¶æ¨¡å¼ä¸­ï¼Œäº‹ä»¶ç¯¡æ”¹äº‹æ•… # åœ¨å¾ªç¯åˆ›å»ºäº‹ä»¶æ—¶ï¼Œå°†event putåˆ°é˜Ÿåˆ—ä¸­ï¼Œæ­¤æ—¶ï¼Œè¢«å¤„ç†ä¸€åŠï¼Œå› ä¸ºä¸åœ¨ä¸€ä¸ªçº¿ç¨‹æ‰€ä»¥ä¸‹ä¸€ä¸ªå¾ªç¯æ¥ä¸´å°±å°†eventçš„å†…å®¹è¿›è¡Œäº†ä¿®æ”¹ã€‚ æœç»æ­¤æ–¹æ³•é™¤äº†æ·»åŠ é”ï¼Œåªå¥½å°†äº‹ä»¶copyä¹‹åå†ä¼ å…¥æ—¶é—´å¼•æ“ã€‚å¦‚æ­¤ä¾¿å¯æš‚é˜²æ­¢äº‹ä»¶å¤„ç†ä¸€åŠè¢«ä¿®æ”¹çš„äº‹æƒ…å‘ç”Ÿã€‚\nä»£ç å—æ³¨é‡Š # Surrounding Blocks of Code with Language Constructs\nVisualStudioæ¨¡å¼ï¼š # #region Description(è¯´æ˜) print \u0026quot;code here\u0026quot; #endregion NetBeansæ¨¡å¼ï¼š # // \u0026lt;editor-fold desc=\u0026quot;Description\u0026quot;\u0026gt; code here // \u0026lt;/editor-fold\u0026gt; ç±» # ä»¥åè¯¦è°ˆï¼Œæœ¬ç€ä¸€åˆ‡çš†å¯¹è±¡çš„åŸåˆ™ï¼Œæ‰€ä»¥å¯¹äºç±»çš„äº†è§£å†³å®šäº†Pythonçš„è®¤çŸ¥ï¼Œå…ˆè®°ä¸€ä¸ª def __init__(self): super(Proformance, self).__init__() #è¿™ä¸ªsuperè¡¨ç¤ºäº†ç»§æ‰¿ç±»å’Œè¢«ç»§æ‰¿ç±»çš„ __init__è°ƒç”¨æ—¶åºï¼Œå…¶å®ƒé‡åå‡½æ•°æ˜¯è¦†ç›–ï¼Œè¿™ä¸ªâ€¦â€¦ æ•°æ®ç±» # ç”¨ä¸€ä¸ªç±»æ¥è¡¨ç¤ºä¸€ä¸ªæ•°æ®ç±»å‹ï¼ˆè¿™å‡ å¤©æƒ³ç€è¿™ä¸ªè¡¨ç¤ºä¸åŒæ•°æ®ç±»å‹çš„ç»„åˆæ–¹æ³•æ°ç±»ä¼¼äºCä¸­çš„ç»“æ„ä½“ï¼Œç„¶åPythonä¸­çš„æ•°ç»„å…ƒç´ å­˜å‚¨å„ç§ä¸œè¥¿ä»€ä¹ˆç±»å•Šã€æ•°ç»„å¥—æ•°ç»„å•Šï¼Œå­—å…¸å­˜å‚¨å•Šï¼Œæ°å·§ä¸Cä¸­çš„æŒ‡é’ˆæŒ‡å‘æŒ‡é’ˆâ€¦â€¦emm ï¼‰å¦‚ï¼š\nclass A(object): def __init__(self): self.a = 'a' self.b = 'b' A().__dict__ {\u0026lsquo;a\u0026rsquo;: \u0026lsquo;a\u0026rsquo;, \u0026lsquo;b\u0026rsquo;: \u0026lsquo;b\u0026rsquo;}\nä½†æ˜¯A().__dict__['a'] = 'It is a' è™½ç„¶ä¸ä¼šæŠ¥é”™ï¼Œä½†ä¹‹åå†æ¬¡è°ƒç”¨A().__dict__æ˜¾ç¤ºç»“æœè¿˜æ˜¯ä¸€æ ·ï¼Œä½†ï¼š\na = A() a.__dict__['a'] = 'It is a' a.__dict__ {\u0026lsquo;a\u0026rsquo;: \u0026lsquo;It is a\u0026rsquo;, \u0026lsquo;b\u0026rsquo;: \u0026lsquo;b\u0026rsquo;}\nè¿™æ ·æˆ‘å°±ç”¨è¿‡ä¸€æ¬¡ï¼Œåœ¨ä¸ç¡®å®šæ•°æ®ç±»ä¼šæœ‰å‡ ä¸ªå…ƒç´ ç”šè‡³ä¸çŸ¥é“ä¼šæ˜¯ä»€ä¹ˆåç§°çš„æ—¶å€™æ¥åˆ›å»ºçš„ï¼Œæ¯•ç«Ÿï¼š(è¿™æ ·çš„æ–¹å¼å¯ä»¥éšä¾¿æ·»åŠ å˜›)\na.__dict__['w'] = 'It is www' a.__dict__ {\u0026lsquo;a\u0026rsquo;: \u0026lsquo;It is a\u0026rsquo;, \u0026lsquo;b\u0026rsquo;: \u0026lsquo;b\u0026rsquo;, \u0026lsquo;w\u0026rsquo;: \u0026lsquo;It is www\u0026rsquo;\nè‹¥å‡ºç°docxæ¨¡å—pyInstalleræ‰“åŒ…é—®é¢˜ # å¤§æ¦‚çš„è§£å†³æ­¥éª¤æ˜¯è¿™æ ·çš„ï¼š æ‰¾åˆ°python-docxåŒ…å®‰è£…è·¯å¾„ä¸‹çš„ä¸€ä¸ªåä¸ºdefault.docxçš„æ–‡ä»¶ï¼Œæˆ‘æ˜¯é€šè¿‡everythingè¿™ä¸ªå¼ºå¤§çš„æœç´¢å·¥å…·å…¨å±€æœç´¢æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶çš„ï¼Œå®ƒåœ¨æˆ‘æœ¬åœ°æ‰€åœ¨çš„è·¯å¾„æ˜¯ï¼šE:\\code\\env.env\\Lib\\site-packages\\docx\\templates æŠŠæ‰¾åˆ°çš„default.docxæ–‡ä»¶å¤åˆ¶åˆ°æˆ‘çš„pyè„šæœ¬æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸‹ã€‚ ä¿®æ”¹è„šæœ¬ä¸­åˆ›å»ºDocumentå¯¹è±¡çš„æ–¹å¼ï¼š ä»åŸæ¥çš„åˆ›å»ºæ–¹å¼ï¼š document = Document() ä¿®æ”¹ä¸ºï¼š import os document = Document(docx=os.path.join(os.getcwd(), \u0026lsquo;default.docx\u0026rsquo;)) å†æ¬¡ç”¨pyinstallerå·¥å…·æ‰“åŒ…è„šæœ¬ä¸ºexeæ–‡ä»¶ æŠŠdefault.docxæ–‡ä»¶å¤åˆ¶åˆ°ä¸ç”Ÿæˆçš„exeæ–‡ä»¶ç›¸åŒçš„è·¯å¾„ä¸‹ï¼Œå†æ¬¡è¿è¡Œexeæ–‡ä»¶ï¼Œé¡ºåˆ©è¿è¡Œé€šè¿‡ï¼Œæ²¡æœ‰å†å‡ºç°ä¹‹å‰çš„æŠ¥é”™ï¼Œé—®é¢˜å¾—åˆ°è§£å†³ã€‚ ä½œè€…ï¼š(m2fox)[https://www.jianshu.com/p/94ac13f6633e] ä¾†æºï¼šç®€ä¹¦\næ‹¼æ¥Listå­—ç¬¦ä¸² # å°†listä¸­çš„å…ƒç´ æ‹¼æ¥èµ·æ¥ï¼Œå¹¶ä½¿ç”¨,éš”å¼€å¯è¿™ä¹ˆæ¥ï¼š\nimport itertools list = ['123', '567'] xlist = \u0026quot;,\u0026quot;.join(list) or ylist = \u0026quot;,\u0026quot;.join(*list) s = .join(itertools.chain(kwargs.keys())) åŒºåˆ«åœ¨äºxä¸ºä¸€ä¸ªå…ƒç´ æ·»åŠ ä¸€ä¸ª,ï¼Œyä¸ºæŠŠåˆ—è¡¨ä¸­çš„ç´ ä¹Ÿæ‹†åˆ†ä¹‹åå†æ·»åŠ \nSimpleHTTPServer # å°å‹çš„å±€åŸŸç½‘å˜›â˜ºï¼Œå¾ˆå¸¸ç”¨ï¼Œä¸è¿‡åœ¨Python3ä¸­æœ‰äº†å˜åŒ–â€¦\n$ Python2 python -m SimpleHTTPServer --- $ Python3 python -m http.server é¡ºå¸¦ä¸€æï¼š-mæ˜¯å¯ä»¥åœ¨å¤–æ‰§è¡Œå†…åº“çš„æ“ä½œï¼ŒğŸ¦‘å¤§æ¦‚æ˜¯è¿™ä¸ªæ„æ€å§â€”â€” ç”¨pdbçš„æ—¶å€™ä¹Ÿæ˜¯è¿™ä¹ˆç”¨çš„â€¦\nè€å¤«çš„æœˆä»½ç”Ÿæˆ # # -*- coding:utf-8 -*- import datetime import copy def splitMonth(start, end): start = str2Date(start) end = str2Date(end) _delta = end - start datelist = [] if _delta.days \u0026gt; 10: # æ‹†åˆ† # æŒ‰*æœˆ*æ‹†åˆ†ï¼ˆ10æ—¥é—´éš”ï¼‰ n = 0 _start = copy.copy(start) while _delta.days \u0026gt; 0: n += 1 if _start.day \u0026lt; 10: _end = datetime.date(_start.year, _start.month, 10) if end \u0026gt; _end: datelist.append((date2str(_start), date2str(_end))) _start = _end + datetime.timedelta(1) else: datelist.append((date2str(_start), date2str(end))) break elif _start.day \u0026lt; 20: _end = datetime.date(_start.year, _start.month, 20) if end \u0026gt; _end: datelist.append((date2str(_start), date2str(_end))) _start = _end + datetime.timedelta(1) else: datelist.append((date2str(_start), date2str(end))) break else: _end = datetime.date(_start.year, _start.month, _start.day) + datetime.timedelta(15) _end = datetime.date(_end.year, _end.month, 1) - datetime.timedelta(1) if end \u0026gt; _end: datelist.append((date2str(_start), date2str(_end))) _start = _end + datetime.timedelta(1) else: datelist.append(date2str(_start), date2str(end)) break _delta = end - _start + datetime.timedelta(1) return datelist else: return [(date2str(start), date2str(end))] def splitMouthBySE_N(start, end, n): start = str2Date(start) end = str2Date(end) _delta = end - start datelist = [] if _delta.days \u0026gt; n: # æ‹†åˆ† # æŒ‰*æœˆ*æ‹†åˆ†ï¼ˆ10æ—¥é—´éš”ï¼‰ _start = copy.copy(start) while _delta.days \u0026gt; 0: _loop = 0 for _n in range(int(30/n)): _loop = _loop + n if _start.day \u0026lt; _loop: if _start.month == 2 and _loop \u0026gt; 28: if _start.year%4: _end = datetime.date(_start.year, _start.month, 28) else: _end = datetime.date(_start.year, _start.month, 29) else: _end = datetime.date(_start.year, _start.month, _loop) if end \u0026gt; _end: datelist.append((date2str(_start), date2str(_end))) _start = _end + datetime.timedelta(1) else: datelist.append((date2str(_start), date2str(end))) _delta = datetime.timedelta(0) break _end = datetime.date(_start.year, _start.month, _start.day) + datetime.timedelta(15) else: continue else: _end = datetime.date(_end.year, _end.month, 1) - datetime.timedelta(1) if end \u0026gt; _end: if _start \u0026gt; _end: _delta = end - _start + datetime.timedelta(1) else: datelist.append((date2str(_start), date2str(_end))) _start = _end + datetime.timedelta(1) else: datelist.append((date2str(_start), date2str(end))) _delta = datetime.timedelta(0) break _delta = end - _start + datetime.timedelta(1) return datelist else: return [(date2str(start), date2str(end))] def gropdate(datelist, itemNum=0, gropNum=0): #å°†ä¼ å…¥datelist[(str(start1), str(end1)), (str(start2), str(end2))...] -\u0026gt; ä¼ å…¥ä¸ºæœˆç¢ç‰‡ # æ‰“æŒ‰æœˆå¯¹æœˆç¢ç‰‡è¿›è¡Œæ‰“ç»„ã€‚ # ä¼ å…¥å‚æ•° itemNum: ä¸€ä¸ªç»„å«å‡ ä¸ªæœˆ, gropNum: å°†è¿™äº›ç¢ç‰‡æ‰“ä¸ºå‡ ç»„ _dic = collections.OrderedDict() for i in datelist: # æŒ‰æœˆåˆ†ç»„ keyName = i[0].split(\u0026#39;-\u0026#39;)[1] if keyName not in _dic: _dic[keyName] = [] _dic[keyName].append(i) monthList = [] groups = [] groupListTemp = [] groupList = [] for i in _dic.keys(): # å¾—åˆ°æœˆä»½åˆ—è¡¨ monthList.append(i) #[1,2,3...,7,8,9] monthNum = len(monthList) if gropNum: itemNum = round(float(monthNum)/gropNum) itemNum = int(itemNum) if itemNum: slipNum = int(monthNum/itemNum) start = 0 end = int(itemNum) for mon in range(slipNum): groups.append(monthList[int(start):int(end)]) start = copy.copy(end) end = end + itemNum if monthNum%itemNum: groups.append(monthList[start:monthNum]) # éæ•´é™¤è¡¥è¶³ for i in groups: for ii in i: groupListTemp.append(_dic[ii]) groupList.append(groupListTemp) groupListTemp = [] return groupList else: return None # region æ—¥æœŸ`date`æ ¼å¼ä¸`str`è½¬æ¢å¤„ç† def date2str(_date): # datetime.date è½¬æ¢ä¸º str (æœ‰ä¸ºäº†é€‚é…åŸç¨‹åºçš„è¡¥é›¶æ“ä½œâ€¦) if _date.month \u0026lt; 10: strDate = str(_date.year) + \u0026#39;-\u0026#39; + \u0026#39;0\u0026#39;+str(_date.month) + \u0026#39;-\u0026#39; + str(_date.day) else: strDate = str(_date.year) + \u0026#39;-\u0026#39; + str(_date.month) + \u0026#39;-\u0026#39; + str(_date.day) if _date.day \u0026lt; 10: strDate = strDate[:-1] + \u0026#39;0\u0026#39;+str(_date.day) return strDate def str2Date(_str): # str è½¬æ¢ä¸º datetime.date y, m, d = _str.split(\u0026#39;-\u0026#39;) return datetime.date(int(y), int(m), int(d)) # endregion if __name__ == \u0026#39;__main__\u0026#39;: print(splitMouthBySE_N(\u0026#39;2016-01-02\u0026#39;, \u0026#39;2018-03-01\u0026#39;, 5)) Python3.6ä¹‹åçš„å¥‡æ·«æŠ€å·§ # å¯ä½¿ç”¨ä¸‹åˆ’çº¿å°†é•¿æ•°å­—éš”å¼€ï¼Œä¾¿äºé˜…è¯» 10000=10_000 å­—ç¬¦ä¸²æ“ä½œé™¤äº† %å’Œformatä¹‹å¤–è¿˜æœ‰fæ“ä½œ $ % s = \u0026#34;%s is %d\u0026#34; % (\u0026#39;two\u0026#39;, 2) $ format s = \u0026#34;{fruit} is {color}\u0026#34;.format(fruit=\u0026#39;apple\u0026#39;, color=\u0026#39;red\u0026#39;) $ f name = \u0026#39;Bob\u0026#39; f\u0026#39;Hello, {name}!\u0026#39; ### ç”šè‡³ a = 5 b = 10 f\u0026#39;Five plus ten is {a + b} and not {2 * (a + b)}.\u0026#39; #### ç²¾åº¦ PI = 3.141592653 f\u0026#34;Pi is {PI:.2f}\u0026#34; \u0026gt;\u0026gt;\u0026gt; \u0026#39;Pi is 3.14\u0026#39; \u0026gt;\u0026gt;\u0026gt; error = 50159747054 ##### ä»¥16è¿›åˆ¶æ ¼å¼åŒ– f\u0026#39;Programmer Error: {error:#x}\u0026#39; \u0026gt;\u0026gt;\u0026gt;\u0026#39;Programmer Error: 0xbadc0ffee\u0026#39; ##### ä»¥äºŒè¿›åˆ¶æ ¼å¼åŒ– f\u0026#39;Programmer Error: {error:#b}\u0026#39; \u0026gt;\u0026gt;\u0026gt; \u0026#39;Programmer Error: 0b101110101101110000001111111111101110\u0026#39; 3.å˜é‡æ³¨é‡Š def my_add(a: int, b: int) -\u0026gt; int: \\n return 0 ä»…ä»…ç”¨æ¥æ³¨é‡Šï¼Œå…¶å®ä¼ å‚å‡ºå‚å¹¶ä¸å—æ§åˆ¶â€¦\né­”æ³•æ–¹æ³• # å‡è®¾å®šä¹‰ç±» EmmNe, EmmNeæ‹¥æœ‰self.aaaä¸self.aaadictã€åˆ—è¡¨self.aaalist ä¸”__init__å…è®¸ä¸¤ä¸ªä¼ å‚\n__len__:\ndef __len__(self): return len(self.aaa) # åˆ™åœ¨å¤–`len`æ­¤å®ä¾‹åŒ–å¯¹è±¡æ—¶ï¼Œä¼šè¿”å›è¿™ä¸ªç»“æœ __getitem__:\ndef __getitem__(self, key) return self.aaadict[key] en = EmmNe(1, 2) print(en[`]) \u0026gt; 2 #å°±åƒä¸Šé¢é‚£æ ·ã€‚ ä¸è¿‡è¿˜æœ‰ä¸‹é¢çš„ç”¨æ³• def __getitem__(self, index): retrun self.aaalist[index] w = Emm(1,2) for i in w: print (i) # åˆ™è¾“å‡ºåˆ—è¡¨ä¸­å†…å®¹ __setitem__:\ndef __setitem__(self, key, value) return self.aaadict[key] = value # æ‹¥æœ‰æ­¤æ–¹æ³•ï¼Œåˆ™åœ¨å¤–å¯å°†å®ä¾‹å¯¹è±¡å½“ä½œå­—å…¸æ“ä½œ: enp[\u0026#39;a\u0026#39;] = \u0026#39;asd\u0026#39; # å°±åƒè¿™æ · collectionss # æ€»ç»“ä¸€å¥è¯ï¼š collectionså‡ºå“ï¼Œ å¿…å±ç²¾å“ã€‚ é©¬ä¸Šèƒ½æƒ³åˆ°çš„ æœ‰åºå­—å…¸ï¼Œè¿˜æœ‰é‚£å•¥éƒ½æ˜¯å‡ºè‡ªæ­¤ä¸ªæ¨¡å—ä¹‹ä¸‹ã€‚ ä»Šå¤©ç”¨çš„ è®¡æ•°ä¹Ÿæ˜¯å‡ºè‡ªæ­¤å¤„ åæ­£ä¹‹å è¿™ä¸ªé‡Œé¢èƒ½å®ç°çš„åŠŸèƒ½ï¼Œé‚£å°±æ”¾å¼ƒæ‰‹å†™å§â€”â€”â€”â€”ğŸ˜“ from collections import Counter\nFunction Annotations # Annotations are stored in the annotations attribute of the function as a dictionary and have no effect on any other part of the function. Parameter annotations are defined by a colon after the parameter name, followed by an expression evaluating to the value of the annotation. Return annotations are defined by a literal -\u0026gt;, followed by an expression, between the parameter list and the colon denoting the end of the def statement. The following example has a positional argument, a keyword argument, and the return value annotated:\n\u0026gt;\u0026gt;\u0026gt; def f(ham: str, eggs: str = \u0026#39;eggs\u0026#39;) -\u0026gt; str: print(\u0026#34;Annotations:\u0026#34;, f.__annotations__) print(\u0026#34;Arguments:\u0026#34;, ham, eggs) return ham + \u0026#39; and \u0026#39; + eggs f(\u0026#39;spam\u0026#39;) \u0026gt;\u0026gt;\u0026gt; Annotations: {\u0026#39;ham\u0026#39;: \u0026lt;class \u0026#39;str\u0026#39;\u0026gt;, \u0026#39;return\u0026#39;: \u0026lt;class \u0026#39;str\u0026#39;\u0026gt;, \u0026#39;eggs\u0026#39;: \u0026lt;class \u0026#39;str\u0026#39;\u0026gt;} \u0026gt;\u0026gt;\u0026gt; Arguments: spam eggs \u0026gt;\u0026gt;\u0026gt; \u0026#39;spam and eggs\u0026#39; Logger # æ¨¡å—åï¼š logging ä¸Šæ‰‹å®¹æ˜“ï¼ŒåŠŸèƒ½ä¸°å¯Œï¼Œæ€§èƒ½è‚¯å®šä¹Ÿå¥½è¿‡è‡ªå·±âœ å¦å¤–ï¼Œæ‡’â€”â€”â€”\nimport sys import logging import logging_error logger1 = logging.getLogger(\u0026#39;loger1\u0026#39;) logger2 = logging.getLogger(\u0026#39;loger2\u0026#39;) #å®ä¾‹åŒ–ä¸¤ä¸ªlogger,é»˜è®¤åç§°ä¸ºï¼š`root` \u0026#34;\u0026#34;\u0026#34; æˆ‘å±…ç„¶ä»¥ä¸ºrootæ˜¯ç¨‹åºæ‰§è¡Œå¤„çš„åå­—ï¼Œä»¥ä¸ºæ”¾åˆ°å‡½æ•°ä¸­å°±ä¼šæ˜¾ç¤ºå‡½æ•°åã€‚emm æ‰€ä»¥æ‰æœ‰äº†ä¸‹é¢å¤šå±‚å‡½æ•°åµŒå¥—â€¦ï¼Œä»¥åŠè°ƒç”¨å¤–éƒ¨`import` \u0026#34;\u0026#34;\u0026#34; formatter = logging.Formatter(\u0026#39;[%(name)s]%(asctime)s %(levelname)-8s: %(message)s\u0026#39;) #å®šä¹‰æ—¥å¿—æ ¼å¼ï¼š \u0026#34;\u0026#34;\u0026#34; %(name)s Loggerçš„åå­— %(levelno)s æ•°å­—å½¢å¼çš„æ—¥å¿—çº§åˆ« %(levelname)s æ–‡æœ¬å½¢å¼çš„æ—¥å¿—çº§åˆ« %(pathname)s è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„æ¨¡å—çš„å®Œæ•´è·¯å¾„åï¼Œå¯èƒ½æ²¡æœ‰ %(filename)s è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„æ¨¡å—çš„æ–‡ä»¶å %(module)s è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„æ¨¡å—å| %(funcName)s è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„å‡½æ•°å| %(lineno)d è°ƒç”¨æ—¥å¿—è¾“å‡ºå‡½æ•°çš„è¯­å¥æ‰€åœ¨çš„ä»£ç è¡Œ %(created)f å½“å‰æ—¶é—´ï¼Œç”¨UNIXæ ‡å‡†çš„è¡¨ç¤ºæ—¶é—´çš„æµ®ç‚¹æ•°è¡¨ç¤º| %(relativeCreated)d è¾“å‡ºæ—¥å¿—ä¿¡æ¯æ—¶çš„ï¼Œè‡ªLoggeråˆ›å»ºä»¥æ¥çš„æ¯«ç§’æ•°| %(asctime)s å­—ç¬¦ä¸²å½¢å¼çš„å½“å‰æ—¶é—´ã€‚é»˜è®¤æ ¼å¼æ˜¯â€œ2003-07-08 16:49:45,896â€ã€‚é€—å·åé¢çš„æ˜¯æ¯«ç§’ %(thread)d çº¿ç¨‹IDã€‚å¯èƒ½æ²¡æœ‰ %(threadName)s çº¿ç¨‹åã€‚å¯èƒ½æ²¡æœ‰ %(process)d è¿›ç¨‹IDã€‚å¯èƒ½æ²¡æœ‰ %(message)s ç”¨æˆ·è¾“å‡ºçš„æ¶ˆæ¯ \u0026#34;\u0026#34;\u0026#34; fileHandler = logging.FileHandler(\u0026#39;loger.log\u0026#39;) fileHandler.setFormatter(formatter) consoleHandler = logging.StreamHandler(sys.stdout) consoleHandler.formatter = formatter #é…ç½®æ–‡ä»¶ã€ç»ˆç«¯æ—¥å¿—å¤„ç†å™¨ã€‚å¯ä»¥ä½¿ç”¨ä¸åŒæ ¼å¼ï¼Œæ¥åŒºåˆ†å¤„ç† logger1.addHandler(fileHandler) logger2.addHandler(fileHandler) logger1.addHandler(consoleHandler) logger2.addHandler(consoleHandler) #ä¸ºæ—¥å¿—æœºæ·»åŠ å¤„ç†å™¨ logger1.setLevel(logging.INFO) #logger2.setLevel() #è®¾ç½®å„æ—¥å¿—æœºæ‰“å°ç­‰çº§ logger1.debug(\u0026#39;debugO\u0026#39;) logger1.info(\u0026#39;info\u0026#39;) logger2.info(\u0026#39;info\u0026#39;) logger1.error(\u0026#39;error\u0026#39;) def warn_msg(): logger1.warn(\u0026#39;warn msg\u0026#39;) warn_msg2() def warn_msg2(): logger2.warn(u\u0026#39;warn ä¿¡æ¯\u0026#39;) logging_error.error_demo() warn_msg() å½“ç„¶ï¼Œloggerè¿˜æœ‰åˆ«çš„è°ƒç”¨æ–¹æ³•ï¼Œä¸è¿‡è¿™åº”è¯¥å°±å¤Ÿäº†ï¼Œ å…·ä½“è¦æ€ä¹ˆå®ç°ï¼Œå°±å»æ‰¾å®˜æ–¹æ–‡æ¡£äº†ã€‚ é¢„é˜²é’ˆï¼š å¤šç§é…ç½®æ–¹æ³•ã€æ—¥å¿—é‡å¤è¾“å‡º:è§æ­¤\nlambdaå‡½æ•° # æ’åº # aaa \u0026gt;\u0026gt;\u0026gt; [{\u0026#39;time\u0026#39;: 1}, {\u0026#39;time\u0026#39;: 3}, {\u0026#39;time\u0026#39;: 2}] sorted(aaa, key = lambda x: x[\u0026#34;time\u0026#34;]) \u0026gt;\u0026gt;\u0026gt; [{\u0026#39;time\u0026#39;: 1}, {\u0026#39;time\u0026#39;: 2}, {\u0026#39;time\u0026#39;: 3}] sorted(aaa, key = lambda x: x[\u0026#34;time\u0026#34;], reverse=True) \u0026gt;\u0026gt;\u0026gt; [{\u0026#39;time\u0026#39;: 3}, {\u0026#39;time\u0026#39;: 2}, {\u0026#39;time\u0026#39;: 1}] Mock # ä½¿ç”¨: unittest\nmock.patch.object: Mock # ä¸€ä¸ªç±», åæ¥æ–¹æ³• mock.patch: Mock # ä¸€ä¸ªæ–¹æ³•, æŒ‰è·¯å¾„ @mock.patch(\u0026#34;databases.wx_service.get_user_base_info\u0026#34;) @mock.patch.object(wx_service.WeChat_OAP, \u0026#34;send_template_msg\u0026#34;) def test_create_weawarning(self, mock_send_template_msg, mock_get_user_base_info): # è£…é¥°å™¨ç”Ÿæ•ˆä»å†…åˆ°å¤–, ä¼ å…¥å‚æ•°é¡ºåº, ä»å·¦åˆ°å³ pass mock_send_template_msg.return_value = \u0026#39;\u0026#39;/{}/[]/() çš†å¯ è®¾å®šmockè¿”å›å€¼ mock_get_user_base_info.side_effect = [\u0026#39;\u0026#39;/{}/[]/(), \u0026#39;\u0026#39;/{}/[]/()] è®¾å®šæ¯æ¬¡è°ƒç”¨mockå‡½æ•°ä¾æ¬¡è¿”å›è¿”å›å€¼ è®¡ç®— # å–æ•´ # In [1]: import math In [2]: math.ceil(10/ 3) # å‘ä¸Šå–æ•´ Out[2]: 4 "},{"id":126,"href":"/docs/programmer/langs/python/py%E5%B0%8F%E5%B7%A5%E5%85%B7%E5%92%8C%E5%8A%9F%E8%83%BD%E6%80%A7%E6%96%B9%E6%B3%95/","title":"Pyå°å·¥å…·å’ŒåŠŸèƒ½æ€§æ–¹æ³•","section":"Python","content":"author:Ian\né‚®ä»¶ # ä¸­æ–‡é™„ä»¶ # å‘é€é‚®ä»¶æ—¶æºå¸¦é™„ä»¶ ä¸­æ–‡åç§°é™„ä»¶\ndef send_email_week_report(htm, recipients, copys, file_name, file_path): port = 465 # str_today = datetime.now().strftime(\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;) str_today = datetime.now().strftime(\u0026#34;%Y-%m-%d\u0026#34;) mail_host = \u0026#34;mail.{demo}.com\u0026#34; mail_user = \u0026#34;{user name}\u0026#34; mail_pass = \u0026#34;{passwd}\u0026#34; sender = \u0026#39;{name}@{demo}.com\u0026#39; mail_from = \u0026#34;{name} \u0026lt;{name}@{demo}.com\u0026gt;\u0026#34; msg_Bcc = \u0026#39;{name}@{demo}.com\u0026#39; subject = f\u0026#34;{title}-{str_today}\u0026#34; # æ ‡é¢˜ msg = MIMEMultipart() msg.attach(MIMEText(htm, \u0026#39;html\u0026#39;, \u0026#39;utf-8\u0026#39;)) # è¿™é‡Œå¯ä»¥ä¼ htmlå†…å®¹ ä¹Ÿå¯ä»¥ä¼ æ™®é€šæ–‡å­— # åˆ›å»ºé™„ä»¶ with open(file_path, \u0026#39;rb\u0026#39;) as attachment: part = MIMEBase(\u0026#39;application\u0026#39;, \u0026#39;octet-stream\u0026#39;) part.set_payload(attachment.read()) encoders.encode_base64(part) part.add_header( \u0026#39;Content-Disposition\u0026#39;, \u0026#39;attachment\u0026#39;, filename=(\u0026#34;utf-8\u0026#34;, \u0026#34;\u0026#34;, file_name), ) msg.attach(part) for root, _, files in os.walk(os.path.join(BASE_DIR, \u0026#39;{path}/images\u0026#39;)): for f in files: if f in htm: with open(os.path.join(root, f), \u0026#39;rb\u0026#39;) as fp: image = MIMEImage(fp.read()) image.add_header(\u0026#39;Content-ID\u0026#39;, f\u0026#39;\u0026lt;{f}\u0026gt;\u0026#39;) msg.attach(image) msg[\u0026#39;From\u0026#39;] = mail_from # å‘ä»¶äºº msg[\u0026#39;To\u0026#39;] = \u0026#34;;\u0026#34;.join(recipients) # æ”¶ä»¶äººå¤šä¸ªé€—å·åˆ†éš” msg[\u0026#34;Cc\u0026#34;] = \u0026#34;;\u0026#34;.join(copys) msg[\u0026#34;Bcc\u0026#34;] = msg_Bcc subject = subject msg[\u0026#39;Subject\u0026#39;] = Header(subject) try: smtpObj = smtplib.SMTP_SSL(mail_host) if is_partner_node == 1: smtpObj = smtplib.SMTP(mail_host) smtpObj.connect(mail_host, port) smtpObj.login(mail_user, mail_pass) smtpObj.sendmail(sender, recipients + copys + [sender], msg.as_string()) return True except smtplib.SMTPException as e: return False æœ‰é™åˆ¶çš„é™„ä»¶ # è¿™ç§å†…å®¹æ’å…¥é™„ä»¶ä¼šæœ‰æ–‡ä»¶åç§°é•¿åº¦é™åˆ¶(19å¥½åƒæˆ–è€…16)\n# åˆ›å»ºé™„ä»¶ with open(file_path, \u0026#39;rb\u0026#39;) as attachment: part = MIMEBase(\u0026#39;application\u0026#39;, \u0026#39;octet-stream\u0026#39;) part.set_payload(attachment.read()) encoders.encode_base64(part) if len(file_name) \u0026gt; 18: file_name = file_name[:9] + file_name[-9:] part.add_header( \u0026#39;Content-Disposition\u0026#39;, f\u0026#39;attachment; filename={Header(file_name, \u0026#34;utf-8\u0026#34;).encode()}\u0026#39;, ) msg.attach(part) æœ€å°ç¨‹åºç…§æŠ„ç‰ˆ # é™„ä»¶å½¢å¼ # import smtplib from email.mime.multipart import MIMEMultipart from email.mime.text import MIMEText from email.mime.image import MIMEImage # é…ç½® smtp_server = \u0026#39;smtp.feishu.cn\u0026#39; smtp_port = 465 username = \u0026#39;google@feishu.com\u0026#39; password = \u0026#39;g0asaddau2131823bP\u0026#39; from_addr = \u0026#39;google@feishu.com\u0026#39; to_addr = \u0026#39;google@feishu.com\u0026#39; # åˆ›å»ºé‚®ä»¶ msg = MIMEMultipart() msg[\u0026#39;Subject\u0026#39;] = \u0026#39;è¿™é‡Œæ˜¯é‚®ä»¶ä¸»é¢˜\u0026#39; msg[\u0026#39;From\u0026#39;] = from_addr msg[\u0026#39;To\u0026#39;] = to_addr # æ·»åŠ æ–‡æœ¬å†…å®¹ msg.attach(MIMEText(\u0026#39;è¿™æ˜¯é‚®ä»¶æ­£æ–‡\u0026#39;, \u0026#39;plain\u0026#39;)) # æ·»åŠ å›¾ç‰‡ with open(\u0026#39;path/to/image.jpg\u0026#39;, \u0026#39;rb\u0026#39;) as img_file: img = MIMEImage(img_file.read()) msg.attach(img) # å‘é€é‚®ä»¶ with smtplib.SMTP_SSL(smtp_server, smtp_port) as server: server.login(username, password) server.send_message(msg) print(\u0026#34;é‚®ä»¶å‘é€æˆåŠŸ\u0026#34;) å›¾ç‰‡ç›´æ¥å±•ç¤ºåœ¨é‚®ä»¶å†…å®¹ - html # é‚®ä»¶æ­£æ–‡: é‡‡ç”¨HTMLæ ¼å¼ï¼Œåœ¨æ­£æ–‡ä¸­ä½¿ç”¨\u0026lt;img\u0026gt;æ ‡ç­¾åµŒå…¥å›¾ç‰‡ã€‚ Content-ID: ä½¿ç”¨img.add_header('Content-ID', '\u0026lt;image1\u0026gt;')æ¥ä¸ºå›¾ç‰‡æ·»åŠ ä¸€ä¸ªå†…å®¹IDï¼Œä»¥ä¾¿åœ¨HTML import smtplib from email.mime.multipart import MIMEMultipart from email.mime.text import MIMEText from email.mime.image import MIMEImage # é…ç½® smtp_server = \u0026#39;smtp.feishu.cn\u0026#39; smtp_port = 465 username = \u0026#39;google@feishu.com\u0026#39; password = \u0026#39;g0asaddau2131823bP\u0026#39; from_addr = \u0026#39;google@feishu.com\u0026#39; to_addr = \u0026#39;google@feishu.com\u0026#39; # åˆ›å»ºé‚®ä»¶ msg = MIMEMultipart() msg[\u0026#39;Subject\u0026#39;] = \u0026#39;è¿™é‡Œæ˜¯é‚®ä»¶ä¸»é¢˜\u0026#39; msg[\u0026#39;From\u0026#39;] = from_addr msg[\u0026#39;To\u0026#39;] = to_addr # æ·»åŠ æ–‡æœ¬å†…å®¹ text = \u0026#39;è¿™æ˜¯é‚®ä»¶æ­£æ–‡ï¼Œå›¾ç‰‡å¦‚ä¸‹ï¼š\u0026lt;br\u0026gt;\u0026lt;img src=\u0026#34;cid:image1\u0026#34;\u0026gt;\u0026#39; msg.attach(MIMEText(text, \u0026#39;html\u0026#39;)) # æ·»åŠ å›¾ç‰‡ with open(\u0026#39;path/to/image.jpg\u0026#39;, \u0026#39;rb\u0026#39;) as img_file: img = MIMEImage(img_file.read()) img.add_header(\u0026#39;Content-ID\u0026#39;, \u0026#39;\u0026lt;image1\u0026gt;\u0026#39;) msg.attach(img) # å‘é€é‚®ä»¶ with smtplib.SMTP_SSL(smtp_server, smtp_port) as server: server.login(username, password) server.send_message(msg) print(\u0026#34;é‚®ä»¶å‘é€æˆåŠŸ\u0026#34;) docx æ’å…¥é™„ä»¶ æ’å…¥æ–‡ä»¶ # å–å·§çš„åŠæ³• é€šè¿‡æ›¿æ¢æ–‡ä»¶å®ç°æ’å…¥\n\u0026#34;\u0026#34;\u0026#34; __name__: main.py æ›¿æ¢æ‰wordæ¨¡æ¿ä¸­çš„excelæ–‡ä»¶å†…å®¹ æ‰€éœ€æ–‡ä»¶: - demo.docx(å…¶ä¸­å·²ç»æ’å…¥äº†ä¸€ä¸ªxlsxæ–‡ä»¶) - demo_aim.xlsx \u0026#34;\u0026#34;\u0026#34; import os import shutil import zipfile class DocxEmbeddingFile: def __init__(self, src_docx_fn, temp_path, extract_folder=\u0026#39;extrated\u0026#39;): self.src_docx_fn = src_docx_fn self.temp_path = temp_path self.extract_folder = extract_folder def unzip_docx(self): shutil.rmtree(self.extract_folder, ignore_errors=True) os.mkdir(self.extract_folder) os.chdir(self.extract_folder) with zipfile.ZipFile(self.src_docx_fn) as azip: azip.extractall() def change_ip_details_xlsx(self, path): \u0026#34;\u0026#34;\u0026#34;# ç¬¬ä¸€ä¸ªæ’å…¥çš„æ–‡ä»¶å‘½åè§„åˆ™ä¸ºæŒ‰æ’å…¥é¡ºåºé€’å¢: - Microsoft_Excel_Worksheet.xlsx - Microsoft_Excel_Worksheet1.xlsx - Microsoft_Word_Document.docx å¦‚æœè¦æµ‹è¯•å…¶ä»–ç±»å‹æ–‡ä»¶,å¯å°†docxè§£å‹åå»ä»¥ä¸‹è·¯å¾„å»æŸ¥çœ‹ \u0026#34;\u0026#34;\u0026#34; shutil.copy(path, os.path.join(self.temp_path, self.extract_folder, \u0026#34;word\u0026#34;, \u0026#34;embeddings\u0026#34;, \u0026#34;Microsoft_Excel_Worksheet.xlsx\u0026#34;)) return True def zip_docx(self): os.chdir(os.path.join(self.temp_path, self.extract_folder)) with zipfile.ZipFile(self.src_docx_fn, \u0026#39;w\u0026#39;) as azip: for i in os.walk(\u0026#39;.\u0026#39;): for j in i[2]: azip.write(os.path.join(i[0], j), compress_type=zipfile.ZIP_DEFLATED) if __name__ == \u0026#39;__main__\u0026#39;: temp_path = os.path.dirname(os.path.abspath(__file__)) report_path = temp_path src_docx_fn = os.path.join(report_path, \u0026#34;demo.docx\u0026#34;) docxef = DocxEmbeddingFile(src_docx_fn=src_docx_fn, temp_path=temp_path) docxef.unzip_docx() docxef.change_ip_details_xlsx(os.path.join(temp_path, \u0026#34;demo_aim.xlsx\u0026#34;)) docxef.zip_docx() word æ’å…¥æ–‡ä»¶é™„ä»¶ # class DocxEmbeddingFile: def __init__(self, src_docx_fn, temp_path, extract_folder=\u0026#39;extrated\u0026#39;): self.src_docx_fn = src_docx_fn self.temp_path = temp_path self.extract_folder = extract_folder def unzip_docx(self): original_dir = os.getcwd() shutil.rmtree(os.path.join(self.temp_path, self.extract_folder), ignore_errors=True) os.mkdir(os.path.join(self.temp_path, self.extract_folder)) dir_path, file_name = os.path.split(self.src_docx_fn) docx_file_path = self.src_docx_fn if file_name.endswith(\u0026#34;.zip\u0026#34;): os.chdir(self.temp_path) with zipfile.ZipFile(self.src_docx_fn) as azip: azip.extractall() file_name = file_name.replace(\u0026#34;zip\u0026#34;, \u0026#34;docx\u0026#34;) docx_file_path = os.path.join(dir_path, file_name) elif file_name.endswith(\u0026#34;docx\u0026#34;): pass else: os.chdir(original_dir) return False os.chdir(os.path.join(self.temp_path, self.extract_folder)) with zipfile.ZipFile(docx_file_path) as azip: azip.extractall() os.chdir(original_dir) return True def change_ip_details_xlsx(self, path): # é€šè¿‡æ›¿æ¢æ–‡ä»¶å®ç°æ–‡ä»¶æ’å…¥ target_path = os.path.join(self.temp_path, self.extract_folder, \u0026#34;word\u0026#34;, \u0026#34;embeddings\u0026#34;, \u0026#34;Microsoft_Excel_Worksheet.xlsx\u0026#34;) if not path or not os.path.exists(target_path): return False shutil.copy(path, target_path) return True def zip_docx(self): original_dir = os.getcwd() os.chdir(os.path.join(self.temp_path, self.extract_folder)) docx_file_path = self.src_docx_fn dir_path, file_name = os.path.split(self.src_docx_fn) if file_name.endswith(\u0026#34;.zip\u0026#34;): file_name = file_name.replace(\u0026#34;zip\u0026#34;, \u0026#34;docx\u0026#34;) docx_file_path = os.path.join(dir_path, file_name) with zipfile.ZipFile(docx_file_path, \u0026#39;w\u0026#39;) as azip: for i in os.walk(\u0026#39;.\u0026#39;): for j in i[2]: azip.write(os.path.join(i[0], j), compress_type=zipfile.ZIP_DEFLATED) os.chdir(original_dir) return docx_file_path ç”ŸæˆExcelæ–‡ä»¶ # class SheetGenerater: t_risky_info = \u0026#34;1_2\u0026#34; t_failed_info = u\u0026#34;key1ä¿¡æ¯\u0026#34; t_simple = \u0026#34;simple\u0026#34; def __init__(self, key, title, _type, sheeter): self.key = key self.title = title self.type = _type self.sheeter = sheeter self.dict_title = { u\u0026#34;key1ä¿¡æ¯\u0026#34;: [u\u0026#34;æœ¬å‘¨æœŸå†…ç¬¬ä¸‰åˆ—æ˜ç»†å¦‚ä¸‹ï¼š\u0026#34;, u\u0026#34;æœ¬å‘¨æœŸå†…ç¬¬ä¸‰åˆ—å‘Šè­¦è¯¦æƒ…å¦‚ä¸‹ï¼š\u0026#34;], u\u0026#34;key2ä¿¡æ¯\u0026#34;: [u\u0026#34;æœ¬å‘¨æœŸå†…é£é™©ä¸»æœºæ˜ç»†å¦‚ä¸‹ï¼š\u0026#34;, u\u0026#34;è¯¦æƒ…\u0026#34;] } def __get_list_dict_value(self, n, key, data): if len(data) \u0026lt;= n: return \u0026#39;\u0026#39; value = data[n][key] if isinstance(value, str) or isinstance(value, unicode): pass elif value and (isinstance(value, list) or isinstance(value, tuple)) and (isinstance(value[0], str) or isinstance(value[0], unicode)): value = u\u0026#39;,\u0026#39;.join(value) else: value = str(value) return value def full_sheet_data_failed(self, sheet_data): \u0026#34;\u0026#34;\u0026#34; key1ä¿¡æ¯ sheetä¿¡æ¯å¡«å…… å®ç°æ–¹å¼ä¸æ•°æ®é•¿åº¦å¼ºç›¸å…³ï¼Œå¦‚æœéœ€è¦å‘è¡¨æ ¼ä¸­æ·»åŠ æ•°æ®ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´å„ä¸ªæ•°å€¼ \u0026#34;\u0026#34;\u0026#34; # set column names for sheet1 and fill in data col_names = [u\u0026#34;åºå·\u0026#34;, u\u0026#34;ç¬¬ä¸‰åˆ—\u0026#34;, u\u0026#34;ç¬¬å››åˆ—\u0026#34;, u\u0026#34;å¤‡æ³¨\u0026#34;] col_names_2 = [u\u0026#34;åºå·\u0026#34;, u\u0026#34;å‘Šè­¦æ—¶é—´\u0026#34;, u\u0026#34;äº‹ä»¶åç§°\u0026#34;, u\u0026#34;æºIP\u0026#34;, \u0026#34;ç›®çš„IP\u0026#34;] if self.dict_title.get(self.title): self.sheeter.merge_cells(\u0026#39;A1:D1\u0026#39;) self.sheeter.cell(1, 1).value = self.dict_title[self.title][0] self.sheeter.cell(1, 1).fill = PatternFill(start_color=\u0026#39;00b050\u0026#39;, end_color=\u0026#39;00b050\u0026#39;, fill_type=\u0026#39;solid\u0026#39;) self.sheeter.merge_cells(\u0026#39;F1:J1\u0026#39;) self.sheeter.cell(1, 2+len(col_names)).value = self.dict_title[self.title][-1] self.sheeter.cell(1, 2+len(col_names)).fill = PatternFill(start_color=\u0026#39;00b050\u0026#39;, end_color=\u0026#39;00b050\u0026#39;, fill_type=\u0026#39;solid\u0026#39;) self.sheeter.append(col_names + [\u0026#34;\u0026#34;] + col_names_2) # self.sheeter.append([u\u0026#34;åºå·\u0026#34;, u\u0026#34;çŠ¶æ€\u0026#34;, u\u0026#34;ç¬¬ä¸‰åˆ—\u0026#34;, u\u0026#34;ç¬¬å››åˆ—\u0026#34;, u\u0026#34;å¤‡æ³¨\u0026#34;]) longer = sheet_data[\u0026#34;key1\u0026#34;] if len(sheet_data[\u0026#34;key1\u0026#34;]) \u0026gt; len(sheet_data[\u0026#34;failed_host_warning_info\u0026#34;]) else sheet_data[\u0026#34;failed_host_warning_info\u0026#34;] for n, _ in enumerate(longer): # item[\u0026#34;loop_state\u0026#34;] # çŠ¶æ€åˆ—,æš‚æ—¶ä¸åšè‡ªåŠ¨å¡«å……,æ­¤åˆ—ç›´æ¥åˆ é™¤ self.sheeter.append([ str(n+1) if self.__get_list_dict_value(n, \u0026#34;host\u0026#34;, sheet_data[\u0026#34;key1\u0026#34;]) else \u0026#39;\u0026#39;, self.__get_list_dict_value(n, \u0026#34;host\u0026#34;, sheet_data[\u0026#34;key1\u0026#34;]), self.__get_list_dict_value(n, \u0026#34;event\u0026#34;, sheet_data[\u0026#34;key1\u0026#34;]), self.__get_list_dict_value(n, \u0026#34;remark\u0026#34;, sheet_data[\u0026#34;key1\u0026#34;]), \u0026#34;\u0026#34;, str(n+1) if self.__get_list_dict_value(n, \u0026#34;datetime\u0026#34;, sheet_data[\u0026#34;failed_host_warning_info\u0026#34;]) else \u0026#39;\u0026#39;, self.__get_list_dict_value(n, \u0026#34;datetime\u0026#34;, sheet_data[\u0026#34;failed_host_warning_info\u0026#34;]), self.__get_list_dict_value(n, \u0026#34;event\u0026#34;, sheet_data[\u0026#34;failed_host_warning_info\u0026#34;]), self.__get_list_dict_value(n, \u0026#34;source_ip\u0026#34;, sheet_data[\u0026#34;failed_host_warning_info\u0026#34;]), self.__get_list_dict_value(n, \u0026#34;destined_ip\u0026#34;, sheet_data[\u0026#34;failed_host_warning_info\u0026#34;]), ]) for n, cell in enumerate(self.sheeter[2]): if n == len(col_names): continue cell.fill = openpyxl.styles.PatternFill(start_color=\u0026#34;92D050\u0026#34;, end_color=\u0026#34;92D050\u0026#34;, fill_type=\u0026#34;solid\u0026#34;) self.autosize_table() return True def full_sheet_data_risky(self, sheet_data): \u0026#34;\u0026#34;\u0026#34; key2ä¿¡æ¯ sheetä¿¡æ¯å¡«å…… \u0026#34;\u0026#34;\u0026#34; # set column names for sheet1 and fill in data col_names = [u\u0026#34;åºå·\u0026#34;, u\u0026#34;é£é™©ä¸»æœº\u0026#34;, u\u0026#34;ç¬¬å››åˆ—\u0026#34;, u\u0026#34;å¤‡æ³¨\u0026#34;] if self.dict_title.get(self.title): self.sheeter.merge_cells(start_row=1, start_column=1, end_row=1, end_column=len(col_names)) self.sheeter.cell(row=1, column=1, value=self.dict_title[self.title][0]) fill = PatternFill(fill_type=\u0026#39;solid\u0026#39;, fgColor=\u0026#34;00b050\u0026#34;) self.sheeter.cell(row=1, column=1).fill = fill self.sheeter.cell(row=1, column=1).alignment = Alignment(horizontal=\u0026#39;center\u0026#39;, vertical=\u0026#39;center\u0026#39;, wrap_text=True) if self.dict_title.get(self.title): self.sheeter.merge_cells(\u0026#39;A1:D1\u0026#39;) self.sheeter.cell(1, 1).value = self.dict_title[self.title][0] self.sheeter.cell(1, 1).fill = PatternFill(start_color=\u0026#39;00b050\u0026#39;, end_color=\u0026#39;00b050\u0026#39;, fill_type=\u0026#39;solid\u0026#39;) # self.sheeter.merge_cells(\u0026#39;F1:J1\u0026#39;) self.sheeter.cell(1, 2+len(col_names)).value = self.dict_title[self.title][-1] self.sheeter.cell(1, 2+len(col_names)).fill = PatternFill(start_color=\u0026#39;00b050\u0026#39;, end_color=\u0026#39;00b050\u0026#39;, fill_type=\u0026#39;solid\u0026#39;) self.sheeter.append(col_names) # self.sheeter.append([u\u0026#34;åºå·\u0026#34;, u\u0026#34;çŠ¶æ€\u0026#34;, u\u0026#34;ç¬¬ä¸‰åˆ—\u0026#34;, u\u0026#34;ç¬¬å››åˆ—\u0026#34;, u\u0026#34;å¤‡æ³¨\u0026#34;]) sheet_data = sheet_data[\u0026#34;key2\u0026#34;] for n, _ in enumerate(sheet_data): # item[\u0026#34;loop_state\u0026#34;] # çŠ¶æ€åˆ—,æš‚æ—¶ä¸åšè‡ªåŠ¨å¡«å……,æ­¤åˆ—ç›´æ¥åˆ é™¤ # self.sheeter.append([str(n+1), item[\u0026#34;host\u0026#34;], item[\u0026#34;event\u0026#34;], item[\u0026#34;remark\u0026#34;]]) self.sheeter.append([str(n+1), self.__get_list_dict_value(n, \u0026#34;host\u0026#34;, sheet_data), self.__get_list_dict_value(n, \u0026#34;event\u0026#34;, sheet_data), self.__get_list_dict_value(n, \u0026#34;remark\u0026#34;, sheet_data) ]) # set background color for column headers for n, cell in enumerate(self.sheeter[2]): if n == len(col_names): break cell.fill = openpyxl.styles.PatternFill(start_color=\u0026#34;92D050\u0026#34;, end_color=\u0026#34;92D050\u0026#34;, fill_type=\u0026#34;solid\u0026#34;) self.autosize_table() return True def full_sheet_data_simple(self, sheet_data): # set column names and fill in data for sheet3 self.sheeter.append(sheet_data[\u0026#34;column_name\u0026#34;]) for row in sheet_data[\u0026#34;table\u0026#34;]: self.sheeter.append(row) # set background color for column headers for cell in self.sheeter[1]: cell.fill = openpyxl.styles.PatternFill(start_color=\u0026#34;92D050\u0026#34;, end_color=\u0026#34;92D050\u0026#34;, fill_type=\u0026#34;solid\u0026#34;) self.autosize_table() return True def autosize_table(self): # ç”Ÿæ•ˆäº† self.sheeter.column_dimensions[\u0026#39;B\u0026#39;].width = 20 if self.title == u\u0026#34;key3ä¿¡æ¯\u0026#34;: self.sheeter.column_dimensions[\u0026#39;C\u0026#39;].width = 40 else: self.sheeter.column_dimensions[\u0026#39;C\u0026#39;].width = 60 return # for column in self.sheeter.columns: # column_letter = get_column_letter(column[0].column) # self.sheeter.column_dimensions[column_letter].auto_size = True # self.sheeter.column_dimensions[column_letter].max_width = 500 def full_sheet(self, data): if self.type == SheetGenerater.t_risky_info: # print(\u0026#39;excel_utils -------135 {}\u0026#39;.format(data)) return self.full_sheet_data_risky(data) if self.type == SheetGenerater.t_failed_info: # print(\u0026#39;excel_utils -------138 {}\u0026#39;.format(data)) return self.full_sheet_data_failed(data) elif self.type == SheetGenerater.t_simple: # print(\u0026#39;excel_utils -------141 {}\u0026#39;.format(data)) return self.full_sheet_data_simple(data) return False def generate_excel(data, output_path): # create new workbook and worksheets workbook = openpyxl.Workbook() sheet1 = workbook.active sheet_gennerater_list = [ SheetGenerater(key=\u0026#34;key1\u0026#34;, title=u\u0026#34;key1ä¿¡æ¯\u0026#34;, _type=SheetGenerater.t_failed_info, sheeter=None), SheetGenerater(key=\u0026#34;key2\u0026#34;, title=u\u0026#34;key2ä¿¡æ¯\u0026#34;, _type=SheetGenerater.t_risky_info, sheeter=None), SheetGenerater(key=\u0026#34;key3\u0026#34;, title=u\u0026#34;key3ä¿¡æ¯\u0026#34;, _type=SheetGenerater.t_simple, sheeter=None), ] for n, sheet_gennerater in enumerate(sheet_gennerater_list): if data.get(sheet_gennerater.key) and sheet1.title == \u0026#34;Sheet\u0026#34;: sheet1.title = sheet_gennerater.title sheet_gennerater_list[n].sheeter = sheet1 elif data.get(sheet_gennerater.key): _sheet = workbook.create_sheet(sheet_gennerater.title) sheet_gennerater_list[n].sheeter = _sheet for sheet_gennerate in sheet_gennerater_list: if sheet_gennerate.sheeter: sheet_gennerate.full_sheet(data[sheet_gennerate.key]) # save workbook to output file workbook.save(output_path) è®¡ç®—md5 # import hashlib def calculate_md5(input_string): md5_hash = hashlib.md5() md5_hash.update(input_string.encode(\u0026#39;utf-8\u0026#39;)) return md5_hash.hexdigest() input_string = \u0026#34;Hello, World!\u0026#34; md5_value = calculate_md5(input_string) print(\u0026#34;MD5 å€¼ä¸º:\u0026#34;, md5_value) å®šæ—¶ä»»åŠ¡ # pip install apscheduler å¯ä»¥å‚çœ‹: æˆ‘ä»¥å‰å†™çš„å®šæ—¶ä»»åŠ¡\nå‘ç‚¹ # å¦‚æœéœ€è¦ä¿è¯å®šæ—¶ä»»åŠ¡æ‰§è¡Œ, éœ€è¦è®¾ç½®coalesce å’Œ misfire_grace_time ä¸¤ä¸ªå‚æ•°\ncoalesce å‚æ•° # coalesce å‚æ•°ç”¨äºæ§åˆ¶å½“ä»»åŠ¡ç”±äºæŸäº›åŸå› é”™è¿‡æ‰§è¡Œæ—¶é—´ï¼ˆå³â€œmisfireâ€ï¼‰æ—¶ï¼Œæ˜¯å¦åº”è¯¥åˆå¹¶æ‰§è¡Œã€‚å®ƒçš„ä½œç”¨å¦‚ä¸‹ï¼š\nå½“ coalesce è®¾ç½®ä¸º True æ—¶ï¼šå¦‚æœä»»åŠ¡é”™è¿‡äº†å¤šä¸ªæ‰§è¡Œæ—¶é—´ï¼Œåªæ‰§è¡Œä¸€æ¬¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒAPScheduler ä¼šåˆå¹¶æ‰€æœ‰é”™è¿‡çš„æ‰§è¡Œï¼Œåªè§¦å‘ä¸€æ¬¡æ‰§è¡Œã€‚è¿™é€‚ç”¨äºé‚£äº›ä¸éœ€è¦ä¸ºæ¯ä¸ªé”™è¿‡çš„æ—¶é—´ç‚¹å•ç‹¬æ‰§è¡Œçš„ä»»åŠ¡ã€‚ å½“ coalesce è®¾ç½®ä¸º False æ—¶ï¼šå³ä½¿ä»»åŠ¡é”™è¿‡äº†å¤šä¸ªæ‰§è¡Œæ—¶é—´ï¼Œå®ƒä¹Ÿä¼šä¸ºæ¯ä¸ªé”™è¿‡çš„æ—¶é—´ç‚¹å•ç‹¬æ‰§è¡Œã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä»»åŠ¡é”™è¿‡äº†å¤šæ¬¡æ‰§è¡Œï¼Œå®ƒä¼šåœ¨ä¸‹ä¸€æ¬¡å¯ä»¥æ‰§è¡Œçš„æ—¶å€™ï¼Œè¿ç»­æ‰§è¡Œå¤šæ¬¡ï¼Œä»¥è¡¥ä¸Šé”™è¿‡çš„æ‰§è¡Œã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªä»»åŠ¡æ˜¯æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Œä½†ç”±äºæŸäº›åŸå› ï¼Œè¯¥ä»»åŠ¡åœ¨5åˆ†é’Ÿå†…æ²¡æœ‰æ‰§è¡Œã€‚å¦‚æœ coalesce è®¾ç½®ä¸º Trueï¼Œä»»åŠ¡åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼›å¦‚æœè®¾ç½®ä¸º Falseï¼Œä»»åŠ¡ä¼šè¿ç»­æ‰§è¡Œ5æ¬¡ï¼ˆå‡è®¾æœ‰è¶³å¤Ÿçš„èµ„æºï¼‰ã€‚ misfire_grace_time å‚æ•° # misfire_grace_timeï¼šå•ä½ä¸ºç§’ï¼Œå½“æŸä¸€ job è¢«è°ƒåº¦æ—¶åˆšå¥½çº¿ç¨‹æ± éƒ½è¢«å æ»¡ï¼Œè°ƒåº¦å™¨ä¼šé€‰æ‹©å°†è¯¥ job æ’é˜Ÿä¸è¿è¡Œï¼Œmisfire_grace_time å‚æ•°åˆ™æ˜¯åœ¨çº¿ç¨‹æ± æœ‰å¯ç”¨çº¿ç¨‹æ—¶ä¼šæ¯”å¯¹è¯¥ job çš„åº”è°ƒåº¦æ—¶é—´è·Ÿå½“å‰æ—¶é—´çš„å·®å€¼ï¼Œå¦‚æœå·®å€¼å°äº misfire_grace_time æ—¶ï¼Œè°ƒåº¦å™¨ä¼šå†æ¬¡è°ƒåº¦è¯¥ jobï¼›åä¹‹è¯¥ job çš„æ‰§è¡ŒçŠ¶æ€ä¸º EVENTJOBMISSED äº†ï¼Œå³é”™è¿‡è¿è¡Œã€‚\n"},{"id":127,"href":"/docs/programmer/platforms/os/ros/","title":"ROSæœºå™¨äººæ“ä½œç³»ç»Ÿ","section":"å¹³å°","content":" Robot OS # http://www.autolabor.com.cn/book/ROSTutorials/\n"},{"id":128,"href":"/docs/programmer/basetc/%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B/","title":"supervisor","section":"åŸºç¡€å·¥å…·å’Œé…ç½®","content":" supervisord # å®‰è£… # pip install supervisor echo_supervisord_conf echo_supervisord_conf \u0026gt; /etc/supervisord.conf echo -e \u0026#34;[include]\\nfiles = /etc/supervisor/conf.d/*.conf\u0026#34; \u0026gt;\u0026gt; /etc/supervisord.conf mkdir -p /var/log/test mkdir -p /etc/supervisor/conf.d/ echo -e \u0026#34;[program:test] command=/data/apps/test/.venv/bin/python test.py directory=/data/apps/test/src/ user=root minfds=65535 autostart=true autorestart=true stopasgroup=true stderr_logfile=/var/log/test/test.err.log stderr_logfile_maxbytes=1000MB stderr_logfile_backups=10 stdout_logfile=/var/log/test/test.out.log stdout_logfile_maxbytes=1000MB stdout_logfile_backups=10\u0026#34; \u0026gt; /etc/supervisor/conf.d/test.conf supervisord supervisorctl update é—®é¢˜ # supervisorctl status http://localhost:9001 refused connection é—®é¢˜ # é¦–æ¬¡å®‰è£…, åªpip installåç›´æ¥ä½¿ç”¨å¾ˆå¯èƒ½æ˜¯æ²¡æœ‰é…ç½®æ–‡ä»¶\u0026hellip; å†™å…¥é…ç½®åå¯åŠ¨supervisordå°±å¥½äº† å¤šå®‰è£…é—®é¢˜ # ä½¿ç”¨pipå®‰è£…å’Œaptå®‰è£…çš„ supervisor ä½¿ç”¨çš„ä¸åŒè·¯å¾„çš„é…ç½®æ–‡ä»¶, ç„¶åç³»ç»Ÿé‡Œå°±ä¼šè·‘ä¸¤ä¸ªsupervisor, å°±å®¹æ˜“äº§ç”Ÿè¿·æƒ‘è¡Œä¸º\nä½¿ç”¨supervisorå¯åŠ¨çš„ç¨‹åºè«åå…¶å¦™æœ‰äº†æ‰“å¼€æ–‡ä»¶æ•°é™åˆ¶ # èµ·äº†ä¸€ä¸ªgoç¨‹åºç»“æœhttpè¯·æ±‚ç»™é™åˆ¶åˆ°äº†4096, æ ¹æœ¬ä¸å¤Ÿç”¨å“ˆ è®¾ç½®å¦‚ä¸‹å‚æ•°å¯ä»¥è®¾ç½®æ–°å€¼(éœ€è¦è®¾ç½®åœ¨supervisoré…ç½®ä¸­,è€Œésupervisorå®ˆæŠ¤çš„appä¸­)\n[supervisord] minfds=8192 é—®é¢˜é“¾æ¥: Github\nsystemd # æ–‡ä»¶è·¯å¾„: /etc/systemd/system/{service_name}.service\nfrpcç¤ºä¾‹ # [Unit] Description=Frp Client Service After=sshd.service [Service] Type=simple User={ç”¨æˆ·} Restart=on-failure RestartSec=200s ExecStart=/{path}/frp/frpc -c /{path}/frp/frpc.ini ExecReload=/{path}/frp/frpc reload -c /{path}/frp/frpc.ini LimitNOFILE=1048576 [Install] WantedBy=multi-user.target ç”Ÿæ•ˆå‘½ä»¤ # systemctl daemon-reload systemctl enable frpc.service systemctl start frpc.service systemctl status frpc.service æœåŠ¡æ—¥å¿—æŸ¥çœ‹ # journalctl -u {server_name}.service æ‰‹åŠ¨æŒ‡å®š # [Service] StandardOutput=file:/var/log/my-service.log StandardError=file:/var/log/my-service.err è¿™ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡çš„è¾“å‡ºå°†å­˜å‚¨åœ¨æŒ‡å®šçš„æ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯ journalã€‚\nå·¥ä½œè·¯å¾„ # [Service] WorkingDirectory=/path/to/your/working/directory # å·¥ä½œç›®å½• "},{"id":129,"href":"/docs/programmer/platforms/os/problem-of-windows/","title":"Windows çˆ¬å‘è®°","section":"å¹³å°","content":" Windowsä¸‹Gité—®é¢˜ # Linuxæ²¡å•¥é—®é¢˜,ä½†åœ¨Winä¸‹æŠ¥checkoutå¤±è´¥,è·¯å¾„é—®é¢˜ git config core.protectNTFS false Win å¼€æœºé—®é¢˜ # æŒ‰ä¸‹Shift+F10æˆ–è€…æ˜¯Fn+Shift+F10å¿«æ·é”®è°ƒå‡ºå‘½ä»¤æç¤ºç¬¦çª—å£ã€‚ è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤æ–‡æœ¬ï¼šOOBE\\BYPASSNRO ç­‰å¾…é‡å¯, å†æ¬¡æ“ä½œæ¥åˆ°è”ç½‘ç•Œé¢. \u0026ldquo;ä¸‹ä¸€æ­¥\u0026quot;æŒ‰é’®æ—ä¼šå¤šå‡ºä¸€ä¸ª\u0026quot;æˆ‘æ²¡æœ‰internetè¿æ¥\u0026quot;çš„é€‰é¡¹, ç‚¹å‡»è¯¥é€‰é¡¹ "},{"id":130,"href":"/docs/programmer/gui/notespython/","title":"å›¾å½¢åŒ–ç•Œé¢ ï¼ˆPython Guiï¼‰","section":"å›¾å½¢ç”¨æˆ·ç•Œé¢-GUI","content":"author:Ian\nPython GUI ğŸ’½ # pynput # åœ¨ pynput æ¨¡å—ä¸­ï¼ŒWiné”®è¢«ç§°ä¸ºâ€œç‰¹æ®Šé”®â€ï¼ˆSpecial keysï¼‰ï¼Œéœ€è¦ä½¿ç”¨ç‰¹æ®Šçš„åç§°æ¥è¡¨ç¤ºã€‚\nä»¥ä¸‹æ˜¯å¯ä»¥ä½¿ç”¨çš„ç‰¹æ®Šé”®åç§°åˆ—è¡¨ï¼š\nhttps://pynput.readthedocs.io/en/latest/keyboard.html?highlight=%3Ccmd%3E#controlling-the-keyboard å› æ­¤ï¼Œå¦‚æœä½ æƒ³è¦åœ¨çƒ­é”®è®¾ç½®ä¸­ä½¿ç”¨ Winé”®+ç©ºæ ¼ è¿™ä¸ªçƒ­é”®ï¼Œå¯ä»¥å°†å®ƒä»¬åˆ†åˆ«æ›¿æ¢ä¸º cmd å’Œ spaceï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\nfrom pynput import keyboard def on_activate(): print(\u0026#39;Hotkey activated\u0026#39;) def on_exit(): print(\u0026#39;Hotkey exited\u0026#39;) return False with keyboard.GlobalHotKeys({\u0026#39;\u0026lt;cmd\u0026gt;+\u0026lt;space\u0026gt;\u0026#39;: on_activate}) as h: h.join(on_exit)``` åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ \u0026lt;cmd\u0026gt;+\u0026lt;space\u0026gt; æ¥è¡¨ç¤º Winé”®+ç©ºæ ¼ çƒ­é”®ï¼Œå› ä¸ºåœ¨Macä¸­ï¼ŒCommandé”®ï¼ˆcmdï¼‰å¯ä»¥èµ·åˆ°ç±»ä¼¼äºWiné”®çš„ä½œç”¨ã€‚ ## PyQt ![qt](https://tse4-mm.cn.bing.net/th/id/OIP.J4_Nqrcc0x7slHHUFwKLSQHaI6?pid=ImgDet\u0026amp;rs=1 \u0026#34;tmp\u0026#34;) å®˜æ–¹è¯´æ˜æ–‡æ¡£ï¼š\u0026lt;http://pyqt.sourceforge.net/Docs/PyQt4/index.html\u0026gt; ç…§ä¾‹ï¼Œå…ˆè´´ç½‘å€ï¼š \u0026lt;http://www.qaulau.com/books/PyQt4_Tutorial/index.html\u0026gt; ## ç”»ç•Œé¢ #PyQt4ä½¿ç”¨designer.exe import os for root, dirs, files in os.walk(\u0026#39;.\u0026#39;): for file in files: if file.endswith(\u0026#39;.ui\u0026#39;): os.system(\u0026#39;pyuic4 -o ui_%s.py %s\u0026#39; % (file.rsplit(\u0026#39;.\u0026#39;, 1)[0], file)) elif file.endswith(\u0026#39;.qrc\u0026#39;): os.system(\u0026#39;pyrcc4 -o %s_rc.py %s\u0026#39; % (file.rsplit(\u0026#39;.\u0026#39;, 1)[0], file)) # æ³¨ï¼šåœ¨Winä¸­è°ƒç”¨pyrcc4 å¯èƒ½æ— æ³•è¯†åˆ«è¯¥å‘½ä»¤ï¼Œå³ä½¿æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¹Ÿä¸è¡Œï¼Œè€Œæ˜¯ #pyrcc.exeæ‰èƒ½è°ƒç”¨ç®€ç›´â€¦â€¦ #### çª—å£è®¾ç½® resize(8, 8) setWindowTitle(u\u0026#39;æ ‡é¢˜\u0026#39;) #### è·å–å›¾æ ‡ def getIcon(filename): \u0026#34;\u0026#34;\u0026#34; è·å–å›¾æ ‡ \u0026#34;\u0026#34;\u0026#34; fileInfo = Qt.QFileInfo(filename) fileIcon = Qt.QFileIconProvider() icon = QtGui.QIcon(fileIcon.icon(fileInfo)) return icon ä½¿ç”¨æ—¶ï¼š self.setWindowIcon(getIcon(\u0026#39;../hi/app.ico\u0026#39;)) --- ##### Dock widgetTestM, dockTestM = self.createDock(AllMarketMonitor, vtText.â€œdockæ ‡é¢˜â€, QtCore.Qt.RightDockWidgetArea) # æ–¹å‘æœ‰ï¼š `RightDockWidgetArea`,`BottomDockWidgetArea`,`LeftDockWidgetArea` # åˆ›å»ºdockçª—å£ # å¯åˆ©ç”¨ self.tabifyDockWidget(dockMarketM, dockAllDataM) æ¥åˆå¹¶åŒä¸€ä¸ªæ–¹å‘ä¸Šçš„dock # æ­¤ä¸‹è¿˜æ²¡çœ‹â€¦ dockTradeM.raise_() dockPositionM.raise_() # è¿æ¥ç»„ä»¶ä¹‹é—´çš„ä¿¡å· widgetPositionM.itemDoubleClicked.connect(widgetTradingW.closePosition) # ä¿å­˜é»˜è®¤è®¾ç½® self.saveWindowSettings(\u0026#39;default\u0026#39;) å…¶å®ç°å‡½æ•°ä¸ºï¼š \u0026#34;\u0026#34;\u0026#34;åˆ›å»ºåœé ç»„ä»¶\u0026#34;\u0026#34;\u0026#34; def createDock(self, widgetClass, widgetName, widgetArea): widget = widgetClass(self.mainEngine, self.eventEngine) dock = QtGui.QDockWidget(widgetName) dock.setWidget(widget) dock.setObjectName(widgetName) dock.setFeatures(dock.DockWidgetFloatable|dock.DockWidgetMovable) self.addDockWidget(widgetArea, dock) return widget, dock \u0026gt; å†æœ¬è´¨ä¸€ç‚¹çš„ä¸œè¥¿ä¸ºï¼š widget1 = Ha(self) dock = QtGui.QDockWidget(\u0026#39;haha\u0026#39;) dock.setObjectName(\u0026#39;ha1\u0026#39;) dock.setWidget(widget1) dock.setFeatures(dock.DockWidgetFloatable | dock.DockWidgetMovable) self.addDockWidget(QtCore.Qt.BottomDockWidgetArea, dock) #### åŠ¨ä½œ exit = QtGui.QAction(QtGui.QIcon(\u0026#39;hello.ico\u0026#39;), \u0026#39;exit\u0026#39;, self) exit.setShortcut(\u0026#39;Ctrl+Q\u0026#39;) exit.setStatusTip(\u0026#39;Exit application\u0026#39;) # å›¾æ ‡ã€æ–‡å­—ã€å¿«æ·é”®ã€æç¤ºä¿¡æ¯ menubar = self.menuBar() file = menubar.addMenu(\u0026#39;\u0026amp;File\u0026#39;) file.addAction(exit) # åˆ›å»ºç›®å½•å’Œå·¥å…·æ ï¼Œå°†åŠ¨ä½œæ·»åŠ è¿›å»ã€‚å·¥å…·æ åŒç† ### å®šä½å¸ƒå±€ #### ç»å¯¹å®šä½ label1 = QtGui.QLabel(u\u0026#39;ç»å¯¹å®šä½\u0026#39;, self) label1.move(15, 60) # åˆ›å»ºã€ç§»åŠ¨åˆ°æ˜¾ç¤ºä½ç½® #### æ¡†å¸ƒå±€ åŠ å¸ƒå±€å…ƒç´ å¹³å‡åˆ†å¸ƒ okButton = QtGui.QPushButton(\u0026#34;OK\u0026#34;) cancelButton = QtGui.QPushButton(\u0026#34;Cancel\u0026#34;) # åˆ›å»ºæŒ‰é’® hbox = QtGui.QHBoxLayout() hbox.addStretch(1) hbox.addWidget(okButton) # å¢åŠ ç»„ä»¶ hbox.addWidget(cancelButton) # åˆ›å»ºæ°´å¹³æ  hbox.addStretch() # å¹³å‡åˆ†å¸ƒ vbox = QtGui.QVBoxLayout() vbox.addStretch(1) # åˆ›å»ºç«–åˆ— vbox.addLayout(hbox) # å°†æ°´å¹³æ æ’å…¥ç«–åˆ— self.setLayout(vbox) # æ˜¾ç¤ºæœ€ç»ˆç«–åˆ— æ³¨æ„ä¸€ä¸‹addæ—¶é€‰æ‹©å¯¹ç±»å‹å°±å¥½äº†ã€‚ ### QTableWidget \u0026lt;p\u0026gt;\u0026lt;textarea cols=\u0026#34;50\u0026#34; rows=\u0026#34;15\u0026#34; name=\u0026#34;code\u0026#34; class=\u0026#34;python\u0026#34;\u0026gt;#!/usr/bin/env python #coding=utf-8 from PyQt4.QtGui import * from PyQt4.QtCore import * class MyDialog(QDialog): def __init__(self, parent=None): super(MyDialog, self).__init__(parent) self.MyTable = QTableWidget(4,3) self.MyTable.setHorizontalHeaderLabels([\u0026#39;å§“å\u0026#39;,\u0026#39;èº«é«˜\u0026#39;,\u0026#39;ä½“é‡\u0026#39;]) newItem = QTableWidgetItem(\u0026amp;quot;æ¾é¼ \u0026amp;quot;) self.MyTable.setItem(0, 0, newItem) newItem = QTableWidgetItem(\u0026amp;quot;10cm\u0026amp;quot;) self.MyTable.setItem(0, 1, newItem) newItem = QTableWidgetItem(\u0026amp;quot;60g\u0026amp;quot;) self.MyTable.setItem(0, 2, newItem) layout = QHBoxLayout() layout.addWidget(self.MyTable) self.setLayout(layout) if __name__ == \u0026#39;__main__\u0026#39;: import sys app = QApplication(sys.argv) myWindow = MyDialog() myWindow.show() sys.exit(app.exec_()) \u0026lt;/textarea\u0026gt; \u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;\u0026amp;nbsp;\u0026lt;/p\u0026gt; å…¶ä¸­ï¼š \u0026lt;p\u0026gt;self.MyTable = QTableWidget(4,3)\u0026amp;nbsp; æ„é€ äº†ä¸€ä¸ªQTableWidgetçš„å¯¹è±¡ï¼Œå¹¶ä¸”è®¾ç½®ä¸º4è¡Œï¼Œ3åˆ—\u0026lt;/p\u0026gt;\u0026lt;p\u0026gt;self.MyTable.setHorizontalHeaderLabels([\u0026#39;å§“å\u0026#39;,\u0026#39;èº«é«˜\u0026#39;,\u0026#39;ä½“é‡\u0026#39;]) åˆ™è®¾ç½®è¡¨æ ¼çš„è¡¨å¤´\u0026lt;/p\u0026gt;\u0026lt;p\u0026gt;newItem = QTableWidgetItem(\u0026amp;quot;æ¾é¼ \u0026amp;quot;)\u0026amp;nbsp;\u0026amp;nbsp; åˆ™æ˜¯ç”Ÿæˆäº†ä¸€ä¸ªQTableWidgetItemçš„å¯¹è±¡ï¼Œå¹¶è®©å…¶åä¸º\u0026amp;ldquo;æ¾é¼ \u0026amp;rdquo;\u0026lt;/p\u0026gt;\u0026lt;p\u0026gt;self.MyTable.setItem(0, 0, newItem)\u0026amp;nbsp;\u0026amp;nbsp;\u0026amp;nbsp; å°†åˆšæ‰ç”Ÿæˆçš„ItemåŠ è½½åˆ°ç¬¬0è¡Œã€0åˆ—å¤„ \u0026lt;p\u0026gt;\u0026amp;nbsp;\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;è¿™æ ·ä¸€ä¸ªç®€å•çš„QTableWidgetå°±æ„é€ å®Œæˆäº†ã€‚\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;\u0026lt;img src=\u0026#34;http://hi.csdn.net/attachment/201103/1/0_1298961912c0mN.gif\u0026#34; alt=\u0026#34;\u0026#34; /\u0026gt; \u0026lt;/p\u0026gt; æ„Ÿè°¢[æ¥æº](view-source:blog.csdn.net/vah101/article/details/6215066) ### ä»¥ä¸Šã€‚ ä¹‹åçš„è®¾ç½®å­—ä½“ï¼Œåº•è‰²ï¼Œä¹‹ç±»ç”¨çš„çš„æ—¶å€™å†è¯´ã€‚ å…¶ä¸­ï¼š ##### åˆå¹¶å•å…ƒæ ¼æ•ˆæœçš„å®ç°ï¼š self.MyTable.setSpan(0, 0, 3, 1) # å…¶å‚æ•°ä¸ºï¼š è¦æ”¹å˜å•å…ƒæ ¼çš„ 1è¡Œæ•° 2åˆ—æ•° è¦åˆå¹¶çš„ 3è¡Œæ•° 4åˆ—æ•° ##### è¡¨æ ¼è¡¨å¤´çš„æ˜¾ç¤ºä¸éšè— self.MyTable.verticalHeader().setVisible(False) self.MyTable.horizontalHeader().setVisible(False) # é»˜è®¤æ˜¾ç¤º ä¸”æ ‡å·ä¸ºï¼š 1ï¼Œ2ï¼Œ3â€¦ #### ç©ºä½å¡«è¡¥ .addStretch() # ä¸è¿‡æ¯”è¾ƒé¸¡è‚‹ï¼Œè¿˜æ˜¯ä¸‹é¢çš„è°ƒæ•´çª—å£æ˜¾ç¤ºæ¯”ä¾‹æ¯”è¾ƒå¥½ç© ##### è°ƒæ•´å„éƒ¨åˆ†æ˜¾ç¤ºæ¯”ä¾‹ QVBoxLayout* layout = new QVBoxLayout; QPushButton* btn = new QPushButton; QTableWidget* tableWidget = new QTableWidget; QHBoxLayout* h_layout = new QHBoxLayout; layout.addWidget(btn); layout.addWidget(tableWidget); layout.addLayout(h_layout) layout-\u0026gt;setStretchFactor(btn, 1); layout-\u0026gt;setStretchFactor(tableWidget, 2); layout-\u0026gt;setStretchFactor(h_layout, 2); ä¸Šé¢æ˜¯C++ æ‰€ä»¥ä¸‹é¢çš„æ˜¯ä¿ºçš„Pythonï¼š hbox1[i].addWidget(self.buttonBox[i]) hbox1[i].addWidget(self.paramMonitor[i]) hbox1[i].addWidget(self.varMonitor[i]) # è®¾ç½®æ˜¾ç¤ºæ¯”ä¾‹ hbox1[i].setStretchFactor(self.buttonBox[i], 3) hbox1[i].setStretchFactor(self.paramMonitor[i], 3) hbox1[i].setStretchFactor(self.varMonitor[i], 4) ### åˆ—è¡¨å†…æ·»åŠ æŒ‰é’® \u0026lt;p\u0026gt;1ã€å®šä¹‰æ·»åŠ æŒ‰é’®çš„æ–¹æ³•\u0026lt;/p\u0026gt; \u0026lt;div class=\u0026#34;cnblogs_code\u0026#34;\u0026gt; \u0026lt;pre\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt; 1\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008000\u0026#34;\u0026gt;#\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008000\u0026#34;\u0026gt; åˆ—è¡¨å†…æ·»åŠ æŒ‰é’®\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt; 2\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #0000ff\u0026#34;\u0026gt;def\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt; buttonForRow(self,id): \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt; 3\u0026lt;/span\u0026gt; widget=\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt;QWidget() \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt; 4\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008000\u0026#34;\u0026gt;#\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008000\u0026#34;\u0026gt; ä¿®æ”¹\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt; 5\u0026lt;/span\u0026gt; updateBtn = QPushButton(\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;\u0026#39;\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;ä¿®æ”¹\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;\u0026#39;\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt;) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt; 6\u0026lt;/span\u0026gt; updateBtn.setStyleSheet(\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;\u0026#39;\u0026#39;\u0026#39;\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; text-align : center; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt; 7\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; background-color : NavajoWhite; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt; 8\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; height : 30px; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt; 9\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; border-style: outset; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;10\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; font : 13px \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;\u0026#39;\u0026#39;\u0026#39;\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt;) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;11\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;12\u0026lt;/span\u0026gt; updateBtn.clicked.connect(\u0026lt;span style=\u0026#34;color: #0000ff\u0026#34;\u0026gt;lambda\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt;:self.updateTable(id)) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;13\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;14\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008000\u0026#34;\u0026gt;#\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008000\u0026#34;\u0026gt; æŸ¥çœ‹\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;15\u0026lt;/span\u0026gt; viewBtn = QPushButton(\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;\u0026#39;\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;æŸ¥çœ‹\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;\u0026#39;\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt;) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;16\u0026lt;/span\u0026gt; viewBtn.setStyleSheet(\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;\u0026#39;\u0026#39;\u0026#39;\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; text-align : center; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;17\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; background-color : DarkSeaGreen; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;18\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; height : 30px; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;19\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; border-style: outset; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;20\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; font : 13px; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;\u0026#39;\u0026#39;\u0026#39;\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt;) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;21\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;22\u0026lt;/span\u0026gt; viewBtn.clicked.connect(\u0026lt;span style=\u0026#34;color: #0000ff\u0026#34;\u0026gt;lambda\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt;: self.viewTable(id)) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;23\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;24\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008000\u0026#34;\u0026gt;#\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008000\u0026#34;\u0026gt; åˆ é™¤\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;25\u0026lt;/span\u0026gt; deleteBtn = QPushButton(\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;\u0026#39;\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;åˆ é™¤\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;\u0026#39;\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt;) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;26\u0026lt;/span\u0026gt; deleteBtn.setStyleSheet(\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;\u0026#39;\u0026#39;\u0026#39;\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; text-align : center; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;27\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; background-color : LightCoral; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;28\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; height : 30px; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;29\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; border-style: outset; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;30\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt; font : 13px; \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #800000\u0026#34;\u0026gt;\u0026#39;\u0026#39;\u0026#39;\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt;) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;31\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;32\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;33\u0026lt;/span\u0026gt; hLayout =\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt; QHBoxLayout() \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;34\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt; hLayout.addWidget(updateBtn) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;35\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt; hLayout.addWidget(viewBtn) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;36\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt; hLayout.addWidget(deleteBtn) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;37\u0026lt;/span\u0026gt; hLayout.setContentsMargins(5,2,5,2\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt;) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;38\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt; widget.setLayout(hLayout) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;39\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #0000ff\u0026#34;\u0026gt;return\u0026lt;/span\u0026gt; widget\u0026lt;/pre\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;p\u0026gt;2ã€åœ¨å‘tableWidgeté‡Œæ·»åŠ æ•°æ®æ—¶æ’å…¥å³å¯\u0026lt;/p\u0026gt; \u0026lt;div class=\u0026#34;cnblogs_code\u0026#34;\u0026gt; \u0026lt;pre\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;1\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #0000ff\u0026#34;\u0026gt;for\u0026lt;/span\u0026gt; row_number, row_data \u0026lt;span style=\u0026#34;color: #0000ff\u0026#34;\u0026gt;in\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt; enumerate(rsdata): \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;2\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt; self.ui.tableWidget.insertRow(row_number) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;3\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #0000ff\u0026#34;\u0026gt;for\u0026lt;/span\u0026gt; i \u0026lt;span style=\u0026#34;color: #0000ff\u0026#34;\u0026gt;in\u0026lt;/span\u0026gt; range(len(row_data)+1\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt;): \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;4\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #0000ff\u0026#34;\u0026gt;if\u0026lt;/span\u0026gt; i\u0026amp;lt;\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt;len(row_data): \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;5\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt; self.ui.tableWidget.setItem(row_number, i, QtWidgets.QTableWidgetItem(str(row_data[i]))) \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;6\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008000\u0026#34;\u0026gt;#\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008000\u0026#34;\u0026gt; æ·»åŠ æŒ‰é’®\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;7\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #0000ff\u0026#34;\u0026gt;if\u0026lt;/span\u0026gt; i==\u0026lt;span style=\u0026#34;color: #000000\u0026#34;\u0026gt;len(row_data): \u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;8\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008000\u0026#34;\u0026gt;#\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026#34;color: #008000\u0026#34;\u0026gt; ä¼ å…¥å½“å‰id\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026#34;color: #008080\u0026#34;\u0026gt;9\u0026lt;/span\u0026gt; self.ui.tableWidget.setCellWidget(row_number, i,self.buttonForRow(str(row_data[0])))\u0026lt;/pre\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;p\u0026gt;æ•ˆæœå›¾\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;\u0026lt;img src=\u0026#34;http://images2017.cnblogs.com/blog/896442/201709/896442-20170907222902741-300228307.png\u0026#34; alt=\u0026#34;\u0026#34;\u0026gt;\u0026lt;/p\u0026gt; å°±åƒä»¥ä¸Šæ˜¾ç¤ºçš„é‚£æ ·[æ¥æº](https://www.cnblogs.com/yuanlipu/p/7492260.html) #### å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå†æ’å¸ƒçš„æ—¶å€™å¿…é¡»åªæœ‰ä¸€ä¸ªè¡¨æ ¼å¯¹å…¶è¿›è¡Œæ”¾ç½®ï¼ˆä¹Ÿå°±æ˜¯è¯´æŒ‡æŒ¥å®ƒå»å“ªå„¿çš„åªèƒ½æœ‰ä¸€ä¸ªäººï¼‰ï¼Œä¹‹å‰æˆ‘ä¸ºäº†æµ‹è¯•ï¼Œä¸¤ä¸ªhbox å¯¹å…¶è¿›è¡Œæ’ç‰ˆï¼Œç®€ç›´â€¦â€¦ labelSymbol = QtGui.QLabel(self.CtaEngine.strategyTickDict[self.name]) buttonInit[i] = QtGui.QPushButton(u\u0026#39;åˆå§‹åŒ–\u0026#39;) buttonStart[i] = QtGui.QPushButton(u\u0026#39;å¯åŠ¨\u0026#39;) buttonStop[i] = QtGui.QPushButton(u\u0026#39;åœæ­¢\u0026#39;) buttonUpdate[i] = QtGui.QPushButton(u\u0026#39;æ›´æ–°å‚æ•°\u0026#39;) buttonSave[i] = QtGui.QPushButton(u\u0026#39;ä¿å­˜å‚æ•°\u0026#39;) buttonInit[i].clicked.connect(partial(self.init, i)) buttonStart[i].clicked.connect(partial(self.start, i)) buttonStop[i].clicked.connect(partial(self.stop, i)) buttonUpdate[i].clicked.connect(partial(self.updateParams,i)) buttonSave[i].clicked.connect(partial(self.saveParams, i)) hbox1[i] = QtGui.QHBoxLayout() ##å‚æ•°è®¾ç½®æ˜¾ç¤º hbox2[i] = QtGui.QHBoxLayout() #hbox1[i].addWidget(labelSymbol) #hbox1[i].addWidget(buttonInit[i]) #hbox1[i].addWidget(buttonStart[i]) #hbox1[i].addWidget(buttonStop[i]) #hbox1[i].addWidget(buttonUpdate[i]) #hbox1[i].addWidget(buttonSave[i]) self.buttonBox[i].setCellWidget(0, 0, buttonInit[i]) self.buttonBox[i].setCellWidget(0, 1, buttonStart[i]) self.buttonBox[i].setCellWidget(0, 2, buttonStop[i]) --- --- --- #### ç»„ä»¶ä¹‹é—´è¿æ¥ä¿¡å· # classA(QtGui.QTableWidget): # pass classA.itemDoubleClicked.connect(classB.actionFunction) # è¿™æ ·å•çº¯è°ƒç”¨è¿˜æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ•°æ®ä¼ è¾“â€¦ å°±å¾—ç»§ç»­ç ”ç©¶ä¸€ä¸‹äº†ã€‚ ##### å…³é—­äº‹ä»¶é€€å‡ºæç¤º def closeEvent(self, event): reply = QtGui.QMessageBox.question(self, \u0026#39;Message\u0026#39;,\u0026#34;Are you sure to quit?\u0026#34;, QtGui.QMessageBox.Yes, QtGui.QMessageBox.No) if reply == QtGui.QMessageBox.Yes: event.accept() else: event.ignore() å‡½æ•°æ”¾ç½®ä½ç½®å°±æ˜¯ä¸»çª—å£ç±»ä¸‹å°±å¥½ã€‚ ### QTableWidget æ¸…é™¤æ•°æ® def updateData(self, data): #ï¼ˆç¼©è¿›æ²¡é—®é¢˜å§â€¦ğŸ™ï¼‰ \u0026#34;\u0026#34;\u0026#34;å°†æ•°æ®æ›´æ–°åˆ°è¡¨æ ¼ä¸­\u0026#34;\u0026#34;\u0026#34; if self.name == u\u0026#39;RiskAlarmWidget\u0026#39;: pass if self.updateBeginAction: data = self.updateBeginAction(data) if not data: return if self.updateAction: self.updateAction(data) else: if isinstance(data, unicode) and self.dataKey: # åˆ é™¤æ¨¡å¼ key = data if key in self.dataDict: d = self.dataDict[key] row = d[self.headerList[0]].row() self.removeRow(row) del self.dataDict[key] else: # å¦‚æœè®¾ç½®äº†dataKeyï¼Œåˆ™é‡‡ç”¨å­˜é‡æ›´æ–°æ¨¡å¼ if self.InsertMode: # å¦‚æœå…è®¸äº†æ’åºåŠŸèƒ½ï¼Œåˆ™æ’å…¥æ•°æ®å‰å¿…é¡»å…³é—­ï¼Œå¦åˆ™æ’å…¥æ–°çš„æ•°æ®ä¼šå˜ä¹± if self._sorting: self.setSortingEnabled(False) newRow = 0 if self.InsertTopRow else self.rowCount() self.insertRow(newRow) for n, header in enumerate(self.headerList): content = self.getContents(data, header) cellType = self.headerDict[header][\u0026#39;cellType\u0026#39;] cell = cellType(content) if self.font: cell.setFont(self.font) if self._saveData: cell.data = data self.setItem(newRow, n, cell) # é‡æ–°æ‰“å¼€æ’åº if self._sorting: self.setSortingEnabled(True) else: key = data.__getattribute__(self.dataKey) if key in self.dataDict: # å·²å­˜åœ¨æ•°æ®å­—å…¸ä¸­ï¼Œåˆ™æ›´æ–°ç›¸å…³å•å…ƒæ ¼ d = self.dataDict[key] for header in self.headerList: content = self.getContents(data, header) cell = d[header] cell.setContent(content) if self._saveData: # å¦‚æœè®¾ç½®äº†ä¿å­˜æ•°æ®å¯¹è±¡ï¼Œåˆ™è¿›è¡Œå¯¹è±¡ä¿å­˜ cell.data = data else: # å¦‚æœå…è®¸äº†æ’åºåŠŸèƒ½ï¼Œåˆ™æ’å…¥æ•°æ®å‰å¿…é¡»å…³é—­ï¼Œ #å¦åˆ™æ’å…¥æ–°çš„æ•°æ®ä¼šå˜ä¹± if self._sorting: self.setSortingEnabled(False) # ä¸å­˜åœ¨æ•°æ®å­—å…¸ä¸­ï¼Œæ’å…¥æ–°è¡Œï¼Œåˆ›å»ºæ­¤è¡Œå•å…ƒæ ¼ newRow = 0 if self.InsertTopRow else self.rowCount() self.insertRow(newRow) d = {} for n, header in enumerate(self.headerList): content = self.getContents(data, header) cellType = self.headerDict[header][\u0026#39;cellType\u0026#39;] cell = cellType(content) if self.font: cell.setFont(self.font) # å¦‚æœè®¾ç½®äº†ç‰¹æ®Šå­—ä½“ï¼Œåˆ™è¿›è¡Œå•å…ƒæ ¼è®¾ç½® if self._saveData: # å¦‚æœè®¾ç½®äº†ä¿å­˜æ•°æ®å¯¹è±¡ï¼Œåˆ™è¿›è¡Œå¯¹è±¡ä¿å­˜ cell.data = data self.setItem(newRow, n, cell) d[header] = cell self.dataDict[key] = d # é‡æ–°æ‰“å¼€æ’åº if self._sorting: self.setSortingEnabled(True) if self.updateAfterAction: self.updateAfterAction(data) æ’å…¥åæ•°æ®éœ€è¦æ¸…ç†åªéœ€`.clearContentsText()`ï¼Œè¿™æ ·æ˜¯æ¸…ç†æ•°æ®ä½†ä¿ç•™è¡¨æ ¼ï¼Œæ–¹ä¾¿æ›´æ–°å†…å®¹ã€‚`.clear()`åˆ™æ¸…ç†æ•°æ®ä»¥åŠè¡¨æ ¼æ–¹ä¾¿\u0026lt;font color=75362109\u0026gt;é‡æ–°\u0026lt;/font\u0026gt;å¡«å…¥æ–°çš„å†…å®¹ --- #### è°ƒç”¨Windowsç¨‹åº import win32api path = \u0026#39;D:/.../dockerTrader/gateway/ctpGateway/CTP_connect.json\u0026#39; win32api.ShellExecute(0, \u0026#39;open\u0026#39;, \u0026#39;notepad.exe\u0026#39;, path, \u0026#39;\u0026#39;, 1) # ä½¿ç”¨è®°äº‹æœ¬æ‰“å¼€æ­¤æ–‡ä»¶ --- #### Json with open(\u0026#39;D:/.../dockerTrader/gateway/ctpGateway/CTP_connect.json\u0026#39;, \u0026#39;r\u0026#39;) as f: setting = json.load(f) self.userID = str(setting[\u0026#39;userID\u0026#39;]) self.password = str(setting[\u0026#39;password\u0026#39;]) --- --- ### ä¿¡å·æ§½ï¼ˆä¼ è¾“é¢å¤–å‚æ•°ï¼‰ ä¸€èˆ¬æ¥è¯´ï¼Œæ¯”å¦‚ä¸€ä¸ªæŒ‰é’®å§ã€‚ åœ¨é“¾æ¥ç‚¹å‡»ä¿¡å·ä¸æ§½æ—¶`buttonInit[i].clicked.connect(partial(self.init, i))`å°±å®Œäº‹äº†ã€‚ç„¶è€Œï¼Œå½“å¾ªç¯åˆ›å»ºæŒ‰é’®ï¼Œå¯¹åº”åŒæ ·çš„æ§½å‡½æ•°ï¼Œåªæ˜¯éœ€è¦æ‰§è¡Œçš„å˜é‡æœ‰åŒºåˆ«æ—¶ï¼Œå°±éœ€è¦ä¼ è¾“é¢å¤–çš„å‚æ•°ã€‚ è¿™æ—¶ï¼Œæ–¹æ³•æœ‰äºŒï¼š ç¯å¢ƒï¼š python2.7.8 pyqt 4.11.1 ### ä¸€ï¼š ä½¿ç”¨lambdaè¡¨è¾¾å¼ \u0026lt;pre class=\u0026#34;prettyprint\u0026#34;\u0026gt;\u0026lt;code class=\u0026#34;language-python hljs \u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;from\u0026lt;/span\u0026gt; PyQt4.QtCore \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;import\u0026lt;/span\u0026gt; * \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;from\u0026lt;/span\u0026gt; PyQt4.QtGui \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;import\u0026lt;/span\u0026gt; * \u0026lt;span class=\u0026#34;hljs-class\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;hljs-title\u0026#34;\u0026gt;MyForm\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;hljs-params\u0026#34;\u0026gt;(QMainWindow)\u0026lt;/span\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;hljs-function\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;hljs-title\u0026#34;\u0026gt;__init__\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;hljs-params\u0026#34;\u0026gt;(self, parent=None)\u0026lt;/span\u0026gt;:\u0026lt;/span\u0026gt; super(MyForm, self).__init__(parent) button1 = QPushButton(\u0026lt;span class=\u0026#34;hljs-string\u0026#34;\u0026gt;\u0026#39;Button 1\u0026#39;\u0026lt;/span\u0026gt;) button2 = QPushButton(\u0026lt;span class=\u0026#34;hljs-string\u0026#34;\u0026gt;\u0026#39;Button 1\u0026#39;\u0026lt;/span\u0026gt;) button1.clicked.connect(\u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;lambda\u0026lt;/span\u0026gt;: self.on_button(\u0026lt;span class=\u0026#34;hljs-number\u0026#34;\u0026gt;1\u0026lt;/span\u0026gt;)) button2.clicked.connect(\u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;lambda\u0026lt;/span\u0026gt;: self.on_button(\u0026lt;span class=\u0026#34;hljs-number\u0026#34;\u0026gt;2\u0026lt;/span\u0026gt;)) layout = QHBoxLayout() layout.addWidget(button1) layout.addWidget(button2) main_frame = QWidget() main_frame.setLayout(layout) self.setCentralWidget(main_frame) \u0026lt;span class=\u0026#34;hljs-function\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;hljs-title\u0026#34;\u0026gt;on_button\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;hljs-params\u0026#34;\u0026gt;(self, n)\u0026lt;/span\u0026gt;:\u0026lt;/span\u0026gt; print(\u0026lt;span class=\u0026#34;hljs-string\u0026#34;\u0026gt;\u0026#39;Button {0} clicked\u0026#39;\u0026lt;/span\u0026gt;.format(n)) \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;if\u0026lt;/span\u0026gt; __name__ == \u0026lt;span class=\u0026#34;hljs-string\u0026#34;\u0026gt;\u0026#34;__main__\u0026#34;\u0026lt;/span\u0026gt;: \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;import\u0026lt;/span\u0026gt; sys app = QApplication(sys.argv) form = MyForm() form.show() app.exec_() \u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt; \u0026lt;p\u0026gt;è§£é‡Šä¸€ä¸‹ï¼Œon_buttonæ˜¯æ€æ ·å¤„ç†ä»ä¸¤ä¸ªæŒ‰é’®ä¼ æ¥çš„ä¿¡å·ã€‚æˆ‘ä»¬ä½¿ç”¨lambdaä¼ é€’æŒ‰é’®æ•°å­—ç»™æ§½ï¼Œä¹Ÿå¯ä»¥ä¼ é€’ä»»ä½•å…¶ä»–ä¸œè¥¿â€”ç”šè‡³æ˜¯æŒ‰é’®ç»„ä»¶æœ¬èº«ï¼ˆå‡å¦‚ï¼Œæ§½æ‰“ç®—æŠŠä¼ é€’ä¿¡å·çš„æŒ‰é’®ä¿®æ”¹ä¸ºä¸å¯ç”¨ï¼‰\u0026lt;/p\u0026gt; ### äºŒï¼š ä½¿ç”¨functoolsé‡Œçš„partialå‡½æ•° \u0026lt;pre class=\u0026#34;prettyprint\u0026#34;\u0026gt;\u0026lt;code class=\u0026#34;language-python hljs \u0026#34;\u0026gt;button1.clicked.connect(partial(self.on_button, \u0026lt;span class=\u0026#34;hljs-number\u0026#34;\u0026gt;1\u0026lt;/span\u0026gt;)) button2.clicked.connect(partial(self.on_button, \u0026lt;span class=\u0026#34;hljs-number\u0026#34;\u0026gt;2\u0026lt;/span\u0026gt;)) \u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt; \u0026lt;p\u0026gt;ã€ŠRapid GUI Program with Python and QTã€‹ P143ä¾‹å­ã€‚\u0026lt;/p\u0026gt; \u0026lt;pre class=\u0026#34;prettyprint\u0026#34;\u0026gt;\u0026lt;code class=\u0026#34;language-python hljs \u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;from\u0026lt;/span\u0026gt; PyQt4.QtCore \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;import\u0026lt;/span\u0026gt; * \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;from\u0026lt;/span\u0026gt; PyQt4.QtGui \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;import\u0026lt;/span\u0026gt; * \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;from\u0026lt;/span\u0026gt; functools \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;import\u0026lt;/span\u0026gt; partial \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;import\u0026lt;/span\u0026gt; sys \u0026lt;span class=\u0026#34;hljs-class\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;class\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;hljs-title\u0026#34;\u0026gt;Bu1\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;hljs-params\u0026#34;\u0026gt;(QWidget)\u0026lt;/span\u0026gt;:\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;hljs-function\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;hljs-title\u0026#34;\u0026gt;__init__\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;hljs-params\u0026#34;\u0026gt;(self, parent=None)\u0026lt;/span\u0026gt;:\u0026lt;/span\u0026gt; super(Bu1, self).__init__(parent) \u0026lt;span class=\u0026#34;hljs-comment\u0026#34;\u0026gt;#æ°´å¹³ç›’å¼å¸ƒå±€ \u0026lt;/span\u0026gt; layout = QHBoxLayout() \u0026lt;span class=\u0026#34;hljs-comment\u0026#34;\u0026gt;#æ˜¾ç¤º \u0026lt;/span\u0026gt; self.lbl = QLabel(\u0026lt;span class=\u0026#34;hljs-string\u0026#34;\u0026gt;\u0026#39;no button is pressed\u0026#39;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026#34;hljs-comment\u0026#34;\u0026gt;#å¾ªç¯5ä¸ªæŒ‰é’® \u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;for\u0026lt;/span\u0026gt; i \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;in\u0026lt;/span\u0026gt; range(\u0026lt;span class=\u0026#34;hljs-number\u0026#34;\u0026gt;5\u0026lt;/span\u0026gt;): but = QPushButton(str(i)) layout.addWidget(but) \u0026lt;span class=\u0026#34;hljs-comment\u0026#34;\u0026gt;#ä¿¡å·å’Œæ§½è¿æ¥ \u0026lt;/span\u0026gt; but.clicked.connect(self.cliked) \u0026lt;span class=\u0026#34;hljs-comment\u0026#34;\u0026gt;#ä½¿ç”¨å°è£…ï¼Œlambda \u0026lt;/span\u0026gt; but = QPushButton(\u0026lt;span class=\u0026#34;hljs-string\u0026#34;\u0026gt;\u0026#39;5\u0026#39;\u0026lt;/span\u0026gt;) layout.addWidget(but) but.clicked.connect(\u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;lambda\u0026lt;/span\u0026gt;: self.on_click(\u0026lt;span class=\u0026#34;hljs-string\u0026#34;\u0026gt;\u0026#39;5\u0026#39;\u0026lt;/span\u0026gt;)) \u0026lt;span class=\u0026#34;hljs-comment\u0026#34;\u0026gt;#ä½¿ç”¨ä¸ªwhoå˜é‡ï¼Œç»“æœä¸æ­£å¸¸ï¼Œæ˜¾ç¤º False is pressed \u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;hljs-comment\u0026#34;\u0026gt;#but.clicked.connect(lambda who=\u0026#34;5\u0026#34;: self.on_click(who)) \u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;hljs-comment\u0026#34;\u0026gt;#ä½¿ç”¨å°è£…ï¼Œpartialå‡½æ•° \u0026lt;/span\u0026gt; but = QPushButton(\u0026lt;span class=\u0026#34;hljs-string\u0026#34;\u0026gt;\u0026#39;6\u0026#39;\u0026lt;/span\u0026gt;) layout.addWidget(but) but.clicked.connect(partial(self.on_click, \u0026lt;span class=\u0026#34;hljs-string\u0026#34;\u0026gt;\u0026#39;6\u0026#39;\u0026lt;/span\u0026gt;)) layout.addWidget(self.lbl) \u0026lt;span class=\u0026#34;hljs-comment\u0026#34;\u0026gt;#è®¾ç½®å¸ƒå±€ \u0026lt;/span\u0026gt; self.setLayout(layout) \u0026lt;span class=\u0026#34;hljs-comment\u0026#34;\u0026gt;#ä¼ é€’é¢å¤–å‚æ•° \u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;hljs-function\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;hljs-title\u0026#34;\u0026gt;cliked\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;hljs-params\u0026#34;\u0026gt;(self)\u0026lt;/span\u0026gt;:\u0026lt;/span\u0026gt; bu = self.sender() \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;if\u0026lt;/span\u0026gt; isinstance(bu, QPushButton): self.lbl.setText(\u0026lt;span class=\u0026#34;hljs-string\u0026#34;\u0026gt;\u0026#39;%s is pressed\u0026#39;\u0026lt;/span\u0026gt; % bu.text()) \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;else\u0026lt;/span\u0026gt;: self.lbl.setText(\u0026lt;span class=\u0026#34;hljs-string\u0026#34;\u0026gt;\u0026#39;no effect\u0026#39;\u0026lt;/span\u0026gt;) \u0026lt;span class=\u0026#34;hljs-function\u0026#34;\u0026gt;\u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;def\u0026lt;/span\u0026gt; \u0026lt;span class=\u0026#34;hljs-title\u0026#34;\u0026gt;on_click\u0026lt;/span\u0026gt;\u0026lt;span class=\u0026#34;hljs-params\u0026#34;\u0026gt;(self, n)\u0026lt;/span\u0026gt;:\u0026lt;/span\u0026gt; self.lbl.setText(\u0026lt;span class=\u0026#34;hljs-string\u0026#34;\u0026gt;\u0026#39;%s is pressed\u0026#39;\u0026lt;/span\u0026gt; % n) \u0026lt;span class=\u0026#34;hljs-keyword\u0026#34;\u0026gt;if\u0026lt;/span\u0026gt; __name__ == \u0026lt;span class=\u0026#34;hljs-string\u0026#34;\u0026gt;\u0026#39;__main__\u0026#39;\u0026lt;/span\u0026gt;: app = QApplication(sys.argv) bu =Bu1() bu.show() app.exec_() \u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt; ä¸‰ï¼šæ„Ÿè°¢[æ¥æº](http://blog.csdn.net/fengyu09/article/details/39498777) --- ### ## PyQt + echartså›¾è¡¨ echartsç»˜åˆ¶å›¾æ ‡ä¼šåœ¨æœ¬åœ°ä¿å­˜ä¸€ä¸ª`html`æ–‡ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨`PyQt`å°†ä¹‹ä½œä¸ºä¸€ä¸ªç½‘é¡µé¡µé¢åŠ è½½å³å¯ï¼š from PyQt4.QtWebKit import * from PyQt4.QtGui import * from PyQt4.QtCore import * from pyecharts import Kline, Page def creat_charts(): page = Page() chart_init = { \u0026#34;width\u0026#34;: 1600, \u0026#34;height\u0026#34;: 900, } chart = Kline(\u0026#34;K çº¿å›¾\u0026#34;, **chart_init) chart.add(\u0026#34;æ—¥K\u0026#34;, [\u0026#34;2017/7/{}\u0026#34;.format(i + 1) for i in range(31)], v1) page.add(chart) return page creat_charts()_render() # ç”Ÿæˆ`render.html`æ–‡ä»¶ self.view = QWebView() self.create_charts().render() url = QUrl(\u0026#34;render.html\u0026#34;) # éœ€è¦åŠ è½½`QUrl`ä½¿ç”¨å­—ç¬¦ä¸²è½¬åŒ– self.view.load(url) ## addWidget åœ¨çª—å£å¸ƒå±€çš„æ—¶å€™è¿™ç©æ„è‡³å…³é‡è¦ï¼Œå› ä¸ºè¦å…ˆåˆ›å»ºä¸€ä¸ªæ¡†æ¶ï¼Œå†å¾€é‡Œé¢å¡ä¸œè¥¿ã€‚è€Œå¡çš„æ–¹æ³•å°±æ˜¯`addWidget`ã€‚æ‰€ä»¥ç®€å•è®°å½•ä¸€ä¸‹å°å¹´è¿™ä¸€å¤©ç»å¸¸ç”¨åˆ°çš„ç¯å¥—ï¼š hbox = QtGui.QHBoxLayout() vbox = QtGui.QVBoxLayout() å¯ä»¥é€šè¿‡`addWidget`æ¥å¡å…¥`QtGui.QWidget`, `QtGui.QGroupBox`, `QtGui.QTableWidget` ,`QScrollArea`ç­‰ è¿˜å¯ä»¥`addWidget`è¯¸å¦‚`QtGui.QPushButton`, `QtGui.QLabel`, `QtGui.QComboBox`, `QtGui.QLineEdit`ç­‰å°éƒ¨ä»¶ `hbox`å’Œ`vbox`å¯ä»¥é€šè¿‡`addLayout`äº’ç›¸æ·»åŠ ï¼ˆè¿™ä¸¤ä¸ªæ˜¯ æ¡†æ¶ï¼Œå³é¡µé¢ä¸Šçš„â€œéª¨å¤´â€ã€‚æ¥æ‘†è®¾â€œè‚Œè‚‰â€-\u0026gt;â€œWidgetâ€ã€\u0026#34;Box\u0026#34;ç­‰çš„ï¼‰ å½“ç„¶æœ€åè¦æ˜¾ç¤ºè°ï¼Œéœ€è¦`self.setLayout(hbox)` è€Œæ”¯æŒ`setLayout`å°‘ä¸äº†æœ‰ `QWidget`,`QScrollArea`, æ‰€ä»¥å®ƒä»¬å¥½åƒèƒ½å¤Ÿæ— é™äº’ç›¸å¥—ä¸‹å»â€¦ ### å°éƒ¨ä»¶çš„æ–¹æ³• å…¶å®å“ªäº›æ–¹æ³•ä¹Ÿä¸ç”¨è®°â€¦æ‰“å¼€`QtDesigner`ç›´æ¥æœç´¢æ‹–æ‹½ï¼Œç„¶åçœ‹å³è¾¹çš„æ¸…å•å°±è¡Œäº†ï¼Œä½†è¿™å‡ ä¸ªè¿˜æ˜¯è®°å½•ä¸‹æ¥å§ï¼Œåœ¨ç½‘ä¸Šæ‰¾å¤ªç´¯äº†~ `QtGui.QComboBox`: `addItems`, \u0026#39;\u0026#39;\u0026#39;addItem`, `currentText` `QtGui.QSpinBox`: `setValue`, ### QString2String def QString2PyString(self, qStr): #QStringï¼Œå¦‚æœå†…å®¹æ˜¯ä¸­æ–‡ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ä¼šæœ‰é—®é¢˜ï¼Œè¦è½¬æ¢æˆ python #string return unicode(qStr.toUtf8(), \u0026#39;utf-8\u0026#39;, \u0026#39;ignore\u0026#39;) ## QLineEdit ä¹‹æ‰€ä»¥æ”¾è¿™ä¹ˆåé¢æ˜¯å› ä¸ºæˆ‘è§‰å¾—è¿™ä¸œè¥¿æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªè¾“å…¥æ¡†å˜›ï¼Œä½†å› ä¸ºå‡ºç°åœ¨åé¢æ‰€ä»¥è¯´æ˜¯ç°åœ¨å‘ç°äº†å…¶ä¸­æœ‰è¶£çš„ä¸œè¥¿ã€‚é‚£å°±æ˜¯æœ€è¿‘åœ¨åšè¾“å…¥å¯†ç çš„æ—¶å€™æƒ³è¦é™åˆ¶ï¼Œä½†åœ¨ç¨‹åºä¸­å»åˆ¤æ–­æ˜¾ç„¶å¹¶ä¸æ˜¯ä»€ä¹ˆæœ‰æ„æ€çš„äº‹æƒ…ã€‚ç„¶åæƒ³èµ·æ¥è¾“å…¥çš„æ—¶å€™å¯ä»¥ç›´æ¥é™åˆ¶ä½å•Šã€‚äºæ˜¯é‡‡ç”¨äº†`textChanged`å»`connect`ä¸€ä¸ªå‡½æ•°ï¼Œæ¥åŠ¨æ€ç›‘æµ‹è¾“å…¥ã€‚ä½†åœ¨è°ƒè¯•ä¸­æ‰“å¼€é”™äº†çª—å£æ‰€ä»¥ä»¥ä¸ºæ²¡æœ‰ç”¨å°±æ‰¾äº†å…¶ä»–çš„æ–¹æ³•ã€‚é‚£å°±æ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™ç›´æ¥å¡æ­»ï¼Œç»“æœæ²¡æœ‰æ‰¾åˆ°è®¾ç½®é•¿åº¦çš„.set***ä½†æ‰¾åˆ°äº†ç°ç”¨çš„`setValidator`å…¶é…åˆæ­£åˆ™è¡¨è¾¾å¼çš„é£Ÿç”¨æ–¹æ³•å¦‚ä¸‹ï¼š import re a = QtCore.QRegExp(\u0026#34;[A-Za-z]{0,5}[1-9][0-9]{0,5}\u0026#34;) a = QtCore.QRegExp(\u0026#34;[a-zA-Z0-9]{0,12}$\u0026#34;) self.txtPasswd.setValidator(QtGui.QRegExpValidator(a)) # emm,å¾ˆæ˜¾ç„¶ï¼ŒæŠŠaæ›¿æ¢æˆlimitRuleå°±è¦é¡ºçœ¼ä¸€äº›äº†ã€‚ ä¸è¿‡\u0026lt;font color=#ff3bffl9\u0026gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š\u0026lt;/font\u0026gt;å¦‚æœç”¨`setText`å°†å…¶å®ƒå­—ç¬¦å†™è¿›è¿™ä¸ªç¼–è¾‘å°æ¡†æ¡†ä¸­çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¡†æ¡†çš„è§„åˆ™å°±ä¼šè¢«æ‰“ç ´ç„¶åéšä¾¿å†™ã€‚ä½†è¦æ˜¯`setText`çš„å†…å®¹æ²¡æœ‰è¶…å‡ºæ‰€è§„å®šçš„å½¢å¼ä¹‹å¤–çš„è¯ï¼Œé‚£ä¹ˆè§„åˆ™ç…§æ—§ï¼Œä¾ç„¶æ‰§è¡Œã€‚ # PyQtGraph: [Link](http://www.pyqtgraph.org/) import pyqtgraph.examples pyqtgraph.examples.run() "},{"id":131,"href":"/docs/programmer/langs/java/notesjava/","title":"æ„‰å¿«çš„Java(happy to learn the fuck java)","section":"ç¼–ç¨‹è¯­è¨€","content":"author: Ian\nhappy to learn the fuck java ğŸ˜… # \u0026lt;å¾®äººäº‹\u0026gt; ç¬”è®° -\u0026gt; Ïˆ(._. )\u0026gt; # å…ˆè´´å®˜æ–¹æ–‡æ¡£ å“¦ è¿˜æœ‰å®˜æ–¹é¡¹ç›®åœ°å€\nJavaè¯­æ³• # çˆªå“‡æ–¹æ³•å®šä¹‰: # ä¿®é¥°ç¬¦ è¿”å›å€¼ç±»å‹ æ–¹æ³•å(å‚æ•°ç±»å‹ å‚æ•°å){ æ–¹æ³•ä½“; return è¿”å›å€¼; } # ç¤ºä¸ªä¾‹ public boolean NiHou(int num){ int a = num; return turn; } // `boolean` å¤„ å¯ä¸º public Collection\u0026lt;? extends GrantedAuthority\u0026gt; getAuthorities(){ List\u0026lt;GrantedAuthority\u0026gt; authorities = new ArrayList\u0026lt;\u0026gt;(); return authorities; } // è¡¨æ³›å‹ä¸­å¯ä»¥æ˜¯çš„`GrantedAuthority`æ‰€æœ‰å­ç±» çˆªå“‡æŠ½è±¡æ–¹æ³•(å³Pythonçˆ¶ç±»ä¸­ç›´æ¥passçš„å‡½æ•°â€¦) # abstract\nåŒ…å«æŠ½è±¡æ–¹æ³•å¿…é¡»å¾—æ˜¯æŠ½è±¡ç±» ä»»ä½•å­ç±»å¿…é¡»é‡å†™çˆ¶ç±»æŠ½è±¡æ–¹æ³•ï¼Œæˆ–è€…å£°æ˜è‡ªèº«ä¸ºæŠ½è±¡ç±» public abstract class Employee { private String name; private int number; public abstract double computePay(); //å…¶ä½™ } çˆªå“‡æ¥å£ # interface, implements\n[å¯è§åº¦] interface æ¥å£åç§° [extends å…¶ä»–çš„ç±»å] { // å£°æ˜å˜é‡ // æŠ½è±¡æ–¹æ³• } # ç¤ºä¸ªä¾‹ /* æ–‡ä»¶å : NameOfInterface.java */ public interface NameOfInterface { //ä»»ä½•ç±»å‹ final, static å­—æ®µ //æŠ½è±¡æ–¹æ³• } Interfaceå…³é”®å­—ç”¨æ¥å£°æ˜ä¸€ä¸ªæ¥å£ã€‚ çˆªå“‡æŠ½è±¡ç±» # abstract classextends\nä¸èƒ½ç›´æ¥å®ä¾‹åŒ– åªèƒ½è¢«ç»§æ‰¿åå®ä¾‹ public abstract class Employee { private String name; private String address; private int number; public Employee(String name, String address, int number) { System.out.println(\u0026#34;Constructing an Employee\u0026#34;); this.name = name; this.address = address; this.number = number; } //â€¦â€¦ ç­‰æ–¹æ³• public int getNumber() { return number; } } /* æ–‡ä»¶å : Salary.java */ // ç”¨äºç»§æ‰¿ä¸Šè¿°ä¸œè¥¿ public class Salary extends Employee { private double salary; //Annual salary public Salary(String name, String address, int number, double salary) { super(name, address, number); setSalary(salary); } public void mailCheck() { System.out.println(\u0026#34;Within mailCheck of Salary class \u0026#34;); System.out.println(\u0026#34;Mailing check to \u0026#34; + getName() + \u0026#34; with salary \u0026#34; + salary); } public double getSalary() { return salary; } public void setSalary(double newSalary) { if(newSalary \u0026gt;= 0.0) { salary = newSalary; } } public double computePay() { System.out.println(\u0026#34;Computing salary pay for \u0026#34; + getName()); return salary/52; } } /* æ–‡ä»¶å : AbstractDemo.java */ // ç”¨äºå®ç°ç»§æ‰¿ç±» public class AbstractDemo { public static void main(String [] args) { Salary s = new Salary(\u0026#34;Mohd Mohtashim\u0026#34;, \u0026#34;Ambehta, UP\u0026#34;, 3, 3600.00); Employee e = new Salary(\u0026#34;John Adams\u0026#34;, \u0026#34;Boston, MA\u0026#34;, 2, 2400.00); System.out.println(\u0026#34;Call mailCheck using Salary reference --\u0026#34;); s.mailCheck(); System.out.println(\u0026#34;\\n Call mailCheck using Employee reference--\u0026#34;); e.mailCheck(); } } çˆªå“‡ç±» # class, extends\nMaven é¡¹ç›®æ ‡å‡†ç›®å½•ç»“æ„ # str |\tmain |\tbin\tè„šæœ¬åº“ |\tjava Javaæºä»£ç æ–‡ä»¶ |\tresources èµ„æºåº“ï¼Œä¼šè‡ªåŠ¨å¤åˆ¶åˆ°classesç›®å½•ä¸­ |\tfilters èµ„æºè¿‡æ»¤æ–‡ä»¶ |\tassembly ç»„å»ºçš„æè¿°é…ç½®ï¼ˆå¦‚ä½•æ‰“åŒ…ï¼‰ |\tconfig é…ç½®æ–‡ä»¶ |\twebapp webåº”ç”¨çš„ç›®å½•ã€‚WEB-INFã€cssã€jsç­‰ |\ttest |\tjava å•å…ƒæµ‹è¯•Javaæºä»£ç æ–‡ä»¶ |\tresorces æµ‹è¯•éœ€è¦ç”¨åˆ°çš„èµ„æºåº“ |\tfilters æµ‹è¯•èµ„æºè¿‡æ»¤åº“ |\tsite Siteï¼ˆä¸€äº›æ–‡æ¡£ï¼‰ |\ttarget LICENSE.txt Project\u0026rsquo;s license README.txt Project\u0026rsquo;s readme\nå·¥ç¨‹æ ¹ç›®å½•ä¸‹å°±åªæœ‰srcå’Œtargetä¸¤ä¸ªç›®å½• targetæ˜¯æœ‰å­˜æ”¾é¡¹ç›®æ„å»ºåçš„æ–‡ä»¶å’Œç›®å½•ï¼ŒjaråŒ…ã€waråŒ…ã€ç¼–è¯‘çš„classæ–‡ä»¶ç­‰ã€‚ targeté‡Œçš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯mavenæ„å»ºçš„æ—¶å€™ç”Ÿæˆçš„\né¡¶çº§ç›®å½•å·¥ç¨‹çš„æè¿°æ–‡ä»¶pom.xml\næ‘˜è‡ª: https://blog.csdn.net/lengyue_wy/article/details/6718637\nsrc # java # Bean: æ‰®æ¼”åº”ç”¨ç¨‹åºç´ æçš„è§’è‰²ï¼ˆå…¶ä¸­æ”¾ç½®äº†å„ç§è‡ªå®šä¹‰ç±» å¦‚ï¼šHrã€Roleã€Employeeã€menuç­‰æ•°æ®ç±»å‹ï¼‰ï¼ˆä½œä¸ºserviceçš„æ¨¡å‹åº“ï¼‰ common: å¸¸ç”¨æ–¹æ³• ï¼ˆå¦‚å­—ç¬¦ä¸²è½¬æ¢ã€é‚®ä»¶ã€å‡ ä¸ªæŸ¥è¯¢ï¼‰ config: çœ‹ä¸æ‡‚çš„è®¾ç½® controller: åŠ¨ä½œæ‰§è¡Œï¼Œå³å—åˆ°ä»€ä¹ˆè¯·æ±‚æ‰§è¡Œä»€ä¹ˆåŠ¨ä½œã€‚ ä½†æ˜¯æˆ‘æ‰“äº†æ–­ç‚¹é²œæœ‰è¿›æ¥çš„ã€‚æ‰€ä»¥å…·ä½“å®ç°è¿‡ç¨‹è¿˜æ˜¯ä¸æ¸…æ¥šã€‚ å¦å¤–å…¶urlåœ°å€ä¸ç½‘é¡µçœŸæ­£è¾“å…¥åœ°å€æœ‰å…¨æ‹¼ç®€å†™çš„åŒºåˆ«ï¼Œå“ªé‡Œæœ‰æŒ‡å®šä¹Ÿæ²¡æ‰¾åˆ°è¿˜ã€‚ï¼ˆå¹¶ä¸”å¯¥å¯¥è‰è‰ä¸€ä¸ªå°±å¤„ç†å®Œäº†ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯ç®€å†™äº†ğŸ’©ï¼‰ exception: å¼‚å¸¸å¤„ç† mapper: è™½ä¸è§‰ç„¶æ˜å‰çš„ä¸œè¥¿é›†åˆ_20180525_å…¶ä¸­å®šä¹‰äº†è¯¸å¤šåšå®äº‹çš„æ¥å£ï¼Œåœ¨.javaæ–‡ä»¶ä¸­ç”»é¥¼ï¼Œåœ¨.xmlä¸­å®ç°ï¼Œå¦å¤–æ˜¨å¤©åœ¨æŸ¥èµ„æ–™æ—¶ï¼Œè¿˜äº†è§£åˆ°æœ‰äººè¦å°†.javaä¸.xmlåˆ†å¼€æ¥å­˜æ”¾ï¼Œè§£å†³æ–¹æ³•æ˜¯å°†.xmlæ”¾åœ¨resourcesæ–‡ä»¶å¤¹ä¸­ï¼Œä»¿ç…§åœ¨javaæ–‡ä»¶å¤¹ä¸­çš„è·¯å¾„ï¼Œä¾ç“¢è‘«èŠ¦ç”»ğŸ˜„çš„å»ºç«‹ç›¸åŒè·¯å¾„ï¼Œå¦‚æ­¤ä¸€æ¥åœ¨codingé˜¶æ®µçœ‹èµ·æ¥æ˜¯åˆ†å¼€çš„ï¼Œä½†åœ¨buildingé˜¶æ®µç¼–è¯‘å™¨å°±æ˜¯çœ‹ä½œåœ¨åŒä¸€ç›®å½•ä¸‹äº†â€”â€”ç”±æ­¤å¼•å‘äº†è™½ç„¶æ‹†å¼€äº†ä»–ä»¬çš„äººï¼Œå´æ²¡æœ‰æ‹†æ•£ä»–ä»¬çš„å¿ƒçš„å“²å­¦è®ºé¢˜ğŸ˜°(ä½œä¸ºserviceçš„æ–¹æ³•åº“) service: åŠ¨ä½œé€»è¾‘æœåŠ¡ï¼Œå’Œcontrollerä¸­ç±»ä¼¼ï¼Œä¸è¿‡è¯¦ç»†ä¸å°‘ï¼ˆä½œä¸ºï¼‰\nresources # ftl: emmâ€¦â€¦ static: é™æ€èµ„æº js: emmâ€¦ application.properties: å„é¡¹é…ç½® mybatis-config.xml: MySQLæ•°æ®åº“é…ç½®\nMybatis # å¤´ # \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt; \u0026lt;!DOCTYPE configuration PUBLIC \u0026#34;-//mybatis.org//DTD Config 3.0//EN\u0026#34; \u0026#34;http://mybatis.org/dtd/mybatis-3-config.dtd\u0026#34;\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;/configuration\u0026gt; configurationä¸­çš„é…ç½®ä¿¡æ¯ # è¯¦è§£ï¼š https://blog.csdn.net/yqynsmile/article/details/52807815\n// åˆ«åï¼Œå‡åï¼Œä»£ç§° \u0026lt;typeAliases\u0026gt; \u0026lt;typeAlias alias=\u0026#34;Student\u0026#34; type=\u0026#34;com.mybatis3.domain.Student\u0026#34; /\u0026gt; \u0026lt;/typeAliases\u0026gt; // å£°æ˜ç¯å¢ƒå˜é‡ \u0026lt;environments default=\u0026#34;development\u0026#34;\u0026gt; \u0026lt;environment id=\u0026#34;development\u0026#34;\u0026gt; /* å£°æ˜æ•°æ®æºï¼Œæ•°æ®æºçš„ç±»å‹æœ‰NOPOOLED ï¼ŒPOOLED ï¼Œè¿˜æœ‰JIDN. åœ¨æ•°æ®é‡å°‘çš„è¯ç”¨ONPOOLEDï¼Œæµ‹è¯•å’Œå¼€å‘è¿‡ç¨‹ä¸€èˆ¬ç”¨POOLEDï¼Œå®é™…è¿è¡Œä½¿ç”¨JIDN */ \u0026lt;dataSource type=\u0026#34;POOLED\u0026#34;\u0026gt; // \u0026lt;mappers\u0026gt;ï¼šå£°æ˜æˆ‘ä»¬å®šä¹‰çš„ä¸€ä¸ªä¸ªMapperç±»ï¼Œæˆ–è€…è¯´æ˜¯å…³è” \u0026lt;mapper resource=\u0026#34;com/mybatis3/mappers/StudentMapper.xml\u0026#34; /\u0026gt; // \u0026lt;property\u0026gt;ï¼šjdbcè¿æ¥çš„ä¸€äº›å±æ€§ \u0026lt;property name=\u0026#34;driver\u0026#34; value=\u0026#34;com.mysql.jdbc.Driver\u0026#34; /\u0026gt; \u0026lt;property name=\u0026#34;url\u0026#34; value=\u0026#34;jdbc:mysql://localhost:3306/test\u0026#34; /\u0026gt; \u0026lt;property name=\u0026#34;username\u0026#34; value=\u0026#34;root\u0026#34; /\u0026gt; \u0026lt;property name=\u0026#34;password\u0026#34; value=\u0026#34;admin\u0026#34; /\u0026gt; /* è¿™äº›ä¸œè¥¿è²Œä¼¼ä¹Ÿå¯ä»¥å†™åœ¨å…¶ä»–åœ°æ–¹ï¼šapplicationä¸­ \u0026lt;property name=\u0026#34;url\u0026#34;\u0026gt; \u0026lt;value\u0026gt;jdbc:mysql://localhost:3306/springmybaitis?useUnicode=true\u0026amp;amp;characterEncoding=UTF-8\u0026lt;/value\u0026gt; \u0026lt;!--springmybaitisæ˜¯æˆ‘çš„æ•°æ®åº“ --\u0026gt; \u0026lt;/property\u0026gt; æˆ– spring.datasource.url=jdbc:mysql://127.0.0.1:3306/vhr?useUnicode=true\u0026amp;characterEncoding=UTF-8 ä¸¤ç§å†™æ³•è€Œå·² */ // \u0026lt;mapper\u0026gt;ï¼šå£°æ˜Mapperçš„è·¯å¾„ // é»˜è®¤settingé…ç½® \u0026lt;setting name=\u0026#34;cacheEnabled\u0026#34; value=\u0026#34;true\u0026#34; /\u0026gt;//æ˜¯å¦ä½¿ç”¨ç¼“å­˜ \u0026lt;setting name=\u0026#34;lazyLoadingEnabled\u0026#34; value=\u0026#34;true\u0026#34; /\u0026gt;//æ˜¯å¦æ˜¯æ‡’è®°è½½ \u0026lt;setting name=\u0026#34;multipleResultSetsEnabled\u0026#34; value=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;setting name=\u0026#34;useColumnLabel\u0026#34; value=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;setting name=\u0026#34;useGeneratedKeys\u0026#34; value=\u0026#34;false\u0026#34; /\u0026gt; \u0026lt;setting name=\u0026#34;autoMappingBehavior\u0026#34; value=\u0026#34;PARTIAL\u0026#34; /\u0026gt; \u0026lt;setting name=\u0026#34;defaultExecutorType\u0026#34; value=\u0026#34;SIMPLE\u0026#34; /\u0026gt; \u0026lt;setting name=\u0026#34;defaultStatementTimeout\u0026#34; value=\u0026#34;25000\u0026#34; /\u0026gt; \u0026lt;setting name=\u0026#34;safeRowBoundsEnabled\u0026#34; value=\u0026#34;false\u0026#34; /\u0026gt; \u0026lt;setting name=\u0026#34;mapUnderscoreToCamelCase\u0026#34; value=\u0026#34;false\u0026#34; /\u0026gt; \u0026lt;setting name=\u0026#34;localCacheScope\u0026#34; value=\u0026#34;SESSION\u0026#34; /\u0026gt; \u0026lt;setting name=\u0026#34;jdbcTypeForNull\u0026#34; value=\u0026#34;OTHER\u0026#34; /\u0026gt; \u0026lt;setting name=\u0026#34;lazyLoadTriggerMethods\u0026#34; value=\u0026#34;equals,clone,hashCode ,toString\u0026#34; /\u0026gt; è¿˜æœ‰ \u0026lt;Settings\u0026gt;:å£°æ˜ä¸€äº›å…¨å±€å˜é‡ã€\u0026lt;typeHandlers\u0026gt;: è‡ªå®šä¹‰æˆ‘ä»¬çš„ä¼ å…¥å‚æ•°ç±»å‹å¤„ç†å™¨ã€\u0026lt;properties\u0026gt;: å£°æ˜å±æ€§æ–‡ä»¶çš„keyå’Œvalueï¼Œä½†ä½¿ç”¨.propertiesæ–‡ä»¶å°†ä¼šè¢«è¦†ç›–ã€‚\næ³¨: åœ¨è¦ä½¿ç”¨æŒ‡å®šæ—¥å¿—å·¥å…·æ—¶ï¼Œéœ€è¦åœ¨\u0026lt;Settings\u0026gt;é‡ŒæŒ‡å®š\u0026lt;setting name=\u0026quot;logImpl\u0026quot; value=\u0026quot;LOG4J\u0026quot;/\u0026gt;\nequals ä¸ == # equals å¯¹æ¯”ä¸¤è€…æ˜¯å¦ç±»å‹ä¸€è‡´ï¼Œå†…å®¹ä¸€è‡´ ==\tåˆ™ä¼šç”±äº ä¸åŒå¯¹è±¡è€ŒFalse\nString str1=new String(\u0026#34;hello\u0026#34;); String str2=new String(\u0026#34;hello\u0026#34;); str1==str2 è¾“å‡ºï¼šfalse,å› ä¸ºä¸åŒå¯¹è±¡ int1.equals(int2) è¾“å‡ºï¼šTRUE // æ— è®º æ•´å½¢ or å­—ç¬¦ä¸²ç­‰ çˆªæ´¼è°ƒç”¨Python # çˆªå“‡è¯­æœ‰ä¸ªé€šç”¨è°ƒç”¨æ–¹å¼ï¼Œå°±æ˜¯é€šè¿‡Runtimeï¼Œä¹Ÿå°±æ˜¯é€šè¿‡å‘½ä»¤è¡Œæ‰§è¡Œï¼Œç„¶åé€šè¿‡BufferedReaderæ•è·å‘½ä»¤è¡Œï¼ˆå†…å­˜ï¼‰ä¸­çš„ä¿¡æ¯ã€‚ä½†æ•°æ®ä¼ è¾“åªèƒ½é€šè¿‡å­—ç¬¦ä¸²ï¼Œå¦å¤–ï¼Œpythonå›ä¼ æ•°æ®ä¹Ÿåªèƒ½é€šè¿‡printæ¥å›ä¼ ï¼Œæ‰€ä»¥â€¦â€¦åŸºæœ¬æ²¡å•¥ç”¨.\n"},{"id":132,"href":"/docs/programmer/ml/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%B8%B8%E7%94%A8%E5%BA%93%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/","title":"æœºå™¨å­¦ä¹ åº“","section":"æœºå™¨å­¦ä¹ ","content":" Python æœºå™¨å­¦ä¹ åº“ ğŸ‘½ # Plotly # ä¸matplotlib éƒ½æ˜¯ç»˜å›¾å·¥å…·ï¼Œä¸è¿‡æ•ˆæœç‚«ä¸€äº›ï¼Œæˆ‘ä¹Ÿæ²¡ç”»è¿‡ï¼Œæ‰€ä»¥åªæ”¾é“¾æ¥ï¼Œä¸æ”¾å®ä¾‹äº† Plotly Python Library : https://plot.ly/python/\nmatplotlib # import matplotlib.pyplot as plt å‚æ•°ç­‰å¤ªå¤šï¼Œé“¾æ¥æœ€å¯é  # pyplotå‚æ•°\nè¿˜æ˜¯ç²˜ä¸€äº›å¸¸ç”¨çš„ï¼š marker å±æ€§ï¼ˆä¸‹é¢å†™åœ¨åˆ†å·é‡Œå‘¦ï¼‰ o . v ^ \u0026lt; \u0026gt; 1 2 3 4 8 s p * h H + x D d | _ ä¹‹ç±»\nç”»å‡ºä¸€äº›â€œèŠ±å„¿â€\nç»˜å›¾ # plt.plot(x, y) # åœ¨yä¹‹åå¯æ·»åŠ å‚æ•°ï¼Œä¾‹å¦‚å¸¸ç”¨çš„label = â€˜IamLabelâ€™ä¹‹ç±» # çº¿çš„æ ·å¼ã€é¢œè‰² ï¼šb: blue g: green r: red c: cyan m: magenta y: yellow k: black w: white '-' : solid , '--' : dashed, '-.' : dashdot ':' : dotted ' '', ' ' ': None # ç²—ç»† lw=3 æ›´æ”¹æ•°å­— # æ•°å€¼æŠ˜ç‚¹æ˜¾ç¤ºæ ·å¼ marker = â€˜oâ€™ plot.show() ç»˜åˆ¶å›¾è¡¨ # 1 # plt.figure(1) ç»˜å›¾ plt.figure(2) ç»˜å›¾ 2ï¼ˆæœªæµ‹è¯•ï¼‰ # plt.figure(1) # åˆ›å»ºå›¾è¡¨1 plt.figure(2) # åˆ›å»ºå›¾è¡¨2 hi1 = plt.subplot(211) # åœ¨å›¾è¡¨2ä¸­åˆ›å»ºå­å›¾1 hi2 = plt.subplot(212) # åœ¨å›¾è¡¨2ä¸­åˆ›å»ºå­å›¾2 ä¸€è¡¨å¤šå›¾ # pCapital = plt.subplot(4, 1, 1) pCapital.set_ylabel(\u0026quot;capital\u0026quot;) pCapital.plot(d['capitalList'], color='r', lw=0.8) plt.show() æ ‡æ³¨ç‚¹ # eg1 # for w, m in enumerate(self.lowestPrice): if w % 120*10 == 0: plt.plot([w, w], [m, self.highestPrice[w]], linestyle = '--') #plt.scatter(self.dealPoints,color = 'c') for i in self.dealPoints: plt.scatter([i[0]], [i[1]], color = 'c') for ii in self.ydealPoints: plt.scatter([ii[0]], [ii[1]], color = 'm') plt.title('Tick \u0026amp; TradePoint') plt.legend() plt.show() plt.legend() # show() ä¹‹å‰ä¸åŠ è¿™å¥æ˜¯ä¸ä¼šæ˜¾ç¤ºå‡ºæ ‡æ³¨çš„å‘¦\neg2(è¿˜ä¸æ™“å¾—å’‹å›äº‹å„¿) # import numpy as np t = 2 * np.pi / 3 plt.plot([t, t], [0, np.cos(t)], color=\u0026#39;blue\u0026#39;, linewidth=2.5, linestyle=\u0026#34;--\u0026#34;) plt.scatter([t, ], [np.cos(t), ], 50, color=\u0026#39;blue\u0026#39;) plt.annotate(r\u0026#39;$sin(\\frac{2\\pi}{3})=\\frac{\\sqrt{3}}{2}$\u0026#39;, xy=(t, np.sin(t)), xycoords=\u0026#39;data\u0026#39;, xytext=(+10, +30), textcoords=\u0026#39;offset points\u0026#39;, fontsize=16, arrowprops=dict(arrowstyle=\u0026#34;-\u0026gt;\u0026#34;, connectionstyle=\u0026#34;arc3,rad=.2\u0026#34;)) plt.plot([t, t],[0, np.sin(t)], color=\u0026#39;red\u0026#39;, linewidth=2.5, linestyle=\u0026#34;--\u0026#34;) plt.scatter([t, ],[np.sin(t), ], 50, color=\u0026#39;red\u0026#39;) plt.annotate(r\u0026#39;$cos(\\frac{2\\pi}{3})=-\\frac{1}{2}$\u0026#39;, xy=(t, np.cos(t)), xycoords=\u0026#39;data\u0026#39;, xytext=(-90, -50), textcoords=\u0026#39;offset points\u0026#39;, fontsize=16, arrowprops=dict(arrowstyle=\u0026#34;-\u0026gt;\u0026#34;, connectionstyle=\u0026#34;arc3,rad=.2\u0026#34;)) åæ ‡æ ‡ç­¾æ˜¾ç¤ºæ–¹æ¡ˆ # plt.setp(plt.gca().get_xticklabels(), rotation=20, horizontalalignment=\u0026#39;right\u0026#39;) # è²Œä¼¼é™¤äº†è§’åº¦å’Œrightï¼Œæ²¡æœ‰äº†ä¿®æ”¹å†…å®¹ æ¥ç”»ä¸€ä¸ªåŠ¨æ€å›¾å§ï¼ˆæ„Ÿè§‰æ²¡å•¥ä½œç”¨æ‰€ä»¥å°±å°æ ‡é¢˜äº†ï¼‰ # import matplotlib.pyplot as plt from matplotlib.patches import Circle import numpy as np import math plt.close() #clf() # æ¸…å›¾ cla() # æ¸…åæ ‡è½´ close() # å…³çª—å£ fig=plt.figure() ax=fig.add_subplot(1,1,1) ax.axis(\u0026#34;equal\u0026#34;) #è®¾ç½®å›¾åƒæ˜¾ç¤ºçš„æ—¶å€™XYè½´æ¯”ä¾‹ plt.grid(True) #æ·»åŠ ç½‘æ ¼ plt.ion() #interactive mode onæ‰“å¼€äº¤äº’æ¨¡å¼ è€Œä¸æ˜¯plt.show() IniObsX=0000 IniObsY=4000 IniObsAngle=135 IniObsSpeed=10*math.sqrt(2) #ç±³/ç§’ print(\u0026#39;å¼€å§‹ä»¿çœŸ\u0026#39;) try: for t in range(180): #éšœç¢ç‰©èˆ¹åªè½¨è¿¹ obsX=IniObsX+IniObsSpeed*math.sin(IniObsAngle/180*math.pi)*t obsY=IniObsY+IniObsSpeed*math.cos(IniObsAngle/180*math.pi)*t ax.scatter(obsX,obsY,c=\u0026#39;b\u0026#39;,marker=\u0026#39;.\u0026#39;) #æ•£ç‚¹å›¾ #ax.lines.pop(1) åˆ é™¤è½¨è¿¹ #ä¸‹é¢çš„å›¾,ä¸¤èˆ¹çš„è·ç¦» plt.pause(0.1) except Exception as err: print(err) pandas # DataFrame # import pandas as pd import numpy as np a = {\u0026#39;a\u0026#39;:[\u0026#39;A\u0026#39;,\u0026#39;B\u0026#39;,\u0026#39;C\u0026#39;], \u0026#39;b\u0026#39;:[1,2,3], \u0026#39;c\u0026#39;:[\u0026#39;lo\u0026#39;, \u0026#39;hel\u0026#39;, \u0026#39;hi\u0026#39;], \u0026#39;d\u0026#39;:[7,8,9]} df = pd.DataFrame(a) # å­—å…¸è½¬æ¢ä¸ºdataFrameï¼ˆæ¯ä¸€ä¸ªKey å’Œ Valueæ„æˆä¸€åˆ—ï¼Œkeyä¸ºåˆ—æ ‡ï¼‰ df = df.set_index(\u0026#39;a\u0026#39;) # å°†â€˜aâ€˜åˆ—è®¾ç½®ä¸ºè¡Œæ ‡ sr = pd.Series(a) sr2 = df[\u0026#39;b\u0026#39;] df[[\u0026#39;b\u0026#39;,\u0026#39;c\u0026#39;]].to_records()[1][\u0026#39;b\u0026#39;] df[[\u0026#39;b\u0026#39;,\u0026#39;c\u0026#39;]] columns index # åˆ—ï¼Œå‚æ•°(è¡Œ) å–ç”¨æ–¹æ³• # dfValue.loc[indexKey][colKey] ä¸€ä¸ªå°†DataFrameå­—ç¬¦ä¸²åŒ–ä¹‹åé‡æ–°è§£æçš„ç¨‹åºğŸ˜“ # def parseSTR(self, _str, indexKey, colKey, setIndexNum=0, setColNum=0): \u0026#34;\u0026#34;\u0026#34; é€šè¿‡setIndexNumæ¥ç¡®å®šç¬¬å‡ åˆ—æ•°æ®ä¸ºè¡Œæ ‡é¢˜ï¼Œ setColNumç¡®å®šä½¿ç”¨ç¬¬å‡ è¡Œæ•°æ®ä½œä¸ºåˆ—æ ‡é¢˜ è¿”å›é€šè¿‡indexKeyè¡Œæ ‡é¢˜ ä¸ colKeyåˆ—æ ‡é¢˜ ç¡®å®šçš„ç»“æœ \u0026#34;\u0026#34;\u0026#34; rows = _str.split(\u0026#39;\\n\u0026#39;) columns = rows[0].split(\u0026#39;,\u0026#39;)[1:] tempRow = [] index = [] for row in rows[1:]: if len(row): index.append(row.split(\u0026#39;,\u0026#39;)[setIndexNum]) tempRow.append(row.split(\u0026#39;,\u0026#39;)[1:]) dfValue = pd.DataFrame(tempRow, index=index, columns=columns) try: return dfValue.loc[indexKey][colKey] except: print u\u0026#39;ã€error:ã€‘ä¿¡æ¯ä¸å…¨\u0026#39; return None Emm,æœ‰ç‚¹å„¿â€¦ å—¯â€¦ å—¯â€¦\nnumpy # random # random.seed(intç±»å‹) # ç†è§£å¯ä»¥ä¸ºè®¾å®šå¼€å§‹éšæœºçš„å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡è®¾å®šä¹‹åå†å¼€å§‹å–å€¼å°±ä¼šå¾—åˆ°ç›¸åŒçš„éšæœºæ•°() å³ np.random.seed(1)\nnp.random.random(1)\nnp.random.seed(1) np.random.random(1) array([ 0.417022])\narray([ 0.417022])\næ ‡å‡†å·® # a = np.arange(10) np.std(a) a.std() æ ·æœ¬æ ‡å‡†å·® # a.std(ddof = 1) np.std(a, ddof = 1) ä»¥ä¸Š a.std åªæœ‰å½“aä¸º\u0026lt;type \u0026rsquo;numpy.ndarray\u0026rsquo;\u0026gt; å³ç”¨numpyç”Ÿæˆçš„çŸ©é˜µï¼Œarray([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])æ‰å¯æœ‰ï¼Œå¦‚æœæ˜¯pythonçš„åˆ—è¡¨list åˆ™åªèƒ½ç”¨np.std æ¥ç®—\nscikit-learn # OpenCV # Insatll # caffeï¼š\nsudo apt-get install libprotobuf-dev libleveldb-dev libsnappy-dev libopencv-dev libhdf5-serial-dev protobuf-compiler sudo apt-get install --no-install-recommends libboost-all-dev sudo apt-get install libatlas-base-dev sudo apt-get install libgflags-dev libgoogle-glog-dev liblmdb-dev ç¼ºå°‘ libGL.so.1 # File \u0026#34;/data/apps/env/lib/python3.10/site-packages/cv2/__init__.py\u0026#34;, line 181, in \u0026lt;module\u0026gt; bootstrap() File \u0026#34;/data/apps/env/lib/python3.10/site-packages/cv2/__init__.py\u0026#34;, line 153, in bootstrap native_module = importlib.import_module(\u0026#34;cv2\u0026#34;) File \u0026#34;/usr/lib/python3.10/importlib/__init__.py\u0026#34;, line 126, in import_module return _bootstrap._gcd_import(name[level:], package, level) ImportError: libGL.so.1: cannot open shared object file: No such file or directory å®‰è£…ç¼ºå¤±åº“\nsudo apt-get install -y libgl1-mesa-glx PIL # his = im.histogram() values = {}\nfor i in range(256): values[i] = his[i]\nfor j,k in sorted(values.items(),key=lambda x:x[1],reverse = True)[:10]: print j,k\nçˆ¬è™« # å…ˆé“¾æ¥ ä¸ºå®ä¾‹è§†é¢‘æ•™ç¨‹ï¼Œè²Œä¼¼ä¸é”™ï¼Œè¿˜æ²¡çœ‹ã€‚\né—®é¢˜ # è™½ç„¶, ä»¥å‰å·²ç»ç§¯ç´¯äº†ä¸€äº›ä¸œè¥¿, çŸ¥é“\nheaders cookie å•¥çš„, ä½†ä»Šå¤©çªç„¶ç¢°åˆ°äº†è¿™ä¸ªæŠ¥é”™: Caused by SSLError(SSLError(\u0026ldquo;bad handshake: Error([(\u0026lsquo;SSL routines\u0026rsquo;, \u0026rsquo;tls_process_server_certificate\u0026rsquo;, \u0026lsquo;certificate verify failed\u0026rsquo;)])\næ²¡è§è¿‡, ä¹‹åç¢°åˆ°å…¶ä½™, ç»Ÿä¸€æ±‡æ€»åœ¨æ­¤.\nSSLError HTTPS # æœ‰äººæŒ‡ç‚¹åˆ°: å› ç”¨httpsçš„ç¼˜æ•…, å…¶ä¸­æŠ¥ verify failed æ‰€ä»¥å¯ä»¥é€šè¿‡\nrequests.get(url, verify=False) å°†verifyå…³é—­å¯é€šè¿‡.\nSelenium # ä»ç½‘é¡µç²˜æ¥çš„ï¼Œä¸‹æ–¹æœ‰ä½œè€…ä»¥åŠæ¥æºé“¾æ¥ï¼Œæ ¼å¼å°±ä¿ç•™åŸæœ‰ä¸æ”¹äº†â€¦ # browser = webdriver.Chrome() browser.get(\u0026lsquo;https://www.taobao.com/')\næ˜¾ç¤ºç­‰å¾…10s # wait = WebDriverWait(browser, 10)\nç­‰å¾…ç›´åˆ°å…ƒç´ åŠ è½½å‡º # input = wait.until(EC.presence_of_element_located((By.ID, \u0026lsquo;q\u0026rsquo;)))\nç­‰å¾…ç›´åˆ°å…ƒç´ å¯ç‚¹å‡» # button = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, \u0026lsquo;.btn-search\u0026rsquo;))) print(input, button) from selenium import webdriver from selenium.webdriver.common.by import By from selenium.webdriver.common.keys import Keys from selenium.webdriver.support import expected_conditions as EC from selenium.webdriver.support.wait import WebDriverWait\nåˆ›å»ºä¸€ä¸ªæµè§ˆå™¨å¯¹è±¡ # browser = webdriver.Chrome() try: # å¼€å¯ä¸€ä¸ªæµè§ˆå™¨å¹¶è®¿é—®https://www.baidu.com browser.get(\u0026lsquo;https://www.baidu.com\u0026rsquo;) # åœ¨æ‰“å¼€çš„ç½‘é¡µå“åº”ä¸­æ ¹æ®idæŸ¥æ‰¾å…ƒç´  è·å–åˆ°æŸ¥è¯¢æ¡† input = browser.find_element_by_id(\u0026lsquo;kw\u0026rsquo;) # å‘æŸ¥è¯¢æ¡†ä¸­è¾“å…¥Python input.send_keys(\u0026lsquo;Python\u0026rsquo;) # æ¨¡æ‹Ÿå›è½¦ input.send_keys(Keys.ENTER) # æ˜¾ç¤ºç­‰å¾…ï¼Œ ç­‰å¾…10ç§’ wait = WebDriverWait(browser, 10) # æ˜¾å¼ç­‰å¾…æŒ‡å®šæŸä¸ªæ¡ä»¶ï¼Œç„¶åè®¾ç½®æœ€é•¿ç­‰å¾…æ—¶é—´ã€‚å¦‚æœåœ¨è¿™ä¸ªæ—¶é—´è¿˜æ²¡æœ‰æ‰¾åˆ°å…ƒç´ ï¼Œé‚£ä¹ˆä¾¿ä¼šæŠ›å‡ºå¼‚å¸¸ wait.until(EC.presence_of_element_located((By.ID,\u0026lsquo;content_left\u0026rsquo;))) # è¾“å‡ºå½“å‰çš„url print(browser.current_url) # è¾“å‡ºCookies print(browser.get_cookies()) # è¾“å‡ºé¡µé¢å“åº”å†…å®¹ print(browser.page_source) finally: pass # å…³é—­æµè§ˆå™¨ browser.close()\n\u0026lt;h2\u0026gt;2ã€Seleniumå£°æ˜æµè§ˆå™¨å¯¹è±¡\u0026lt;/h2\u0026gt;\u0026lt;div class=\u0026#34;highlight\u0026#34;\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-text\u0026#34;\u0026gt;\u0026lt;span\u0026gt;\u0026lt;/span\u0026gt;from selenium import webdriver browser = webdriver.Chrome() browser = webdriver.Firefox() browser = webdriver.Edge() browser = webdriver.PhantomJS() browser = webdriver.Safari() \u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;h2\u0026gt;3ã€æŸ¥æ‰¾å…ƒç´ \u0026lt;/h2\u0026gt;\u0026lt;h2\u0026gt;3.1ã€æŸ¥æ‰¾å•ä¸ªå…ƒç´ \u0026lt;/h2\u0026gt;\u0026lt;div class=\u0026#34;highlight\u0026#34;\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-text\u0026#34;\u0026gt;\u0026lt;span\u0026gt;\u0026lt;/span\u0026gt;from selenium import webdriver #### ç”³æ˜ä¸€ä¸ªæµè§ˆå™¨å¯¹è±¡ browser = webdriver.Chrome() #### ä½¿ç”¨æµè§ˆå™¨è®¿é—®æ·˜å® browser.get(\u0026#39;https://www.taobao.com\u0026#39;) #### åœ¨å“åº”ç»“æœä¸­é€šè¿‡idæŸ¥æ‰¾å…ƒç´  input_first = browser.find_element_by_id(\u0026#39;q\u0026#39;) #### åœ¨å“åº”ç»“æœä¸­é€šè¿‡cssé€‰æ‹©å™¨æŸ¥æ‰¾å…ƒç´  input_second = browser.find_element_by_css_selector(\u0026#39;#q\u0026#39;) #### åœ¨å“åº”ç»“æœä¸­é€šè¿‡xpathæŸ¥æ‰¾å…ƒç´  input_third = browser.find_element_by_xpath(\u0026#39;//*[@id=\u0026#34;q\u0026#34;]\u0026#39;) print(input_first) print(input_second) print(input_third) browser.close() \u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;ul\u0026gt;\u0026lt;li\u0026gt;find_element_by_name é€šè¿‡nameæŸ¥æ‰¾\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;find_element_by_xpath é€šè¿‡xpathæŸ¥æ‰¾\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;find_element_by_link_text é€šè¿‡é“¾æ¥æŸ¥æ‰¾\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;find_element_by_partial_link_text é€šè¿‡éƒ¨åˆ†é“¾æ¥æŸ¥æ‰¾\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;find_element_by_tag_name é€šè¿‡æ ‡ç­¾åç§°æŸ¥æ‰¾\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;find_element_by_class_name é€šè¿‡ç±»åæŸ¥æ‰¾\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;find_element_by_css_selector é€šè¿‡cssé€‰æ‹©æ­¦å™¨æŸ¥æ‰¾\u0026lt;/li\u0026gt;\u0026lt;/ul\u0026gt;\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;div class=\u0026#34;highlight\u0026#34;\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-text\u0026#34;\u0026gt;\u0026lt;span\u0026gt;\u0026lt;/span\u0026gt;from selenium import webdriver from selenium.webdriver.common.by import By #### ç”³æ˜ä¸€ä¸ªæµè§ˆå™¨å¯¹è±¡ browser = webdriver.Chrome() #### ä½¿ç”¨æµè§ˆå™¨è®¿é—®æ·˜å® browser.get(\u0026#39;https://www.taobao.com\u0026#39;) #### ç¬¬äºŒç§æ–¹å¼ï¼Œé€šè¿‡ä½¿ç”¨By.xxxæŒ‡å®šæŸ¥æ‰¾æ–¹å¼ input = browser.find_element(By.ID,\u0026#39;q\u0026#39;) print(input) browser.close() \u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;h2\u0026gt;3.2ã€å¤šä¸ªå…ƒç´ \u0026lt;/h2\u0026gt;\u0026lt;div class=\u0026#34;highlight\u0026#34;\u0026gt;\u0026lt;pre\u0026gt;\u0026lt;code class=\u0026#34;language-text\u0026#34;\u0026gt;\u0026lt;span\u0026gt;\u0026lt;/span\u0026gt;from selenium import webdriver from selenium.webdriver.common.by import By #### ç”³æ˜ä¸€ä¸ªæµè§ˆå™¨å¯¹è±¡ browser = webdriver.Chrome() #### ä½¿ç”¨æµè§ˆå™¨è®¿é—®æ·˜å® browser.get(\u0026#39;https://www.taobao.com\u0026#39;) #### æ ¹æ®é€‰æ‹©æŸ¥æ‰¾å¤šä¸ªå…ƒç´  input_first = browser.find_elements_by_css_selector(\u0026#39;.service-bd li\u0026#39;) input_second = browser.find_elements(By.CSS_SELECTOR,\u0026#39;.service-bd li\u0026#39;) print(input_first) print(input_second) browser.close() \u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt;\u0026lt;/div\u0026gt;\u0026lt;ul\u0026gt;\u0026lt;li\u0026gt;find_elements_by_name\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;find_elements_by_xpath\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;find_elements_by_link_text\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;find_elements_by_partial_link_text\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;find_elements_by_tag_name\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;find_elements_by_class_name\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;find_elements_by_css_selector\u0026lt;/li\u0026gt;\u0026lt;/ul\u0026gt;\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt;\u0026lt;p\u0026gt;\u0026lt;br\u0026gt;\u0026lt;/p\u0026gt; ## 4ã€å…ƒç´ äº¤äº’æ“ä½œ \u0026lt;blockquote\u0026gt;å¯¹è·å–çš„å…ƒç´ è°ƒç”¨äº¤äº’æ–¹æ³• \u0026lt;/blockquote\u0026gt; ```python import time from selenium import webdriver from selenium.webdriver.common.by import By #### ç”³æ˜ä¸€ä¸ªæµè§ˆå™¨å¯¹è±¡ browser = webdriver.Chrome() #### ä½¿ç”¨æµè§ˆå™¨è®¿é—®æ·˜å® browser.get(\u0026#39;https://www.taobao.com\u0026#39;) #### æ ¹æ®IDæŸ¥æ‰¾å…ƒç´  input_search = browser.find_element(By.ID,\u0026#39;q\u0026#39;) #### æ¨¡æ‹Ÿè¾“å…¥PSVåˆ°è¾“å…¥æ¡† input_search.send_keys(\u0026#39;PSV\u0026#39;) time.sleep(2) #### æ¸…ç©ºè¾“å…¥ input_search.clear() input_search.send_keys(\u0026#39;3DS\u0026#39;) button = browser.find_element(By.CLASS_NAME,\u0026#39;btn-search\u0026#39;) #### æ¨¡æ‹Ÿç‚¹å‡» button.click() browser = webdriver.Chrome() url = \u0026lsquo;http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable' browser.get(url)\nåˆ‡æ¢idä¸ºiframeResultçš„frame # browser.switch_to.frame(\u0026lsquo;iframeResult\u0026rsquo;) source = browser.find_element_by_css_selector(\u0026rsquo;#draggable\u0026rsquo;) target = browser.find_element_by_css_selector(\u0026rsquo;#droppable\u0026rsquo;) actions = ActionChains(browser) actions.drag_and_drop(source, target) actions.perform() æ›´å¤šæ“ä½œhttp://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.common.action_chains6ã€æ‰§è¡ŒJavaScriptfrom selenium import webdriver\nç”³æ˜ä¸€ä¸ªæµè§ˆå™¨å¯¹è±¡ # browser = webdriver.Chrome() browser.get(\u0026lsquo;https://www.zhihu.com/explore')\næ‰§è¡ŒJavaScriptè„šæœ¬ # browser.execute_script(\u0026lsquo;window.scrollTo(0, document.body.scrollHeight)\u0026rsquo;) browser.execute_script(\u0026lsquo;alert(\u0026ldquo;To Bottom\u0026rdquo;)\u0026rsquo;) 7ã€è·å–å…ƒç´ ä¿¡æ¯7.1ã€è·å–å±æ€§from selenium import webdriver from selenium.webdriver.common.by import By\nç”³æ˜ä¸€ä¸ªæµè§ˆå™¨å¯¹è±¡ # browser = webdriver.Chrome() browser.get(\u0026lsquo;https://www.zhihu.com/explore') logo = browser.find_element(By.ID,\u0026lsquo;zh-top-link-logo\u0026rsquo;)\nè·å–å±æ€§ # print(logo.get_attribute(\u0026lsquo;class\u0026rsquo;)) print(logo) browser.close() 7.2ã€è·å–æ–‡æœ¬å€¼from selenium import webdriver from selenium.webdriver.common.by import By\nç”³æ˜ä¸€ä¸ªæµè§ˆå™¨å¯¹è±¡ # browser = webdriver.Chrome() browser.get(\u0026lsquo;https://www.zhihu.com/explore') submit = browser.find_element(By.ID,\u0026lsquo;zu-top-add-question\u0026rsquo;)\nè·å–æ–‡æœ¬å€¼ # print(submit.text) print(submit) browser.close() 7.3ã€è·å–IDã€ä½ç½®ã€æ ‡ç­¾åã€å¤§å°from selenium import webdriver from selenium.webdriver.common.by import By\nç”³æ˜ä¸€ä¸ªæµè§ˆå™¨å¯¹è±¡ # browser = webdriver.Chrome() browser.get(\u0026lsquo;https://www.zhihu.com/explore') submit = browser.find_element(By.ID,\u0026lsquo;zu-top-add-question\u0026rsquo;)\nè·å–id 0.04584255991652042-1 # print(submit.id)\nè·å–ä½ç½® {\u0026lsquo;y\u0026rsquo;: 7, \u0026lsquo;x\u0026rsquo;: 675} # print(submit.location)\nè·å–æ ‡ç­¾åç§° button # print(submit.tag_name)\nè·å–å¤§å° {\u0026lsquo;width\u0026rsquo;: 66, \u0026lsquo;height\u0026rsquo;: 32} # print(submit.size) browser.close() 8ã€Framefrom selenium import webdriver from selenium.common.exceptions import NoSuchElementException\nbrowser = webdriver.Chrome() url = \u0026lsquo;http://www.runoob.com/try/try.php?filename=jqueryui-api-droppable' browser.get(url)\nå°†æ“ä½œçš„å“åº”æ•°æ®æ¢æˆiframeResult # browser.switch_to.frame(\u0026lsquo;iframeResult\u0026rsquo;) source = browser.find_element_by_css_selector(\u0026rsquo;#draggable\u0026rsquo;) print(source) try: logo = browser.find_element_by_class_name(\u0026rsquo;logo\u0026rsquo;) except NoSuchElementException: print(\u0026lsquo;NO LOGO\u0026rsquo;)\nåˆ‡æ¢æˆçˆ¶å…ƒç´  # browser.switch_to.parent_frame() logo = browser.find_element_by_class_name(\u0026rsquo;logo\u0026rsquo;) print(logo) print(logo.text) 9ã€ç­‰å¾…9.1ã€éšå¼ç­‰å¾…å½“ä½¿ç”¨äº†éšå¼ç­‰å¾…æ‰§è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œå¦‚æœ WebDriveræ²¡æœ‰åœ¨ DOMä¸­æ‰¾åˆ°å…ƒç´ ï¼Œå°†ç»§ç»­ç­‰å¾…ï¼Œè¶…å‡ºè®¾å®šæ—¶é—´ååˆ™æŠ›å‡ºæ‰¾ä¸åˆ°å…ƒç´ çš„å¼‚å¸¸, æ¢å¥è¯è¯´ï¼Œå½“æŸ¥æ‰¾å…ƒç´ æˆ–å…ƒç´ å¹¶æ²¡æœ‰ç«‹å³å‡ºç°çš„æ—¶å€™ï¼Œéšå¼ç­‰å¾…å°†ç­‰å¾…ä¸€æ®µæ—¶é—´å†æŸ¥æ‰¾ DOMï¼Œé»˜è®¤çš„æ—¶é—´æ˜¯0from selenium import webdriver\nbrowser = webdriver.Chrome()\nç­‰å¾…10ç§’ # browser.implicitly_wait(10) browser.get(\u0026lsquo;https://www.zhihu.com/explore') input = browser.find_element_by_class_name(\u0026lsquo;zu-top-add-question\u0026rsquo;) print(input) 9.2ã€æ˜¾ç¤ºç­‰å¾…æ˜¾å¼ç­‰å¾…æŒ‡å®šæŸä¸ªæ¡ä»¶ï¼Œç„¶åè®¾ç½®æœ€é•¿ç­‰å¾…æ—¶é—´ã€‚å¦‚æœåœ¨è¿™ä¸ªæ—¶é—´è¿˜æ²¡æœ‰æ‰¾åˆ°å…ƒç´ ï¼Œé‚£ä¹ˆä¾¿ä¼šæŠ›å‡ºå¼‚å¸¸äº†ã€‚ from selenium import webdriver from selenium.webdriver.common.by import By from selenium.webdriver.support import expected_conditions as EC from selenium.webdriver.support.wait import WebDriverWait\nbrowser = webdriver.Chrome() browser.get(\u0026lsquo;https://www.taobao.com/')\næ˜¾ç¤ºç­‰å¾…10s # wait = WebDriverWait(browser, 10)\nç­‰å¾…ç›´åˆ°å…ƒç´ åŠ è½½å‡º # input = wait.until(EC.presence_of_element_located((By.ID, \u0026lsquo;q\u0026rsquo;)))\nç­‰å¾…ç›´åˆ°å…ƒç´ å¯ç‚¹å‡» # button = wait.until(EC.element_to_be_clickable((By.CSS_SELECTOR, \u0026lsquo;.btn-search\u0026rsquo;))) print(input, button) title_is æ ‡é¢˜æ˜¯æŸå†…å®¹title_contains æ ‡é¢˜åŒ…å«æŸå†…å®¹presence_of_element_located å…ƒç´ åŠ è½½å‡ºï¼Œä¼ å…¥å®šä½å…ƒç»„ï¼Œå¦‚(By.ID, \u0026lsquo;p\u0026rsquo;)visibility_of_element_located å…ƒç´ å¯è§ï¼Œä¼ å…¥å®šä½å…ƒç»„visibility_of å¯è§ï¼Œä¼ å…¥å…ƒç´ å¯¹è±¡presence_of_all_elements_located æ‰€æœ‰å…ƒç´ åŠ è½½å‡ºtext_to_be_present_in_element æŸä¸ªå…ƒç´ æ–‡æœ¬åŒ…å«æŸæ–‡å­—text_to_be_present_in_element_value æŸä¸ªå…ƒç´ å€¼åŒ…å«æŸæ–‡å­—frame_to_be_available_and_switch_to_it frameåŠ è½½å¹¶åˆ‡æ¢invisibility_of_element_located å…ƒç´ ä¸å¯è§element_to_be_clickable å…ƒç´ å¯ç‚¹å‡»staleness_of åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦ä»åœ¨DOMï¼Œå¯åˆ¤æ–­é¡µé¢æ˜¯å¦å·²ç»åˆ·æ–°element_to_be_selected å…ƒç´ å¯é€‰æ‹©ï¼Œä¼ å…ƒç´ å¯¹è±¡element_located_to_be_selected å…ƒç´ å¯é€‰æ‹©ï¼Œä¼ å…¥å®šä½å…ƒç»„element_selection_state_to_be ä¼ å…¥å…ƒç´ å¯¹è±¡ä»¥åŠçŠ¶æ€ï¼Œç›¸ç­‰è¿”å›Trueï¼Œå¦åˆ™è¿”å›Falseelement_located_selection_state_to_be ä¼ å…¥å®šä½å…ƒç»„ä»¥åŠçŠ¶æ€ï¼Œç›¸ç­‰è¿”å›Trueï¼Œå¦åˆ™è¿”å›Falsealert_is_present æ˜¯å¦å‡ºç°Alertæ›´å¤šæ“ä½œhttp://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.support.expected_conditions10ã€å‰è¿›åé€€import time from selenium import webdriver\nbrowser = webdriver.Chrome() browser.get(\u0026lsquo;https://www.baidu.com/') browser.get(\u0026lsquo;https://www.taobao.com/') browser.get(\u0026lsquo;https://www.python.org/') browser.back() time.sleep(1) browser.forward() browser.close() 11ã€Cookiesfrom selenium import webdriver\nbrowser = webdriver.Chrome() browser.get(\u0026lsquo;https://www.zhihu.com/explore')\nè·å¾—cookies # print(browser.get_cookies())\næ·»åŠ cookie # browser.add_cookie({\u0026rsquo;name\u0026rsquo;: \u0026rsquo;name\u0026rsquo;, \u0026lsquo;domain\u0026rsquo;: \u0026lsquo;www.zhihu.com\u0026rsquo;, \u0026lsquo;value\u0026rsquo;: \u0026lsquo;germey\u0026rsquo;}) print(browser.get_cookies())\nåˆ é™¤æ‰€æœ‰cookies # browser.delete_all_cookies() print(browser.get_cookies()) 12ã€é€‰é¡¹å¡ç®¡ç†import time from selenium import webdriver\nbrowser = webdriver.Chrome() browser.get(\u0026lsquo;https://www.baidu.com\u0026rsquo;)\næ‰“å¼€ä¸€ä¸ªé€‰é¡¹å¡ # browser.execute_script(\u0026lsquo;window.open()\u0026rsquo;) print(browser.window_handles)\né€‰æ‹©ç¬¬äºŒä¸ªé€‰é¡¹å¡ # browser.switch_to_window(browser.window_handles[1]) browser.get(\u0026lsquo;https://www.taobao.com\u0026rsquo;) time.sleep(1) browser.switch_to_window(browser.window_handles[0]) browser.get(\u0026lsquo;https://python.org\u0026rsquo;) 13ã€å¼‚å¸¸å¤„ç†\nfrom selenium import webdriver from selenium.common.exceptions import TimeoutException, NoSuchElementException browser = webdriver.Chrome() try: browser.get(\u0026#39;https://www.baidu.com\u0026#39;) except TimeoutException: print(\u0026#39;Time Out\u0026#39;) try: browser.find_element_by_id(\u0026#39;hello\u0026#39;) except NoSuchElementException: print(\u0026#39;No Element\u0026#39;) finally: browser.close() TensorFlow # Variable # å¿…é¡»ç”¨åˆ°: ```init = tf.initialize_all_variables() # åˆå§‹åŒ–å…¨éƒ¨å˜é‡\néšåå³å¯: ```sess.run(init)\nTensorflow ç¬”è®° # é€™æ˜¯åœ¨å°ç…§å®˜ç¶²å­¸ç¿’æ™‚çš„å‰æœŸå…¥é–€ç­†è¨˜ï¼Œå…¶å¯¦å’Œå®˜ç¶²åŸºæœ¬æ²’æœ‰å€åˆ¥ï¼Œå¥½å§ï¼ŒçœŸçš„æ²’æœ‰å€åˆ¥ã€‚å› çˆ²å®˜ç¶²çœŸçš„å¯«çš„å¤ªå¥½äº†ã€‚ è‡³æ–¼æˆ‘çˆ²ä»€éº¼è¦å¯«å‡ºä¾†ï¼Œæ˜¯å› çˆ²æˆ‘ä¹‹å‰å¯«åœ¨äº†ç´™ä¸Šï¼Œå°æ–¼é‚è¼¯çš„æŠŠæ¡å¾ˆçµ¦åŠ›ï¼Œæ‰€ä»¥åœ¨å¯«ä¸€é‚Šã€‚\nä¸éTensorFlow è®Šå‹•çœŸçš„å¾ˆå¤§ï¼Œç‰ˆæœ¬æ›´è¿­ä¹Ÿå¾ˆå¿«ï¼Œæ‰€ä»¥ï¼Œä¸‹æ–¹åªæ˜¯ç†æ¸…é‚è¼¯ï¼Œå…·é«”çš„æ±è¥¿é‚„æ˜¯å»å®˜ç¶²æ¯”è¼ƒå¥½ã€‚åªä¸éæˆ‘é€™å…’ç¶²è¬ä¹‹å¾ˆé›£ç­‰ä¸Šå»â€¦\nç¸½è€Œè¨€ä¹‹ä¸€å¥è©±ï¼Œå…ˆæ­å¥½æ¶å­å†é¸æ“‡å¡«å……ææ–™ã€‚å°±æ˜¯å®ƒçš„æ ¸å¿ƒé‚è¼¯äº†ã€‚è€Œæ”¹é€²ä¹Ÿæ˜¯åœ¨æ¶å­åŸºç¤ä¸Šå»å„ªåŒ–å„ªåŒ–å™¨ã€‚å—¯â€¦ç¾åœ¨ç†è§£å°±æ˜¯é€™æ¨£ã€‚\n1 # å¯¼å…¥ # import tensorflow as tf æ­¥éª¤ï¼šâ‘ æ„å»ºè®¡ç®—å›¾ â‘¡è¿è¡Œè®¡ç®—å›¾\n2 # Build a simple computational Graph # node1 = tf.contant(3.0, dtype = tf.float32) node2 = tf.contant(4.0) #also tf.float32 impicitly print (node1, node2) è¾“å‡ºä¸ºï¼š # Tensor (\u0026quot;Cast: 0\u0026quot;, shape = (), dtype = float) Tensor (\u0026quot;Cast_1: 0\u0026quot;, shape = (), dtype = float) æ‰“å°å¹¶ä¸è¾“å‡ºå€¼3.0ï¼Œ4.0ï¼Œè€Œåœ¨è¯„ä¼°æ—¶åˆ†åˆ«äº§ç”Ÿ3.0å’Œ4.0èŠ‚ç‚¹ã€‚æ¬²å®é™…è¯„ä¼°èŠ‚ç‚¹ï¼ŒWe must run the computational graph within a session. A seesion encapsulation the control and state of the tensorflow runtime.\n3 # Creates a session object , ç„¶åè°ƒç”¨runæ–¹æ³•è¿è¡Œè¶³å¤Ÿçš„computational graph to envlute node1 and node2 # sess = tf.Session() print (sess.run([node1, node2])) è¾“å‡ºä¸ºï¼š # [3.0, 4.0] #å¯è§é¢„æœŸå€¼ 4 # We can build more complicated computations by combining Tensor nodes with operations # node3 = tf.add(node1, node2) print (\u0026quot;node3: \u0026quot;, node3) print (\u0026quot;sess.run(node3):\u0026quot;, sess.run(node3)) è¾“å‡ºä¸ºï¼š # node3: Tensor(\u0026quot;Add:0\u0026quot;, shape = (1,dtype = float32)) sess.run(node3): 7.0 5 # æ›´è¿›ä¸€æ­¥çš„ï¼ŒA graph can be parameterized. To accept external input , ç§°ä¸ºplaceholders # a = tf.placeholder(tf.float32) b = tf.placeholder(tf.float32) adder_note = a + b #provide a shortcut for tf.add(a, b) and can with multiple input by using print (sess.run(add_note, {a:3, b:4.5})) print (sess.run(add_note, {a:[1, 3], b:[2, 4]})) è¾“å‡ºä¸ºï¼š # 7.5 [3. 7.] 5.1 # more complex by adding anther aperation. for example: # add_and_triple = adder_note * 3 print (sess.run(add_and_triple, {a:3, b:4.5})) è¾“å‡ºä¸ºï¼š # 22.5 In TensorBoard(Tensorflowåœ–å½¢åŒ–ç•Œé¢): å›¾ç‰‡.jpg æ˜¯ä¸‹é¢a+b```` ç„¶åè¿æ¥åˆ°adder_node ,éšåå†è¿æ¥åˆ°y(add_and_triple)```\n5.2 # That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : Variables allow us: # w = tf.Variables([ .3], dtype = tf.float32) b = tf.Variables([ - .3], dtype = tf.float32) x = tf.placeholder(tf.float32) linear_model = w * x + b #çº¿æ€§æ¨¡å‹ 6 # ä½¿ç”¨tf.constant :è°ƒç”¨ã€åˆå§‹åŒ–å¸¸æ•° ç”¨tf.Vaiables :è®Šé‡ä¸è¢«åˆå§‹åŒ–ï¼Œèª¿ç”¨æ¬²åˆå§‹åŒ–æ‰€æœ‰è®Šé‡ï¼Œå¿…é ˆcalll a special operation: # init = tf.global_variables_initializer() sess.run(init) 7 # x is a placeholder, we can evaluate lnear_model for several values of x simultaneausly as follow: # print (sess.run(linear_model, {x:[1,2,3,4]})) è¼¸å‡ºçˆ²ï¼š # [0. 0.30000001 0.60000002 0.90000004] 8 # æœ‰ä»¥ä¸Šçµæœä¸¦ä¸çŸ¥å¥½å£ï¼Œå› æ­¤ç·¨å¯«æå¤±å‡½æ•¸ï¼š # y = tf.placeholder(tf.float32) squared_deltas = tf.square(linear_model - y) #å¹³æ–¹ï¼ˆä¸‹æ–¹å·®å’Œï¼‰ loss = tf.reduce_sum(squred_deltas) #å·®å’Œï¼ˆä¸Šæ–¹å¹³æ–¹ï¼‰ print (sess.run)loss, {x:[1, 2, 3, 4], y:[0, -1, -2, -3]}) è¼¸å‡ºçˆ²ï¼š # 23.66 #æå¤±å€¼ï¼šå·®å¹³æ–¹å’Œ 8.1 # We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to tf.Variable but can be charged using operation like tf.assign # W = -1 and b = 1 are optimal parameters:(æœ€å„ªåƒæ•¸) # fixW = tf.assign(W, [-1. ]) fixb = tf.assign(b,[1. ]) sess.run(fixW, fixb) print(sess.run(loss, {x:[1, 2, 3, 4], y:[0, -1, -2, -3]})) è¼¸å‡ºçˆ²ï¼š # 0, 0 # The final print shows the loss now is zero ! 9 # æ¨¡å‹ä¿å­˜ä¸åŠ è½½ï¼š # ä¿å­˜ï¼š # saver = tf.train.Saver() # ç”Ÿæˆsaver with tf.Session() as sess: sess.run(tf.global_variables_initializer()) # å…ˆå¯¹æ¨¡å‹åˆå§‹åŒ– # ç„¶åå°†æ•°æ®ä¸¢å…¥æ¨¡å‹è¿›è¡Œè®­ç»ƒblablabla # è®­ç»ƒå®Œä»¥åï¼Œä½¿ç”¨saver.save æ¥ä¿å­˜ saver.save(sess, \u0026quot;save_path/file_name\u0026quot;) #file_nameå¦‚æœä¸å­˜åœ¨çš„è¯ï¼Œä¼šè‡ªåŠ¨åˆ›å»º åŠ è½½ï¼š # saver = tf.train.Saver() with tf.Session() as sess: #å‚æ•°å¯ä»¥è¿›è¡Œåˆå§‹åŒ–ï¼Œä¹Ÿå¯ä¸è¿›è¡Œåˆå§‹åŒ–ã€‚å³ä½¿åˆå§‹åŒ–äº†ï¼Œåˆå§‹åŒ–çš„å€¼ä¹Ÿä¼šè¢«restoreçš„å€¼ç»™è¦†ç›– sess.run(tf.global_variables_initializer()) saver.restore(sess, \u0026quot;save_path/file_name\u0026quot;) #ä¼šå°†å·²ç»ä¿å­˜çš„å˜é‡å€¼resotreåˆ° å˜é‡ä¸­ã€‚ 10 # å›¾å½¢åŒ–æ“ä½œï¼š # \u0026gt;http://blog.csdn.net/u014595019/article/details/53912710 è¿™ç¯‡å†™çš„è¿˜ä¸é”™ï¼Œç­‰ä¹‹åç”¨è¿‡ä¹‹åå†å†™ã€‚\nVariable # å¿…é¡»ç”¨åˆ°: init = tf.initialize_all_variables()\t# åˆå§‹åŒ–å…¨éƒ¨å˜é‡ éšåå³å¯: sess.run(init)\nTensorflow ç¬”è®° # é€™æ˜¯åœ¨å°ç…§å®˜ç¶²å­¸ç¿’æ™‚çš„å‰æœŸå…¥é–€ç­†è¨˜ï¼Œå…¶å¯¦å’Œå®˜ç¶²åŸºæœ¬æ²’æœ‰å€åˆ¥ï¼Œå¥½å§ï¼ŒçœŸçš„æ²’æœ‰å€åˆ¥ã€‚å› çˆ²å®˜ç¶²çœŸçš„å¯«çš„å¤ªå¥½äº†ã€‚ è‡³æ–¼æˆ‘çˆ²ä»€éº¼è¦å¯«å‡ºä¾†ï¼Œæ˜¯å› çˆ²æˆ‘ä¹‹å‰å¯«åœ¨äº†ç´™ä¸Šï¼Œå°æ–¼é‚è¼¯çš„æŠŠæ¡å¾ˆçµ¦åŠ›ï¼Œæ‰€ä»¥åœ¨å¯«ä¸€é‚Šã€‚\nä¸éTensorFlow è®Šå‹•çœŸçš„å¾ˆå¤§ï¼Œç‰ˆæœ¬æ›´è¿­ä¹Ÿå¾ˆå¿«ï¼Œæ‰€ä»¥ï¼Œä¸‹æ–¹åªæ˜¯ç†æ¸…é‚è¼¯ï¼Œå…·é«”çš„æ±è¥¿é‚„æ˜¯å»å®˜ç¶²æ¯”è¼ƒå¥½ã€‚åªä¸éæˆ‘é€™å…’ç¶²è¬ä¹‹å¾ˆé›£ç­‰ä¸Šå»â€¦\nç¸½è€Œè¨€ä¹‹ä¸€å¥è©±ï¼Œå…ˆæ­å¥½æ¶å­å†é¸æ“‡å¡«å……ææ–™ã€‚å°±æ˜¯å®ƒçš„æ ¸å¿ƒé‚è¼¯äº†ã€‚è€Œæ”¹é€²ä¹Ÿæ˜¯åœ¨æ¶å­åŸºç¤ä¸Šå»å„ªåŒ–å„ªåŒ–å™¨ã€‚å—¯â€¦ç¾åœ¨ç†è§£å°±æ˜¯é€™æ¨£ã€‚\n1 # å¯¼å…¥ # import tensorflow as tf æ­¥éª¤ï¼šâ‘ æ„å»ºè®¡ç®—å›¾\tâ‘¡è¿è¡Œè®¡ç®—å›¾\n2 # Build a simple computational Graph # node1 = tf.contant(3.0, dtype = tf.float32) node2 = tf.contant(4.0)\t#also tf.float32 impicitly print (node1, node2) è¾“å‡ºä¸ºï¼š # Tensor (\u0026quot;Cast: 0\u0026quot;, shape = (), dtype = float) Tensor (\u0026quot;Cast_1: 0\u0026quot;, shape = (), dtype = float) æ‰“å°å¹¶ä¸è¾“å‡ºå€¼3.0ï¼Œ4.0ï¼Œè€Œåœ¨è¯„ä¼°æ—¶åˆ†åˆ«äº§ç”Ÿ3.0å’Œ4.0èŠ‚ç‚¹ã€‚æ¬²å®é™…è¯„ä¼°èŠ‚ç‚¹ï¼ŒWe must run the computational graph within a session. A seesion encapsulation the control and state of the tensorflow runtime.\n3 # Creates a session object , ç„¶åè°ƒç”¨runæ–¹æ³•è¿è¡Œè¶³å¤Ÿçš„computational graph to envlute node1 and node2 # sess = tf.Session() print (sess.run([node1, node2])) è¾“å‡ºä¸ºï¼š # [3.0, 4.0]\t#å¯è§é¢„æœŸå€¼ 4 # We can build more complicated computations by combining Tensor nodes with operations # node3 = tf.add(node1, node2) print (\u0026quot;node3: \u0026quot;, node3) print (\u0026quot;sess.run(node3):\u0026quot;, sess.run(node3)) è¾“å‡ºä¸ºï¼š # node3: Tensor(\u0026quot;Add:0\u0026quot;, shape = (1,dtype = float32)) sess.run(node3): 7.0 5 # æ›´è¿›ä¸€æ­¥çš„ï¼ŒA graph can be parameterized. To accept external input , ç§°ä¸ºplaceholders # a = tf.placeholder(tf.float32) b = tf.placeholder(tf.float32) adder_note = a + b\t#provide a shortcut for tf.add(a, b) and can with multiple input by using print (sess.run(add_note, {a:3, b:4.5})) print (sess.run(add_note, {a:[1, 3], b:[2, 4]})) è¾“å‡ºä¸ºï¼š # 7.5 [3. 7.] 5.1 # more complex by adding anther aperation. for example: # add_and_triple = adder_note * 3 print (sess.run(add_and_triple, {a:3, b:4.5})) è¾“å‡ºä¸ºï¼š # 22.5 In TensorBoard(Tensorflowåœ–å½¢åŒ–ç•Œé¢): å›¾ç‰‡.jpg\tæ˜¯ä¸‹é¢a+b```` ç„¶åè¿æ¥åˆ°adder_node ,éšåå†è¿æ¥åˆ°y(add_and_triple)```\n5.2 # That a model that can take arbitary inputs:To mode the modeel trainable,need to modify the graph to get new a outputs with the some input : Variables allow us: # w = tf.Variables([ .3], dtype = tf.float32) b = tf.Variables([ - .3], dtype = tf.float32) x = tf.placeholder(tf.float32) linear_model = w * x + b\t#çº¿æ€§æ¨¡å‹ 6 # ä½¿ç”¨tf.constant :è°ƒç”¨ã€åˆå§‹åŒ–å¸¸æ•° ç”¨tf.Vaiables :è®Šé‡ä¸è¢«åˆå§‹åŒ–ï¼Œèª¿ç”¨æ¬²åˆå§‹åŒ–æ‰€æœ‰è®Šé‡ï¼Œå¿…é ˆcalll a special operation: # init = tf.global_variables_initializer() sess.run(init) 7 # x is a placeholder, we can evaluate lnear_model for several values of x simultaneausly as follow: # print (sess.run(linear_model, {x:[1,2,3,4]})) è¼¸å‡ºçˆ²ï¼š # [0. 0.30000001 0.60000002 0.90000004] 8 # æœ‰ä»¥ä¸Šçµæœä¸¦ä¸çŸ¥å¥½å£ï¼Œå› æ­¤ç·¨å¯«æå¤±å‡½æ•¸ï¼š # y = tf.placeholder(tf.float32) squared_deltas = tf.square(linear_model - y)\t#å¹³æ–¹ï¼ˆä¸‹æ–¹å·®å’Œï¼‰ loss = tf.reduce_sum(squred_deltas)\t#å·®å’Œï¼ˆä¸Šæ–¹å¹³æ–¹ï¼‰ print (sess.run)loss, {x:[1, 2, 3, 4], y:[0, -1, -2, -3]}) è¼¸å‡ºçˆ²ï¼š # 23.66\t#æå¤±å€¼ï¼šå·®å¹³æ–¹å’Œ 8.1 # We could improve this manually W,b to perfact values of -1 and 1. A variable is initializef to the value provided to tf.Variable but can be charged using operation like tf.assign # W = -1 and b = 1 are optimal parameters:(æœ€å„ªåƒæ•¸) # fixW = tf.assign(W, [-1. ]) fixb = tf.assign(b,[1. ]) sess.run(fixW, fixb) print(sess.run(loss, {x:[1, 2, 3, 4], y:[0, -1, -2, -3]})) è¼¸å‡ºçˆ²ï¼š # 0, 0 # The final print shows the loss now is zero ! 9 # æ¨¡å‹ä¿å­˜ä¸åŠ è½½ï¼š # ä¿å­˜ï¼š # saver = tf.train.Saver()\t# ç”Ÿæˆsaver with tf.Session() as sess: sess.run(tf.global_variables_initializer())\t# å…ˆå¯¹æ¨¡å‹åˆå§‹åŒ– # ç„¶åå°†æ•°æ®ä¸¢å…¥æ¨¡å‹è¿›è¡Œè®­ç»ƒblablabla # è®­ç»ƒå®Œä»¥åï¼Œä½¿ç”¨saver.save æ¥ä¿å­˜ saver.save(sess, \u0026quot;save_path/file_name\u0026quot;)\t#file_nameå¦‚æœä¸å­˜åœ¨çš„è¯ï¼Œä¼šè‡ªåŠ¨åˆ›å»º åŠ è½½ï¼š # saver = tf.train.Saver() with tf.Session() as sess:\t#å‚æ•°å¯ä»¥è¿›è¡Œåˆå§‹åŒ–ï¼Œä¹Ÿå¯ä¸è¿›è¡Œåˆå§‹åŒ–ã€‚å³ä½¿åˆå§‹åŒ–äº†ï¼Œåˆå§‹åŒ–çš„å€¼ä¹Ÿä¼šè¢«restoreçš„å€¼ç»™è¦†ç›– sess.run(tf.global_variables_initializer()) saver.restore(sess, \u0026quot;save_path/file_name\u0026quot;)\t#ä¼šå°†å·²ç»ä¿å­˜çš„å˜é‡å€¼resotreåˆ° å˜é‡ä¸­ã€‚ 10 # å›¾å½¢åŒ–æ“ä½œï¼š # \u0026lt;http://blog.csdn.net/u014595019/article/details/53912710\u0026gt; è¿™ç¯‡å†™çš„è¿˜ä¸é”™ï¼Œç­‰ä¹‹åç”¨è¿‡ä¹‹åå†å†™ã€‚\n"},{"id":133,"href":"/docs/programmer/langs/note-for-algo/","title":"ç®—æ³•","section":"ç¼–ç¨‹è¯­è¨€","content":" ç®—æ³•å›¾è§£ # åœ¨çº¿ä¹¦: https://www.hello-algo.com\nå•å‘é“¾è¡¨å®ç°å’Œåè½¬ # # å•å‘é“¾è¡¨å®ç°å’Œåè½¬ \u0026#34;\u0026#34;\u0026#34; # å½“å‰å€¼, ä¸‹ä¸€ä¸ªå€¼ # å¾ªç¯ # å°†å½“å‰å€¼èµ‹å€¼ä¸ºä¸‹ä¸€ä¸ªçš„å€¼, ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å€¼ä¸ºå½“å‰èŠ‚ç‚¹å€¼ # å½“å‰èŠ‚ç‚¹nextèµ‹ \u0026#34;\u0026#34;\u0026#34; class A: def __init__(self, v): self.v = v self.next = None class LA: def __init__(self): self.head = None def add(self, v): node = A(v) node.next = self.head self.head = node def print(self): cur = self.head while cur and cur.v != None: print(f\u0026#34;linkdata node v: {cur.v}\u0026#34;) cur = cur.next def revert(self, node: A=None, head=None): if not head: cache = self.head.next else: cache = node.next if cache: pass # print(f\u0026#34;cache: {cache.v}\u0026#34;) else: self.head = node self.head.next = head return if head == None: node = self.head node.next = None self.revert(cache, node) else: node.next = head self.revert(cache, node) if __name__ == \u0026#34;__main__\u0026#34;: # 1234 # 234 ldata = LA() for i in (1, 2, 3, 4): ldata.add(i) ldata.print() print(\u0026#34;---\u0026#34;*10) ldata.revert() ldata.print() \u0026#34;\u0026#34;\u0026#34; \u0026gt;\u0026gt;\u0026gt;è¿è¡Œè¾“å‡º: linkdata node v: 4 linkdata node v: 3 linkdata node v: 2 linkdata node v: 1 ------------------------------ linkdata node v: 1 linkdata node v: 2 linkdata node v: 3 linkdata node v: 4 \u0026#34;\u0026#34;\u0026#34; å…¶ä»– # "},{"id":134,"href":"/docs/programmer/langs/python/notespython/","title":"è§£å†³é—®é¢˜","section":"Python","content":"\nPiP Not Found Issue # ä½¿ç”¨pipå®‰è£…æŸåŒ…æ—¶ï¼Œ æç¤ºè®©æ›´æ–°ï¼Œ æŒ‰æç¤ºæ“ä½œæ›´æ–°æ²¡æ•ˆæœæ²¡ååº”å†ç”¨å°±æç¤ºModuleNotFoundError: No module named 'pip' (Ë‰â–½Ë‰ï¼›)\u0026hellip;\nModuleNotFoundError: No module named \u0026lsquo;pip\u0026rsquo; # å‡çº§PiPæ—¶å‡ºç°é—®é¢˜å¯ç”±ä¸‹æ–¹å‘½ä»¤ä¿®å¤ # python -m ensurepip python -m pip install --upgrade pip SSLæ ¡éªŒ # å®‰è£…EasyOCRæ—¶, reader = easyocr.Reader(['ch_sim','en']) ä¸‹è½½åˆ°æ¥è¿‘90,ç»“æœæŠ¥é”™äº†\u0026hellip;. ä¼°è®¡æ˜¯SSLé—®é¢˜åŠ å…¥ä»¥ä¸‹ä¸¤æ¡,ä¸çŸ¥å¦‚ä½•.\nimport ssl ssl._create_default_https_context = ssl._create_unverified_context from http.client To revert to the previous, unverified, behavior ssl._create_unverified_context() can be passed to the context parameter.\nä½¿ç”¨å›½å†…é•œåƒä¸‹è½½Python # pip install --index https://pypi.mirrors.ustc.edu.cn/simple/ dlib(numpyç­‰åŒ…å) # ä¸€é”®æ›´æ–°pip åŒ…èµ„æº(åˆ©ç”¨ç®¡é“grepä¼ è¾“æŸ¥è¯¢åˆ°çš„éœ€è¦æ›´æ–°åŒ…åï¼Œä¼ è¾“åˆ°installå‘½ä»¤) pip3 freeze --local | grep -v \u0026#39;^\\-e\u0026#39; | cut -d = -f 1 | xargs -n1 pip3 install -U # æƒé™ä¸å¤Ÿçš„è¯å°±åœ¨`pip3 install` ä¹‹å‰åŠ `sudo`åæ­£æˆ‘ä¸ä¹ æƒ¯ç”¨`root` å®‰è£…é”™è¯¯ï¼Ÿ # å±…ç„¶æœ‰pip3 install XXçš„é”™è¯¯â€¦è¿™ä¹Ÿæ˜¯å› ä¸ºæœ‰æ—§ç‰ˆpip3å­˜ç•™ã€‚éœ€è¦\n$bash -d pip3 $bash -r pip3 æ¥æ¸…ç†shellä¸­æ—§ç‰ˆpipç¼“å­˜ã€‚\npipæç¤ºModuleNotFoundError: No module named \u0026lsquo;pkg_resources\u0026rsquo; # pipä¸‹è½½pythonåŒ…ä¸€ç›´æç¤ºModuleNotFoundError: No module named \u0026lsquo;pkg_resources\u0026rsquo;ï¼Œå¦‚ä¸‹å›¾ï¼š python -m pip install --upgrade pip setuptools wheelå³å¯è§£å†³é—®é¢˜ã€‚\nPython æ— å¤„å®‰æ”¾çš„é‡ç”Ÿåˆ—è¡¨ # -async def _gen_login_task_for_phone(_package_name: str, phone: CloudPhoneInfo, _used_accountid_list: List[int]=[]) -\u0026gt; TaskData: +async def _gen_login_task_for_phone(_package_name: str, phone: CloudPhoneInfo) -\u0026gt; TaskData: __time_func_start = time.time() lock_id = await PackageAccountBindInfo.acquire_restock_account_lock() __time_done_get_lock = time.time() # æŸ¥è¯¢è´¦å·å‰ç”³è¯·é” if not lock_id: return None - using_accountid_list = await GoogleAccounts._get_using_accountid_list() + _used_accountid_list = await GoogleAccounts._get_using_accountid_list() __time_done_get_using_account = time.time() - _used_accountid_list.extend(using_accountid_list) if phone.responsible_for == 0: # è·Ÿéšæœ€å¤§åŒ…çš„åˆ‡æ¢é¢‘ç‡ - ç™»é™†æ–°è´¦å·ä¿è¯æ‰€æœ‰åŒ…å¯ç”¨ 2 _account_list = await GoogleAccounts._fetch_new_acoount_by(_used_accountid_list=_used_accountid_list) @@ -85,8 +84,9 @@ async def _gen_login_task_for_phone(_package_name: str, phone: CloudPhoneInfo, _ \u0026#34;è·å–è´¦å·è€—æ—¶\u0026#34;: __time_done_get_account - __time_done_get_using_account, \u0026#34;åˆ·æ–°è´¦å·ä½¿ç”¨ç¼“å­˜è€—æ—¶\u0026#34;: __time_done_cache_history - __time_done_get_account, \u0026#34;ç¼“å­˜è´¦å·ä½¿ç”¨è€—æ—¶\u0026#34;: __time_done_release_lock - __time_done_cache_history, + \u0026#34;é•¿åº¦\u0026#34;: len(_used_accountid_list), } async def _gen_login_task_for_phone(_package_name: str, phone: CloudPhoneInfo) -\u0026gt; TaskData: __time_func_start = time.time() lock_id = await PackageAccountBindInfo.acquire_restock_account_lock() __time_done_get_lock = time.time() # æŸ¥è¯¢è´¦å·å‰ç”³è¯·é” if not lock_id: return None _used_accountid_list = await GoogleAccounts._get_using_accountid_list() __time_done_get_using_account = time.time() if phone.responsible_for == 0: # è·Ÿéšæœ€å¤§åŒ…çš„åˆ‡æ¢é¢‘ç‡ - ç™»é™†æ–°è´¦å·ä¿è¯æ‰€æœ‰åŒ…å¯ç”¨ 2 _account_list = await GoogleAccounts._fetch_new_acoount_by(_used_accountid_list=_used_accountid_list) else: _account_list = await GoogleAccounts._restock_query_accounts_by( cloud_phone=phone.cloud_phone, package_name=_package_name, _used_accountid_list=_used_accountid_list, responsible_for=phone.responsible_for ) __time_done_get_account = time.time() _account = (_account_list and random.choice(_account_list)) or None return task_data ä»¥å‰æ–¹æ³•æœ‰ä¸ª _used_accountid_list å…¥å‚, ä½†æ˜¯å¤–é¢è°ƒç”¨æ²¡æœ‰ç»™å®ƒä¼ å€¼; ä¸€ç›´æ‰§è¡Œè¿™ä¸ªæ–¹æ³•çš„è¯ è¿™ä¸ªåˆ—è¡¨å°±ä¼šæ— é™é€’å¢èµ·æ¥\u0026hellip;\u0026hellip;..è¶…çº§ç‰›é€¼\n"},{"id":135,"href":"/docs/programmer/platforms/tips-of-problems/","title":"è§£å†³é—®é¢˜è®°å½•ç¬”è®°","section":"å¹³å°","content":"\nå„ç§ä¸€é”®é—®é¢˜è§£å†³æ–¹æ¡ˆ # Windowsä¸‹Gité—®é¢˜ # Linuxæ²¡å•¥é—®é¢˜,ä½†åœ¨Winä¸‹æŠ¥checkoutå¤±è´¥,è·¯å¾„é—®é¢˜ git config core.protectNTFS false docker - supervisord ç¦ç”¨æ—¥å¿—æ–‡ä»¶æˆ–ä½¿ç”¨ logfile=/dev/stdout # from: https://www.coder.work/article/100835 æ ‡ç­¾ docker supervisord\n[supervisord] nodaemon=true logfile=/dev/stdout pidfile=/var/run/supervisord.pid childlogdir=/var/log/supervisor å½“æˆ‘è¿™æ ·åšæ—¶ï¼Œè¿™ä¸ªä¸»ç®¡ä¼šå´©æºƒï¼Œå› ä¸ºå®ƒæ— æ³•åœ¨/dev/stdout ä¸­å¯»æ‰¾\nå¦‚ä½•ç¦ç”¨ supervisord åœ¨æˆ‘çš„ docker å®¹å™¨ä¸­åˆ›å»ºä»»ä½•æ—¥å¿—æ–‡ä»¶ï¼Ÿ\næœ€ä½³ç­”æ¡ˆ\nå¯¹äºä¸»ä¸»ç®¡ï¼Œnodaemon å°†å¯¼è‡´æ—¥å¿—è½¬åˆ° stdout\n[supervisord] nodaemon=true logfile=/dev/null logfile_maxbytes=0 ç„¶åå°†æ¯ä¸ªæ‰˜ç®¡è¿›ç¨‹çš„æ—¥å¿—å‘é€åˆ°æ ‡å‡†è¾“å‡ºæ–‡ä»¶æè¿°ç¬¦/dev/fd/1\n[program:x] command=echo test stdout_logfile=/dev/fd/1 stdout_logfile_maxbytes=0 redirect_stderr=true æˆ–è€…ï¼Œå¦‚æœæ‚¨å¸Œæœ›å°† stderr ä¿ç•™åœ¨ä¸åŒçš„æµä¸Š:\n[program:x] command=echo test stdout_logfile=/dev/fd/1 stdout_logfile_maxbytes=0 stderr_logfile=/dev/fd/2 stderr_logfile_maxbytes=0 å…³äºdocker - supervisord ç¦ç”¨æ—¥å¿—æ–‡ä»¶æˆ–ä½¿ç”¨ logfile=/dev/stdoutï¼Œæˆ‘ä»¬åœ¨Stack Overflowä¸Šæ‰¾åˆ°ä¸€ä¸ªç±»ä¼¼çš„é—®é¢˜ï¼š https://stackoverflow.com/questions/45645758/\ndockerä¸­æ‰§è¡ŒsedæŠ¥Device or resource busyé”™è¯¯çš„å¤„ç†åŸå› åŠæ–¹å¼ è½¬è½½ # kuSorZ åšä¸»æ–‡ç« åˆ†ç±»ï¼šLinux æ–‡ç« æ ‡ç­¾: docker | sed æ–‡ç« åˆ†ç±»: Docker åŸæ–‡å‡ºå¤„ï¼š https://www.cnblogs.com/xuxinkun/p/7116737.htmlé”™è¯¯ç°è±¡\nåœ¨dockerå®¹å™¨ä¸­æƒ³è¦ä¿®æ”¹/etc/resolv.confä¸­çš„nameseverï¼Œä½¿ç”¨sedå‘½ä»¤è¿›è¡Œæ‰§è¡Œæ—¶é‡åˆ°é”™è¯¯ï¼š\n/ # sed -i \u0026rsquo;s/192.168.1.1/192.168.1.254/g\u0026rsquo; /etc/resolv.conf sed: can\u0026rsquo;t move \u0026lsquo;/etc/resolv.conf73UqmG\u0026rsquo; to \u0026lsquo;/etc/resolv.conf\u0026rsquo;: Device or resource busy\nä½†æ˜¯å¯ä»¥é€šè¿‡vi/vimç›´æ¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶/etc/resolv.confè¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚ é—®é¢˜åŸå› \nsedå‘½ä»¤çš„å®è´¨å¹¶ä¸æ˜¯ä¿®æ”¹æ–‡ä»¶ï¼Œè€Œæ˜¯äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶æ›¿æ¢åŸæœ‰çš„æ–‡ä»¶ã€‚è¿™é‡Œæˆ‘ä»¬åšäº†ä¸€ä¸ªå®éªŒã€‚\næˆ‘å…ˆåˆ›å»ºäº†ä¸€ä¸ªtest.txtçš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹æ˜¯123ã€‚ç„¶åæˆ‘ä½¿ç”¨sedå‘½ä»¤å¯¹æ–‡ä»¶å†…å®¹è¿›è¡Œäº†æ›¿æ¢ã€‚å†æ¬¡æŸ¥çœ‹test.txtã€‚\n/ # stat test.txt File: test.txt Size: 4 Blocks: 8 IO Block: 4096 regular fileDevice: fd28h/64808d Inode: 265 Links: 1Access: (0644/-rw-r\u0026ndash;r\u0026ndash;) Uid: ( 0/ root) Gid: ( 0/ root)Access: 2017-07-04 06:28:35.000000000Modify: 2017-07-04 06:28:17.000000000Change: 2017-07-04 06:29:03.000000000/ # cat test.txt 123/ # sed -i \u0026rsquo;s/123/321/g\u0026rsquo; test.txt/ # stat test.txt File: test.txt Size: 4 Blocks: 8 IO Block: 4096 regular fileDevice: fd28h/64808d Inode: 266 Links: 1Access: (0644/-rw-r\u0026ndash;r\u0026ndash;) Uid: ( 0/ root) Gid: ( 0/ root)Access: 2017-07-04 06:29:31.000000000Modify: 2017-07-04 06:29:31.000000000Change: 2017-07-04 06:29:31.000000000/ # cat test.txt321\nå¯ä»¥çœ‹åˆ°æ–‡ä»¶å†…å®¹è¢«æ­£ç¡®ä¿®æ”¹äº†ï¼Œä½†æ˜¯åŒæ—¶ï¼Œæ–‡ä»¶çš„inodeä¹Ÿä¿®æ”¹äº†ã€‚è¯´æ˜äº†å®è´¨ä¸Šæ˜¯æ–°ç”Ÿæˆçš„æ–‡ä»¶æ›¿æ¢äº†åŸæœ‰çš„æ–‡ä»¶ã€‚ä½†æ˜¯vim/viæ˜¯åœ¨åŸæ–‡ä»¶åŸºç¡€ä¸Šä¿®æ”¹çš„ï¼Œæ‰€ä»¥inodeæ²¡æœ‰å˜åŒ–ã€‚\nåœ¨dockerä¸­ï¼Œ/etc/resolv.confæ˜¯é€šè¿‡æŒ‚è½½å…¥å®¹å™¨çš„ã€‚æ‰€ä»¥å½“ä½ æƒ³å»åˆ é™¤è¿™ä¸ªæŒ‚è½½æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æŒ‚è½½ç‚¹æ—¶ï¼Œè‡ªç„¶å°±ä¼šæŠ¥Device or resource busyã€‚\nè¿™ä¸ªè·Ÿæ˜¯ä¸æ˜¯ç‰¹æƒprivilegeæ²¡æœ‰å…³ç³»ã€‚å³ä½¿æ˜¯privilegeçš„å®¹å™¨ï¼Œä¹Ÿä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚ / # rm /etc/resolv.conf rm: can\u0026rsquo;t remove \u0026lsquo;/etc/resolv.conf\u0026rsquo;: Device or resource busy\nå…¶å®ä¸ä»…ä»…/etc/resolv.confï¼Œè¿˜æœ‰/etc/hostnameï¼Œ/etc/hostsç­‰æ–‡ä»¶éƒ½æ˜¯é€šè¿‡æŒ‚è½½æ–¹å¼æŒ‚è½½åˆ°å®¹å™¨ä¸­æ¥çš„ã€‚æ‰€ä»¥æƒ³è¦ç”¨sedå¯¹ä»–ä»¬è¿›è¡Œä¿®æ”¹ï¼Œéƒ½ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡df -hæŸ¥çœ‹å®¹å™¨å†…çš„æŒ‚è½½æƒ…å†µã€‚\n/ # df -h Filesystem Size Used Available Use% Mounted on/dev/mapper/docker-253:2-807144231-37acfcd86387ddcbc52ef8dac69d919283fc5d9d8ab5f55fd23d1c782e3b1c70 10.0G 33.8M 10.0G 0% /tmpfs 15.4G 0 15.4G 0% /devtmpfs 15.4G 0 15.4G 0% /sys/fs/cgroup/dev/mapper/centos-home 212.1G 181.8G 30.3G 86% /run/secrets/dev/mapper/centos-home 212.1G 181.8G 30.3G 86% /dev/termination-log/dev/mapper/centos-home 212.1G 181.8G 30.3G 86% /etc/resolv.conf/dev/mapper/centos-home 212.1G 181.8G 30.3G 86% /etc/hostname/dev/mapper/centos-home 212.1G 181.8G 30.3G 86% /etc/hostsshm 64.0M 0 64.0M 0% /dev/shmtmpfs 15.4G 0 15.4G 0% /proc/kcoretmpfs 15.4G 0 15.4G 0% /proc/timer_stats\nå¦‚ä½•è§£å†³\nä½¿ç”¨viå›ºç„¶å¯ä»¥ï¼Œä½†æ˜¯å¯¹äºæ‰¹é‡æ“ä½œå°±ä¸æ˜¯å¾ˆåˆé€‚äº†ã€‚å¯ä»¥é€šè¿‡sedå’Œechoçš„ç»„åˆå‘½ä»¤echo \u0026ldquo;$(sed \u0026rsquo;s/192.168.1.1/192.168.1.254/g\u0026rsquo; /etc/resolv.conf)\u0026rdquo; \u0026gt; /etc/resolv.conf å³å¯å®ç°æ›¿æ¢ã€‚\n/ # cat /etc/resolv.conf search default.svc.games.local svc.games.local games.localnameserver 192.168.1.1options ndots:5/ # echo \u0026ldquo;$(sed \u0026rsquo;s/192.168.1.1/192.168.1.254/g\u0026rsquo; /etc/resolv.conf)\u0026rdquo; \u0026gt; /etc/resolv.conf / # cat /etc/resolv.conf search default.svc.games.local svc.games.local games.localnameserver 192.168.1.254options ndots:5\nè¿™é‡Œå¦‚æœä½¿ç”¨sed \u0026rsquo;s/192.168.1.1/192.168.1.254/g\u0026rsquo; /etc/resolv.conf \u0026gt; /etc/resolv.confæ˜¯æ— æ•ˆçš„ã€‚æœ€ç»ˆä¼šå¯¼è‡´/etc/resolv.confå†…å®¹ä¸ºç©ºã€‚\nç¤ºä¾‹ # Dockerfile # CMD mkdir -p /var/log/scancenter \\ \u0026amp;\u0026amp; sed \u0026#39;s/INFO\\|ERROR/DEBUG/g\u0026#39; -i scancenter/logging.cfg \\ \u0026amp;\u0026amp; uwsgi /opt/disk2/var/www/scancenter/3rd/conf/uwsgi-docker/uwsgi.ini --log-master k8s yaml # spec: containers: - command: - /bin/sh - -c - mkdir -p /var/log/scancenter \u0026amp;\u0026amp; echo -e \u0026#34;10.120.16.12\\tapi.s.com\\n10.5.25.5\\tpp.api.com\u0026#34; \u0026gt;\u0026gt; /etc/hosts \u0026amp;\u0026amp; echo \u0026#34;$(sed \u0026#39;s/^-e //g\u0026#39; /etc/hosts)\u0026#34; \u0026gt; /etc/hosts \u0026amp;\u0026amp; sed \u0026#39;s/INFO\\|ERROR/DEBUG/g\u0026#39; -i scancenter/logging.cfg \u0026amp;\u0026amp; uwsgi /opt/disk2/var/www/scancenter/3rd/conf/uwsgi-docker/uwsgi.ini env: - name: POD_IP_ADDRESS valueFrom: fieldRef: apiVersion: v1 fieldPath: status.podIP "}]